(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([[592],{11453:function(e,t,a){"use strict";a.r(t),a.d(t,{App:function(){return Fr},default:function(){return Dr}});var n=a(96985),r=a.n(n),o=a(38648),l=a(50146),i=a(71577),s=a(4107),c=a(34041),u=a(44338),d=a(74187),m=a(9479),p=a.n(m),g=a(33300),f=a.n(g),y=a(49862),h=a.n(y),E=a(60110),b=a(92212),w=a.n(b),v=a(49413),L=a.n(v),k=a(54388),S=a.n(k),P=a(10007),C=a.n(P),M=a(47139);var Z=()=>(0,M.useDispatch)();const T=M.useSelector;var A=T,F=a(20908),D=a(93379),N=a.n(D),O=a(7795),I=a.n(O),x=a(90569),j=a.n(x),U=a(3565),R=a.n(U),B=a(19216),$=a.n(B),z=a(44589),_=a.n(z),V=a(40171),K={};K.styleTagTransform=_(),K.setAttributes=R(),K.insert=j().bind(null,"head"),K.domAPI=I(),K.insertStyleElement=$();N()(V.Z,K),V.Z&&V.Z.locals&&V.Z.locals;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},W.apply(this,arguments)}var G=({...e})=>{const[t,a]=(0,n.useState)(!1),[m,g]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[v,k]=(0,n.useState)("https://sgx.geodatenzentrum.de/wms_topplus_open"),[C,M]=(0,n.useState)(),[T,D]=(0,n.useState)("1.3.0"),N=A((e=>e.addLayerModal.visible)),O=Z(),I=(0,P.useMap)(),{t:x}=(0,E.useTranslation)();(0,n.useEffect)((()=>{N&&M(w().createValidGetCapabilitiesRequest(v,"WMS",T))}),[T,N,v]);const j=()=>{b([]),g([]),O((0,F.Cp)())},U=e=>{if(!I)return;const t=x("AddLayerModal.externalWmsFolder");let a=S().getLayerByName(I,t);if(!a){a=new(p())({layers:[]}),a.set("name",t);const e=I.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,a)}e.forEach((e=>{if(!a.getLayers().getArray().includes(e)){let t;if(e.set("isExternalLayer",!0),e instanceof f()&&(t=e.getSource()?.getUrl()),e instanceof h()){const a=e.getSource()?.getUrls();t=1===a?.length?a[0]:void 0}const n={name:e.get("name"),type:e instanceof h()?"TILEWMS":"WMS",opacity:e.getOpacity(),sourceConfig:{layerNames:e.getSource()?.getParams().LAYERS,url:t,useBearerToken:!1}};e.set("layerConfig",n),a.getLayers().push(e)}})),j()};return r().createElement(l.Z,W({className:"add-layer-modal",title:x("AddLayerModal.title"),open:N,onCancel:j,width:600,footer:[r().createElement(i.Z,{key:"add-all",disabled:m?.length<1,onClick:()=>{U(m)}},x("AddLayerModal.addAllLayers")),r().createElement(i.Z,{key:"add-selected",disabled:y?.length<1,onClick:()=>{const e=m.filter((e=>y.includes((0,d.getUid)(e))));U(e)}},x("AddLayerModal.addSelectedLayers"))]},e),r().createElement(s.Z.Search,{placeholder:x("AddLayerModal.inputPlaceholder"),value:v,onChange:e=>{k(e.target.value)},onSearch:async()=>{if(C)try{a(!0);const e=await L().getWmsCapabilities(C),t=L().getLayersFromWmsCapabilities(e,"Title");g(t)}catch(e){o.Z.error({message:x("AddLayerModal.errorMessage"),description:x("AddLayerModal.errorDescription")})}finally{a(!1)}},enterButton:!0,addonBefore:r().createElement(c.default,{defaultValue:"1.3.0",onChange:D,options:[{value:"1.3.0",label:`${x("AddLayerModal.version")} 1.3.0`},{value:"1.1.1",label:`${x("AddLayerModal.version")} 1.1.1`}]})}),r().createElement(u.Z,{loading:t,columns:[{title:x("AddLayerModal.columnTitle"),render:(e,t)=>t.get("title")}],rowKey:e=>(0,d.getUid)(e),rowSelection:{selectedRowKeys:y,onChange:b},pagination:!1,dataSource:m}))},H=a(41609),Y=a.n(H),q=a(12038),J=a.n(q),X=a(35674),Q=a.n(X),ee=a(41154),te=a.n(ee),ae=a(73161),ne=a.n(ae),re=a(76688);const oe=()=>(0,n.useContext)(re.ZP);var le=oe;var ie=a(77257);var se=()=>(0,n.useContext)(ie.ZP);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ce.apply(this,arguments)}var ue=({...e})=>{const t=C()(),a=se(),o=function(){const{search:e}=window.location;return r().useMemo((()=>new URLSearchParams(e)),[e])}(),l=le(),i=o.get("center"),s=o.get("zoom"),c=o.get("layers"),u=o.get("customLayerAttributes"),{t:d}=(0,E.useTranslation)(),m=(0,n.useCallback)((async(e,n)=>{if(!t)return;const r=e=>{const a=new(p())({layers:[]});a.set("name",e);const n=t.getLayerGroup().getLayers();return n.insertAt(n?.getLength()||0,a),a};try{const o=JSON.parse(e);if(!a)throw new Error("Client is not available");const l=new(ne())({client:a});for(let e=0;e<o.length;e++){const a=o[e];if(!Y()(a?.layerConfig)){const e=a.layerConfig,o=await l.parseLayer(e);if(a.isExternalLayer&&o.set("isExternalLayer",a.isExternalLayer),a.isUploadedLayer&&o.set("isUploadedLayer",a.isUploadedLayer),o.set("groupName",a.groupName),o.set("layerConfig",a.layerConfig),o.setVisible(!!n?.split(";").some((t=>t===e.name))),!o.get("isExternalLayer")&&!o.get("isUploadedLayer"))continue;let i;o.get("groupName")?(i=S().getLayerByName(t,o.get("groupName")),i||(i=r(o.get("groupName")))):(i=S().getLayerByName(t,d("AddLayerModal.externalWmsFolder")),i||(i=r(d("AddLayerModal.externalWmsFolder")))),i.getLayers().push(o)}}}catch(e){J().error(e)}}),[a,t,d]);(0,n.useEffect)((()=>{if(t){const e=e=>e.get("name"),a=e=>e instanceof h()||e instanceof f(),n=Q().applyLink(t,";",e,a);if(!n)return;m(n,c)}}),[t,m,i,s,c,u]);const g=[];return l&&l.forEach((e=>{if((t=e.integration)&&"map"===t.placement){const{key:t,wrappedComponent:a}=e;g.push(r().createElement(a,{key:t}))}var t})),t?r().createElement(te(),ce({map:t},e),g):r().createElement(r().Fragment,null)},de=a(27049),me=a(19906),pe=a.n(me),ge=a(41642),fe=a.n(ge),ye=a(99254),he=a(19805),Ee=a.n(he),be=a(78415),we={};we.styleTagTransform=_(),we.setAttributes=R(),we.insert=j().bind(null,"head"),we.domAPI=I(),we.insertStyleElement=$();N()(be.Z,we),be.Z&&be.Z.locals&&be.Z.locals;function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ve.apply(this,arguments)}var Le=({...e})=>{const t=oe(),{t:a}=(0,E.useTranslation)(),o=A((e=>e.legal)),l=C()(),s=(e,a)=>{t.forEach((t=>{if((n=t.integration)&&"footer"===n.placement&&t.integration?.placementOrientation===e){const{key:e,wrappedComponent:n}=t;a.splice(t.integration?.insertionIndex||0,0,r().createElement(n,{key:e}))}var n}))};if((0,n.useEffect)((()=>{if(!l)return;l.getControls().getArray().find((e=>e instanceof fe()))||l.addControl(new(fe())({target:"scale-line-container"}))}),[l]),(0,n.useEffect)((()=>{if(!l)return;l.getControls().getArray().find((e=>e instanceof pe()))||l.addControl(new(pe())({coordinateFormat:(0,ye.createStringXY)(2),projection:l.getView().getProjection(),target:"mouse-position"}))}),[l]),!l)return r().createElement(r().Fragment,null);const c=()=>{window.open(o.contact,"_blank")},u=()=>{window.open(o.imprint,"_blank")},d=()=>{window.open(o.privacy,"_blank")};return r().createElement("div",ve({className:"footer"},e),r().createElement("div",{className:"item-container left-items"},(()=>{const e=[r().createElement(r().Fragment,null,r().createElement("div",{id:"scale-line-container"}),r().createElement(de.Z,{type:"vertical"}),r().createElement("div",{className:"scale-combo"},a("Footer.scale"),": ",r().createElement(Ee(),{map:l}),r().createElement(de.Z,{type:"vertical"})),r().createElement("div",{className:"reference-system"},a("Footer.refSystem"),": ",l.getView().getProjection().getCode(),r().createElement(de.Z,{type:"vertical"})),r().createElement("div",{className:"mouse-position-wrapper"},a("Footer.mousePosition"),": ",r().createElement("div",{id:"mouse-position",className:"mouse-position"})))];return s("left",e),e})()),r().createElement("div",{className:"item-container right-items"},(()=>{const e=[r().createElement("div",{key:"item-container right-items"},r().createElement(i.Z,{onClick:c,type:"link"},a("Footer.contact")),r().createElement(i.Z,{onClick:u,type:"link"},a("Footer.imprint")),r().createElement(i.Z,{onClick:d,type:"link"},a("Footer.privacypolicy")))];return t.length>0&&s("right",e),e})()))},ke=a(90426),Se=a(32456),Pe=a.n(Se);function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ce.apply(this,arguments)}var Me=({...e})=>{const t=C()(),{t:a}=(0,E.useTranslation)(),[o,l]=(0,n.useState)();return(0,n.useEffect)((()=>{const e=t?.getView().getProjection(),a=t?.getView()?.get("extent");if(a){const t=(0,ke.transformExtent)(a,e,"EPSG:4326");l(t.toString())}}),[t]),t?r().createElement(Pe(),Ce({map:t,countryCodes:"",allowClear:!0,nominatimBaseUrl:"https://nominatim.terrestris.de/search.php?",placeholder:a("Nominatim.placeholder"),viewBox:o||""},e)):r().createElement(r().Fragment,null)},Ze=a(24616),Te=a(76570),Ae=a(7085),Fe=a(9676),De=a(60331),Ne=a(14277),Oe=a(13013),Ie=a(7739),xe=a.n(Ie),je=a(19679),Ue=a.n(je),Re=a(20963),Be=a.n(Re),$e=a(10924),ze=a.n($e),_e=a(44457),Ve=a.n(_e),Ke=a(98189),We=a.n(Ke),Ge=a(28253),He=a.n(Ge),Ye=a(35577),qe=a.n(Ye),Je=a(42583),Xe=a.n(Je),Qe=a(85516),et={};et.styleTagTransform=_(),et.setAttributes=R(),et.insert=j().bind(null,"head"),et.domAPI=I(),et.insertStyleElement=$();N()(Qe.Z,et),Qe.Z&&Qe.Z.locals&&Qe.Z.locals;var tt=({useNominatim:e,delay:t=1e3,minChars:a=3,solrSearchBasePath:o="/search/query"})=>{const l=C()(),{t:i}=(0,E.useTranslation)(),c=(0,n.useRef)(null),[u,d]=(0,n.useState)(e),[m,p]=(0,n.useState)(!0),[g,f]=(0,n.useState)(!0),[y,h]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),[v,L]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[P,M]=(0,n.useState)([]),[Z,T]=(0,n.useState)([]),[A,F]=(0,n.useState)([]);(0,n.useEffect)((()=>(window.addEventListener("mousedown",D),()=>{window.removeEventListener("mousedown",D)})),[]);const D=e=>{const t=[];let a=e.target;for(;a;)t.unshift(a),a=a.parentNode;c.current&&c.current.contains(e.target)||L(!1)},N=(0,n.useMemo)((()=>({items:[{label:r().createElement(Fe.Z,{checked:g,onChange:e=>f(e.target.checked)},i("MultiSearch.searchInViewBox")),key:"viewbox"},{label:r().createElement(Fe.Z,{checked:m,onChange:e=>p(e.target.checked)},i("MultiSearch.searchData")),key:"data"},{label:r().createElement(Fe.Z,{checked:u,onChange:e=>d(e.target.checked)},i("MultiSearch.searchNominatim")),key:"nominatim"}]})),[m,u,g,i]),O=(0,n.useCallback)((async()=>{if(y.length<a)return void x();if(!m&&!u)return;let e;w(!0),T([]),M([]);let t=null;if(g){const e=l?.getView().getProjection(),a=l?.getView()?.calculateExtent();a&&(t=(0,ke.transformExtent)(a,e,"EPSG:4326"))}if(m)try{const a=y.trim().replaceAll(/[()\\\-_./\/]/g," ").split(" ").filter((e=>""!==e.trim())).map((e=>`(search:${e.trim()}*^3 OR search:*${e.trim()}*^2 OR search:${e.trim()}~1)`)),n=new URL(`${window.location.origin}${o}`),r=`search:"${y.trim()}" OR (${a.join(" AND ")})`;if(g&&t){const e=`geometry:[${t[1]},${t[0]} TO ${t[3]},${t[2]}]`;n.searchParams.set("fq",e)}n.searchParams.set("q",r),e=await fetch(n.href);const l=await e.json();M(l?.response?.docs)}catch(e){M([]),J().error("Error while fetching the layer search results: ",e)}finally{u||w(!1)}if(u)try{const a=new URL("https://nominatim.terrestris.de/search");a.searchParams.set("q",y),a.searchParams.set("format","json"),a.searchParams.set("polygon_geojson","1"),g&&t&&(a.searchParams.set("viewbox",t.toString()),a.searchParams.set("bounded","1")),e=await fetch(a.href),T(await e.json())}catch(e){T([]),J().error("Error while fetching the nominatim results: ",e)}finally{w(!1)}}),[y,a,g,m,u,l,o]),I=(0,n.useCallback)((e=>{const t=["id","search","geometry","category"];let a="";return Object.keys(e).filter((e=>!t.includes(e))).forEach((t=>{let n=e[t]?.toString();!a&&n.toLowerCase().indexOf(y?.toLowerCase())>-1&&(a=`${n} [${t}]`)})),a||(a=e.id),a}),[y]);(0,n.useEffect)((()=>{if(!l)return;let e=[];if(Z.length>0){const t=new(Be()),a=Z.map((e=>{const a=t.readFeature(e.geojson,{dataProjection:"EPSG:4326",featureProjection:l.getView().getProjection()});return a.set("title",e.display_name),a})),n={title:i("MultiSearch.nominatimTitle"),features:a};e.push(n)}if(P.length>0){const t=new(ze()),a=xe()(P,(e=>e.category[0]));Object.keys(a).forEach((n=>{const r={title:n,features:a[n].map((e=>{if(!e.geometry?.[0])return;const a=e.id,n=t.readGeometry(e.geometry[0],{dataProjection:"EPSG:4326",featureProjection:l.getView().getProjection()}),r=new(Ue())({geometry:n});return r.set("title",I(e)),r.set("ftName",a.substring(0,a.lastIndexOf("_"))),r})).filter((e=>e))};e.push(r)}))}L(!0),F(e)}),[P,I,l,Z,i]),(0,n.useEffect)((()=>{const e=setTimeout((()=>{O()}),t);return()=>clearTimeout(e)}),[O,t]);const x=()=>{M([]),T([])},j=e=>{const{feature:t}=e,a=t.get("ftName");return a?r().createElement(De.Z,null,a):r().createElement(r().Fragment,null)};return l?r().createElement("div",{ref:c},r().createElement(s.Z,{value:y,disabled:!m&&!u,onChange:e=>{w(""!==e.target.value),h(e.target.value)},allowClear:!0,addonAfter:r().createElement(Oe.Z,{placement:"bottomRight",menu:N,trigger:["click"],onOpenChange:S,open:k},r().createElement(Ze.Z,null)),onFocus:()=>L(!0),placeholder:i("MultiSearch.searchPlaceholder"),prefix:r().createElement(Te.Z,null),suffix:b?r().createElement(Ae.Z,null):null}),(()=>{if(y.length<2||!v||b)return null;const e=Z.length+P.length;return 0===e?r().createElement("div",{className:"no-search-result-div"},r().createElement(Ne.Z,{image:Ne.Z.PRESENTED_IMAGE_SIMPLE})):r().createElement(Xe(),{searchResults:A,numTotal:e,accordion:!0,searchTerms:y.split(" "),listPrefixRenderer:j,layerStyle:new(qe())({stroke:new(He())({color:"rgb(255,0,0)",width:2}),fill:new(We())({color:"rgba(255,255,255, 0.5)"}),image:new(Ve())({radius:10,fill:new(We())({color:"rgba(255,255,255, 0.5)"}),stroke:new(He())({color:"rgb(255,0,0)",width:3})})})})})()):r().createElement(r().Fragment,null)},at=a(42686),nt={};nt.styleTagTransform=_(),nt.setAttributes=R(),nt.insert=j().bind(null,"head"),nt.domAPI=I(),nt.insertStyleElement=$();N()(at.Z,nt),at.Z&&at.Z.locals&&at.Z.locals;var rt=()=>{const e=A((e=>e.searchEngines.includes("nominatim"))),t=A((e=>e.searchEngines.includes("solr")));return e||t?r().createElement("div",{className:"search"},t?r().createElement(tt,{useNominatim:e}):r().createElement(Me,null)):(J().warn("Neither nominatim nor solr search is configured."),r().createElement(r().Fragment,null))},ot=a(59417),lt=a(70982),it=a(87617),st=a.n(it),ct=a(81350),ut=a.n(ct),dt=a(88495),mt=a.n(dt);const pt=({email:e="",size:t=80,rating:a="g",defaultImage:n="identicon",force:r=!1})=>{const o=e.toLowerCase();let l=`https://www.gravatar.com/avatar/${mt()(o)}?s=${t}&r=${a}&d=${n}`;return r&&(l=`${l}&f=y`),l};var gt=a(7277);var ft=a(88885),yt={};yt.styleTagTransform=_(),yt.setAttributes=R(),yt.insert=j().bind(null,"head"),yt.domAPI=I(),yt.insertStyleElement=$();N()(ft.Z,yt),ft.Z&&ft.Z.locals&&ft.Z.locals;function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ht.apply(this,arguments)}var Et=({opener:e,...t})=>{const{t:a}=(0,E.useTranslation)(),o=A((e=>e.appInfo)),i=A((e=>e.logoPath)),s=A((e=>e.description)),[c,u]=(0,n.useState)(!1),d=()=>{u(!c)};let m;return m=e?r().cloneElement(e,{onClick:d}):r().createElement("button",{onClick:d},"Open"),r().createElement(r().Fragment,null,m,r().createElement(l.Z,ht({className:"application-info",title:a("ApplicationInfo.title"),centered:!0,open:c,onOk:d,onCancel:d,footer:null},t),r().createElement("img",{className:"logo",src:i}),r().createElement("div",{className:"description"},s),r().createElement(gt.Z,{title:a("ApplicationInfo.clientVersionTitle"),value:"6.3.0"}),o.version&&o.buildTime&&r().createElement(gt.Z,{title:a("ApplicationInfo.backendVersionTitle"),value:`${o.version} (${o.buildTime})`})))},bt=a(72285),wt={};wt.styleTagTransform=_(),wt.setAttributes=R(),wt.insert=j().bind(null,"head"),wt.domAPI=I(),wt.insertStyleElement=$();N()(bt.Z,wt),bt.Z&&bt.Z.locals&&bt.Z.locals;var vt=()=>{const{t:e}=(0,E.useTranslation)(),t=se(),a=t?.getKeycloak(),n=A((e=>e.user)),o=e=>{switch(e.key){case"settings":a&&a.accountManagement();break;case"info":default:break;case"login":a&&a.login();break;case"logout":a&&a.logout()}};return r().createElement(ut(),{size:"small",imageSrc:pt({email:n.providerDetails?.email||"",size:28}),userName:r().createElement(lt.FontAwesomeIcon,{icon:ot.gc2}),userMenu:(()=>{const t={key:"login",icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.Yem}),label:e("UserMenu.loginMenuTitle")},l={key:"username",label:r().createElement("div",{className:"user-name"},r().createElement("span",null,n.providerDetails?.email))},i={type:"divider"},s={key:"settings",icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.gNZ}),label:e("UserMenu.settingsMenuTitle")},c={key:"info",icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.YHc}),label:r().createElement(Et,{opener:r().createElement("span",{className:"info-opener"},e("UserMenu.infoMenuTitle"))})},u={key:"logout",icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.HEx}),label:e("UserMenu.logoutMenuTitle")},d=[];if(Y()(n))st().keycloak?.enabled&&d.push(t),d.push(c);else{const e=a?.tokenParsed?.resource_access?.account?.roles,t=Array.isArray(e)&&e.indexOf("manage-account")>-1?[l,i,s,c,i,u]:[l,i,c,i,u];d.push(...t)}return{items:d,onClick:o}})()})},Lt=a(62923),kt={};kt.styleTagTransform=_(),kt.setAttributes=R(),kt.insert=j().bind(null,"head"),kt.domAPI=I(),kt.insertStyleElement=$();N()(Lt.Z,kt),Lt.Z&&Lt.Z.locals&&Lt.Z.locals;function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},St.apply(this,arguments)}var Pt=({...e})=>{const t=T((e=>e.title)),a=T((e=>e.logoPath)),n=oe(),o=(e,t)=>{n.forEach((a=>{if((n=a.integration)&&"header"===n.placement&&a.integration?.placementOrientation===e){const{key:e,wrappedComponent:n}=a;t.splice(a.integration?.insertionIndex||0,0,r().createElement(n,{key:e}))}var n}))};return r().createElement("div",St({className:"header"},e),r().createElement("div",{className:"item-container left-items"},(()=>{const e=[r().createElement("img",{key:"logo",className:"logo",src:a}),r().createElement("div",{key:"title",className:"title"},t)];return o("left",e),e})()),r().createElement("div",{className:"item-container center-items"},(()=>{const e=[r().createElement(rt,{key:"search"})];return o("center",e),e})()),r().createElement("div",{className:"item-container right-items"},(()=>{const e=[r().createElement(vt,{key:"user-menu"})];return o("right",e),e})()))},Ct=a(99008),Mt=a(45777),Zt=a(60925),Tt=a.n(Zt),At=a(6049),Ft=a(76772),Dt=a(11382),Nt=a(34286),Ot={};Ot.styleTagTransform=_(),Ot.setAttributes=R(),Ot.insert=j().bind(null,"head"),Ot.domAPI=I(),Ot.insertStyleElement=$();N()(Nt.Z,Ot),Nt.Z&&Nt.Z.locals&&Nt.Z.locals;function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},It.apply(this,arguments)}var xt=({layer:e,...t})=>{const[a,o]=(0,n.useState)(!1),[l,i]=(0,n.useState)(),[s,c]=(0,n.useState)(),u=se(),{t:d}=(0,E.useTranslation)(),m=(0,n.useCallback)((async()=>{try{if(o(!0),i(""),!e||!e.get("shogunId"))throw new Error("No layer provided or the layer has no shogunId set");const t=await(u?.layer().findOne(e.get("shogunId")));c(t)}catch(e){J().error(e),i(d("LayerConfiguration.errorMessage"))}finally{o(!1)}}),[d,u,e]);return(0,n.useEffect)((()=>{m()}),[m]),l?r().createElement(Ft.Z,{type:"error",closable:!0,message:l}):r().createElement(Dt.Z,{spinning:a},r().createElement("pre",It({className:"layer-configuration"},t),r().createElement("code",null,JSON.stringify(s,null,"  "))))},jt=a(22245),Ut=a(91982),Rt=a.n(Ut),Bt=a(28523),$t=a.n(Bt),zt=a(50433),_t=a(78459),Vt=a(86201),Kt={};Kt.styleTagTransform=_(),Kt.setAttributes=R(),Kt.insert=j().bind(null,"head"),Kt.domAPI=I(),Kt.insertStyleElement=$();N()(Vt.Z,Kt),Vt.Z&&Vt.Z.locals&&Vt.Z.locals;function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Wt.apply(this,arguments)}var Gt=({layer:e,...t})=>{const[a,o]=(0,n.useState)(!1),[l,i]=(0,n.useState)(),[s,c]=(0,n.useState)(),u=se(),{t:d}=(0,E.useTranslation)(),m=(0,n.useCallback)((async()=>{if(e&&(0,zt.isWmsLayer)(e))try{o(!0),c("");const t=await L().getWmsCapabilitiesByLayer(e,{headers:{...e.get("useBearerToken")?{...(0,_t.getBearerTokenHeader)(u?.getKeycloak())}:void 0}});i(t)}catch(e){J().error(e),c(d("LayerDetails.errorMessage"))}finally{o(!1)}}),[d,u,e]);(0,n.useEffect)((()=>{m()}),[m]);const p=()=>{if(e)return(0,zt.isWmsLayer)(e)?e.getSource()?.getParams().LAYERS:void 0},g=()=>{if(e&&(0,zt.isWmsLayer)(e)){let t;if(e.getSource()instanceof Rt()&&(t=e.getSource().getUrl()),e.getSource()instanceof $t()){const a=e.getSource().getUrls();t=a?a[0]:void 0}if(t)return w().createValidGetCapabilitiesRequest(t,"WMS","1.3.0")}},f=()=>{const e=l?.Capability?.Layer?.Layer,t=p(),a=e?.find((e=>e.Name===t));return a},y=()=>{const e=f();if(e)return e.EX_GeographicBoundingBox?.join(", ")},h=()=>{const e=f();if(e)return e.MinScaleDenominator},b=()=>{const e=f();if(e)return e.MaxScaleDenominator},v=()=>{const e=f();if(e)return e.Abstract},k=()=>l?.Service?.Abstract,S=()=>l?.Service?.ContactInformation?.ContactElectronicMailAddress,P=()=>{const e=f();if(e)return e.Title},C=()=>l?.Service?.AccessConstraints;return s?r().createElement(Ft.Z,{type:"error",closable:!0,message:s}):r().createElement(Dt.Z,{spinning:a},r().createElement(jt.Z,Wt({className:"layer-details",layout:"horizontal",size:"small",labelAlign:"left",labelWrap:!0,labelCol:{flex:"150px"}},t),r().createElement(jt.Z.Item,{name:"layerName",label:d("LayerDetails.layerNameLabel")},r().createElement("span",null,p()?p():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"layerTitle",label:d("LayerDetails.layerTitleLabel")},r().createElement("span",null,P()?P():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"service-abstract",label:d("LayerDetails.serviceAbstractLabel")},r().createElement("span",null,k()?k():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"abstract",label:d("LayerDetails.abstractLabel")},r().createElement("span",null,v()?v():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"accessConstraints",label:d("LayerDetails.accessConstraintsLabel")},r().createElement("span",null,C()?C():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"CapabilitiesUrl",label:d("LayerDetails.capabilitiesUrlLabel")},r().createElement("a",{href:g()},g())),r().createElement(jt.Z.Item,{name:"contact",label:d("LayerDetails.contactLabel")},S()?r().createElement("a",{href:`mailto:${S()}`},S()):r().createElement("span",null,d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"minScale",label:d("LayerDetails.minScaleLabel")},r().createElement("span",null,h()?h():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"maxScale",label:d("LayerDetails.maxScaleLabel")},r().createElement("span",null,b()?b():d("LayerDetails.noDataPlaceholder"))),r().createElement(jt.Z.Item,{name:"bbox",label:d("LayerDetails.bboxLabel")},r().createElement("span",null,y()?y():d("LayerDetails.noDataPlaceholder")))))},Ht=a(21809),Yt={};Yt.styleTagTransform=_(),Yt.setAttributes=R(),Yt.insert=j().bind(null,"head"),Yt.domAPI=I(),Yt.insertStyleElement=$();N()(Ht.Z,Yt),Ht.Z&&Ht.Z.locals&&Ht.Z.locals;function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},qt.apply(this,arguments)}var Jt=({...e})=>{const[t,a]=(0,n.useState)(),[o,s]=(0,n.useState)(!1),c=A((e=>e.layerDetailsModal.visible)),u=A((e=>e.layerDetailsModal.layerId)),d=Z(),m=(0,P.useMap)(),{t:p}=(0,E.useTranslation)();(0,n.useEffect)((()=>{if(!m)return;if(!u)return void a(void 0);const e=S().getLayerByOlUid(m,u);e instanceof Tt()&&a(e)}),[m,u]);return r().createElement(l.Z,qt({className:"layer-details-modal",title:r().createElement("div",{className:"title-group"},r().createElement("span",null,p("LayerDetailsModal.title",{layerName:t?.get("name")})),t?.get("shogunId")&&r().createElement(Mt.Z,{title:p(o?"LayerDetailsModal.internalConfigurationButtonTooltip":"LayerDetailsModal.internalConfigurationButtonTooltipPressed")},r().createElement(i.Z,{type:"link",className:o?"pressed":"",icon:r().createElement(Ct.Z,null),onClick:()=>{s(!o)}}))),open:c,onCancel:()=>{d((0,At.Cp)()),d((0,At.uF)(void 0))},width:800,footer:!1},e),r().createElement(Gt,{layer:t,hidden:o}),t?.get("shogunId")&&r().createElement(xt,{layer:t,hidden:!o}))},Xt=a(27279),Qt=a(1581),ea=a.n(Qt),ta=a(76712),aa=a(63221),na=a(85677),ra={};ra.styleTagTransform=_(),ra.setAttributes=R(),ra.insert=j().bind(null,"head"),ra.domAPI=I(),ra.insertStyleElement=$();N()(na.Z,ra),na.Z&&na.Z.locals&&na.Z.locals;var oa=a(35895);const{Option:la}=c.default;var ia=()=>{const e=Object.keys(oa.Z.services.resourceStore.data);return r().createElement("div",{className:"language-select"},r().createElement(c.default,{defaultValue:oa.Z.language||"en",onChange:e=>{oa.Z.changeLanguage(e)}},e.map((e=>r().createElement(la,{key:e,value:e},e.toUpperCase())))))},sa=a(75013),ca=a(73254),ua=a(64302),da=a(99165),ma=a(48086),pa=a(20640),ga=a.n(pa),fa=a(99746),ya=a(10767),ha={};ha.styleTagTransform=_(),ha.setAttributes=R(),ha.insert=j().bind(null,"head"),ha.domAPI=I(),ha.insertStyleElement=$();N()(ya.Z,ha),ya.Z&&ya.Z.locals&&ya.Z.locals;var Ea=()=>{const e=(0,P.useMap)(),t=(0,n.useMemo)((()=>["layerConfig","isExternalLayer","isUploadedLayer","groupName"]),[]),{t:a}=(0,E.useTranslation)(),o=e?Q().getLink(e,";",(e=>e.get("name")),(e=>(e instanceof h()||e instanceof f())&&e.getVisible()),t):"",[l,i]=(0,n.useState)(o),c=`Hey,\r\ncheck out the layer-composition I created:\r\n\r\n${l}`;return(0,n.useEffect)((()=>{if(!e)return;let a=[];const n=e=>e.get("name"),r=e=>(e instanceof h()||e instanceof f())&&e.getVisible(),o=()=>{i(Q().getLink(e,";",n,r,t))},l=()=>{e.getAllLayers().filter((e=>e.get("isExternalLayer")||e.get("isUploadedLayer"))).forEach((e=>{const t=e.get("layerConfig");t&&(t.clientConfig?t.clientConfig.opacity=e.getOpacity():t.clientConfig={opacity:e.getOpacity()},e.set("layerConfig",t))})),o()},s=e=>{const t=e.getLayers().getArray();for(let e=0;e<t.length;e++){const n=t[e];if(n instanceof p())s(n);else{let e=n.on("change:visible",o),t=n.on("change:opacity",l);a.push(e,t)}}},c=e.getView().on("change:center",o),u=e.getView().on("change:resolution",o);let d=e.getLayerGroup();return s(d),l(),()=>{(0,fa.unByKey)(c),(0,fa.unByKey)(u),(0,fa.unByKey)(a)}}),[t,e,a]),r().createElement("div",{className:"permalink-wrapper"},r().createElement("div",{className:"icons"},r().createElement(Mt.Z,{title:a("Permalink.twitterTooltip")},r().createElement(sa.Z,{onClick:function(){const e=new URL("https://twitter.com/intent/tweet");e.searchParams.set("url",c),window.open(e)}})),r().createElement(Mt.Z,{title:a("Permalink.whatsAppTooltip")},r().createElement(ca.Z,{onClick:function(){const e=new URL("https://wa.me");e.searchParams.set("text",c),window.open(e)}})),r().createElement(Mt.Z,{title:a("Permalink.mailTooltip")},r().createElement(ua.Z,{onClick:function(){const e=new URL("mailto:");e.searchParams.set("subject","SHOGun Web-GIS"),e.searchParams.set("body",c),window.open(e.toString().replace(/\+/g,"%20"),"_self")}}))),r().createElement("div",{className:"link"},r().createElement(s.Z,{value:l,readOnly:!0}),r().createElement(Mt.Z,{title:a("Permalink.copyTooltip")},r().createElement(da.Z,{onClick:function(){ga()(l)?ma.ZP.info(a("Permalink.copiedToClipboard")):ma.ZP.info(a("Permalink.copyToClipboardFailed"))}}))))},ba=a(14293),wa=a.n(ba),va=a(73345),La=a(57795),ka=a.n(La),Sa=a(55002),Pa=a.n(Sa),Ca=a(19867),Ma=a.n(Ca),Za=a(97955),Ta=a.n(Za),Aa=a(11032),Fa=a.n(Aa);class Da extends(Fa()){serialize(e,t){const a=super.serialize(e,t);return a.baseURL.startsWith("/geoserver/ows")&&(a.baseURL=`http://shogun-geoserver:8080${a.baseURL}`),a.baseURL.startsWith("/geoserver/SHOGUN")&&(a.baseURL=`http://shogun-geoserver:8080${a.baseURL}`),a}}var Na=Da;var Oa=class extends Na{serialize(e,t){const a={tileSize:[512,512],...t},n=e.getSource();if(!n||!this.validateSource(n))return;return{...super.serialize(e,a),type:Ta().TYPE_WMS,...t}}},Ia=a(28728);function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},xa.apply(this,arguments)}var ja=({value:e,id:t,placeholder:a,maxLength:o,...l})=>{const[i,c]=(0,n.useState)(e),u=Z();return(0,n.useEffect)((()=>{wa()(t)||u((0,Ia.eV)({id:i}))}),[i,t,u]),(0,n.useEffect)((()=>{c(e)}),[e]),r().createElement(s.Z,xa({id:t,value:i,onChange:e=>c(e.target.value),placeholder:a,maxLength:o,showCount:!!(o&&o>1)},l))};function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ua.apply(this,arguments)}var Ra=({printManager:e,placeholder:t="Bitte wählen Sie eine Vorlage aus",value:a,...o})=>{const[l,i]=(0,n.useState)(a);return(0,n.useEffect)((()=>{e&&e.setLayout(l)}),[e,l]),(0,n.useEffect)((()=>{i(a)}),[a]),r().createElement(c.default,Ua({placeholder:t,value:l,onChange:i},o),e?.getLayouts().map((e=>r().createElement(c.default.Option,{key:e.name,value:e.name},e.name))))};function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ba.apply(this,arguments)}var $a=({printManager:e,placeholder:t,value:a,outputFormats:o,...l})=>{const[i,s]=(0,n.useState)(a);return(0,n.useEffect)((()=>{e&&e.setOutputFormat(i)}),[e,i]),(0,n.useEffect)((()=>{s(a)}),[a]),r().createElement(c.default,Ba({placeholder:t,value:i,onChange:s},l),o.map((e=>r().createElement(c.default.Option,{key:e,value:e},e.toLocaleUpperCase()))))};function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},za.apply(this,arguments)}var _a=({printManager:e,placeholder:t,value:a,...o})=>{const[l,i]=(0,n.useState)(a);return(0,n.useEffect)((()=>{e&&e.setDpi(l)}),[e,l]),(0,n.useEffect)((()=>{i(a)}),[a]),r().createElement(c.default,za({placeholder:t,value:l,onChange:i},o),e?.getDpis().map((e=>r().createElement(c.default.Option,{key:e,value:e},`${e} DPI`))))};function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Va.apply(this,arguments)}var Ka=({printManager:e,placeholder:t,value:a,...o})=>{const l=C()(),[i,s]=(0,n.useState)(0);return(0,n.useEffect)((()=>{e&&i&&e.setScale(i)}),[e,i]),(0,n.useEffect)((()=>{const t=()=>{const t=e.getScale();t&&s(t)},a=l?.getInteractions().getArray().find((e=>e.get("name")===va.MapFishPrintV3Manager.TRANSFORM_INTERACTION_NAME));if(e&&a&&a)return a.on("scaling",t),()=>{a.un("scaling",t)}}),[e,l]),(0,n.useEffect)((()=>{a&&s(a)}),[a]),r().createElement(c.default,Va({placeholder:t,value:i,onChange:s},o),e?.getScales().map((e=>r().createElement(c.default.Option,{key:e,value:e},`1 : ${e.toLocaleString()}`))))},Wa=a(26398);function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ga.apply(this,arguments)}a.n(Wa)().getLegendGraphicUrl=e=>{if(e.get("legendUrl"))return e.get("legendUrl");if(e.getSource()instanceof $t()||e.getSource()instanceof Rt()){const t=e.get("customPrintLegendParams"),a=e.getSource(),{LAYERS:n,VERSION:r,FORMAT:o}=a.getParams();let l=a instanceof Rt()?a.getUrl():a.getUrls()[0];l.startsWith("/geoserver/ows")&&(l=`http://shogun-geoserver:8080${l}`);const i={LAYER:n.split(",")[0],VERSION:r||"1.3.0",SERVICE:"WMS",REQUEST:"GetLegendGraphic",FORMAT:o||"image/png",...t},s=Object.keys(i).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`)).join("&");return l.startsWith("/geoserver/SHOGUN")?(l=`http://shogun-geoserver:8080${l}/service?`,`${l}${s}`):l.endsWith("?")?`${l}${s}`:`${l}?${s}`}return""};var Ha=({active:e,customPrintScales:t=[],layerBlackList:a=[],outputFormats:o=["pdf","png"],...l})=>{const[s]=jt.Z.useForm(),{t:c,i18n:u}=(0,E.useTranslation)(),d=(0,P.useMap)(),m=u.language,g=se(),f=A((e=>e.print.customMapParams)),y=A((e=>e.print.customParams)),[h,b]=(0,n.useState)(null),[w,v]=(0,n.useState)(!1),[L,k]=(0,n.useState)(null),C=(0,n.useCallback)((e=>{if(!d)return;const t=e.get("name");return t&&!a.includes(t)&&e.getVisible()&&!(e instanceof p())&&S().layerInResolutionRange(e,d)}),[d,a]),M=(0,n.useCallback)((e=>{if(wa()(d))return!1;const t=e.get("name"),n=!a.includes(t),r=!e.get("hideLegendInPrint"),o=e.getVisible()&&S().layerInResolutionRange(e,d),l=!(e instanceof p());if(n&&r&&o&&l){const t=d?.getView().getResolution();return t&&e.set("customPrintLegendParams",{SCALE:S().getScaleForResolution(t,"m")}),!0}return!1}),[d,a]),Z=(0,n.useCallback)((async()=>{if(wa()(d))return;let e={url:st().print?.url||"/print",map:d,timeout:6e4,layerFilter:C,headers:{...(0,_t.getBearerTokenHeader)(g?.getKeycloak())},transformOpts:{rotate:!1},serializers:[new(ka()),new(Pa()),new(Ma()),new Na,new Oa],legendFilter:M,customParams:y,customMapParams:f};t.length>0&&(e={...e,customPrintScales:t.reverse()});const a=new va.MapFishPrintV3Manager(e);try{await a.init();const e=a.getPrintApps();e&&m&&e.includes(m)&&await a.setPrintApp(m),a.setOutputFormat(a.getOutputFormats()[0]),a.setDpi(a.getDpis()[0]),a.setLayout(a.getLayouts()[0]?.name),b(a)}catch(e){k((()=>c("PrintForm.managerErrorMessage"))),J().error("Could not initialize print manager: ",e)}}),[y,f,g,C,M,d,c,t,m]);(0,n.useEffect)((()=>{e?h||Z():(h?.shutdownManager(),b(null))}),[h,e,Z]);return r().createElement("div",{className:"print"},L&&r().createElement(Ft.Z,{className:"print-alert",message:L,type:"error",closable:!0,showIcon:!0,onClose:()=>{k(null)}}),h?.isInitiated()&&r().createElement(r().Fragment,null,r().createElement(jt.Z,Ga({form:s,className:"print-form",labelAlign:"left",labelCol:{flex:"90px"}},l),r().createElement(jt.Z.Item,{name:"title",label:c("PrintForm.title"),initialValue:c("PrintForm.initialTitle")},r().createElement(ja,{maxLength:50,placeholder:c("PrintForm.titlePlaceholder")})),r().createElement(jt.Z.Item,{name:"comment",label:c("PrintForm.comment")},r().createElement(ja,{maxLength:200,placeholder:c("PrintForm.commentPlaceholder")})),r().createElement(jt.Z.Item,{name:"layout",label:c("PrintForm.layout"),initialValue:h?.getLayouts()[0]?.name},r().createElement(Ra,{printManager:h})),r().createElement(jt.Z.Item,{name:"scale",label:c("PrintForm.scale"),initialValue:h?.getClosestScaleToFitMap()},r().createElement(Ka,{printManager:h})),r().createElement(jt.Z.Item,{name:"dpi",label:c("PrintForm.dpi"),initialValue:h.getDpis()[0]},r().createElement(_a,{printManager:h,placeholder:c("PrintForm.resolutionPlaceholder")})),r().createElement(jt.Z.Item,{name:"format",label:c("PrintForm.format"),initialValue:"pdf"},r().createElement($a,{printManager:h,outputFormats:o,placeholder:c("PrintForm.outputFormatPlaceholder")}))),r().createElement(i.Z,{className:"print-button tool-menu-button",disabled:!h?.isInitiated(),icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.q7m}),loading:w,onClick:async()=>{try{if(k(null),v(!0),!h)return;const e=await h.print(!1);if(!e)throw new Error("No download URL available, the job has failed.");window.open(e)}catch(e){k(c("PrintForm.printJobErrorMsg")||null),J().error(e)}finally{v(!1)}}},c("PrintForm.downloadBtnText"))))},Ya=a(57680),qa=a.n(Ya),Ja=a(1249),Xa=a.n(Ja),Qa=a(84986),en=a.n(Qa),tn=a(75321),an=a.n(tn),nn=a(44990),rn=a.n(nn),on=a(64748),ln=a.n(on),sn=a(30590),cn=a(7871),un={};un.styleTagTransform=_(),un.setAttributes=R(),un.insert=j().bind(null,"head"),un.domAPI=I(),un.insertStyleElement=$();N()(cn.Z,un),cn.Z&&cn.Z.locals&&cn.Z.locals;var dn=a(273),mn=a(21015),pn={};pn.styleTagTransform=_(),pn.setAttributes=R(),pn.insert=j().bind(null,"head"),pn.domAPI=I(),pn.insertStyleElement=$();N()(mn.Z,pn),mn.Z&&mn.Z.locals&&mn.Z.locals;var gn=a(16144),fn=a.n(gn),yn=a(53772),hn=a.n(yn);function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},En.apply(this,arguments)}var bn=({...e})=>{const[t,a]=(0,n.useState)({name:"Default Style",rules:[{name:"Area",symbolizers:[{kind:"Fill",color:"#00b72b",outlineOpacity:.8,opacity:.5,fillOpacity:.8,outlineWidth:2,outlineColor:"#00b72b"}]},{name:"Line",symbolizers:[{kind:"Line",color:"#00b72b",width:2,opacity:.8}]},{name:"Point",symbolizers:[{kind:"Mark",wellKnownName:"circle",color:"#00b72b",strokeColor:"#00b72b",strokeOpacity:.8,opacity:.5,radius:7}],filter:["==","label","undefined"]},{name:"Text",symbolizers:[{kind:"Text",label:"{{label}}",size:12,font:["sans-serif"],opacity:.8,color:"#00b72b",offset:[5,5],haloColor:"#00b72b",haloWidth:1}],filter:["!=","label","undefined"]}]}),r=(0,P.useMap)();return(0,n.useEffect)((()=>{if(!t||!r)return;const e=new(hn());let a=S().getLayerByName(r,"react-geo_digitize");(async()=>{let n,r,o,l;for(const a of t.rules){const t={name:"",rules:[a]},i=await e.writeStyle(t);if(!i.output)return;"Fill"===a.symbolizers[0].kind&&(n=i.output),"Text"===a.symbolizers[0].kind&&(l=i.output),"Line"===a.symbolizers[0].kind&&(r=i.output),"Mark"===a.symbolizers[0].kind&&(o=i.output)}a.setStyle(((e,t)=>{const a=e.getGeometry()?.getType();if(a)return["MultiPolygon","Polygon","Circle"].includes(a)?"function"==typeof n?n(e,t):n:["MultiLineString","LineString"].includes(a)?"function"==typeof r?r(e,t):r:["MultiPoint","Point"].includes(a)?e.get("label")?"function"==typeof l?l(e,t):l:"function"==typeof o?o(e,t):o:void 0}))})()}),[t,r]),n.createElement(fn(),En({style:t,onStyleChange:a},e))};function wn(){return wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},wn.apply(this,arguments)}var vn=({...e})=>{const[t,a]=(0,n.useState)(!1),{t:o}=(0,E.useTranslation)();return r().createElement(r().Fragment,null,r().createElement(i.Z,{type:"link",onClick:()=>{a(!0)},icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.XsY})},o("StylingDrawer.pickColor")),r().createElement(dn.Z,wn({title:o("StylingDrawer.title"),placement:"right",onClose:()=>{a(!1)},open:t,mask:!1,width:"45vw",className:"color-pick-drawer"},e),r().createElement(bn,null)))};var Ln=({showDrawPoint:e,showDrawLine:t,showDrawPolygon:a,showDrawCircle:n,showDrawRectangle:o,showDrawAnnotation:l,showModifyFeatures:i,showUploadFeatures:s,showDownloadFeatures:c,showDeleteFeatures:u})=>{const{t:d}=(0,E.useTranslation)(),m=(0,P.useMap)(),p=e=>{const t=new FileReader;t.onload=()=>{const e=(new(Be())).readFeatures(t.result);if(m){const t=m.getView().getProjection().getCode();e.forEach((e=>{e.getGeometry()?.transform("EPSG:4326",t)}));const a=sn.DigitizeUtil.getDigitizeLayer(m).getSource();a?.addFeatures(e)}},t.readAsText(e)};return m?r().createElement(rn(),null,e?r().createElement(Xa(),{name:"draw-point",drawType:"Point",type:"link",pressed:!1},r().createElement(lt.FontAwesomeIcon,{icon:ot.diR}),r().createElement("span",{className:"draw-point"},d("Draw.point"))):r().createElement(r().Fragment,null),t?r().createElement(Xa(),{name:"draw-line",drawType:"LineString",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.hx$}),r().createElement("span",{className:"draw-line"},d("Draw.line"))):r().createElement(r().Fragment,null),a?r().createElement(Xa(),{name:"draw-polygon",drawType:"Polygon",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.ubJ}),r().createElement("span",{className:"draw-polygon"},d("Draw.polygon"))):r().createElement(r().Fragment,null),n?r().createElement(Xa(),{name:"draw-circle",drawType:"Circle",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.diR}),r().createElement("span",{className:"draw-circle"},d("Draw.circle"))):r().createElement(r().Fragment,null),o?r().createElement(Xa(),{name:"draw-rectangle",drawType:"Rectangle",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.pL1}),r().createElement("span",{className:"draw-rectangle"},d("Draw.rectangle"))):r().createElement(r().Fragment,null),l?r().createElement(Xa(),{name:"draw-text",drawType:"Text",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.yGG}),r().createElement("span",{className:"draw-text"},d("Draw.text"))):r().createElement(r().Fragment,null),i?r().createElement(en(),{name:"draw-modify",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.Yai}),r().createElement("span",{className:"draw-modify"},d("Draw.modify"))):r().createElement(r().Fragment,null),s?r().createElement(ln(),{name:"draw-upload",onChange:e=>{const t=e.target.files;!t||1!==t.length||"application/geo+json"!==t[0].type&&"application/geojson"!==t[0].type||p(t[0])},type:"link"},r().createElement(an(),{type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.cf$}),r().createElement("span",{className:"draw-upload"},d("Draw.upload")))):r().createElement(r().Fragment,null),c?r().createElement(an(),{name:"draw-export",onClick:()=>{const e=[];if(m){const t=m.getView().getProjection().getCode(),a=sn.DigitizeUtil.getDigitizeLayer(m),n=a.getSource()?.getFeatures();if(n&&n.length>0){n.forEach((a=>{const n=a.clone();n.getGeometry()?.transform(t,"EPSG:4326"),e.push(n)}));const a=(new(Be())).writeFeatures(e),r=new Blob([a],{type:"application/geo+json"}),o=window.URL.createObjectURL(r),l=document.createElement("a");l.href=o,l.setAttribute("download","exportedFeatures.geojson"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.q7m}),r().createElement("span",{className:"draw-export"},d("Draw.export"))):r().createElement(r().Fragment,null),u?r().createElement(qa(),{name:"draw-delete",type:"link"},r().createElement(lt.FontAwesomeIcon,{icon:ot.$aW}),r().createElement("span",{className:"draw-delete"},d("Draw.delete"))):r().createElement(r().Fragment,null),r().createElement(vn,null)):r().createElement(r().Fragment,null)},kn=a(86629),Sn=a(41284),Pn=a.n(Sn),Cn=a(21800),Mn=a(55151),Zn=a(20373),Tn=a.n(Zn),An=a(34350),Fn=a.n(An),Dn=a(61316),Nn=a.n(Dn),On=a(86092),In={};In.styleTagTransform=_(),In.setAttributes=R(),In.insert=j().bind(null,"head"),In.domAPI=I(),In.insertStyleElement=$();N()(On.Z,In),On.Z&&On.Z.locals&&On.Z.locals;function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},xn.apply(this,arguments)}var jn=({features:e,layerName:t,...a})=>{const[o,l]=(0,n.useState)(),[s,c]=(0,n.useState)(),u=C()(),d=`selection-layer-${t}`,m=t=>{l(t),c(e[t-1])};return(0,n.useEffect)((()=>{if(!u)return;return(()=>{if(S().getLayerByName(u,d))return;const t=new(Fn())({features:e}),a=new(We())({color:"rgba(255, 255, 255, 0.15)"}),n=new(He())({color:"rgba(209, 70, 47, 1)",width:2}),r=new(qe())({fill:a,stroke:n,image:new(Ve())({radius:5,fill:a,stroke:n})}),o=new(Tn())({source:t,style:r});o.set("name",d),u.addLayer(o)})(),()=>(()=>{const e=S().getLayerByName(u,d);e&&u.removeLayer(e)})()}),[e,u,d]),(0,n.useEffect)((()=>{if(!u)return;const t=S().getLayerByName(u,d);t&&(t.getSource()?.clear(),l(1),e.length>0&&c(e[0]))}),[e,u,d]),(0,n.useEffect)((()=>{if(!s||!u)return;const e=S().getLayerByName(u,d);e&&(e.getSource()?.clear(),e.getSource()?.addFeature(s))}),[s,u,d]),s?r().createElement(Nn(),xn({className:"property-grid",feature:s,size:"small",sticky:!0,title:()=>r().createElement(r().Fragment,null,r().createElement(Mn.Z,{simple:!0,total:e.length,size:"small",pageSize:1,current:o,onChange:m}),r().createElement(Mt.Z,{title:"Copy to clipboard"},r().createElement(i.Z,{type:"primary",onClick:()=>{ga()((new(Be())).writeFeature(s))},icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.kZ_})}))),columns:[{title:"Key",dataIndex:"attributeName",key:"attributeName",width:"50%",ellipsis:!0,defaultSortOrder:"ascend",sorter:(e,t)=>e.key.localeCompare(t.key)},{title:"Value",dataIndex:"attributeValue",key:"attributeValue",width:"50%",ellipsis:!0}],scroll:{scrollToFirstRowOnChange:!0,y:"calc(100% - 90px)"}},a)):r().createElement(r().Fragment,null)},Un=a(16813),Rn={};Rn.styleTagTransform=_(),Rn.setAttributes=R(),Rn.insert=j().bind(null,"head"),Rn.domAPI=I(),Rn.insertStyleElement=$();N()(Un.Z,Rn),Un.Z&&Un.Z.locals&&Un.Z.locals;function Bn(){return Bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Bn.apply(this,arguments)}var $n=({enabled:e,...t})=>{const{t:a}=(0,E.useTranslation)(),o=(0,P.useMap)(),l=se(),i=le(),s=Z(),[c,u]=(0,n.useState)([]),m=e=>!!e.get("hoverable")&&(e instanceof f()&&e.getSource()instanceof Rt()||e instanceof h()&&e.getSource()instanceof $t()),p=(0,n.useCallback)((()=>{if(!o)return;const e=S().getAllLayers(o,m);u(e.filter((e=>e.getVisible())))}),[o]);if((0,n.useEffect)((()=>{if(!o)return;p();const e=S().getAllLayers(o,m);return e.forEach((e=>e.on("change:visible",p))),()=>{e.forEach((e=>e.un("change:visible",p)))}}),[o,p]),!o)return r().createElement(r().Fragment,null);const g=e=>e.split(":").length>1?e.split(":")[1]:e.split(":")[0];if(!e)return r().createElement(r().Fragment,null);return r().createElement("div",{className:"feature-info-panel"},r().createElement(Pn(),Bn({featureCount:10,map:o,queryLayers:c,resultRenderer:e=>{const t=e.features,n=e.loading;if(0===Object.keys(t).length)return r().createElement("span",{className:"usage-hint"},a("FeatureInfo.usageHint"));const l=[];return Object.keys(t).forEach((e=>{let a=!1;const s=o.getAllLayers().find((t=>{if((0,zt.isWmsLayer)(t)){const a=t.getSource(),n=g(a?.getParams().LAYERS);return g(e)===n}return!1}));i.forEach((t=>{if((n=t.integration)&&"feature-info"===n.placement&&(Array.isArray(t.integration.layers)&&t.integration.layers.includes(e)||!t.integration.layers)){const{key:n,wrappedComponent:o}=t;l.push({label:e,key:e,children:r().createElement(o,{key:n})}),a=!0}var n})),a||l.push({label:s?.get("name")||e,key:e,children:r().createElement("div",{key:e},r().createElement(jn,{features:t[e],layerName:e,loading:n}))})})),r().createElement(kn.Z,{items:l})},fetchOpts:(()=>{const e={};return c.forEach((t=>{const a=(0,d.getUid)(t);e[a]={headers:{...t.get("useBearerToken")?{...(0,_t.getBearerTokenHeader)(l?.getKeycloak())}:void 0}}})),e})(),onSuccess:e=>{const t=e.features,a={};Object.entries(t).forEach((e=>{const t=e[0],n=e[1];a[t]=(new(Be())).writeFeatures(n)})),s((0,Cn.wl)(a))}},t)))},zn=a(54458),_n=a(87726),Vn=a.n(_n),Kn=a(59001),Wn=a.n(Kn),Gn=a(26707),Hn=a.n(Gn),Yn=a(30381),qn=a.n(Yn),Jn=a(45514),Xn=a.n(Jn),Qn=a(65947),er={};er.styleTagTransform=_(),er.setAttributes=R(),er.insert=j().bind(null,"head"),er.domAPI=I(),er.insertStyleElement=$();N()(Qn.Z,er),Qn.Z&&Qn.Z.locals&&Qn.Z.locals;function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},tr.apply(this,arguments)}var ar=({layer:e,...t})=>{const[a,o]=(0,n.useState)(e.getSource()?.getParams().TIME),[l,i]=(0,n.useState)(),[s,c]=(0,n.useState)(),[u,d]=(0,n.useState)(),{t:m}=(0,E.useTranslation)();(0,n.useEffect)((()=>{const t=e.get("dimension")?.values?.split(",");if(!t||0===t.length)return;i(t[0]),c(t[t.length-1]),o(t[t.length-1]);const a={};if(t.forEach(((e,t)=>{a[e]=qn()(e).format("YYYY-MM-DD")})),d(a),"current"===t.default){let e=[NaN,""];Object.values(a).forEach((t=>{let a=qn()().diff(qn()(t));a<e[0]&&(e=[a,t])})),o(e[1])}}),[e]);return r().createElement("div",{className:"wms-time-slider"},r().createElement(de.Z,null,r().createElement(lt.FontAwesomeIcon,{icon:ot.SZw}),m("WmsTimeSlider.title")),u?r().createElement(Xn(),tr({min:l,max:s,marks:u,value:a,onChange:t=>{o(t),e.getSource()?.updateParams({TIME:t})},step:null},t)):r().createElement("span",null,m("WmsTimeSlider.warning")))},nr=a(86954),rr=a.n(nr);function or(){return or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},or.apply(this,arguments)}var lr=({layer:e,visibleLegendsIds:t,setVisibleLegendsIds:a,...l})=>{const[i,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),m=Z(),g=se(),f=(0,P.useMap)(),{t:y}=(0,E.useTranslation)(),h=e.get("downloadConfig")??null,b=async()=>{if(f){u(!0);try{let t=await rr().getExtentForLayer(e,{headers:e.get("useBearerToken")?{...(0,_t.getBearerTokenHeader)(g?.getKeycloak())}:{}});t=(0,ke.transformExtent)(t,"EPSG:4326",f.getView().getProjection()),f.getView().fit(t)}catch(e){J().error(e),o.Z.error({message:y("LayerTreeContextMenu.extentError")})}finally{u(!1)}}},w=e=>{const t=[e];for(const a of e.getLayers().getArray())a instanceof p()&&t.push(...w(a));return t},v=e=>{const t=(e=>f?w(f.getLayerGroup()).filter((t=>t.getLayers().getArray().includes(e))):[])(e);t.forEach((t=>t.getLayers().remove(e)))},L=()=>{if(!f)return;v(e);const t=S().getLayerByName(f,y("AddLayerModal.externalWmsFolder")),a=S().getLayerByName(f,y("UploadDataModal.uploadedDataFolder"));t&&0===t.getLayers().getLength()&&v(t),a&&0===a.getLayers().getLength()&&v(a)},k=async t=>{if(!e)return;const a={method:"GET",headers:{...e.get("useBearerToken")?{...(0,_t.getBearerTokenHeader)(g?.getKeycloak())}:void 0}},n=await fetch(t,a),r=await n.blob(),o=document.createElement("a");o.href=URL.createObjectURL(r),o.setAttribute("download",e.get("name")),o.click()};let C=[];if((0,zt.isWmsLayer)(e)&&C.push({label:r().createElement(Dt.Z,{spinning:c},y("LayerTreeContextMenu.layerZoomToExtent")),key:"zoomToExtent"}),(0,zt.isWmsLayer)(e)&&e.getVisible()){const a=t.includes((0,d.getUid)(e));C.push({label:y(a?"LayerTreeContextMenu.hideLegend":"LayerTreeContextMenu.showLegend"),key:"toggleLegend"})}if((e.get("isExternalLayer")||e.get("isUploadedLayer"))&&C.push({label:y("LayerTreeContextMenu.removeLayer"),key:"removeExternal"}),h){const e=h.map((e=>({label:y("LayerTreeContextMenu.downloadLayer",{formatName:e.formatName??"XML"}),key:`downloadLayer|${encodeURI(e.downloadUrl)}`})));C.push(...e)}return C.push({label:y("LayerTreeContextMenu.layerDetails"),key:"layerDetails"}),r().createElement(Oe.Z,or({menu:{items:C,onClick:n=>{if(n?.key.startsWith("downloadLayer")){const e=n.key.split("|")[1];k(decodeURI(e))}switch(n?.key){case"zoomToExtent":b();break;case"removeExternal":L();break;case"toggleLegend":const n=(0,d.getUid)(e),r=[...t];r.includes(n)?r.splice(r.indexOf(n),1):r.push(n),a(r);break;case"layerDetails":m((0,At.uF)((0,d.getUid)(e))),m((0,At.$Z)())}s(!1)}},placement:"bottomLeft",onOpenChange:s,open:i,trigger:["click"]},l),r().createElement(lt.FontAwesomeIcon,{icon:ot.iV1}))},ir=a(79770),sr={};sr.styleTagTransform=_(),sr.setAttributes=R(),sr.insert=j().bind(null,"head"),sr.domAPI=I(),sr.insertStyleElement=$();N()(ir.Z,sr),ir.Z&&ir.Z.locals&&ir.Z.locals;function cr(){return cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},cr.apply(this,arguments)}var ur=({...e})=>{const t=(0,P.useMap)(),a=se(),{t:o}=(0,E.useTranslation)(),[l,i]=(0,n.useState)([]),[s,c]=(0,n.useState)({});(0,n.useEffect)((()=>{if(!t)return;const e=S().getAllLayers(t);return e.forEach((e=>{if(e instanceof Tt()){const t=e.getSource();t.hasListener("tileloadstart")||t.on("tileloadstart",u),t.hasListener("tileloadend")||t.hasListener("tileloaderror")||t.on(["tileloadend","tileloaderror"],m)}})),()=>{e.forEach((e=>{if(e instanceof Tt()){const t=e.getSource();t.hasListener("tileloadstart")&&t.un("tileloadstart",u),t.hasListener("tileloadend")&&t.un("tileloadend",m),t.hasListener("tileloaderror")&&t.un("tileloaderror",m)}}))}}),[t]);const u=e=>{c((t=>{const a=parseInt((0,d.getUid)(e.target),10),n={...t};return n[a]&&n[a].loaded>=n[a].loading?(n[a].loading=1,n[a].loaded=0,n[a].percent=0,n):(n[a]||(n[a]={loading:0,loaded:0,percent:0}),n[a].loading=Number.isInteger(n[a].loading)?n[a].loading+1:1,n)}))},m=e=>{c((t=>{const a=parseInt((0,d.getUid)(e.target),10),n={...t};n[a]||(n[a]={loading:0,loaded:0,percent:0}),n[a].loaded=Number.isInteger(n[a].loaded)?n[a].loaded+1:1;const r=Math.round(n[a].loaded/n[a].loading*100);return r>n[a].percent&&(n[a].percent=r),n}))};return t?r().createElement(Vn(),cr({className:"layertree",map:t,nodeTitleRenderer:e=>{if(!t)return;const n=t.getView(),c=n.getProjection().getUnits()||"m",u=n.getResolution(),m=u?S().getScaleForResolution(u,c):void 0,g=e instanceof Tt()&&(0,d.getUid)(e.getSource())?s[(0,d.getUid)(e.getSource())]?.percent:100;return e instanceof p()?r().createElement("div",null,e.get("name")):r().createElement(r().Fragment,null,r().createElement("div",{className:"tree-node-header"},r().createElement(zn.Z,{className:"loading-indicator",type:"circle",percent:g,format:()=>"",width:16,strokeWidth:20}),r().createElement("span",null,e.get("name")),(e instanceof h()||e instanceof f())&&r().createElement(lr,{layer:e,visibleLegendsIds:l,setVisibleLegendsIds:i})),e.get("visible")&&r().createElement("div",{className:"layer-transparency"},r().createElement(Hn(),{tooltip:{formatter:e=>`${o("LayerTree.transparency")}: ${e}%`},layer:e})),e.get("visible")&&"WMSTime"===e.get("type")&&r().createElement("div",{className:"layer-time-slider"},r().createElement(ar,{layer:e})),e.get("visible")&&l.includes((0,d.getUid)(e))&&r().createElement(Wn(),{layer:e,errorMsg:o("LayerTree.noLegendAvailable"),extraParams:{scale:m,LEGEND_OPTIONS:"fontAntiAliasing:true;forceLabels:on",TRANSPARENT:!0},headers:e.get("useBearerToken")?{...(0,_t.getBearerTokenHeader)(a?.getKeycloak())}:{}}))},filterFunction:e=>e.getLayers?!e.get("hideInLayerTree"):!(e.getSource&&e.getSource()?.forEachFeature),draggable:!0},e)):r().createElement(r().Fragment,null)},dr=a(75357),mr=a.n(dr),pr=a(85415),gr={};gr.styleTagTransform=_(),gr.setAttributes=R(),gr.insert=j().bind(null,"head"),gr.domAPI=I(),gr.insertStyleElement=$();N()(pr.Z,gr),pr.Z&&pr.Z.locals&&pr.Z.locals;var fr=({showMeasureDistance:e,showMeasureArea:t})=>{const{t:a}=(0,E.useTranslation)(),n=(0,P.useMap)();return n?r().createElement(rn(),null,e?r().createElement(mr(),{geodesic:!0,name:"line",map:n,measureType:"line",type:"link",continueLineMsg:a("Measure.clicktodrawline")},r().createElement(lt.FontAwesomeIcon,{icon:ot.SoD}),r().createElement("span",{className:"measure-text"},a("Measure.line"))):r().createElement(r().Fragment,null),t?r().createElement(mr(),{geodesic:!0,name:"poly",map:n,measureType:"polygon",type:"link",continuePolygonMsg:a("Measure.clicktodrawarea")},r().createElement(lt.FontAwesomeIcon,{icon:ot.ubJ}),r().createElement("span",{className:"measure-text"},a("Measure.area"))):r().createElement(r().Fragment,null)):r().createElement(r().Fragment,null)},yr=a(35818),hr={};hr.styleTagTransform=_(),hr.setAttributes=R(),hr.insert=j().bind(null,"head"),hr.domAPI=I(),hr.insertStyleElement=$();N()(yr.Z,hr),yr.Z&&yr.Z.locals&&yr.Z.locals;function Er(){return Er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Er.apply(this,arguments)}const{Panel:br}=Xt.default;var wr=({...e})=>{const{t:t}=(0,E.useTranslation)(),a=(0,P.useMap)(),o=le(),l=Z(),s=A((e=>e.toolMenu.availableTools)),c=A((e=>e.toolMenu.activeKeys)),u=se(),d=u?.getKeycloak(),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=window.matchMedia("only screen and (max-width: 450px) and (orientation: portrait),only screen and (max-width: 750px) and (orientation: landscape), only screen and (max-width: 580px)"),t=new RegExp("/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/");(e.matches||t.test(window.navigator.userAgent))&&p(!0)}),[]),(0,n.useEffect)((()=>{g.length<1&&(s.includes("default")?f(["measure_tools","draw_tools","feature_info","print","tree","permalink","language_selector"]):f(s))}),[g,s]),(0,n.useEffect)((()=>{c.includes("print")&&c.includes("measure_tools")&&(c.indexOf("print")<c.indexOf("measure_tools")?l((0,ta.wG)(c.filter((e=>"print"!==e)))):l((0,ta.wG)(c.filter((e=>"measure_tools"!==e)))))}),[c,l]);const y=e=>{switch(e){case"measure_tools":return{icon:ot.KxN,title:t("ToolMenu.measure"),wrappedComponent:r().createElement(fr,{showMeasureDistance:s.includes("default")||s.includes("measure_tools_distance"),showMeasureArea:s.includes("default")||s.includes("measure_tools_area")})};case"draw_tools":return{icon:ot.ubJ,title:t("ToolMenu.draw"),wrappedComponent:r().createElement(Ln,{showDrawPoint:s.includes("default")||s.includes("draw_tools_point"),showDrawLine:s.includes("default")||s.includes("draw_tools_line"),showDrawPolygon:s.includes("default")||s.includes("draw_tools_polygon"),showDrawCircle:s.includes("default")||s.includes("draw_tools_circle"),showDrawRectangle:s.includes("default")||s.includes("draw_tools_rectangle"),showDrawAnnotation:s.includes("default")||s.includes("draw_tools_annotation"),showModifyFeatures:s.includes("default")||s.includes("draw_tools_modify"),showUploadFeatures:s.includes("default")||s.includes("draw_tools_upload"),showDownloadFeatures:s.includes("default")||s.includes("draw_tools_download"),showDeleteFeatures:s.includes("default")||s.includes("draw_tools_delete")})};case"feature_info":return{icon:ot.kwz,title:t("ToolMenu.featureInfo"),wrappedComponent:r().createElement($n,{enabled:c.includes("feature_info")})};case"print":return{icon:ot.kwI,title:t("ToolMenu.print"),wrappedComponent:a?r().createElement(Ha,{active:c.includes("print"),layerBlackList:["react-geo_measure","hoverVectorLayer"]}):r().createElement(r().Fragment,null)};case"tree":return{icon:ot.aC2,title:t("ToolMenu.layertree"),wrappedComponent:r().createElement("div",{className:"tree-wrapper"},r().createElement(ur,null),r().createElement(i.Z,{className:"add-wms-button tool-menu-button",icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.r8p}),onClick:()=>l((0,F.$Z)())},t("ToolMenu.addWms")),d&&st().geoserver?.upload?.authorizedRoles?.some((e=>d.hasResourceRole(e,d.clientId)))&&r().createElement(i.Z,{className:"upload-data-button tool-menu-button",icon:r().createElement(lt.FontAwesomeIcon,{icon:ot.cf$}),onClick:()=>l((0,aa.$Z)())},t("ToolMenu.uploadData")))};case"permalink":return{icon:ot.M6U,title:t("Permalink.title"),wrappedComponent:r().createElement(Ea,null)};case"language_selector":return{icon:ot.BCn,title:t("ToolMenu.languageSelect"),wrappedComponent:r().createElement(ia,null)}}};return r().createElement("div",{className:"tool-menu "+(m?"collapsed":"")},r().createElement(Xt.default,Er({expandIconPosition:"end",activeKey:c,destroyInactivePanel:!0,onChange:e=>{p(!1),l((0,ta.wG)(ea()(e)))}},e),(()=>{const e=[];return g.forEach((t=>{const a=y(t);if(!a)return;const{icon:n,title:o,wrappedComponent:l}=a,i=r().createElement(br,{className:t,header:r().createElement(r().Fragment,null,n?r().createElement(lt.FontAwesomeIcon,{icon:n}):void 0,r().createElement("span",null,o)),key:t},l);e.push(i)})),o&&o.forEach((a=>{if((n=a.integration)&&"tool-menu"===n.placement){const{key:n,wrappedComponent:o,integration:{placement:l,label:i="Plugin",insertionIndex:s,icon:c,...u}}=a;e.splice(s||0,0,r().createElement(br,Er({header:r().createElement(r().Fragment,null,c?r().createElement(lt.FontAwesomeIcon,{icon:c}):void 0,r().createElement("span",null,t(i))),key:n},u),r().createElement(o,null)))}var n})),e})()),r().createElement(Mt.Z,{placement:"right",title:t(m?"ToolMenu.expand":"ToolMenu.collapse")},r().createElement(i.Z,{className:"collapse-btn",icon:m?r().createElement(lt.FontAwesomeIcon,{icon:ot._tD}):r().createElement(lt.FontAwesomeIcon,{icon:ot.A35}),onClick:()=>{l((0,ta.wG)([])),p(!m)}})))},vr=a(93009),Lr=a(28837),kr=a(65352),Sr={};Sr.styleTagTransform=_(),Sr.setAttributes=R(),Sr.insert=j().bind(null,"head"),Sr.domAPI=I(),Sr.insertStyleElement=$();N()(kr.Z,Sr),kr.Z&&kr.Z.locals&&kr.Z.locals;function Pr(){return Pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Pr.apply(this,arguments)}const{Dragger:Cr}=vr.default;var Mr=({...e})=>{const[t,a]=(0,n.useState)(""),[o,i]=(0,n.useState)(""),[s,c]=(0,n.useState)(!1),u=A((e=>e.uploadDataModal.visible)),d=A((e=>e.user)),m=Z(),g=(0,P.useMap)(),f=se(),{t:y}=(0,E.useTranslation)(),h=e=>({0:null,1:"org.locationtech.jts.geom.Point",3:"org.locationtech.jts.geom.LineString",5:"org.locationtech.jts.geom.Polygon",8:"org.locationtech.jts.geom.MultiPoint",11:"org.locationtech.jts.geom.Point",13:"org.locationtech.jts.geom.LineString",15:"org.locationtech.jts.geom.Polygon",18:"org.locationtech.jts.geom.MultiPoint",21:"org.locationtech.jts.geom.Point",23:"org.locationtech.jts.geom.LineString",25:"org.locationtech.jts.geom.Polygon",28:"org.locationtech.jts.geom.MultiPoint",31:null}[e]),b=e=>{switch(e){case"C":return"java.lang.String";case"D":return"java.util.Date";case"N":return"java.lang.Long";case"F":return"java.lang.Double";case"L":return"java.lang.Boolean";default:return null}};return r().createElement(l.Z,Pr({className:"upload-data-modal",title:y("UploadDataModal.title"),open:u,onCancel:()=>{a(""),i(""),m((0,aa.Cp)())},width:600,footer:!1},e),o&&r().createElement(Ft.Z,{message:o,closable:!0,type:"success"}),t&&r().createElement(Ft.Z,{message:t,closable:!0,type:"error"}),r().createElement(Dt.Z,{spinning:s},r().createElement(Cr,{customRequest:async e=>{const{onError:t,onSuccess:a,file:n}=e,r=n.name.split("."),o=n.type,l=st().geoserver?.base||"/geoserver",i=st().geoserver?.upload?.workspace||"SHOGUN",s=`${r[0]}_${Date.now()}`.toUpperCase(),c={file:n,baseUrl:l,workspace:i,storeName:s,layerName:s};try{"image/tiff"===o&&await(async e=>{const{baseUrl:t,workspace:a,storeName:n,layerName:r,file:o}=e,l=`${t}/rest/workspaces/${a}/coveragestores/${n}/file.geotiff?configure=none`;if(!(await fetch(l,{method:"PUT",headers:{...(0,_t.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"image/tiff"},body:o})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}));const i=`${t}/rest/workspaces/${a}/coveragestores/${n}/coverages`;if(!(await fetch(i,{method:"POST",headers:{...(0,_t.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/json"},body:JSON.stringify({coverage:{enabled:!0,name:r,nativeName:r,title:r,keywords:{string:["User upload",`Uploaded by ${d.providerDetails?.username}`]}}})})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}))})(c),"application/zip"===o&&await(async e=>{const{baseUrl:t,workspace:a,storeName:n,layerName:r,file:o}=e,l=await Lr.Uv.load(o);let i="",s={attribute:[]};if(1!==Object.entries(l).length)throw new Error(y("UploadDataModal.error.zipContent"));Object.entries(l).forEach((([e,t])=>{i=e;const a=t.parse("dbf",{properties:!1});s.attribute=a.fields.map((e=>({name:e.name,minOccurs:0,maxOccurs:1,nillable:!0,binding:b(e.type),length:e.length})));const n=t.parse("shx");s.attribute.push({name:"the_geom",minOccurs:0,maxOccurs:1,nillable:!0,binding:h(n.header.type)})}));const c=`${t}/rest/workspaces/${a}/datastores/${n}/file.shp?configure=none`;if(!(await fetch(c,{method:"PUT",headers:{...(0,_t.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/zip"},body:o})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}));const u=`${t}/rest/workspaces/${a}/datastores/${n}/featuretypes`;if(!(await fetch(u,{method:"POST",headers:{...(0,_t.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/json"},body:JSON.stringify({featureType:{enabled:!0,name:r,nativeName:i,title:r,attributes:s,keywords:{string:["User upload",`Uploaded by ${d.providerDetails?.username}`]}}})})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}))})(c),a&&a({baseUrl:l,workspace:i,layerName:s})}catch(e){t&&t({name:"UploadError",message:e instanceof Error?e.message:y("UploadDataModal.error.general",{fileName:n.name})})}},accept:"image/tiff,application/zip",maxCount:1,showUploadList:!1,beforeUpload:e=>{const t=st().geoserver?.upload?.limit||2e8,n=e.type,r=e.size;if(a(""),i(""),r>t)return a(y("UploadDataModal.error.maxSize",{maxSize:t/1e6})),!1;const o=["application/zip","image/tiff"];return!!o.includes(n)||(a(y("UploadDataModal.error.supportedFormats",{supportedFormats:o.join(", ")})),!1)},onChange:async e=>{const t=e.file;if("uploading"===t.status&&c(!0),"done"===t.status){if(!f||!t.response)return;const e={name:t.response.layerName,type:"TILEWMS",clientConfig:{hoverable:!0},sourceConfig:{url:`${t.response.baseUrl}/ows?`,layerNames:`${t.response.workspace}:${t.response.layerName}`,useBearerToken:!0}},a=new(ne())({client:f}).parseTileLayer(e);a.set("layerConfig",e),a.set("isUploadedLayer",!0),a.set("groupName",y("UploadDataModal.uploadedDataFolder")),(e=>{if(!g)return;const t=y("UploadDataModal.uploadedDataFolder");let a=S().getLayerByName(g,t);if(!a){a=new(p())({layers:[],properties:{name:t}});const e=g.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,a)}a.getLayers().getArray().includes(e)||a.getLayers().push(e)})(a),i(y("UploadDataModal.success",{fileName:t.name,layerName:t.response.layerName})),c(!1)}else"error"===t.status&&(c(!1),J().error(t.error),t.error&&t.error.message?a(t.error.message):a(y("UploadDataModal.error.general",{fileName:t.name})))}},r().createElement("p",{className:"ant-upload-drag-icon"},r().createElement(lt.FontAwesomeIcon,{icon:ot.cf$})),r().createElement("p",{className:"ant-upload-text"},y("UploadDataModal.description")),r().createElement("p",{className:"ant-upload-hint"},y("UploadDataModal.hint")))))},Zr=a(65705),Tr={};Tr.styleTagTransform=_(),Tr.setAttributes=R(),Tr.insert=j().bind(null,"head"),Tr.domAPI=I(),Tr.insertStyleElement=$();N()(Zr.Z,Tr),Zr.Z&&Zr.Z.locals&&Zr.Z.locals;function Ar(){return Ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ar.apply(this,arguments)}const Fr=({...e})=>((0,n.useEffect)((()=>{const e=document.querySelectorAll(".loadmask")[0];e&&e.classList.add("loadmask-hidden")}),[]),r().createElement("div",Ar({className:"App"},e),r().createElement(Pt,null),r().createElement(ue,null),r().createElement(wr,null),r().createElement(Le,null),r().createElement(G,null),r().createElement(Mr,null),r().createElement(Jt,null)));var Dr=Fr},30845:function(e,t,a){"use strict";a.r(t);var n=a(96985),r=a.n(n),o=a(38648),l=a(88182),i=a(76772),s=a(17699),c=a(67502),u=a(87617),d=a.n(u),m=a(6767),p=a.n(m),g=a(15059),f=a(94671),y=a(8266),h=a(9479),E=a.n(h),b=a(49862),w=a.n(b),v=a(22901),L=a.n(v),k=a(90426),S=a(14447),P=a.n(S),C=a(28523),M=a.n(C),Z=a(83539),T=a.n(Z),A=a(20563),F=a(47139),D=a(12038),N=a.n(D),O=a(92212),I=a.n(O),x=a(29577),j=a.n(x),U=a(73161),R=a.n(U),B=a(12665),$=a.n(B),z=a(76688),_=a(77257),V=a(35895),K=a(97168);const W=(0,K.oM)({name:"appInfo",initialState:{authorities:[],buildTime:"",commitHash:"",userId:-1,version:""},reducers:{setAppInfo(e,t){return t.payload}}}),{setAppInfo:G}=W.actions;var H=W.reducer;const Y=(0,K.oM)({name:"description",initialState:"",reducers:{setDescription:(e,t)=>t.payload}}),{setDescription:q}=Y.actions;var J=Y.reducer;const X={contact:"https://www.terrestris.de/de/kontakt/",imprint:"https://www.terrestris.de/de/impressum/",privacy:"https://www.terrestris.de/de/datenschutzerklaerung/"},Q=(0,K.oM)({name:"legal",initialState:X,reducers:{setLegal:(e,t)=>({contact:t.payload.contact||X.contact,imprint:t.payload.imprint||X.imprint,privacy:t.payload.privacy||X.privacy})}}),{setLegal:ee}=Q.actions;var te=Q.reducer;const ae=(0,K.oM)({name:"logoPath",initialState:"./shogun_logo.png",reducers:{setLogoPath:(e,t)=>t.payload}}),{setLogoPath:ne}=ae.actions;var re=ae.reducer;const oe=(0,K.oM)({name:"searchEngines",initialState:["nominatim"],reducers:{setSearchEngines:(e,t)=>t.payload}}),{setSearchEngines:le}=oe.actions;var ie=oe.reducer,se=a(14890),ce=a(20908),ue=a(6049),de=a(28728),me=a(21800);const pe=(0,K.oM)({name:"title",initialState:"SHOGun Client",reducers:{setTitle:(e,t)=>t.payload}}),{setTitle:ge}=pe.actions;var fe=pe.reducer,ye=a(76712),he=a(63221);const Ee=(0,K.oM)({name:"user",initialState:{},reducers:{setUser(e,t){return t.payload}}}),{setUser:be}=Ee.actions;var we=Ee.reducer;const ve=e=>(0,se.UY)({addLayerModal:ce.ZP,appInfo:H,description:J,layerDetailsModal:ue.ZP,legal:te,logoPath:re,print:de.ZP,selectedFeatures:me.ZP,title:fe,toolMenu:ye.ZP,uploadDataModal:he.ZP,searchEngines:ie,user:we,...e}),Le=(0,K.xC)({reducer:ve()});var ke=a(93379),Se=a.n(ke),Pe=a(7795),Ce=a.n(Pe),Me=a(90569),Ze=a.n(Me),Te=a(3565),Ae=a.n(Te),Fe=a(19216),De=a.n(Fe),Ne=a(44589),Oe=a.n(Ne),Ie=a(90978),xe={};xe.styleTagTransform=Oe(),xe.setAttributes=Ae(),xe.insert=Ze().bind(null,"head"),xe.domAPI=Ce(),xe.insertStyleElement=De();Se()(Ie.Z,xe),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;const je=r().lazy((()=>Promise.all([a.e(987),a.e(592),a.e(807)]).then(a.bind(a,11453)))),Ue=new($())({url:d().shogunBase||"/"}),Re=new(R())({client:Ue}),Be=e=>{switch(e){case"en":default:return c.Z;case"de":return s.Z}},$e=async e=>{const t=await Re.parseMapView(e,{constrainOnlyCenter:!0});let a;const n=e.clientConfig?.mapView.projection,r=e.clientConfig?.mapView;if(n&&r?.extent&&4===r.extent.length){const e=(0,k.fromLonLat)([r.extent[0],r.extent[1]],n),t=(0,k.fromLonLat)([r.extent[2],r.extent[3]],n);a=[e[0],e[1],t[0],t[1]]}a&&t.set("extent",a),t.setConstrainResolution(!0);const o=await Re.parseLayerTree(e,n);return new(L())({view:t,layers:o,controls:(0,y.defaults)({zoom:!1})})},ze=()=>{const e=new(w())({source:new(P())});e.set("name","OpenStreetMap");const t=new(w())({opacity:.5,visible:!0,source:new(M())({url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",projection:"EPSG:3857",params:{LAYERS:"MERRA2_2m_Air_Temperature_Assimilated_Monthly"}})});t.setProperties({name:"2-meter Air Temperature, Assimilated (Monthly, MERRA2)",hoverable:!0});const a=new(E())({layers:[t]});a.set("name","NASA Earth Observations");const n=new(E())({layers:[e]});n.set("name","Background");const r=(0,k.fromLonLat)([0,40],"EPSG:3857");return new(L())({view:new(T())({center:r,zoom:0}),layers:[n,a],controls:(0,y.defaults)({zoom:!1})})},_e=async(e,t,n)=>{await a.I("default"),await new Promise(((e,a)=>{const n=document.createElement("script");n.src=t,n.type="text/javascript",n.async=!0,n.onload=()=>{n.parentElement?.removeChild(n),e()},n.onerror=e=>{n.parentElement?.removeChild(n),a(e)},document.head.appendChild(n)}));const r=window[e];await r.init(a.S.default);const o=[];for(const e of n){const t=(await r.get(e))();o.push(t)}return o};(async()=>{try{const e=await(async()=>{const e=d().keycloak?.enabled,t=d().keycloak?.onLoadAction,a=d().keycloak?.host,n=d().keycloak?.realm,r=d().keycloak?.clientId;if(!e)return;if(!a)throw new Error("Neither config key keycloak.host nor environment KEYCLOAK_HOST is set");if(!n)throw new Error("Neither config key keycloak.realm nor environment KEYCLOAK_REALM is set");if(!r)throw new Error("Neither config key keycloak.clientId nor environment KEYCLOAK_CLIENT_ID is set");const o=new f.Z({url:`${a}`,realm:n,clientId:r});return o.onTokenExpired=async()=>{try{await o.updateToken(0)}catch(e){N().error("Error while refreshing the access token: ",e)}},await o.init({onLoad:t,checkLoginIframe:!1}),o})();e&&Ue.setKeycloak(e);const t=await(async()=>{const e=I().getQueryParam(window.location.href,"applicationId");if(e)try{N().info(`Loading application with ID ${e}`);const t=await Ue.application().findOne(e);return N().info(`Successfully loaded application with ID ${e}`),t}catch(t){N().error(`Error while loading application with ID ${e}: ${t}`),o.Z.error({message:V.Z.t("Index.applicationLoadErrorMessage"),description:V.Z.t("Index.applicationLoadErrorDescription",{applicationId:e}),duration:0})}else N().info("No application ID given, can't load any configuration.")})(),a=t?.clientConfig?.defaultLanguage;a||V.Z.use(g.Z),await V.Z.init(V.u),a&&V.Z.changeLanguage(a);const n=(e=>{const t={"--primaryColor":"#59666C","--secondaryColor":"#70B3BE","--complementaryColor":"#FFFFFF"};return e?(e.primaryColor&&(t["--primaryColor"]=e.primaryColor),e.secondaryColor&&(t["--secondaryColor"]=e.secondaryColor),e.secondaryColor&&(t["--complementaryColor"]=e.complementaryColor),t):t})(t?.clientConfig?.theme);l.ZP.config({theme:{primaryColor:p()(n["--primaryColor"]).isLight()?p()(n["--primaryColor"]).darken(.5).hexa():n["--primaryColor"]}}),Object.keys(n).forEach((e=>{document.body.style.setProperty(e,n[e])})),Le.subscribe((()=>{document.title=Le.getState().title})),(async e=>{if(e){if(e.name&&Le.dispatch(ge(e.name)),e.clientConfig?.description&&Le.dispatch(q(e.clientConfig?.description)),e.clientConfig?.legal&&Le.dispatch(ee(e.clientConfig.legal)),e?.clientConfig?.theme?.logoPath&&Le.dispatch(ne(e.clientConfig.theme.logoPath)),Le.dispatch(le(["nominatim"])),e.toolConfig&&e.toolConfig.length>0){const t=[];e.toolConfig.map((e=>{e.config.visible&&"search"!==e.name&&t.push(e.name),"search"===e.name&&e.config.engines.length>0&&Le.dispatch(le(e.config.engines))})),Le.dispatch((0,ye.nn)(t))}}else N().info("No application configuration provided, the default store will be loaded")})(t);const i=await(async()=>{try{N().info("Loading application info");const e=await Ue.info().getAppInfo();return N().info("Successfully loaded application info"),e}catch(e){N().error("Error while loading application info: ",e)}})();(async e=>{e&&Le.dispatch(G(e))})(i);(async e=>{e&&Le.dispatch(be(e))})(await(async e=>{if(e)try{N().info(`Loading user with ID ${e}`);const t=await Ue.user().findOne(e);return N().info(`Successfully loaded user with ID ${e}`),t}catch(t){N().error(`Error while loading user with ID ${e}: `,t)}else N().info("No user ID given, can't load it's details.")})(i?.userId));const s=await(async e=>e?await $e(e):(N().info("No application configuration provided, the default map will be loaded"),ze()))(t),c=await(async e=>{if(!d().plugins||0===d().plugins.length)return N().info("No plugins found"),[];N().info("Loading plugins");const t=[];for(const a of d().plugins){const n=a.name,o=a.resourcePath,l=a.exposedPaths;if(!n)return N().error("Required plugin configuration 'name' is not set"),t;if(!o)return N().error("Required plugin configuration 'resourcePath' is not set"),t;if(!l)return N().error("Required plugin configuration 'exposedPaths' is not set"),t;let i;N().info(`Loading plugin ${n} (with exposed paths ${l.join(" and ")}) from ${o}`);try{i=await _e(n,o,l),N().info(`Successfully loaded plugin ${n}`)}catch(e){return N().error(`Could not load plugin ${n}:`,e),t}i.forEach((a=>{const n=a.default,o=n.component;if(n.wrappedComponent=()=>r().createElement(o,{map:e,client:Ue}),n.i18n&&Object.entries(n.i18n).forEach((e=>{const t=e[0],a=e[1].translation;V.Z.addResourceBundle(t,"translation",a,!0,!0)})),n.reducers){const e=ve(n.reducers);Le.replaceReducer(e)}t.push(n)}))}return t})(s);(0,A.render)(r().createElement(r().StrictMode,null,r().createElement(r().Suspense,{fallback:r().createElement("span",null)},r().createElement(_.rA,{client:Ue},r().createElement(z.ol,{plugins:c},r().createElement(l.ZP,{locale:Be(V.Z.language)},r().createElement(F.Provider,{store:Le},r().createElement(j().Provider,{value:s},r().createElement(je,null)))))))),document.getElementById("app"))}catch(e){const t=document.querySelectorAll(".loadmask")[0];t&&t.classList.add("loadmask-hidden"),N().error(e),(0,A.render)(r().createElement(r().StrictMode,null,r().createElement(i.Z,{className:"error-boundary",message:V.Z.t("Index.errorMessage"),description:V.Z.t("Index.errorDescription"),type:"error",showIcon:!0})),document.getElementById("app"))}})()},76688:function(e,t,a){"use strict";a.d(t,{ol:function(){return l}});var n=a(96985),r=a.n(n);const o=r().createContext([]),l=({plugins:e,children:t})=>r().createElement(o.Provider,{value:e},t);t.ZP=o},77257:function(e,t,a){"use strict";a.d(t,{rA:function(){return l}});var n=a(96985),r=a.n(n);const o=r().createContext(null),l=({client:e,children:t})=>r().createElement(o.Provider,{value:e},t);t.ZP=o},35895:function(e,t,a){"use strict";a.d(t,{Z:function(){return l},u:function(){return o}});var n=a(36609),r=a(60110);const o={resources:{de:{translation:{ApplicationInfo:{title:"Über",clientVersionTitle:"Client Version",backendVersionTitle:"Backend Version"},AddLayerModal:{addSelectedLayers:"Auswahl hinzufügen",addAllLayers:"Alle hinzufügen",inputPlaceholder:"WMS GetCapabilities URL angeben…",externalWmsFolder:"Externe Themen",title:"WMS hinzufügen",columnTitle:"Name",errorMessage:"Fehler",errorDescription:"Das Capabilities Dokument konnte nicht geladen werden, bitte prüfen Sie die URL",version:"Version"},BasicMapComponent:{processedLayersFolder:"Prozessierte Layer"},Permalink:{title:"Teilen",twitterTooltip:"Link via Twitter teilen",whatsAppTooltip:"Link via WhatsApp teilen",mailTooltip:"Link via Mail teilen",copyTooltip:"Link in die Zwischenablage kopieren",copiedToClipboard:"Link wurde in Zwischenablage kopiert",copyToClipboardFailed:"Link konnte nicht kopiert werden"},Measure:{title:"Messen",line:"Entfernung",area:"Fläche",clicktodrawline:"Zum Zeichnen einer Linie klicken",clicktodrawarea:"Zum Zeichnen einer Fläche klicken"},Draw:{point:"Punkt",line:"Linie",polygon:"Polygon",circle:"Kreis",rectangle:"Rechteck",text:"Anmerkung",modify:"Bearbeitung",upload:"Hochladen",delete:"Löschen",export:"Exportieren"},StylingDrawer:{pickColor:"Farbschema bearbeiten",title:"Farbschema bearbeiten"},FeatureInfo:{usageHint:"Klicken Sie in die Karte, um Detailinformationen zu erhalten."},LayerTree:{transparency:"Transparenz",noLegendAvailable:"Keine Legende verfügbar"},LayerTreeContextMenu:{layerZoomToExtent:"Auf Layerausdehnung zoomen",extentError:"Konnte nicht auf die Layerausdehnung zoomen",removeLayer:"Layer entfernen",showLegend:"Legende anzeigen",hideLegend:"Legende ausblenden",downloadLayer:"Layer exportieren ({{formatName}})",layerDetails:"Eigenschaften"},LayerDetailsModal:{title:"Eigenschaften des Layers {{layerName}}",internalConfigurationButtonTooltip:"Interne Konfiguration anzeigen",internalConfigurationButtonTooltipPressed:"Interne Konfiguration verbergen"},LayerDetails:{noDataPlaceholder:"-",layerNameLabel:"Name",layerTitleLabel:"Titel",serviceAbstractLabel:"Service Beschreibung",abstractLabel:"Beschreibung",accessConstraintsLabel:"Nutzungseinschränkungen",capabilitiesUrlLabel:"GetCapabilities URL",contactLabel:"Kontakt",minScaleLabel:"Min. Maßstab",maxScaleLabel:"Max. Maßstab",bboxLabel:"Bounding Box",errorMessage:"Fehler beim Laden der Layer Capabilities"},LayerConfiguration:{errorMessage:"Fehler beim Laden der internen Konfiguration"},ToolMenu:{expand:"Menu ausklappen",collapse:"Menu einklappen",measure:"Messen",draw:"Zeichnen",featureInfo:"Karteninhalte abfragen",addWms:"WMS hinzufügen",uploadData:"Daten hochladen",print:"Export",layertree:"Karten",languageSelect:"Sprachauswahl"},PrintForm:{title:"Kartentitel",initialTitle:"Druckausgabe",titlePlaceholder:"Bitte geben Sie einen Titel ein",comment:"Bemerkung",commentPlaceholder:"Bitte geben Sie einen Kommentar ein",layout:"Vorlage",dpi:"Auflösung",format:"Format",scale:"Maßstab",downloadBtnText:"Ausdruck erzeugen",printJobErrorMsg:"Der Kartenausdruck konnte nicht erzeugt werden",initErrorMsg:"Der Kartendruck Generator konnte nicht initialisiert werden.",outputFormatPlaceholder:"Bitte wählen Sie ein Ausgabeformat aus",resolutionPlaceholder:"Bitte wählen Sie eine Ausgabequalität aus",managerErrorMessage:"Fehler bei der Initialisierung der Export-Engine"},Footer:{refSystem:"Bezugssystem",scale:"Maßstab",mousePosition:"Mausposition",imprint:"Impressum",contact:"Kontakt",privacypolicy:"Datenschutz"},Index:{applicationLoadErrorMessage:"Fehler beim Laden der Applikation",applicationLoadErrorDescription:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. Die Standardkonfiguration wird stattdessen geladen.",errorMessage:"Fehler beim Laden der Applikation",errorDescription:"Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden. Bitte laden Sie die Seite erneut."},Nominatim:{placeholder:"Ortsname, Straßenname, Stadtteilname, POI usw."},UserMenu:{settingsMenuTitle:"Profil bearbeiten",infoMenuTitle:"Über",logoutMenuTitle:"Ausloggen",loginMenuTitle:"Anmelden"},WmsTimeSlider:{title:"Zeitlicher Bezug",default:"Keine Daten gefunden"},UploadDataModal:{title:"Daten hochladen",uploadedDataFolder:"Hochgeladene Daten",description:"Klicken Sie oder ziehen Sie die Datei zum Hochladen in diesen Bereich",hint:"Unterstützte Dateiformate sind Shapefile (gebündelt als *.zip) und GeoTIFF",success:"Datei {{fileName}} wurde erfolgreich geladen und der Layer {{layerName}} erstellt",error:{general:"Fehler beim Hochladen der Datei {{fileName}}",maxSize:"Der Upload überschreitet das Limit von {{maxSize}} MB",supportedFormats:"Der Dateityp ist nicht unterstützt ({{supportedFormats}})",zipContent:"Mehrere Geodatensätze innerhalb eines Archivs sind nicht unterstützt"}},MultiSearch:{searchInViewBox:"Im aktuellen Kartenausschnitt suchen",searchData:"Layerdaten durchsuchen",searchNominatim:"Ortssuche (Nominatim)",nominatimTitle:"Ortssuche",searchPlaceholder:"Orts- und Datensuche…"}}},en:{translation:{ApplicationInfo:{title:"About",clientVersionTitle:"Client version",backendVersionTitle:"Backend version"},AddLayerModal:{addSelectedLayers:"Add selected",addAllLayers:"Add all",inputPlaceholder:"Enter a WMS GetCapabilities URL…",externalWmsFolder:"External layers",title:"Add WMS",columnTitle:"Name",errorMessage:"Error",errorDescription:"Could not load the provided Capabilities document, please check the validity of the URL",version:"Version"},BasicMapComponent:{processedLayersFolder:"Processed layers"},Permalink:{title:"Share",twitterTooltip:"Share link via Twitter",whatsAppTooltip:"Share link via WhatsApp",mailTooltip:"Share link via Mail",copyTooltip:"Copy link to Clipboard",copiedToClipboard:"Copied to clipboard",copyToClipboardFailed:"Could not copy link to clipboard"},Measure:{title:"Measure",line:"Distance",area:"Area",clicktodrawline:"Click to draw line",clicktodrawarea:"Click to draw area"},Draw:{point:"Point",line:"Line",polygon:"Polygon",circle:"Circle",rectangle:"Rectangle",text:"Annotation",modify:"Edit",upload:"Upload",delete:"Delete",export:"Export"},StylingDrawer:{pickColor:"Modify color scheme",title:"Modify color scheme"},FeatureInfo:{usageHint:"Click on the map to get details about the clicked coordinate."},LayerTree:{transparency:"Transparency",noLegendAvailable:"No legend available"},LayerTreeContextMenu:{layerZoomToExtent:"Zoom to layer extent",extentError:"Could not zoom to layer extent",removeLayer:"Remove layer",showLegend:"Show legend",hideLegend:"Hide legend",downloadLayer:"Export layer as {{formatName}}",layerDetails:"Properties"},LayerDetailsModal:{title:"Properties of layer {{layerName}}",internalConfigurationButtonTooltip:"Show internal configuration",internalConfigurationButtonTooltipPressed:"Hide internal configuration"},LayerDetails:{noDataPlaceholder:"-",layerNameLabel:"Name",layerTitleLabel:"Title",serviceAbstractLabel:"Service abstract",abstractLabel:"Abstract",accessConstraintsLabel:"Access constraints",capabilitiesUrlLabel:"GetCapabilities URL",contactLabel:"Contact",minScaleLabel:"Min. scale",maxScaleLabel:"Max. scale",bboxLabel:"Bounding box",errorMessage:"Error while loading the layer capabilities"},LayerConfiguration:{errorMessage:"Error while loading the internal configuration"},ToolMenu:{expand:"Expand",collapse:"Collapse",measure:"Measure",draw:"Draw",featureInfo:"Query map features",addWms:"Add WMS",uploadData:"Upload data",print:"Export",layertree:"Maps",languageSelect:"Language selector"},PrintForm:{title:"Title",initialTitle:"Title",titlePlaceholder:"Please input a title…",comment:"Comment",commentPlaceholder:"Please enter a comment…",layout:"Layout",dpi:"Resolution",format:"Format",scale:"Scale",downloadBtnText:"Create print",printJobErrorMsg:"Could not generate PDF output",initErrorMsg:"PDF Generator could not be initialized",outputFormatPlaceholder:"Please select an output format",resolutionPlaceholder:"Please select an output quality",managerErrorMessage:"Error while initializing the export engine"},Footer:{refSystem:"Reference system",scale:"Scale",mousePosition:"Mouse position",imprint:"Imprint",contact:"Contact",privacypolicy:"Privacy"},Index:{applicationLoadErrorMessage:"Error while loading the application",applicationLoadErrorDescription:"The application with ID {{applicationId}} could not be loaded correctly. You're seeing the default application configuration.",errorMessage:"Error while loading the application",errorDescription:"An unexpected error occured while loading the application. Please try to reload the page."},Nominatim:{placeholder:"Place name, street name, district name, POI, etc."},UserMenu:{settingsMenuTitle:"Edit profile",infoMenuTitle:"About",logoutMenuTitle:"Logout",loginMenuTitle:"Login"},WmsTimeSlider:{title:"Time reference",default:"No data found"},UploadDataModal:{title:"Upload data",uploadedDataFolder:"Uploaded data",description:"Click or drag file to this area to upload",hint:"Supported file formats are Shapefile (bundled as *.zip) and GeoTIFF",success:"Successfully uploaded file {{fileName}} and created layer {{layerName}}",error:{general:"Error while uploading file {{fileName}}",maxSize:"The file exceeds the upload limit of {{maxSize}} MB",supportedFormats:"The given file type does not match the supported ones ({{supportedFormats}})",zipContent:"Multiple geodatasets within one archive are not supported"}},MultiSearch:{searchInViewBox:"Search in current extent",searchData:"Search layer data",searchNominatim:"Search nominatim",nominatimTitle:"Nominatim",searchPlaceholder:"Address and data search…"}}}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},returnNull:!1};n.ZP.use(r.initReactI18next),n.ZP.options=o;var l=n.ZP},21302:function(e,t,a){Promise.all([a.e(987),a.e(592),a.e(776)]).then(a.bind(a,30845))},20908:function(e,t,a){"use strict";a.d(t,{$Z:function(){return r},Cp:function(){return o}});const n=(0,a(97168).oM)({name:"addLayerModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:r,hide:o,toggle:l}=n.actions;t.ZP=n.reducer},6049:function(e,t,a){"use strict";a.d(t,{$Z:function(){return o},Cp:function(){return l},uF:function(){return r}});const n=(0,a(97168).oM)({name:"layerDetailsModal",initialState:{visible:!1},reducers:{setLayer(e,t){e.layerId=t.payload},show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{setLayer:r,show:o,hide:l,toggle:i}=n.actions;t.ZP=n.reducer},28728:function(e,t,a){"use strict";a.d(t,{eV:function(){return i}});const n=(0,a(97168).oM)({name:"print",initialState:{customMapParams:{},customParams:{printLegend:!1}},reducers:{setCustomMapParams:(e,t)=>{e.customMapParams=t.payload},setCustomParams:(e,t)=>{e.customParams=t.payload},addCustomMapParam:(e,t)=>{e.customMapParams={...e.customMapParams,...t.payload}},addCustomParam:(e,t)=>{e.customParams={...e.customParams,...t.payload}}}}),{setCustomMapParams:r,setCustomParams:o,addCustomMapParam:l,addCustomParam:i}=n.actions;t.ZP=n.reducer},21800:function(e,t,a){"use strict";a.d(t,{wl:function(){return r}});const n=(0,a(97168).oM)({name:"selectedFeatures",initialState:{},reducers:{setSelectedFeatures(e,t){return t.payload}}}),{setSelectedFeatures:r}=n.actions;t.ZP=n.reducer},76712:function(e,t,a){"use strict";a.d(t,{nn:function(){return o},wG:function(){return r}});const n=(0,a(97168).oM)({name:"toolMenu",initialState:{activeKeys:[],availableTools:["default"]},reducers:{setActiveKeys(e,t){e.activeKeys=[...t.payload]},setAvailableTools(e,t){e.availableTools=[...t.payload]}}}),{setActiveKeys:r,setAvailableTools:o}=n.actions;t.ZP=n.reducer},63221:function(e,t,a){"use strict";a.d(t,{$Z:function(){return r},Cp:function(){return o}});const n=(0,a(97168).oM)({name:"uploadDataModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:r,hide:o,toggle:l}=n.actions;t.ZP=n.reducer},65705:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},40171:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},88885:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},78415:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},62923:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},85677:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},34286:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},86201:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},21809:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},85516:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},10767:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},42686:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},21015:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},7871:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},86092:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},16813:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},79770:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},85415:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},35818:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},65352:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},72285:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},65947:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},90978:function(e,t,a){"use strict";var n=a(87537),r=a.n(n),o=a(23645),l=a.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l}}]);
//# sourceMappingURL=common.cdc49ac8fcbaec343943.js.map