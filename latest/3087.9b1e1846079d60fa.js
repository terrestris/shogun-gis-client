"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["3087"],{91587:function(t,e,i){i.r(e);var r=i(65952),s=i(49081),o=i(78487),n=i(21915),l=i(52209),a=i(79313),h=i(5374),u=i(21882),g=i(70701);class p extends r.Z{constructor(t){let e=Object.assign({},(t=t||{}).params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,n.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,r){let o=(0,h.get)(i),a=this.getProjection()||o,u=this.getTileGrid();!u&&(u=this.getTileGridForProjection(a));let g=(0,h.transform)(t,o,a),p=(0,l.aA)(a,o,t,e),_=u.getZForResolution(p,this.zDirection),d=u.getResolution(_),c=u.getTileCoordForCoordAndZ(g,_);if(u.getResolutions().length<=c[0])return;let f=u.getTileCoordExtent(c,this.tmpExtent_),m=this.gutter_;0!==m&&(f=(0,n.buffer)(f,d*m,f));let E={QUERY_LAYERS:this.params_.LAYERS};Object.assign(E,(0,s.jt)(this.params_,"GetFeatureInfo"),r);let R=Math.floor((g[0]-f[0])/d),v=Math.floor((f[3]-g[1])/d);return E[this.v13_?"I":"X"]=R,E[this.v13_?"J":"Y"]=v,this.getRequestUrl_(c,f,1,a||o,E)}getLegendUrl(t,e){if(void 0===this.urls[0])return;let i={SERVICE:"WMS",VERSION:s.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){let t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){let e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return Object.assign(i,e),(0,o.B5)(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,o){let n;let l=this.urls;if(!!l){if(1==l.length)n=l[0];else{let e=(0,u.$W)((0,g.vp)(t),l.length);n=l[e]}return(0,s.Q4)(e,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,n,o,this.serverType_)}}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0,e=[];for(let i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){let t=this.params_.VERSION||s.eQ;this.v13_=(0,a.n)(t,"1.3")>=0}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(!r&&(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;1!=e&&(!this.hidpi_||void 0===this.serverType_)&&(e=1);let o=r.getResolution(t[0]),l=r.getTileCoordExtent(t,this.tmpExtent_),a=this.gutter_;0!==a&&(l=(0,n.buffer)(l,o*a,l));let h=Object.assign({},(0,s.jt)(this.params_,"GetMap"));return this.getRequestUrl_(t,l,e,i,h)}}e.default=p}}]);
//# sourceMappingURL=3087.9b1e1846079d60fa.js.map