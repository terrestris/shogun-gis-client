"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["7430"],{58493:function(e,t,i){i.r(t),i.d(t,{ObjectEvent:function(){return u}});var r=i(13910),s=i(56834),n=i(9520),l=i(13580),o=i(49179);class u extends n.default{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class a extends s.default{constructor(e){super(),this.on,this.once,this.un,(0,o.getUid)(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new u(i,e,t)),i=r.Z.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new u(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){let r=this.values_||(this.values_={});if(i)r[e]=t;else{let i=r[e];r[e]=t,i!==t&&this.notify(e,i)}}setProperties(e,t){for(let i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){let i=this.values_[e];delete this.values_[e],(0,l.x)(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}t.default=a},13910:function(e,t){t.Z={PROPERTYCHANGE:"propertychange"}},56834:function(e,t,i){i.r(t),i.d(t,{unByKey:function(){return o}});var r=i(73381),s=i(66575),n=i(13002);class l extends s.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.default.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){let i=e.length,r=Array(i);for(let s=0;s<i;++s)r[s]=(0,n.oL)(this,e[s],t);return r}return(0,n.oL)(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){let r=e.length;i=Array(r);for(let s=0;s<r;++s)i[s]=(0,n.Vx)(this,e[s],t)}else i=(0,n.Vx)(this,e,t);return t.ol_key=i,i}unInternal(e,t){let i=t.ol_key;if(i)o(i);else if(Array.isArray(e))for(let i=0,r=e.length;i<r;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}function o(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)(0,n.bN)(e[t]);else(0,n.bN)(e)}l.prototype.on,l.prototype.once,l.prototype.un,t.default=l},38906:function(e,t,i){i.d(t,{h:function(){return r}});function r(e,t){if(!e)throw Error(t)}},13002:function(e,t,i){i.d(t,{Vx:function(){return n},bN:function(){return l},oL:function(){return s}});var r=i(13580);function s(e,t,i,r,s){if(s){let s=i;i=function(n){return e.removeEventListener(t,i),s.call(r??this,n)}}else r&&r!==e&&(i=i.bind(r));let n={target:e,type:t,listener:i};return e.addEventListener(t,i),n}function n(e,t,i,r){return s(e,t,i,r,!0)}function l(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),(0,r.Z)(e))}},80800:function(e,t,i){i.d(t,{Be:function(){return n},ov:function(){return s}});var r=i(64011);function s(e,t,i,r,s,n,l){let o=new XMLHttpRequest;o.open("GET","function"==typeof e?e(i,r,s):e,!0),"arraybuffer"==t.getType()&&(o.responseType="arraybuffer"),o.withCredentials=!1,o.onload=function(e){if(!o.status||o.status>=200&&o.status<300){let e=t.getType();try{let r;"text"==e||"json"==e?r=o.responseText:"xml"==e?r=o.responseXML||o.responseText:"arraybuffer"==e&&(r=o.response),r?n(t.readFeatures(r,{extent:i,featureProjection:s}),t.readProjection(r)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function n(e,t){return function(i,n,l,o,u){s(e,t,i,n,l,(e,t)=>{this.addFeatures(e),void 0!==o&&o(e)},u||r.VOID)}}},8476:function(e,t,i){i.r(t),i.d(t,{defaultLoadFunction:function(){return x},default:function(){return E}});var r=i(59900),s=i(24969),n=i(85386),l=i(49179);let o=[];class u extends s.Z{constructor(e,t,i,r,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=(0,n.E4)(1,1,o)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){let t=(0,l.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&((0,n.jy)(this.context_),o.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}var a=i(90226),h=i(73381),c=i(21915),d=i(80800),f=i(13580),g=i(50596),p=i(8930),v=i(10508),T=i(86018),_=i(76137);class y extends _.Z{constructor(e){let t=e.projection||"EPSG:3857";super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:e.tileGrid||(0,T.createXYZ)({extent:e.extent||(0,T.extentFromProjection)(t),maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512}),tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:x,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:a.Z,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===r.default.IDLE){i.setState(r.default.LOADING);let s=i.wrappedTileCoord,n=this.getTileGridForProjection(t),l=n.getTileCoordExtent(s),o=s[0],u=n.getResolution(o);(0,c.buffer)(l,-u,l);let a=this.tileGrid,d=a.getExtent();d&&(0,c.getIntersection)(l,d,l);let g=a.getZForResolution(u,this.zDirection);a.forEachTileCoord(l,g,s=>{let n=this.tileUrlFunction(s,e,t);this.sourceTiles_[n]||(this.sourceTiles_[n]=new this.tileClass(s,n?r.default.IDLE:r.default.EMPTY,n,this.format_,this.tileLoadFunction));let l=this.sourceTiles_[n];i.sourceTiles.push(l),this.tileKeysBySourceTileUrl_[n]||(this.tileKeysBySourceTileUrl_[n]=[]),this.tileKeysBySourceTileUrl_[n].push(i.getKey());let o=l.getState();if(o<r.default.LOADED){let e=t=>{this.handleTileChange(t);let s=l.getState();if(s===r.default.LOADED||s===r.default.ERROR){let t=l.getKey();t in i.errorTileKeys?l.getState()===r.default.LOADED&&delete i.errorTileKeys[t]:i.loadingSourceTiles--,s===r.default.ERROR?i.errorTileKeys[t]=!0:l.removeEventListener(h.default.CHANGE,e),0===i.loadingSourceTiles&&i.setState((0,f.x)(i.errorTileKeys)?r.default.LOADED:r.default.ERROR)}};l.addEventListener(h.default.CHANGE,e),i.loadingSourceTiles++}o===r.default.IDLE&&(l.extent=a.getTileCoordExtent(s),l.projection=t,l.resolution=a.getResolution(s[0]),l.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(e=>e.getState()===r.default.ERROR)?r.default.ERROR:r.default.LOADED)}return i.sourceTiles}removeSourceTiles(e){let t=e.getKey(),i=e.sourceTiles;for(let e=0,r=i.length;e<r;++e){let r=i[e].getTileUrl();if(!this.tileKeysBySourceTileUrl_[r])return;let s=this.tileKeysBySourceTileUrl_[r].indexOf(t);-1!==s&&(this.tileKeysBySourceTileUrl_[r].splice(s,1),0===this.tileKeysBySourceTileUrl_[r].length&&(delete this.tileKeysBySourceTileUrl_[r],delete this.sourceTiles_[r]))}}getTile(e,t,i,s,n){let l=[e,t,i],o=this.getTileCoordForTileUrlFunction(l,n),a=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(n);if(o&&a){let t=h.getTileCoordExtent(o);(0,c.buffer)(t,-h.getResolution(e),t),(0,c.intersects)(a,t)||(o=null)}let d=!0;if(null!==o){let t=this.tileGrid,i=h.getResolution(e),r=t.getZForResolution(i,1),l=h.getTileCoordExtent(o);(0,c.buffer)(l,-i,l),t.forEachTileCoord(l,r,e=>{d=d&&!this.tileUrlFunction(e,s,n)})}let f=new u(l,d?r.default.EMPTY:r.default.IDLE,o,this.getSourceTiles.bind(this,s,n),this.removeSourceTiles.bind(this));return f.key=this.getKey(),f}getTileGridForProjection(e){let t=e.getCode(),i=this.tileGrids_[t];if(!i){let e=this.tileGrid,r=e.getResolutions().slice(),s=r.map(function(t,i){return e.getOrigin(i)}),n=r.map(function(t,i){return e.getTileSize(i)}),l=v.e+1;for(let e=r.length;e<l;++e)r.push(r[e-1]/2),s.push(s[e-1]),n.push(n[e-1]);i=new p.default({extent:e.getExtent(),origins:s,resolutions:r,tileSizes:n}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){let r=this.getTileGridForProjection(i),s=(0,g.Pq)(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}var E=y;function x(e,t){e.setLoader(function(i,r,s){(0,d.ov)(t,e.getFormat(),i,r,s,e.onLoad.bind(e),e.onError.bind(e))})}}}]);
//# sourceMappingURL=7430.be974616578c372e.js.map