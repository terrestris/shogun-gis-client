"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["8869"],{78426:function(t,e,i){i.r(e),i.d(e,{CollectionEvent:function(){return r}});var n=i(58493),s=i(19629),o=i(9520);let a="length";class r extends o.default{constructor(t,e,i){super(t),this.element=e,this.index=i}}class l extends n.default{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){let e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new r(s.Z.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){let e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;let e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new r(s.Z.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength()){this.insertAt(t,e);return}if(t<0)throw Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);let i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new r(s.Z.REMOVE,i,t)),this.dispatchEvent(new r(s.Z.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw Error("Duplicate item added to a unique collection")}}e.default=l},19629:function(t,e){e.Z={ADD:"add",REMOVE:"remove"}},18369:function(t,e,i){i.r(e);var n=i(47588),s=i(30006);class o extends n.ZP{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==s.Z.DBLCLICK){let i=t.originalEvent,s=t.map,o=t.coordinate,a=i.shiftKey?-this.delta_:this.delta_,r=s.getView();(0,n.FW)(r,a,o,this.duration_),i.preventDefault(),e=!0}return!e}}e.default=o},73800:function(t,e,i){i.r(e);var n=i(38024),s=i(64011),o=i(36403),a=i(86320),r=i(90728);class l extends n.default{constructor(t){super({stopDown:s.FALSE}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let e=t.condition?t.condition:(0,o.all)(o.noModifierKeys,o.primaryAction);this.condition_=t.onFocusOnly?(0,o.all)(o.focusWithTabindex,e):e,this.noKinetic_=!1}handleDragEvent(t){let e=t.map;!this.panning_&&(this.panning_=!0,e.getView().beginInteraction());let i=this.targetPointers,s=e.getEventPixel((0,n.centroid)(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){let e=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],i=t.map.getView();(0,r.scale)(e,i.getResolution()),(0,r.rotate)(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){let e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),s=i.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),r=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(n),o[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(r),duration:500,easing:a.easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}e.default=l},97950:function(t,e,i){i.r(e);var n=i(38024),s=i(64011),o=i(36403),a=i(38642);class r extends n.default{constructor(t){t=t||{},super({stopDown:s.FALSE}),this.condition_=t.condition?t.condition:o.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!(0,o.mouseOnly)(t))return;let e=t.map,i=e.getView();if(i.getConstraints().rotation===a.h$)return;let n=e.getSize(),s=t.pixel,r=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(void 0!==this.lastAngle_){let t=r-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=r}handleUpEvent(t){return!(0,o.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(0,o.mouseOnly)(t)&&!!((0,o.mouseActionButton)(t)&&this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}}e.default=r},85459:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var n=i("73381"),s=i("47588"),o={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"},a=i("36403"),r=i("90728");class l extends s.ZP{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return(0,a.noModifierKeys)(t)&&(0,a.targetNotEditable)(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==n.default.KEYDOWN){let i=t.originalEvent,n=i.key;if(this.condition_(t)&&(n==o.DOWN||n==o.LEFT||n==o.RIGHT||n==o.UP)){let a=t.map.getView(),l=a.getResolution()*this.pixelDelta_,h=0,d=0;n==o.DOWN?d=-l:n==o.LEFT?h=-l:n==o.RIGHT?h=l:d=l;let u=[h,d];(0,r.rotate)(u,a.getRotation()),(0,s.Cv)(a,u,this.duration_),i.preventDefault(),e=!0}}return!e}}var h=l},52:function(t,e,i){i.r(e);var n=i(73381),s=i(47588),o=i(36403);class a extends s.ZP{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!(0,o.platformModifierKey)(t)&&(0,o.targetNotEditable)(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==n.default.KEYDOWN||t.type==n.default.KEYPRESS){let i=t.originalEvent,n=i.key;if(this.condition_(t)&&("+"===n||"-"===n)){let o=t.map,a="+"===n?this.delta_:-this.delta_,r=o.getView();(0,s.FW)(r,a,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}e.default=a},86306:function(t,e,i){i.r(e);var n=i(73381),s=i(47588),o=i(91358),a=i(36403),r=i(21882);class l extends s.ZP{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;let e=t.condition?t.condition:a.always;this.condition_=t.onFocusOnly?(0,a.all)(a.focusWithTabindex,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();if(!!t)t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){let e;if(!this.condition_(t)||t.type!==n.default.WHEEL)return!0;let i=t.map,s=t.originalEvent;if(s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel),t.type==n.default.WHEEL&&(e=s.deltaY,o.FIREFOX&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=o.DEVICE_PIXEL_RATIO),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;let a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=4>Math.abs(e)?"trackpad":"wheel");let r=i.getView();if("trackpad"===this.mode_&&!(r.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=e;let l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){let e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-(0,r.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),(0,s.FW)(e,i,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,!t&&(this.lastAnchor_=null)}}e.default=l},78653:function(t,e,i){i.r(e);var n=i(38024),s=i(64011),o=i(38642);class a extends n.default{constructor(t){let e=t=t||{};!e.stopDown&&(e.stopDown=s.FALSE),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0,i=this.targetPointers[0],s=this.targetPointers[1],a=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(void 0!==this.lastAngle_){let t=a-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=a;let r=t.map,l=r.getView();if(l.getConstraints().rotation!==o.h$)this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel((0,n.centroid)(this.targetPointers))),this.rotating_&&(r.render(),l.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,!this.handlingDownUpSequence&&e.getView().beginInteraction(),!0}return!1}}e.default=a},48041:function(t,e,i){i.r(e);var n=i(38024),s=i(64011);class o extends n.default{constructor(t){let e=t=t||{};!e.stopDown&&(e.stopDown=s.FALSE),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1,i=this.targetPointers[0],s=this.targetPointers[1],o=i.clientX-s.clientX,a=i.clientY-s.clientY,r=Math.sqrt(o*o+a*a);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;let l=t.map,h=l.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel((0,n.centroid)(this.targetPointers))),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,!this.handlingDownUpSequence&&e.getView().beginInteraction(),!0}return!1}}e.default=o},91807:function(t,e,i){i.r(e),i.d(e,{defaults:function(){return g}});var n=i("78426"),s=i("18369"),o=i("73800"),a=i("97950"),r=i("86688"),l=i("85459"),h=i("52"),d=class t{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;let n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;let s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},u=i("86306"),_=i("78653"),c=i("48041");function g(t){t=t||{};let e=new n.default,i=new d(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new a.default),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new s.default({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new o.default({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new _.default),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new c.default({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new l.default),e.push(new h.default({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new u.default({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new r.default({duration:t.zoomDuration})),e}}}]);
//# sourceMappingURL=8869.7541bfb02ff77aa5.js.map