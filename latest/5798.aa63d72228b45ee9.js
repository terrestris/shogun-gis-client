"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5798"],{41173:function(e,t,n){var r=n(9520);class s extends r.default{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}t.Z=s},33162:function(e,t,n){var r=n(85386);t.Z=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,r.W8)(),{get:(e,t)=>{if("function"==typeof(0,r.W8)()[t])return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){let t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){let r=t[n];if("function"==typeof r){r(e);continue}let s=t[++n];if("function"==typeof e[r])e[r](...s);else{if("function"==typeof s){e[r]=s(e);continue}e[r]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},4722:function(e,t,n){n.d(t,{r:function(){return x},Z:function(){return y}});var r=n(79682),s=n(8913),i=n(85386),a=n(21915),o=n(41173),h=n(97208),l=n(33162),d=n(82359),u=n(11256),c=n(56834),f=n(73381),g=n(49179);class p extends c.default{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=[],this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return(0,g.abstract)()}getData(e){return null}prepareFrame(e){return(0,g.abstract)()}renderFrame(e,t){return(0,g.abstract)()}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let t=e.target;(t.getState()===u.default.LOADED||t.getState()===u.default.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=u.default.LOADED&&t!=u.default.ERROR&&e.addEventListener(f.default.CHANGE,this.boundHandleImageChange_),t==u.default.IDLE&&(e.load(),t=e.getState()),t==u.default.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}var _=p;let x=[],m=null;var y=class extends _{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=(0,d.Ue)(),this.pixelTransform=(0,d.Ue)(),this.inversePixelTransform=(0,d.Ue)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){let r;m||(m=(0,i.E4)(1,1,void 0,{willReadFrequently:!0})),m.clearRect(0,0,1,1);try{m.drawImage(e,t,n,1,1,0,0,1,1),r=m.getImageData(0,0,1,1).data}catch{return m=null,null}return r}getBackground(e){let t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}useContainer(e,t,n){let a,o,h=this.getLayer().getClassName();if(e&&e.className===h&&(!n||e&&e.style.backgroundColor&&(0,r.fS)((0,s._2)(e.style.backgroundColor),(0,s._2)(n)))){let t=e.firstElementChild;t instanceof HTMLCanvasElement&&(o=t.getContext("2d"))}if(o&&(0,d.OP)(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(a=document.createElement("div")).className=h;let e=a.style;e.position="absolute",e.width="100%",e.height="100%";let t=(o=(0,i.E4)()).canvas;a.appendChild(t),(e=t.style).position="absolute",e.left="0",e.transformOrigin="top left",this.container=a,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){let r=(0,a.getTopLeft)(n),s=(0,a.getTopRight)(n),i=(0,a.getBottomRight)(n),o=(0,a.getBottomLeft)(n);(0,d.nn)(t.coordinateToPixelTransform,r),(0,d.nn)(t.coordinateToPixelTransform,s),(0,d.nn)(t.coordinateToPixelTransform,i),(0,d.nn)(t.coordinateToPixelTransform,o);let h=this.inversePixelTransform;(0,d.nn)(h,r),(0,d.nn)(h,s),(0,d.nn)(h,i),(0,d.nn)(h,o),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){let n=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,i=e.pixelRatio,o=Math.round((0,a.getWidth)(n)/r*i),h=Math.round((0,a.getHeight)(n)/r*i);(0,d.qC)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/i,1/i,s,-o/2,-h/2),(0,d.nb)(this.inversePixelTransform,this.pixelTransform);let l=(0,d.BB)(this.pixelTransform);if(this.useContainer(t,l,this.getBackground(e)),!this.containerReused){let e=this.context.canvas;e.width!=o||e.height!=h?(e.width=o,e.height=h):this.context.clearRect(0,0,o,h),l!==e.style.transform&&(e.style.transform=l)}}dispatchRenderEvent_(e,t,n){let r=this.getLayer();if(r.hasListener(e)){let s=new o.Z(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,t.declutter||this.dispatchRenderEvent_(h.Z.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(h.Z.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new l.Z),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(h.Z.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(h.Z.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,s,i,a){let o=r/t,h=-e[0]+a,l=-e[1];return(0,d.qC)(this.tempTransform,s/2,i/2,o,-o,-n,h,l)}disposeInternal(){delete this.frameState,super.disposeInternal()}}}}]);
//# sourceMappingURL=5798.aa63d72228b45ee9.js.map