{"version":3,"file":"3577.5e1300c6d6bff472.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/ImageState.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-parse/index.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/rgb.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/hsl.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/xyz.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/luv.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/lchuv.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/color.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-rgba/index.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/dom.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/has.js"],"sourcesContent":["/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module color-parse\n */\nimport names from 'color-name'\n\nexport default parse\n\n/**\n * Base hues\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\n */\n//FIXME: use external hue detector\nvar baseHues = {\n\tred: 0,\n\torange: 60,\n\tyellow: 120,\n\tgreen: 180,\n\tblue: 240,\n\tpurple: 300\n}\n\n/**\n * Parse color from the string passed\n *\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\n */\nfunction parse(cstr) {\n\tvar m, parts = [], alpha = 1, space\n\n\t//numeric case\n\tif (typeof cstr === 'number') {\n\t\treturn { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\t}\n\tif (typeof cstr === 'number') return { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\n\tcstr = String(cstr).toLowerCase();\n\n\t//keyword\n\tif (names[cstr]) {\n\t\tparts = names[cstr].slice()\n\t\tspace = 'rgb'\n\t}\n\n\t//reserved words\n\telse if (cstr === 'transparent') {\n\t\talpha = 0\n\t\tspace = 'rgb'\n\t\tparts = [0, 0, 0]\n\t}\n\n\t//hex\n\telse if (cstr[0] === '#') {\n\t\tvar base = cstr.slice(1)\n\t\tvar size = base.length\n\t\tvar isShort = size <= 4\n\t\talpha = 1\n\n\t\tif (isShort) {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[0], 16),\n\t\t\t\tparseInt(base[1] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[2], 16)\n\t\t\t]\n\t\t\tif (size === 4) {\n\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[3], 16),\n\t\t\t\tparseInt(base[4] + base[5], 16)\n\t\t\t]\n\t\t\tif (size === 8) {\n\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\n\t\t\t}\n\t\t}\n\n\t\tif (!parts[0]) parts[0] = 0\n\t\tif (!parts[1]) parts[1] = 0\n\t\tif (!parts[2]) parts[2] = 0\n\n\t\tspace = 'rgb'\n\t}\n\n\t// color space\n\telse if (m = /^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\n\t\tvar name = m[1]\n\t\tspace = name.replace(/a$/, '')\n\t\tvar dims = space === 'cmyk' ? 4 : space === 'gray' ? 1 : 3\n\t\tparts = m[2].trim().split(/\\s*[,\\/]\\s*|\\s+/)\n\n\t\t// color(srgb-linear x x x) -> srgb-linear(x x x)\n\t\tif (space === 'color') space = parts.shift()\n\n\t\tparts = parts.map(function (x, i) {\n\t\t\t//<percentage>\n\t\t\tif (x[x.length - 1] === '%') {\n\t\t\t\tx = parseFloat(x) / 100\n\t\t\t\t// alpha -> 0..1\n\t\t\t\tif (i === 3) return x\n\t\t\t\t// rgb -> 0..255\n\t\t\t\tif (space === 'rgb') return x * 255\n\t\t\t\t// hsl, hwb H -> 0..100\n\t\t\t\tif (space[0] === 'h') return x * 100\n\t\t\t\t// lch, lab L -> 0..100\n\t\t\t\tif (space[0] === 'l' && !i) return x * 100\n\t\t\t\t// lab A B -> -125..125\n\t\t\t\tif (space === 'lab') return x * 125\n\t\t\t\t// lch C -> 0..150, H -> 0..360\n\t\t\t\tif (space === 'lch') return i < 2 ? x * 150 : x * 360\n\t\t\t\t// oklch/oklab L -> 0..1\n\t\t\t\tif (space[0] === 'o' && !i) return x\n\t\t\t\t// oklab A B -> -0.4..0.4\n\t\t\t\tif (space === 'oklab') return x * 0.4\n\t\t\t\t// oklch C -> 0..0.4, H -> 0..360\n\t\t\t\tif (space === 'oklch') return i < 2 ? x * 0.4 : x * 360\n\t\t\t\t// color(xxx) -> 0..1\n\t\t\t\treturn x\n\t\t\t}\n\n\t\t\t//hue\n\t\t\tif (space[i] === 'h' || (i === 2 && space[space.length - 1] === 'h')) {\n\t\t\t\t//<base-hue>\n\t\t\t\tif (baseHues[x] !== undefined) return baseHues[x]\n\t\t\t\t//<deg>\n\t\t\t\tif (x.endsWith('deg')) return parseFloat(x)\n\t\t\t\t//<turn>\n\t\t\t\tif (x.endsWith('turn')) return parseFloat(x) * 360\n\t\t\t\tif (x.endsWith('grad')) return parseFloat(x) * 360 / 400\n\t\t\t\tif (x.endsWith('rad')) return parseFloat(x) * 180 / Math.PI\n\t\t\t}\n\t\t\tif (x === 'none') return 0\n\t\t\treturn parseFloat(x)\n\t\t});\n\n\t\talpha = parts.length > dims ? parts.pop() : 1\n\t}\n\n\t//named channels case\n\telse if (/[0-9](?:\\s|\\/|,)/.test(cstr)) {\n\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\n\t\t\treturn parseFloat(value)\n\t\t})\n\n\t\tspace = cstr.match(/([a-z])/ig)?.join('')?.toLowerCase() || 'rgb'\n\t}\n\n\treturn {\n\t\tspace,\n\t\tvalues: parts,\n\t\talpha\n\t}\n}\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\nconst rgb = {\n\tname: 'rgb',\n\tmin: [0, 0, 0],\n\tmax: [255, 255, 255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n\nexport default rgb;\n","/**\n * @module color-space/hsl\n */\nimport rgb from './rgb.js';\n\nvar hsl = {\n\tname: 'hsl',\n\tmin: [0, 0, 0],\n\tmax: [360, 100, 100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function (hsl) {\n\t\tvar h = hsl[0] / 360, s = hsl[1] / 100, l = hsl[2] / 100, t1, t2, t3, rgb, val, i = 0;\n\n\t\tif (s === 0) return val = l * 255, [val, val, val];\n\n\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (; i < 3;) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tt3 < 0 ? t3++ : t3 > 1 && t3--;\n\t\t\tval = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 :\n\t\t\t\t2 * t3 < 1 ? t2 :\n\t\t\t\t\t3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 :\n\t\t\t\t\t\tt1;\n\t\t\trgb[i++] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\nexport default (hsl);\n\n\n//extend rgb\nrgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255,\n\t\tmin = Math.min(r, g, b),\n\t\tmax = Math.max(r, g, b),\n\t\tdelta = max - min,\n\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\t//FIXME h is possibly undefined\n\t//@ts-ignore\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","/**\n * CIE XYZ\n *\n * @module  color-space/xyz\n */\nimport rgb from './rgb.js';\n\nconst xyz = {\n\tname: 'xyz',\n\tmin: [0, 0, 0],\n\tchannel: ['X', 'Y', 'Z'],\n\talias: ['XYZ', 'ciexyz', 'cie1931'],\n\n\t// Whitepoint reference values with observer/illuminant\n\t// http://en.wikipedia.org/wiki/Standard_illuminant\n\twhitepoint: {\n\t\t//1931 2°\n\t\t2: {\n\t\t\t//incadescent\n\t\t\tA: [109.85, 100, 35.585],\n\t\t\t// B:[],\n\t\t\tC: [98.074, 100, 118.232],\n\t\t\tD50: [96.422, 100, 82.521],\n\t\t\tD55: [95.682, 100, 92.149],\n\t\t\t//daylight\n\t\t\tD65: [95.045592705167, 100, 108.9057750759878],\n\t\t\tD75: [94.972, 100, 122.638],\n\t\t\t//flourescent\n\t\t\t// F1: [],\n\t\t\tF2: [99.187, 100, 67.395],\n\t\t\t// F3: [],\n\t\t\t// F4: [],\n\t\t\t// F5: [],\n\t\t\t// F6:[],\n\t\t\tF7: [95.044, 100, 108.755],\n\t\t\t// F8: [],\n\t\t\t// F9: [],\n\t\t\t// F10: [],\n\t\t\tF11: [100.966, 100, 64.370],\n\t\t\t// F12: [],\n\t\t\tE: [100, 100, 100]\n\t\t},\n\n\t\t//1964  10°\n\t\t10: {\n\t\t\t//incadescent\n\t\t\tA: [111.144, 100, 35.200],\n\t\t\tC: [97.285, 100, 116.145],\n\t\t\tD50: [96.720, 100, 81.427],\n\t\t\tD55: [95.799, 100, 90.926],\n\t\t\t//daylight\n\t\t\tD65: [94.811, 100, 107.304],\n\t\t\tD75: [94.416, 100, 120.641],\n\t\t\t//flourescent\n\t\t\tF2: [103.280, 100, 69.026],\n\t\t\tF7: [95.792, 100, 107.687],\n\t\t\tF11: [103.866, 100, 65.627],\n\t\t\tE: [100, 100, 100]\n\t\t}\n\t}\n};\n\n\n/**\n * Top values are the whitepoint’s top values, default are D65\n */\nxyz.max = xyz.whitepoint[2].D65;\n\n\n/**\n * Transform xyz to rgb\n *\n * @param {Array<number>} _xyz Array of xyz values\n * @param {Array<number>} white Whitepoint reference\n * @return {Array<number>} RGB values\n */\nxyz.rgb = function (_xyz, white) {\n\t// FIXME: make sure we have to divide like this. Probably we have to replace matrix as well then\n\twhite = white || xyz.whitepoint[2].E;\n\n\tvar x = _xyz[0] / white[0],\n\t\ty = _xyz[1] / white[1],\n\t\tz = _xyz[2] / white[2],\n\t\tr, g, b;\n\n\t// assume sRGB\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\tr = (x * 3.240969941904521) + (y * -1.537383177570093) + (z * -0.498610760293);\n\tg = (x * -0.96924363628087) + (y * 1.87596750150772) + (z * 0.041555057407175);\n\tb = (x * 0.055630079696993) + (y * -0.20397695888897) + (z * 1.056971514242878);\n\n\tr = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r = (r * 12.92);\n\n\tg = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g = (g * 12.92);\n\n\tb = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b = (b * 12.92);\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n}\n\n\n\n/**\n * RGB to XYZ\n *\n * @param {Array<number>} rgb RGB channels\n *\n * @return {Array<number>} XYZ channels\n */\nrgb.xyz = function (rgb, white) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.41239079926595) + (g * 0.35758433938387) + (b * 0.18048078840183);\n\tvar y = (r * 0.21263900587151) + (g * 0.71516867876775) + (b * 0.072192315360733);\n\tvar z = (r * 0.019330818715591) + (g * 0.11919477979462) + (b * 0.95053215224966);\n\n\twhite = white || xyz.whitepoint[2].E;\n\n\treturn [x * white[0], y * white[1], z * white[2]];\n};\n\n\n\nexport default xyz;\n","/**\n * CIE LUV (C'est la vie)\n *\n * @module color-space/luv\n */\nimport xyz from './xyz.js';\n\nvar luv = {\n\tname: 'luv',\n\t//NOTE: luv has no rigidly defined limits\n\t//easyrgb fails to get proper coords\n\t//boronine states no rigid limits\n\t//colorMine refers this ones:\n\tmin: [0, -134, -140],\n\tmax: [100, 224, 122],\n\tchannel: ['lightness', 'u', 'v'],\n\talias: ['LUV', 'cieluv', 'cie1976'],\n\n\txyz: function (arg, i, o) {\n\t\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\t\tl = arg[0], u = arg[1], v = arg[2];\n\n\t\tif (l === 0) return [0, 0, 0];\n\n\t\t//get constants\n\t\t//var e = 0.008856451679035631; //(6/29)^3\n\t\tvar k = 0.0011070564598794539; //(3/29)^3\n\n\t\t//get illuminant/observer\n\t\ti = i || 'D65';\n\t\to = o || 2;\n\n\t\txn = xyz.whitepoint[o][i][0];\n\t\tyn = xyz.whitepoint[o][i][1];\n\t\tzn = xyz.whitepoint[o][i][2];\n\n\t\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\t\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\t\t// un = 0.19783000664283;\n\t\t// vn = 0.46831999493879;\n\n\n\t\t_u = u / (13 * l) + un || 0;\n\t\t_v = v / (13 * l) + vn || 0;\n\n\t\ty = l > 8 ? yn * Math.pow((l + 16) / 116, 3) : yn * l * k;\n\n\t\t//wikipedia method\n\t\tx = y * 9 * _u / (4 * _v) || 0;\n\t\tz = y * (12 - 3 * _u - 20 * _v) / (4 * _v) || 0;\n\n\t\t//boronine method\n\t\t//https://github.com/boronine/husl/blob/master/husl.coffee#L201\n\t\t// x = 0 - (9 * y * _u) / ((_u - 4) * _v - _u * _v);\n\t\t// z = (9 * y - (15 * _v * y) - (_v * x)) / (3 * _v);\n\n\t\treturn [x, y, z];\n\t}\n};\n\nexport default (luv);\n\n// http://www.brucelindbloom.com/index.html?Equations.html\n// https://github.com/boronine/husl/blob/master/husl.coffee\n//i - illuminant\n//o - observer\nxyz.luv = function (arg, i, o) {\n\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\n\t//get constants\n\tvar e = 0.008856451679035631; //(6/29)^3\n\tvar k = 903.2962962962961; //(29/3)^3\n\n\t//get illuminant/observer coords\n\ti = i || 'D65';\n\to = o || 2;\n\n\txn = xyz.whitepoint[o][i][0];\n\tyn = xyz.whitepoint[o][i][1];\n\tzn = xyz.whitepoint[o][i][2];\n\n\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\n\n\tx = arg[0], y = arg[1], z = arg[2];\n\n\n\t_u = (4 * x) / (x + (15 * y) + (3 * z)) || 0;\n\t_v = (9 * y) / (x + (15 * y) + (3 * z)) || 0;\n\n\tvar yr = y / yn;\n\n\tl = yr <= e ? k * yr : 116 * Math.pow(yr, 1 / 3) - 16;\n\n\tu = 13 * l * (_u - un);\n\tv = 13 * l * (_v - vn);\n\n\treturn [l, u, v];\n};\n","/**\n * Cylindrical CIE LUV\n *\n * @module color-space/lchuv\n */\nimport luv from './luv.js';\nimport xyz from './xyz.js';\n\n// cylindrical luv\nvar lchuv = {\n\tname: 'lchuv',\n\tchannel: ['lightness', 'chroma', 'hue'],\n\talias: ['LCHuv', 'cielchuv'],\n\tmin: [0, 0, 0],\n\tmax: [100, 100, 360],\n\n\tluv: function (luv) {\n\t\tvar l = luv[0],\n\t\t\tc = luv[1],\n\t\t\th = luv[2],\n\t\t\tu, v, hr;\n\n\t\thr = h / 360 * 2 * Math.PI;\n\t\tu = c * Math.cos(hr);\n\t\tv = c * Math.sin(hr);\n\t\treturn [l, u, v];\n\t},\n\n\txyz: function (arg) {\n\t\treturn luv.xyz(lchuv.luv(arg));\n\t}\n};\n\nexport default (lchuv);\n\nluv.lchuv = function (luv) {\n\tvar l = luv[0], u = luv[1], v = luv[2];\n\n\tvar c = Math.sqrt(u * u + v * v);\n\tvar hr = Math.atan2(v, u);\n\tvar h = hr * 360 / 2 / Math.PI;\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\treturn [l, c, h]\n};\n\nxyz.lchuv = function (arg) {\n\treturn luv.lchuv(xyz.luv(arg));\n};\n","/**\n * @module ol/color\n */\nimport parseRgba from 'color-rgba';\nimport lchuv from 'color-space/lchuv.js';\nimport rgb from 'color-space/rgb.js';\nimport xyz from 'color-space/xyz.js';\nimport {clamp} from './math.js';\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n/**\n * Color to indicate that no color should be rendered. This is meant to be used for per-reference\n * comparisons only.\n * @type {Color}\n */\nexport const NO_COLOR = [NaN, NaN, NaN, 0];\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  }\n  return toString(color);\n}\n\n/**\n * @type {number}\n */\nconst MAX_CACHE_SIZE = 1024;\n\n/**\n * We maintain a small cache of parsed strings.  Whenever the cache grows too large,\n * we delete an arbitrary set of the entries.\n *\n * @type {Object<string, Color>}\n */\nconst cache = {};\n\n/**\n * @type {number}\n */\nlet cacheSize = 0;\n\n/**\n * @param {Color} color A color that may or may not have an alpha channel.\n * @return {Color} The input color with an alpha channel.  If the input color has\n * an alpha channel, the input color will be returned unchanged.  Otherwise, a new\n * array will be returned with the input color and an alpha channel of 1.\n */\nexport function withAlpha(color) {\n  if (color.length === 4) {\n    return color;\n  }\n  const output = color.slice();\n  output[3] = 1;\n  return output;\n}\n\n/**\n * @param {Color} color RGBA color.\n * @return {Color} LCHuv color with alpha.\n */\nexport function rgbaToLcha(color) {\n  const output = xyz.lchuv(rgb.xyz(color));\n  output[3] = color[3];\n  return output;\n}\n\n/**\n * @param {Color} color LCHuv color with alpha.\n * @return {Color} RGBA color.\n */\nexport function lchaToRgba(color) {\n  const output = xyz.rgb(lchuv.xyz(color));\n  output[3] = color[3];\n  return output;\n}\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport function fromString(s) {\n  if (s === 'none') {\n    return NO_COLOR;\n  }\n  if (cache.hasOwnProperty(s)) {\n    return cache[s];\n  }\n  if (cacheSize >= MAX_CACHE_SIZE) {\n    let i = 0;\n    for (const key in cache) {\n      if ((i++ & 3) === 0) {\n        delete cache[key];\n        --cacheSize;\n      }\n    }\n  }\n\n  const color = parseRgba(s);\n  if (color.length !== 4) {\n    throw new Error('failed to parse \"' + s + '\" as color');\n  }\n  for (const c of color) {\n    if (isNaN(c)) {\n      throw new Error('failed to parse \"' + s + '\" as color');\n    }\n  }\n  normalize(color);\n  cache[s] = color;\n  ++cacheSize;\n  return color;\n}\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  }\n  return fromString(color);\n}\n\n/**\n * Exported for the tests.\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : Math.round(color[3] * 1000) / 1000;\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n  try {\n    fromString(s);\n    return true;\n  } catch {\n    return false;\n  }\n}\n","/** @module  color-rgba */\nimport parse from 'color-parse'\nimport rgb from 'color-space/rgb.js'\nimport hsl from 'color-space/hsl.js'\n\nexport default function rgba(color) {\n\t// template literals\n\tif (Array.isArray(color) && color.raw) color = String.raw(...arguments)\n\tif (color instanceof Number) color = +color\n\n\tvar values, i, l\n\n\t//attempt to parse non-array arguments\n\tvar parsed = parse(color)\n\n\tif (!parsed.space) return []\n\n\tconst min = parsed.space[0] === 'h' ? hsl.min : rgb.min\n\tconst max = parsed.space[0] === 'h' ? hsl.max : rgb.max\n\n\tvalues = Array(3)\n\tvalues[0] = Math.min(Math.max(parsed.values[0], min[0]), max[0])\n\tvalues[1] = Math.min(Math.max(parsed.values[1], min[1]), max[1])\n\tvalues[2] = Math.min(Math.max(parsed.values[2], min[2]), max[2])\n\n\tif (parsed.space[0] === 'h') {\n\t\tvalues = hsl.rgb(values)\n\t}\n\n\tvalues.push(Math.min(Math.max(parsed.alpha, 0), 1))\n\n\treturn values\n}\n","import {WORKER_OFFSCREEN_CANVAS} from './has.js';\n\n/**\n * @module ol/dom\n */\n\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [width] Canvas width.\n * @param {number} [height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\n  let canvas;\n  if (canvasPool && canvasPool.length) {\n    canvas = /** @type {HTMLCanvasElement} */ (canvasPool.shift());\n  } else if (WORKER_OFFSCREEN_CANVAS) {\n    canvas = new OffscreenCanvas(width || 300, height || 300);\n  } else {\n    canvas = document.createElement('canvas');\n  }\n  if (width) {\n    canvas.width = width;\n  }\n  if (height) {\n    canvas.height = height;\n  }\n  //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n  return /** @type {CanvasRenderingContext2D} */ (\n    canvas.getContext('2d', settings)\n  );\n}\n\n/** @type {CanvasRenderingContext2D} */\nlet sharedCanvasContext;\n\n/**\n * @return {CanvasRenderingContext2D} Shared canvas context.\n */\nexport function getSharedCanvasContext2D() {\n  if (!sharedCanvasContext) {\n    sharedCanvasContext = createCanvasContext2D(1, 1);\n  }\n  return sharedCanvasContext;\n}\n\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n  const canvas = context.canvas;\n  canvas.width = 1;\n  canvas.height = 1;\n  context.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.lastChild.remove();\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/has\n */\n\nconst ua =\n  typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.includes('firefox');\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.includes('safari') && !ua.includes('chrom');\n\n/**\n * https://bugs.webkit.org/show_bug.cgi?id=237906\n * @type {boolean}\n */\nexport const SAFARI_BUG_237906 =\n  SAFARI &&\n  (ua.includes('version/15.4') ||\n    /cpu (os|iphone os) 15_4 like mac os x/.test(ua));\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.includes('webkit') && !ua.includes('edge');\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.includes('macintosh');\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO =\n  typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport const WORKER_OFFSCREEN_CANVAS =\n  typeof WorkerGlobalScope !== 'undefined' &&\n  typeof OffscreenCanvas !== 'undefined' &&\n  self instanceof WorkerGlobalScope; //eslint-disable-line\n\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport const IMAGE_DECODE =\n  typeof Image !== 'undefined' && Image.prototype.decode;\n\n/**\n * createImageBitmap() is supported.\n * @type {boolean}\n */\nexport const CREATE_IMAGE_BITMAP = typeof createImageBitmap === 'function';\n\n/**\n * @type {boolean}\n */\nexport const PASSIVE_EVENT_LISTENERS = (function () {\n  let passive = false;\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive = true;\n      },\n    });\n\n    // @ts-ignore Ignore invalid event type '_'\n    window.addEventListener('_', null, options);\n    // @ts-ignore Ignore invalid event type '_'\n    window.removeEventListener('_', null, options);\n  } catch {\n    // passive not supported\n  }\n  return passive;\n})();\n"],"names":["baseHues","hsl","t1","t2","t3","rgb","val","h","s","l","i","r","g","b","min","Math","max","delta","xyz","_xyz","white","x","y","z","arg","o","_u","_v","u","v","xn","yn","zn","k","yr","lchuv","luv","hr","c","NO_COLOR","NaN","asString","color","cache","cacheSize","withAlpha","output","rgbaToLcha","lchaToRgba","fromString","key","Array","String","arguments","Number","values","parsed","cstr","m","space","parts","alpha","base","size","parseInt","dims","name","parseFloat","undefined","value","Error","isNaN","normalize","asArray","sharedCanvasContext","createCanvasContext2D","width","height","canvasPool","settings","canvas","OffscreenCanvas","document","getSharedCanvasContext2D","releaseCanvas","context","outerWidth","element","style","getComputedStyle","outerHeight","replaceNode","newNode","oldNode","parent","removeChildren","node","replaceChildren","children","oldChildren","oldChild","newChild","ua","navigator","FIREFOX","SAFARI","SAFARI_BUG_237906","WEBKIT","MAC","DEVICE_PIXEL_RATIO","devicePixelRatio","WORKER_OFFSCREEN_CANVAS","WorkerGlobalScope","self","IMAGE_DECODE","Image","CREATE_IMAGE_BITMAP","createImageBitmap","PASSIVE_EVENT_LISTENERS","passive","options","Object","window"],"mappings":"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"}