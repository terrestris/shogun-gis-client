{"version":3,"file":"3577.5e1300c6d6bff472.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/ImageState.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-parse/index.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/rgb.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/hsl.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/xyz.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/luv.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-space/lchuv.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/color.js","webpack://@terrestris/shogun-gis-client/./node_modules/color-rgba/index.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/dom.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/has.js"],"sourcesContent":["/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module color-parse\n */\nimport names from 'color-name'\n\nexport default parse\n\n/**\n * Base hues\n * http://dev.w3.org/csswg/css-color/#typedef-named-hue\n */\n//FIXME: use external hue detector\nvar baseHues = {\n\tred: 0,\n\torange: 60,\n\tyellow: 120,\n\tgreen: 180,\n\tblue: 240,\n\tpurple: 300\n}\n\n/**\n * Parse color from the string passed\n *\n * @return {Object} A space indicator `space`, an array `values` and `alpha`\n */\nfunction parse(cstr) {\n\tvar m, parts = [], alpha = 1, space\n\n\t//numeric case\n\tif (typeof cstr === 'number') {\n\t\treturn { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\t}\n\tif (typeof cstr === 'number') return { space: 'rgb', values: [cstr >>> 16, (cstr & 0x00ff00) >>> 8, cstr & 0x0000ff], alpha: 1 }\n\n\tcstr = String(cstr).toLowerCase();\n\n\t//keyword\n\tif (names[cstr]) {\n\t\tparts = names[cstr].slice()\n\t\tspace = 'rgb'\n\t}\n\n\t//reserved words\n\telse if (cstr === 'transparent') {\n\t\talpha = 0\n\t\tspace = 'rgb'\n\t\tparts = [0, 0, 0]\n\t}\n\n\t//hex\n\telse if (cstr[0] === '#') {\n\t\tvar base = cstr.slice(1)\n\t\tvar size = base.length\n\t\tvar isShort = size <= 4\n\t\talpha = 1\n\n\t\tif (isShort) {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[0], 16),\n\t\t\t\tparseInt(base[1] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[2], 16)\n\t\t\t]\n\t\t\tif (size === 4) {\n\t\t\t\talpha = parseInt(base[3] + base[3], 16) / 255\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tparts = [\n\t\t\t\tparseInt(base[0] + base[1], 16),\n\t\t\t\tparseInt(base[2] + base[3], 16),\n\t\t\t\tparseInt(base[4] + base[5], 16)\n\t\t\t]\n\t\t\tif (size === 8) {\n\t\t\t\talpha = parseInt(base[6] + base[7], 16) / 255\n\t\t\t}\n\t\t}\n\n\t\tif (!parts[0]) parts[0] = 0\n\t\tif (!parts[1]) parts[1] = 0\n\t\tif (!parts[2]) parts[2] = 0\n\n\t\tspace = 'rgb'\n\t}\n\n\t// color space\n\telse if (m = /^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\\s*\\(([^\\)]*)\\)/.exec(cstr)) {\n\t\tvar name = m[1]\n\t\tspace = name.replace(/a$/, '')\n\t\tvar dims = space === 'cmyk' ? 4 : space === 'gray' ? 1 : 3\n\t\tparts = m[2].trim().split(/\\s*[,\\/]\\s*|\\s+/)\n\n\t\t// color(srgb-linear x x x) -> srgb-linear(x x x)\n\t\tif (space === 'color') space = parts.shift()\n\n\t\tparts = parts.map(function (x, i) {\n\t\t\t//<percentage>\n\t\t\tif (x[x.length - 1] === '%') {\n\t\t\t\tx = parseFloat(x) / 100\n\t\t\t\t// alpha -> 0..1\n\t\t\t\tif (i === 3) return x\n\t\t\t\t// rgb -> 0..255\n\t\t\t\tif (space === 'rgb') return x * 255\n\t\t\t\t// hsl, hwb H -> 0..100\n\t\t\t\tif (space[0] === 'h') return x * 100\n\t\t\t\t// lch, lab L -> 0..100\n\t\t\t\tif (space[0] === 'l' && !i) return x * 100\n\t\t\t\t// lab A B -> -125..125\n\t\t\t\tif (space === 'lab') return x * 125\n\t\t\t\t// lch C -> 0..150, H -> 0..360\n\t\t\t\tif (space === 'lch') return i < 2 ? x * 150 : x * 360\n\t\t\t\t// oklch/oklab L -> 0..1\n\t\t\t\tif (space[0] === 'o' && !i) return x\n\t\t\t\t// oklab A B -> -0.4..0.4\n\t\t\t\tif (space === 'oklab') return x * 0.4\n\t\t\t\t// oklch C -> 0..0.4, H -> 0..360\n\t\t\t\tif (space === 'oklch') return i < 2 ? x * 0.4 : x * 360\n\t\t\t\t// color(xxx) -> 0..1\n\t\t\t\treturn x\n\t\t\t}\n\n\t\t\t//hue\n\t\t\tif (space[i] === 'h' || (i === 2 && space[space.length - 1] === 'h')) {\n\t\t\t\t//<base-hue>\n\t\t\t\tif (baseHues[x] !== undefined) return baseHues[x]\n\t\t\t\t//<deg>\n\t\t\t\tif (x.endsWith('deg')) return parseFloat(x)\n\t\t\t\t//<turn>\n\t\t\t\tif (x.endsWith('turn')) return parseFloat(x) * 360\n\t\t\t\tif (x.endsWith('grad')) return parseFloat(x) * 360 / 400\n\t\t\t\tif (x.endsWith('rad')) return parseFloat(x) * 180 / Math.PI\n\t\t\t}\n\t\t\tif (x === 'none') return 0\n\t\t\treturn parseFloat(x)\n\t\t});\n\n\t\talpha = parts.length > dims ? parts.pop() : 1\n\t}\n\n\t//named channels case\n\telse if (/[0-9](?:\\s|\\/|,)/.test(cstr)) {\n\t\tparts = cstr.match(/([0-9]+)/g).map(function (value) {\n\t\t\treturn parseFloat(value)\n\t\t})\n\n\t\tspace = cstr.match(/([a-z])/ig)?.join('')?.toLowerCase() || 'rgb'\n\t}\n\n\treturn {\n\t\tspace,\n\t\tvalues: parts,\n\t\talpha\n\t}\n}\n","/**\n * RGB space.\n *\n * @module  color-space/rgb\n */\nconst rgb = {\n\tname: 'rgb',\n\tmin: [0, 0, 0],\n\tmax: [255, 255, 255],\n\tchannel: ['red', 'green', 'blue'],\n\talias: ['RGB']\n};\n\nexport default rgb;\n","/**\n * @module color-space/hsl\n */\nimport rgb from './rgb.js';\n\nvar hsl = {\n\tname: 'hsl',\n\tmin: [0, 0, 0],\n\tmax: [360, 100, 100],\n\tchannel: ['hue', 'saturation', 'lightness'],\n\talias: ['HSL'],\n\n\trgb: function (hsl) {\n\t\tvar h = hsl[0] / 360, s = hsl[1] / 100, l = hsl[2] / 100, t1, t2, t3, rgb, val, i = 0;\n\n\t\tif (s === 0) return val = l * 255, [val, val, val];\n\n\t\tt2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\tt1 = 2 * l - t2;\n\n\t\trgb = [0, 0, 0];\n\t\tfor (; i < 3;) {\n\t\t\tt3 = h + 1 / 3 * - (i - 1);\n\t\t\tt3 < 0 ? t3++ : t3 > 1 && t3--;\n\t\t\tval = 6 * t3 < 1 ? t1 + (t2 - t1) * 6 * t3 :\n\t\t\t\t2 * t3 < 1 ? t2 :\n\t\t\t\t\t3 * t3 < 2 ? t1 + (t2 - t1) * (2 / 3 - t3) * 6 :\n\t\t\t\t\t\tt1;\n\t\t\trgb[i++] = val * 255;\n\t\t}\n\n\t\treturn rgb;\n\t}\n};\n\nexport default (hsl);\n\n\n//extend rgb\nrgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255,\n\t\tmin = Math.min(r, g, b),\n\t\tmax = Math.max(r, g, b),\n\t\tdelta = max - min,\n\t\th, s, l;\n\n\tif (max === min) {\n\t\th = 0;\n\t}\n\telse if (r === max) {\n\t\th = (g - b) / delta;\n\t}\n\telse if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t}\n\telse if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\t//FIXME h is possibly undefined\n\t//@ts-ignore\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t}\n\telse if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t}\n\telse {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n","/**\n * CIE XYZ\n *\n * @module  color-space/xyz\n */\nimport rgb from './rgb.js';\n\nconst xyz = {\n\tname: 'xyz',\n\tmin: [0, 0, 0],\n\tchannel: ['X', 'Y', 'Z'],\n\talias: ['XYZ', 'ciexyz', 'cie1931'],\n\n\t// Whitepoint reference values with observer/illuminant\n\t// http://en.wikipedia.org/wiki/Standard_illuminant\n\twhitepoint: {\n\t\t//1931 2°\n\t\t2: {\n\t\t\t//incadescent\n\t\t\tA: [109.85, 100, 35.585],\n\t\t\t// B:[],\n\t\t\tC: [98.074, 100, 118.232],\n\t\t\tD50: [96.422, 100, 82.521],\n\t\t\tD55: [95.682, 100, 92.149],\n\t\t\t//daylight\n\t\t\tD65: [95.045592705167, 100, 108.9057750759878],\n\t\t\tD75: [94.972, 100, 122.638],\n\t\t\t//flourescent\n\t\t\t// F1: [],\n\t\t\tF2: [99.187, 100, 67.395],\n\t\t\t// F3: [],\n\t\t\t// F4: [],\n\t\t\t// F5: [],\n\t\t\t// F6:[],\n\t\t\tF7: [95.044, 100, 108.755],\n\t\t\t// F8: [],\n\t\t\t// F9: [],\n\t\t\t// F10: [],\n\t\t\tF11: [100.966, 100, 64.370],\n\t\t\t// F12: [],\n\t\t\tE: [100, 100, 100]\n\t\t},\n\n\t\t//1964  10°\n\t\t10: {\n\t\t\t//incadescent\n\t\t\tA: [111.144, 100, 35.200],\n\t\t\tC: [97.285, 100, 116.145],\n\t\t\tD50: [96.720, 100, 81.427],\n\t\t\tD55: [95.799, 100, 90.926],\n\t\t\t//daylight\n\t\t\tD65: [94.811, 100, 107.304],\n\t\t\tD75: [94.416, 100, 120.641],\n\t\t\t//flourescent\n\t\t\tF2: [103.280, 100, 69.026],\n\t\t\tF7: [95.792, 100, 107.687],\n\t\t\tF11: [103.866, 100, 65.627],\n\t\t\tE: [100, 100, 100]\n\t\t}\n\t}\n};\n\n\n/**\n * Top values are the whitepoint’s top values, default are D65\n */\nxyz.max = xyz.whitepoint[2].D65;\n\n\n/**\n * Transform xyz to rgb\n *\n * @param {Array<number>} _xyz Array of xyz values\n * @param {Array<number>} white Whitepoint reference\n * @return {Array<number>} RGB values\n */\nxyz.rgb = function (_xyz, white) {\n\t// FIXME: make sure we have to divide like this. Probably we have to replace matrix as well then\n\twhite = white || xyz.whitepoint[2].E;\n\n\tvar x = _xyz[0] / white[0],\n\t\ty = _xyz[1] / white[1],\n\t\tz = _xyz[2] / white[2],\n\t\tr, g, b;\n\n\t// assume sRGB\n\t// http://www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html\n\tr = (x * 3.240969941904521) + (y * -1.537383177570093) + (z * -0.498610760293);\n\tg = (x * -0.96924363628087) + (y * 1.87596750150772) + (z * 0.041555057407175);\n\tb = (x * 0.055630079696993) + (y * -0.20397695888897) + (z * 1.056971514242878);\n\n\tr = r > 0.0031308 ? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r = (r * 12.92);\n\n\tg = g > 0.0031308 ? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g = (g * 12.92);\n\n\tb = b > 0.0031308 ? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b = (b * 12.92);\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n}\n\n\n\n/**\n * RGB to XYZ\n *\n * @param {Array<number>} rgb RGB channels\n *\n * @return {Array<number>} XYZ channels\n */\nrgb.xyz = function (rgb, white) {\n\tvar r = rgb[0] / 255,\n\t\tg = rgb[1] / 255,\n\t\tb = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.41239079926595) + (g * 0.35758433938387) + (b * 0.18048078840183);\n\tvar y = (r * 0.21263900587151) + (g * 0.71516867876775) + (b * 0.072192315360733);\n\tvar z = (r * 0.019330818715591) + (g * 0.11919477979462) + (b * 0.95053215224966);\n\n\twhite = white || xyz.whitepoint[2].E;\n\n\treturn [x * white[0], y * white[1], z * white[2]];\n};\n\n\n\nexport default xyz;\n","/**\n * CIE LUV (C'est la vie)\n *\n * @module color-space/luv\n */\nimport xyz from './xyz.js';\n\nvar luv = {\n\tname: 'luv',\n\t//NOTE: luv has no rigidly defined limits\n\t//easyrgb fails to get proper coords\n\t//boronine states no rigid limits\n\t//colorMine refers this ones:\n\tmin: [0, -134, -140],\n\tmax: [100, 224, 122],\n\tchannel: ['lightness', 'u', 'v'],\n\talias: ['LUV', 'cieluv', 'cie1976'],\n\n\txyz: function (arg, i, o) {\n\t\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\t\tl = arg[0], u = arg[1], v = arg[2];\n\n\t\tif (l === 0) return [0, 0, 0];\n\n\t\t//get constants\n\t\t//var e = 0.008856451679035631; //(6/29)^3\n\t\tvar k = 0.0011070564598794539; //(3/29)^3\n\n\t\t//get illuminant/observer\n\t\ti = i || 'D65';\n\t\to = o || 2;\n\n\t\txn = xyz.whitepoint[o][i][0];\n\t\tyn = xyz.whitepoint[o][i][1];\n\t\tzn = xyz.whitepoint[o][i][2];\n\n\t\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\t\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\t\t// un = 0.19783000664283;\n\t\t// vn = 0.46831999493879;\n\n\n\t\t_u = u / (13 * l) + un || 0;\n\t\t_v = v / (13 * l) + vn || 0;\n\n\t\ty = l > 8 ? yn * Math.pow((l + 16) / 116, 3) : yn * l * k;\n\n\t\t//wikipedia method\n\t\tx = y * 9 * _u / (4 * _v) || 0;\n\t\tz = y * (12 - 3 * _u - 20 * _v) / (4 * _v) || 0;\n\n\t\t//boronine method\n\t\t//https://github.com/boronine/husl/blob/master/husl.coffee#L201\n\t\t// x = 0 - (9 * y * _u) / ((_u - 4) * _v - _u * _v);\n\t\t// z = (9 * y - (15 * _v * y) - (_v * x)) / (3 * _v);\n\n\t\treturn [x, y, z];\n\t}\n};\n\nexport default (luv);\n\n// http://www.brucelindbloom.com/index.html?Equations.html\n// https://github.com/boronine/husl/blob/master/husl.coffee\n//i - illuminant\n//o - observer\nxyz.luv = function (arg, i, o) {\n\tvar _u, _v, l, u, v, x, y, z, xn, yn, zn, un, vn;\n\n\t//get constants\n\tvar e = 0.008856451679035631; //(6/29)^3\n\tvar k = 903.2962962962961; //(29/3)^3\n\n\t//get illuminant/observer coords\n\ti = i || 'D65';\n\to = o || 2;\n\n\txn = xyz.whitepoint[o][i][0];\n\tyn = xyz.whitepoint[o][i][1];\n\tzn = xyz.whitepoint[o][i][2];\n\n\tun = (4 * xn) / (xn + (15 * yn) + (3 * zn));\n\tvn = (9 * yn) / (xn + (15 * yn) + (3 * zn));\n\n\n\tx = arg[0], y = arg[1], z = arg[2];\n\n\n\t_u = (4 * x) / (x + (15 * y) + (3 * z)) || 0;\n\t_v = (9 * y) / (x + (15 * y) + (3 * z)) || 0;\n\n\tvar yr = y / yn;\n\n\tl = yr <= e ? k * yr : 116 * Math.pow(yr, 1 / 3) - 16;\n\n\tu = 13 * l * (_u - un);\n\tv = 13 * l * (_v - vn);\n\n\treturn [l, u, v];\n};\n","/**\n * Cylindrical CIE LUV\n *\n * @module color-space/lchuv\n */\nimport luv from './luv.js';\nimport xyz from './xyz.js';\n\n// cylindrical luv\nvar lchuv = {\n\tname: 'lchuv',\n\tchannel: ['lightness', 'chroma', 'hue'],\n\talias: ['LCHuv', 'cielchuv'],\n\tmin: [0, 0, 0],\n\tmax: [100, 100, 360],\n\n\tluv: function (luv) {\n\t\tvar l = luv[0],\n\t\t\tc = luv[1],\n\t\t\th = luv[2],\n\t\t\tu, v, hr;\n\n\t\thr = h / 360 * 2 * Math.PI;\n\t\tu = c * Math.cos(hr);\n\t\tv = c * Math.sin(hr);\n\t\treturn [l, u, v];\n\t},\n\n\txyz: function (arg) {\n\t\treturn luv.xyz(lchuv.luv(arg));\n\t}\n};\n\nexport default (lchuv);\n\nluv.lchuv = function (luv) {\n\tvar l = luv[0], u = luv[1], v = luv[2];\n\n\tvar c = Math.sqrt(u * u + v * v);\n\tvar hr = Math.atan2(v, u);\n\tvar h = hr * 360 / 2 / Math.PI;\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\treturn [l, c, h]\n};\n\nxyz.lchuv = function (arg) {\n\treturn luv.lchuv(xyz.luv(arg));\n};\n","/**\n * @module ol/color\n */\nimport parseRgba from 'color-rgba';\nimport lchuv from 'color-space/lchuv.js';\nimport rgb from 'color-space/rgb.js';\nimport xyz from 'color-space/xyz.js';\nimport {clamp} from './math.js';\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n/**\n * Color to indicate that no color should be rendered. This is meant to be used for per-reference\n * comparisons only.\n * @type {Color}\n */\nexport const NO_COLOR = [NaN, NaN, NaN, 0];\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  }\n  return toString(color);\n}\n\n/**\n * @type {number}\n */\nconst MAX_CACHE_SIZE = 1024;\n\n/**\n * We maintain a small cache of parsed strings.  Whenever the cache grows too large,\n * we delete an arbitrary set of the entries.\n *\n * @type {Object<string, Color>}\n */\nconst cache = {};\n\n/**\n * @type {number}\n */\nlet cacheSize = 0;\n\n/**\n * @param {Color} color A color that may or may not have an alpha channel.\n * @return {Color} The input color with an alpha channel.  If the input color has\n * an alpha channel, the input color will be returned unchanged.  Otherwise, a new\n * array will be returned with the input color and an alpha channel of 1.\n */\nexport function withAlpha(color) {\n  if (color.length === 4) {\n    return color;\n  }\n  const output = color.slice();\n  output[3] = 1;\n  return output;\n}\n\n/**\n * @param {Color} color RGBA color.\n * @return {Color} LCHuv color with alpha.\n */\nexport function rgbaToLcha(color) {\n  const output = xyz.lchuv(rgb.xyz(color));\n  output[3] = color[3];\n  return output;\n}\n\n/**\n * @param {Color} color LCHuv color with alpha.\n * @return {Color} RGBA color.\n */\nexport function lchaToRgba(color) {\n  const output = xyz.rgb(lchuv.xyz(color));\n  output[3] = color[3];\n  return output;\n}\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport function fromString(s) {\n  if (s === 'none') {\n    return NO_COLOR;\n  }\n  if (cache.hasOwnProperty(s)) {\n    return cache[s];\n  }\n  if (cacheSize >= MAX_CACHE_SIZE) {\n    let i = 0;\n    for (const key in cache) {\n      if ((i++ & 3) === 0) {\n        delete cache[key];\n        --cacheSize;\n      }\n    }\n  }\n\n  const color = parseRgba(s);\n  if (color.length !== 4) {\n    throw new Error('failed to parse \"' + s + '\" as color');\n  }\n  for (const c of color) {\n    if (isNaN(c)) {\n      throw new Error('failed to parse \"' + s + '\" as color');\n    }\n  }\n  normalize(color);\n  cache[s] = color;\n  ++cacheSize;\n  return color;\n}\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  }\n  return fromString(color);\n}\n\n/**\n * Exported for the tests.\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : Math.round(color[3] * 1000) / 1000;\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n  try {\n    fromString(s);\n    return true;\n  } catch {\n    return false;\n  }\n}\n","/** @module  color-rgba */\nimport parse from 'color-parse'\nimport rgb from 'color-space/rgb.js'\nimport hsl from 'color-space/hsl.js'\n\nexport default function rgba(color) {\n\t// template literals\n\tif (Array.isArray(color) && color.raw) color = String.raw(...arguments)\n\tif (color instanceof Number) color = +color\n\n\tvar values, i, l\n\n\t//attempt to parse non-array arguments\n\tvar parsed = parse(color)\n\n\tif (!parsed.space) return []\n\n\tconst min = parsed.space[0] === 'h' ? hsl.min : rgb.min\n\tconst max = parsed.space[0] === 'h' ? hsl.max : rgb.max\n\n\tvalues = Array(3)\n\tvalues[0] = Math.min(Math.max(parsed.values[0], min[0]), max[0])\n\tvalues[1] = Math.min(Math.max(parsed.values[1], min[1]), max[1])\n\tvalues[2] = Math.min(Math.max(parsed.values[2], min[2]), max[2])\n\n\tif (parsed.space[0] === 'h') {\n\t\tvalues = hsl.rgb(values)\n\t}\n\n\tvalues.push(Math.min(Math.max(parsed.alpha, 0), 1))\n\n\treturn values\n}\n","import {WORKER_OFFSCREEN_CANVAS} from './has.js';\n\n/**\n * @module ol/dom\n */\n\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [width] Canvas width.\n * @param {number} [height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\n  let canvas;\n  if (canvasPool && canvasPool.length) {\n    canvas = /** @type {HTMLCanvasElement} */ (canvasPool.shift());\n  } else if (WORKER_OFFSCREEN_CANVAS) {\n    canvas = new OffscreenCanvas(width || 300, height || 300);\n  } else {\n    canvas = document.createElement('canvas');\n  }\n  if (width) {\n    canvas.width = width;\n  }\n  if (height) {\n    canvas.height = height;\n  }\n  //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n  return /** @type {CanvasRenderingContext2D} */ (\n    canvas.getContext('2d', settings)\n  );\n}\n\n/** @type {CanvasRenderingContext2D} */\nlet sharedCanvasContext;\n\n/**\n * @return {CanvasRenderingContext2D} Shared canvas context.\n */\nexport function getSharedCanvasContext2D() {\n  if (!sharedCanvasContext) {\n    sharedCanvasContext = createCanvasContext2D(1, 1);\n  }\n  return sharedCanvasContext;\n}\n\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n  const canvas = context.canvas;\n  canvas.width = 1;\n  canvas.height = 1;\n  context.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.lastChild.remove();\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/has\n */\n\nconst ua =\n  typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.includes('firefox');\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.includes('safari') && !ua.includes('chrom');\n\n/**\n * https://bugs.webkit.org/show_bug.cgi?id=237906\n * @type {boolean}\n */\nexport const SAFARI_BUG_237906 =\n  SAFARI &&\n  (ua.includes('version/15.4') ||\n    /cpu (os|iphone os) 15_4 like mac os x/.test(ua));\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.includes('webkit') && !ua.includes('edge');\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.includes('macintosh');\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO =\n  typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport const WORKER_OFFSCREEN_CANVAS =\n  typeof WorkerGlobalScope !== 'undefined' &&\n  typeof OffscreenCanvas !== 'undefined' &&\n  self instanceof WorkerGlobalScope; //eslint-disable-line\n\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport const IMAGE_DECODE =\n  typeof Image !== 'undefined' && Image.prototype.decode;\n\n/**\n * createImageBitmap() is supported.\n * @type {boolean}\n */\nexport const CREATE_IMAGE_BITMAP = typeof createImageBitmap === 'function';\n\n/**\n * @type {boolean}\n */\nexport const PASSIVE_EVENT_LISTENERS = (function () {\n  let passive = false;\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive = true;\n      },\n    });\n\n    // @ts-ignore Ignore invalid event type '_'\n    window.addEventListener('_', null, options);\n    // @ts-ignore Ignore invalid event type '_'\n    window.removeEventListener('_', null, options);\n  } catch {\n    // passive not supported\n  }\n  return passive;\n})();\n"],"names":["t","r","Math","u","l","NaN","Array","String","arguments","Number","parseInt","parseFloat","Error","isNaN","OffscreenCanvas","document","getComputedStyle","n","navigator","devicePixelRatio","WorkerGlobalScope","self","Image","createImageBitmap","Object","window"],"mappings":"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"}