"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["2573"],{61626:function(e,t,r){r.r(t),r.d(t,{writeFilter:function(){return em},default:function(){return ec}});var i=r("20038"),o=r("96529"),n=r("44538"),s=r("25642"),a=r("13987"),p=r("15265"),l=r("9341"),u=r("21915"),g=r("79682"),m=r("5374"),h=r("13067"),w=r("18334");let c=o.J+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",d={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class y extends o.Z{constructor(e){super(e=e||{}),this.surface_=void 0!==e.surface&&e.surface,this.curve_=void 0!==e.curve&&e.curve,this.multiCurve_=void 0===e.multiCurve||e.multiCurve,this.multiSurface_=void 0===e.multiSurface||e.multiSurface,this.schemaLocation=e.schemaLocation?e.schemaLocation:c,this.hasZ=void 0!==e.hasZ&&e.hasZ}readMultiCurve(e,t){let r=(0,l.O)([],this.MULTICURVE_PARSERS,e,t,this);if(r)return new s.default(r)}readFlatCurveRing(e,t){let r=(0,l.O)([],this.MULTICURVE_PARSERS,e,t,this),i=[];for(let e=0,t=r.length;e<t;++e)(0,g.l7)(i,r[e].getFlatCoordinates());return i}readMultiSurface(e,t){let r=(0,l.O)([],this.MULTISURFACE_PARSERS,e,t,this);if(r)return new a.default(r)}curveMemberParser(e,t){(0,l.T3)(this.CURVEMEMBER_PARSERS,e,t,this)}surfaceMemberParser(e,t){(0,l.T3)(this.SURFACEMEMBER_PARSERS,e,t,this)}readPatch(e,t){return(0,l.O)([null],this.PATCHES_PARSERS,e,t,this)}readSegment(e,t){return(0,l.O)([],this.SEGMENTS_PARSERS,e,t,this)}readPolygonPatch(e,t){return(0,l.O)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}readLineStringSegment(e,t){return(0,l.O)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}interiorParser(e,t){let r=(0,l.O)(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}exteriorParser(e,t){let r=(0,l.O)(void 0,this.RING_PARSERS,e,t,this);r&&(t[t.length-1][0]=r)}readSurface(e,t){let r=(0,l.O)([null],this.SURFACE_PARSERS,e,t,this);if(r&&r[0]){let e,t;let i=r[0],o=[i.length];for(e=1,t=r.length;e<t;++e)(0,g.l7)(i,r[e]),o.push(i.length);return new p.default(i,"XYZ",o)}}readCurve(e,t){let r=(0,l.O)([null],this.CURVE_PARSERS,e,t,this);if(r)return new n.default(r,"XYZ")}readEnvelope(e,t){let r=(0,l.O)([null],this.ENVELOPE_PARSERS,e,t,this);return(0,u.createOrUpdate)(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,t){let r,i=(0,l.Ve)(e,!1),o=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,n=[];for(;r=o.exec(i);)n.push(parseFloat(r[1])),i=i.substr(r[0].length);if(""!==i)return;let s=t[0].srsName;if("neu"===(s?(0,m.get)(s).getAxisOrientation():"enu"))for(let e=0,t=n.length;e<t;e+=3){let t=n[e],r=n[e+1];n[e]=r,n[e+1]=t}let a=n.length;if(2==a&&n.push(0),0!==a)return n}readFlatPosList(e,t){let r,i,o;let n=(0,l.Ve)(e,!1).replace(/^\s*|\s*$/g,""),s=t[0],a=s.srsName,p=s.srsDimension,u=a?(0,m.get)(a).getAxisOrientation():"enu",g=n.split(/\s+/),w=2;e.getAttribute("srsDimension")?w=(0,h._E)(e.getAttribute("srsDimension")):e.getAttribute("dimension")?w=(0,h._E)(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?w=(0,h._E)(e.parentNode.getAttribute("srsDimension")):p&&(w=(0,h._E)(p));let c=u.startsWith("en"),d=[];for(let e=0,t=g.length;e<t;e+=w)r=parseFloat(g[e]),i=parseFloat(g[e+1]),o=3===w?parseFloat(g[e+2]):0,c?d.push(r,i,o):d.push(i,r,o);return d}writePos_(e,t,r){let i=r[r.length-1],o=i.hasZ;e.setAttribute("srsDimension",o?"3":"2");let n=i.srsName,s=n?(0,m.get)(n).getAxisOrientation():"enu",a=t.getCoordinates(),p=s.startsWith("en")?a[0]+" "+a[1]:a[1]+" "+a[0];o&&(p+=" "+(a[2]||0)),(0,h.bZ)(e,p)}getCoords_(e,t,r){let i=(t?(0,m.get)(t).getAxisOrientation():"enu").startsWith("en")?e[0]+" "+e[1]:e[1]+" "+e[0];return r&&(i+=" "+(e[2]||0)),i}writePosList_(e,t,r){let i;let o=r[r.length-1],n=o.hasZ;e.setAttribute("srsDimension",n?"3":"2");let s=o.srsName,a=t.getCoordinates(),p=a.length,l=Array(p);for(let e=0;e<p;++e)i=a[e],l[e]=this.getCoords_(i,s,n);(0,h.bZ)(e,l.join(" "))}writePoint(e,t,r){let i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i);let o=(0,l.c)(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,t,r)}writeEnvelope(e,t,r){let i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i);let o=[t[0]+" "+t[1],t[2]+" "+t[3]];(0,l.ZL)({node:e},this.ENVELOPE_SERIALIZERS,l.hg,o,r,["lowerCorner","upperCorner"],this)}writeLinearRing(e,t,r){let i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i);let o=(0,l.c)(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,r)}RING_NODE_FACTORY_(e,t,r){let i=t[t.length-1],o=i.node,n=i.exteriorWritten;return void 0===n&&(i.exteriorWritten=!0),(0,l.c)(o.namespaceURI,void 0!==n?"interior":"exterior")}writeSurfaceOrPolygon(e,t,r){let i=r[r.length-1],o=i.hasZ,n=i.srsName;if("PolygonPatch"!==e.nodeName&&n&&e.setAttribute("srsName",n),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){let i=t.getLinearRings();(0,l.ZL)({node:e,hasZ:o,srsName:n},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,i,r,void 0,this)}else if("Surface"===e.nodeName){let i=(0,l.c)(e.namespaceURI,"patches");e.appendChild(i),this.writeSurfacePatches_(i,t,r)}}writeCurveOrLineString(e,t,r){let i=r[r.length-1].srsName;if("LineStringSegment"!==e.nodeName&&i&&e.setAttribute("srsName",i),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){let i=(0,l.c)(e.namespaceURI,"posList");e.appendChild(i),this.writePosList_(i,t,r)}else if("Curve"===e.nodeName){let i=(0,l.c)(e.namespaceURI,"segments");e.appendChild(i),this.writeCurveSegments_(i,t,r)}}writeMultiSurfaceOrPolygon(e,t,r){let i=r[r.length-1],o=i.hasZ,n=i.srsName,s=i.surface;n&&e.setAttribute("srsName",n);let a=t.getPolygons();(0,l.ZL)({node:e,hasZ:o,srsName:n,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)}writeMultiPoint(e,t,r){let i=r[r.length-1],o=i.srsName,n=i.hasZ;o&&e.setAttribute("srsName",o);let s=t.getPoints();(0,l.ZL)({node:e,hasZ:n,srsName:o},this.POINTMEMBER_SERIALIZERS,(0,l.G3)("pointMember"),s,r,void 0,this)}writeMultiCurveOrLineString(e,t,r){let i=r[r.length-1],o=i.hasZ,n=i.srsName,s=i.curve;n&&e.setAttribute("srsName",n);let a=t.getLineStrings();(0,l.ZL)({node:e,hasZ:o,srsName:n,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)}writeRing(e,t,r){let i=(0,l.c)(e.namespaceURI,"LinearRing");e.appendChild(i),this.writeLinearRing(i,t,r)}writeSurfaceOrPolygonMember(e,t,r){let i=this.GEOMETRY_NODE_FACTORY_(t,r);i&&(e.appendChild(i),this.writeSurfaceOrPolygon(i,t,r))}writePointMember(e,t,r){let i=(0,l.c)(e.namespaceURI,"Point");e.appendChild(i),this.writePoint(i,t,r)}writeLineStringOrCurveMember(e,t,r){let i=this.GEOMETRY_NODE_FACTORY_(t,r);i&&(e.appendChild(i),this.writeCurveOrLineString(i,t,r))}writeSurfacePatches_(e,t,r){let i=(0,l.c)(e.namespaceURI,"PolygonPatch");e.appendChild(i),this.writeSurfaceOrPolygon(i,t,r)}writeCurveSegments_(e,t,r){let i=(0,l.c)(e.namespaceURI,"LineStringSegment");e.appendChild(i),this.writeCurveOrLineString(i,t,r)}writeGeometryElement(e,t,r){let i;let o=r[r.length-1],n=Object.assign({},o);n.node=e,i=Array.isArray(t)?(0,w.lj)(t,o):(0,w.fI)(t,!0,o),(0,l.ZL)(n,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[i],r,void 0,this)}writeFeatureElement(e,t,r){let i=t.getId();i&&e.setAttribute("fid",i);let o=r[r.length-1],n=o.featureNS,s=t.getGeometryName();!o.serializers&&(o.serializers={},o.serializers[n]={});let a=[],p=[];if(t.hasProperties()){let e=t.getProperties();for(let t in e){let r=e[t];null!=r&&(a.push(t),p.push(r),t==s||"function"==typeof r.getSimplifiedGeometry?!(t in o.serializers[n])&&(o.serializers[n][t]=(0,l.A4)(this.writeGeometryElement,this)):!(t in o.serializers[n])&&(o.serializers[n][t]=(0,l.A4)(h.bZ)))}}let u=Object.assign({},o);u.node=e,(0,l.ZL)(u,o.serializers,(0,l.G3)(void 0,n),p,r,a)}writeFeatureMembers_(e,t,r){let i=r[r.length-1],o=i.featureType,n=i.featureNS,s={};s[n]={},s[n][o]=(0,l.A4)(this.writeFeatureElement,this);let a=Object.assign({},i);a.node=e,(0,l.ZL)(a,s,(0,l.G3)(o,n),t,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,r){let i=t[t.length-1].node;return(0,l.c)(this.namespace,d[i.nodeName])}GEOMETRY_NODE_FACTORY_(e,t,r){let i=t[t.length-1],o=i.multiSurface,n=i.surface,s=i.curve,a=i.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===n?r="Surface":"LineString"===r&&!0===s?r="Curve":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),(0,l.c)(this.namespace,r)}writeGeometryNode(e,t){t=this.adaptOptions(t);let r=(0,l.c)(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(i,t),this.writeGeometryElement(r,e,[i]),r}writeFeaturesNode(e,t){t=this.adaptOptions(t);let r=(0,l.c)(this.namespace,"featureMembers");r.setAttributeNS(l.fJ,"xsi:schemaLocation",this.schemaLocation);let i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(i,t),this.writeFeatureMembers_(r,e,[i]),r}}y.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:(0,l.z)(y.prototype.readFlatPos),posList:(0,l.z)(y.prototype.readFlatPosList),coordinates:(0,l.z)(i.default.prototype.readFlatCoordinates)}},y.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:y.prototype.interiorParser,exterior:y.prototype.exteriorParser}},y.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,l.z)(o.Z.prototype.readPoint),MultiPoint:(0,l.z)(o.Z.prototype.readMultiPoint),LineString:(0,l.z)(o.Z.prototype.readLineString),MultiLineString:(0,l.z)(o.Z.prototype.readMultiLineString),LinearRing:(0,l.z)(o.Z.prototype.readLinearRing),Polygon:(0,l.z)(o.Z.prototype.readPolygon),MultiPolygon:(0,l.z)(o.Z.prototype.readMultiPolygon),Surface:(0,l.z)(y.prototype.readSurface),MultiSurface:(0,l.z)(y.prototype.readMultiSurface),Curve:(0,l.z)(y.prototype.readCurve),MultiCurve:(0,l.z)(y.prototype.readMultiCurve),Envelope:(0,l.z)(y.prototype.readEnvelope)}},y.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:(0,l.Ei)(y.prototype.curveMemberParser),curveMembers:(0,l.Ei)(y.prototype.curveMemberParser)}},y.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:(0,l.Ei)(y.prototype.surfaceMemberParser),surfaceMembers:(0,l.Ei)(y.prototype.surfaceMemberParser)}},y.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:(0,l.Ei)(o.Z.prototype.readLineString),Curve:(0,l.Ei)(y.prototype.readCurve)}},y.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:(0,l.Ei)(o.Z.prototype.readPolygon),Surface:(0,l.Ei)(y.prototype.readSurface)}},y.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:(0,l.z)(y.prototype.readPatch)}},y.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:(0,l.z)(y.prototype.readSegment)}},y.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:(0,l.Ei)(y.prototype.readFlatPosList),upperCorner:(0,l.Ei)(y.prototype.readFlatPosList)}},y.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:(0,l.z)(y.prototype.readPolygonPatch)}},y.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:(0,l.pc)(y.prototype.readLineStringSegment)}},o.Z.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,l.z)(o.Z.prototype.readFlatLinearRing),Ring:(0,l.z)(y.prototype.readFlatCurveRing)}},y.prototype.writeFeatures,y.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:(0,l.A4)(y.prototype.writeRing),interior:(0,l.A4)(y.prototype.writeRing)}},y.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:(0,l.A4)(h.bZ),upperCorner:(0,l.A4)(h.bZ)}},y.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:(0,l.A4)(y.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,l.A4)(y.prototype.writeSurfaceOrPolygonMember)}},y.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:(0,l.A4)(y.prototype.writePointMember)}},y.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:(0,l.A4)(y.prototype.writeLineStringOrCurveMember),curveMember:(0,l.A4)(y.prototype.writeLineStringOrCurveMember)}},y.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:(0,l.A4)(y.prototype.writeCurveOrLineString),MultiCurve:(0,l.A4)(y.prototype.writeMultiCurveOrLineString),Point:(0,l.A4)(y.prototype.writePoint),MultiPoint:(0,l.A4)(y.prototype.writeMultiPoint),LineString:(0,l.A4)(y.prototype.writeCurveOrLineString),MultiLineString:(0,l.A4)(y.prototype.writeMultiCurveOrLineString),LinearRing:(0,l.A4)(y.prototype.writeLinearRing),Polygon:(0,l.A4)(y.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,l.A4)(y.prototype.writeMultiSurfaceOrPolygon),Surface:(0,l.A4)(y.prototype.writeSurfaceOrPolygon),MultiSurface:(0,l.A4)(y.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,l.A4)(y.prototype.writeEnvelope)}};var E=y;class S extends E{constructor(e){super(e=e||{}),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,t,r){let i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(e,t,r)}}S.prototype.namespace="http://www.opengis.net/gml/3.2",S.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:(0,l.z)(E.prototype.readFlatPos),posList:(0,l.z)(E.prototype.readFlatPosList),coordinates:(0,l.z)(i.default.prototype.readFlatCoordinates)}},S.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:E.prototype.interiorParser,exterior:E.prototype.exteriorParser}},S.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:(0,l.z)(o.Z.prototype.readPoint),MultiPoint:(0,l.z)(o.Z.prototype.readMultiPoint),LineString:(0,l.z)(o.Z.prototype.readLineString),MultiLineString:(0,l.z)(o.Z.prototype.readMultiLineString),LinearRing:(0,l.z)(o.Z.prototype.readLinearRing),Polygon:(0,l.z)(o.Z.prototype.readPolygon),MultiPolygon:(0,l.z)(o.Z.prototype.readMultiPolygon),Surface:(0,l.z)(S.prototype.readSurface),MultiSurface:(0,l.z)(E.prototype.readMultiSurface),Curve:(0,l.z)(S.prototype.readCurve),MultiCurve:(0,l.z)(E.prototype.readMultiCurve),Envelope:(0,l.z)(S.prototype.readEnvelope)}},S.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:(0,l.Ei)(E.prototype.curveMemberParser),curveMembers:(0,l.Ei)(E.prototype.curveMemberParser)}},S.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:(0,l.Ei)(E.prototype.surfaceMemberParser),surfaceMembers:(0,l.Ei)(E.prototype.surfaceMemberParser)}},S.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:(0,l.Ei)(o.Z.prototype.readLineString),Curve:(0,l.Ei)(E.prototype.readCurve)}},S.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:(0,l.Ei)(o.Z.prototype.readPolygon),Surface:(0,l.Ei)(E.prototype.readSurface)}},S.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:(0,l.z)(E.prototype.readPatch)}},S.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:(0,l.z)(E.prototype.readSegment)}},S.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:(0,l.Ei)(E.prototype.readFlatPosList),upperCorner:(0,l.Ei)(E.prototype.readFlatPosList)}},S.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:(0,l.z)(E.prototype.readPolygonPatch)}},S.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:(0,l.pc)(E.prototype.readLineStringSegment)}},S.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:(0,l.Ei)(o.Z.prototype.pointMemberParser),pointMembers:(0,l.Ei)(o.Z.prototype.pointMemberParser)}},S.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:(0,l.Ei)(o.Z.prototype.lineStringMemberParser),lineStringMembers:(0,l.Ei)(o.Z.prototype.lineStringMemberParser)}},S.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:(0,l.Ei)(o.Z.prototype.polygonMemberParser),polygonMembers:(0,l.Ei)(o.Z.prototype.polygonMemberParser)}},S.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:(0,l.Ei)(o.Z.prototype.readFlatCoordinatesFromNode)}},S.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:(0,l.Ei)(o.Z.prototype.readLineString)}},S.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:(0,l.Ei)(o.Z.prototype.readPolygon)}},S.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:(0,l.z)(o.Z.prototype.readFlatLinearRing),Ring:(0,l.z)(S.prototype.readFlatCurveRing)}},S.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:(0,l.A4)(E.prototype.writeRing),interior:(0,l.A4)(E.prototype.writeRing)}},S.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:(0,l.A4)(h.bZ),upperCorner:(0,l.A4)(h.bZ)}},S.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:(0,l.A4)(E.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,l.A4)(E.prototype.writeSurfaceOrPolygonMember)}},S.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:(0,l.A4)(E.prototype.writePointMember)}},S.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:(0,l.A4)(E.prototype.writeLineStringOrCurveMember),curveMember:(0,l.A4)(E.prototype.writeLineStringOrCurveMember)}},S.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:(0,l.A4)(E.prototype.writeCurveOrLineString),MultiCurve:(0,l.A4)(E.prototype.writeMultiCurveOrLineString),Point:(0,l.A4)(S.prototype.writePoint),MultiPoint:(0,l.A4)(E.prototype.writeMultiPoint),LineString:(0,l.A4)(E.prototype.writeCurveOrLineString),MultiLineString:(0,l.A4)(E.prototype.writeMultiCurveOrLineString),LinearRing:(0,l.A4)(E.prototype.writeLinearRing),Polygon:(0,l.A4)(E.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,l.A4)(E.prototype.writeMultiSurfaceOrPolygon),Surface:(0,l.A4)(E.prototype.writeSurfaceOrPolygon),MultiSurface:(0,l.A4)(E.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,l.A4)(E.prototype.writeEnvelope)}};var f=r("2231"),R=r("21164"),A=r("38906");let P={"http://www.opengis.net/gml":{boundedBy:(0,l.Pr)(o.Z.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:(0,l.Ei)(o.Z.prototype.readFeaturesInternal)}},N={"http://www.opengis.net/wfs":{totalInserted:(0,l.Pr)(h.$L),totalUpdated:(0,l.Pr)(h.$L),totalDeleted:(0,l.Pr)(h.$L)},"http://www.opengis.net/wfs/2.0":{totalInserted:(0,l.Pr)(h.$L),totalUpdated:(0,l.Pr)(h.$L),totalDeleted:(0,l.Pr)(h.$L)}},M={"http://www.opengis.net/wfs":{TransactionSummary:(0,l.Pr)(x,"transactionSummary"),InsertResults:(0,l.Pr)(B,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:(0,l.Pr)(x,"transactionSummary"),InsertResults:(0,l.Pr)(B,"insertIds")}},L={"http://www.opengis.net/wfs":{PropertyName:(0,l.A4)(h.bZ)},"http://www.opengis.net/wfs/2.0":{PropertyName:(0,l.A4)(h.bZ)}},b={"http://www.opengis.net/wfs":{Insert:(0,l.A4)(Y),Update:(0,l.A4)(q),Delete:(0,l.A4)(W),Property:(0,l.A4)(J),Native:(0,l.A4)(k)},"http://www.opengis.net/wfs/2.0":{Insert:(0,l.A4)(Y),Update:(0,l.A4)(q),Delete:(0,l.A4)(W),Property:(0,l.A4)(J),Native:(0,l.A4)(k)}},v="feature",C="http://www.w3.org/2000/xmlns/",_={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},O={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},I={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},T={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},F={"2.0.0":S,"1.1.0":E,"1.0.0":i.default};class Z extends f.Z{constructor(e){super(),e=e||{},this.version_=e.version?e.version:"1.1.0",this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new F[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:T[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,t){let r;let i={node:e};Object.assign(i,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(i,this.getReadOptions(e,t||{}));let o=[i];r="2.0.0"===this.version_?P:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let n=(0,l.O)([],r,e,o,this.gmlFormat_);return!n&&(n=[]),n}readTransactionResponse(e){if(!!e){if("string"==typeof e){let t=(0,l.Qc)(e);return this.readTransactionResponseFromDocument(t)}return(0,l.qk)(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(!!e){if("string"==typeof e){let t=(0,l.Qc)(e);return this.readFeatureCollectionMetadataFromDocument(t)}return(0,l.qk)(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}readFeatureCollectionMetadataFromNode(e){let t={},r=(0,h._E)(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=r,(0,l.O)(t,P,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}readTransactionResponseFromNode(e){return(0,l.O)({},M,e,[])}writeGetFeature(e){let t=(0,l.c)(O[this.version_],"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version",this.version_),e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),void 0!==e.maxFeatures&&t.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&t.setAttribute("resultType",e.resultType),void 0!==e.startIndex&&t.setAttribute("startIndex",String(e.startIndex)),void 0!==e.count&&t.setAttribute("count",String(e.count)),void 0!==e.viewParams&&t.setAttribute("viewParams",e.viewParams),t.setAttributeNS(l.fJ,"xsi:schemaLocation",this.schemaLocation_);let r={node:t};if(Object.assign(r,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),(0,A.h)(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),"string"==typeof e.featureTypes[0]){let i=e.filter;e.bbox&&((0,A.h)(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,i)),Object.assign(r,{geometryName:e.geometryName,filter:i}),eh(t,e.featureTypes,[r])}else e.featureTypes.forEach(i=>{let o=this.combineBboxAndFilter(i.geometryName,i.bbox,e.srsName,e.filter);Object.assign(r,{geometryName:i.geometryName,filter:o}),eh(t,[i.name],[r])});return t}combineBboxAndFilter(e,t,r,i){let o=(0,R.bbox)(e,t,r);return i?(0,R.and)(i,o):o}writeTransaction(e,t,r,i){let o;let n=[],s=i.version?i.version:this.version_,a=(0,l.c)(O[s],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",s),i&&(o=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle)),a.setAttributeNS(l.fJ,"xsi:schemaLocation",T[s]);let p=function(e,t,r,i){let o;let n=i.featurePrefix?i.featurePrefix:v;return"1.0.0"===r?o=2:"1.1.0"===r?o=3:"2.0.0"===r&&(o=3.2),Object.assign({node:e},{version:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:n,gmlVersion:o,hasZ:i.hasZ,srsName:i.srsName},t)}(a,o,s,i);return e&&G("Insert",e,n,p),t&&G("Update",t,n,p),r&&G("Delete",r,n,p),i.nativeElements&&G("Native",i.nativeElements,n,p),a}readProjectionFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(!(0===t.childNodes.length||1===t.childNodes.length&&3===t.firstChild.nodeType)){let e=[{}];return this.gmlFormat_.readGeometryElement(t,e),(0,m.get)(e.pop().srsName)}}return null}}function G(e,t,r,i){(0,l.ZL)(i,b,(0,l.G3)(e),t,r)}function x(e,t){return(0,l.O)({},N,e,t)}let U={"http://www.opengis.net/ogc":{FeatureId:(0,l.Ei)(function(e,t){return e.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:(0,l.Ei)(function(e,t){return e.getAttribute("fid")})}};function z(e,t){(0,l.T3)(U,e,t)}let D={"http://www.opengis.net/wfs":{Feature:z},"http://www.opengis.net/wfs/2.0":{Feature:z}};function B(e,t){return(0,l.O)([],D,e,t)}function Y(e,t,r){let o=r[r.length-1],n=o.featureType,s=o.featureNS,a=o.gmlVersion,p=(0,l.c)(s,n);e.appendChild(p),2===a?i.default.prototype.writeFeatureElement(p,t,r):3===a?E.prototype.writeFeatureElement(p,t,r):S.prototype.writeFeatureElement(p,t,r)}function V(e,t,r){let i=_[r[r.length-1].version],o=(0,l.c)(i,"Filter"),n=(0,l.c)(i,"FeatureId");o.appendChild(n),n.setAttribute("fid",t),e.appendChild(o)}function j(e,t){let r=(e=e||v)+":";return t.startsWith(r)?t:r+t}function W(e,t,r){let i=r[r.length-1];(0,A.h)(void 0!==t.getId(),"Features must have an id set");let o=i.featureType,n=i.featurePrefix,s=i.featureNS,a=j(n,o);e.setAttribute("typeName",a),e.setAttributeNS(C,"xmlns:"+n,s);let p=t.getId();void 0!==p&&V(e,p,r)}function q(e,t,r){let i=r[r.length-1];(0,A.h)(void 0!==t.getId(),"Features must have an id set");let o=i.version,n=i.featureType,s=i.featurePrefix,a=i.featureNS,p=j(s,n),u=t.getGeometryName();e.setAttribute("typeName",p),e.setAttributeNS(C,"xmlns:"+s,a);let g=t.getId();if(void 0!==g){let n=t.getKeys(),s=[];for(let e=0,r=n.length;e<r;e++){let r=t.get(n[e]);if(void 0!==r){let t=n[e];r&&"function"==typeof r.getSimplifiedGeometry&&(t=u),s.push({name:t,value:r})}}(0,l.ZL)({version:o,gmlVersion:i.gmlVersion,node:e,hasZ:i.hasZ,srsName:i.srsName},b,(0,l.G3)("Property"),s,r),V(e,g,r)}}function J(e,t,r){let o=r[r.length-1],n=o.version,s=O[n],a=(0,l.c)(s,"2.0.0"===n?"ValueReference":"Name"),p=o.gmlVersion;if(e.appendChild(a),(0,h.bZ)(a,t.name),void 0!==t.value&&null!==t.value){let o=(0,l.c)(s,"Value");e.appendChild(o),t.value&&"function"==typeof t.value.getSimplifiedGeometry?2===p?i.default.prototype.writeGeometryElement(o,t.value,r):3===p?E.prototype.writeGeometryElement(o,t.value,r):S.prototype.writeGeometryElement(o,t.value,r):(0,h.bZ)(o,t.value)}}function k(e,t,r){t.vendorId&&e.setAttribute("vendorId",t.vendorId),void 0!==t.safeToIgnore&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),void 0!==t.value&&(0,h.bZ)(e,t.value)}let $={"http://www.opengis.net/wfs":{Query:(0,l.A4)(Q)},"http://www.opengis.net/wfs/2.0":{Query:(0,l.A4)(Q)},"http://www.opengis.net/ogc":{During:(0,l.A4)(et),And:(0,l.A4)(er),Or:(0,l.A4)(er),Not:(0,l.A4)(ei),BBOX:(0,l.A4)(H),Contains:(0,l.A4)(K),Intersects:(0,l.A4)(K),Within:(0,l.A4)(K),DWithin:(0,l.A4)(ee),PropertyIsEqualTo:(0,l.A4)(eo),PropertyIsNotEqualTo:(0,l.A4)(eo),PropertyIsLessThan:(0,l.A4)(eo),PropertyIsLessThanOrEqualTo:(0,l.A4)(eo),PropertyIsGreaterThan:(0,l.A4)(eo),PropertyIsGreaterThanOrEqualTo:(0,l.A4)(eo),PropertyIsNull:(0,l.A4)(en),PropertyIsBetween:(0,l.A4)(es),PropertyIsLike:(0,l.A4)(ea)},"http://www.opengis.net/fes/2.0":{During:(0,l.A4)(et),And:(0,l.A4)(er),Or:(0,l.A4)(er),Not:(0,l.A4)(ei),BBOX:(0,l.A4)(H),Contains:(0,l.A4)(K),Disjoint:(0,l.A4)(K),Intersects:(0,l.A4)(K),ResourceId:(0,l.A4)(function(e,t,r){e.setAttribute("rid",t.rid)}),Within:(0,l.A4)(K),DWithin:(0,l.A4)(ee),PropertyIsEqualTo:(0,l.A4)(eo),PropertyIsNotEqualTo:(0,l.A4)(eo),PropertyIsLessThan:(0,l.A4)(eo),PropertyIsLessThanOrEqualTo:(0,l.A4)(eo),PropertyIsGreaterThan:(0,l.A4)(eo),PropertyIsGreaterThanOrEqualTo:(0,l.A4)(eo),PropertyIsNull:(0,l.A4)(en),PropertyIsBetween:(0,l.A4)(es),PropertyIsLike:(0,l.A4)(ea)}};function Q(e,t,r){let i,o;let n=r[r.length-1],s=n.version,a=n.featurePrefix,p=n.featureNS,u=n.propertyNames,g=n.srsName;i=a?j(a,t):t,o="2.0.0"===s?"typeNames":"typeName",e.setAttribute(o,i),g&&e.setAttribute("srsName",g),p&&e.setAttributeNS(C,"xmlns:"+a,p);let m=Object.assign({},n);m.node=e,(0,l.ZL)(m,L,(0,l.G3)("PropertyName"),u,r);let h=n.filter;if(h){let t=(0,l.c)(ew(s),"Filter");e.appendChild(t),X(t,h,r)}}function X(e,t,r){let i=r[r.length-1],o={node:e};Object.assign(o,{context:i}),(0,l.ZL)(o,$,(0,l.G3)(t.getTagName()),[t],r)}function H(e,t,r){let i=r[r.length-1],o=i.context.version;i.srsName=t.srsName;let n=F[o];eu(o,e,t.geometryName),n.prototype.writeGeometryElement(e,t.extent,r)}function K(e,t,r){let i=r[r.length-1],o=i.context.version;i.srsName=t.srsName;let n=F[o];eu(o,e,t.geometryName),n.prototype.writeGeometryElement(e,t.geometry,r)}function ee(e,t,r){let i=r[r.length-1].context.version;K(e,t,r);let o=(0,l.c)(ew(i),"Distance");(0,h.bZ)(o,t.distance.toString()),"2.0.0"===i?o.setAttribute("uom",t.unit):o.setAttribute("units",t.unit),e.appendChild(o)}function et(e,t,r){ep(I[r[r.length-1].context.version],"ValueReference",e,t.propertyName);let i=(0,l.c)(o.J,"TimePeriod");e.appendChild(i);let n=(0,l.c)(o.J,"begin");i.appendChild(n),eg(n,t.begin);let s=(0,l.c)(o.J,"end");i.appendChild(s),eg(s,t.end)}function er(e,t,r){let i=r[r.length-1].context,o={node:e};Object.assign(o,{context:i});let n=t.conditions;for(let e=0,t=n.length;e<t;++e){let t=n[e];(0,l.ZL)(o,$,(0,l.G3)(t.getTagName()),[t],r)}}function ei(e,t,r){let i=r[r.length-1].context,o={node:e};Object.assign(o,{context:i});let n=t.condition;(0,l.ZL)(o,$,(0,l.G3)(n.getTagName()),[n],r)}function eo(e,t,r){let i=r[r.length-1].context.version;void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),eu(i,e,t.propertyName),el(i,e,""+t.expression)}function en(e,t,r){eu(r[r.length-1].context.version,e,t.propertyName)}function es(e,t,r){let i=r[r.length-1].context.version,o=ew(i);eu(i,e,t.propertyName);let n=(0,l.c)(o,"LowerBoundary");e.appendChild(n),el(i,n,""+t.lowerBoundary);let s=(0,l.c)(o,"UpperBoundary");e.appendChild(s),el(i,s,""+t.upperBoundary)}function ea(e,t,r){let i=r[r.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),eu(i,e,t.propertyName),el(i,e,""+t.pattern)}function ep(e,t,r,i){let o=(0,l.c)(e,t);(0,h.bZ)(o,i),r.appendChild(o)}function el(e,t,r){ep(ew(e),"Literal",t,r)}function eu(e,t,r){"2.0.0"===e?ep(I[e],"ValueReference",t,r):ep(_[e],"PropertyName",t,r)}function eg(e,t){let r=(0,l.c)(o.J,"TimeInstant");e.appendChild(r);let i=(0,l.c)(o.J,"timePosition");r.appendChild(i),(0,h.bZ)(i,t)}function em(e,t){t=t||"1.1.0";let r=(0,l.c)(ew(t),"Filter"),i={node:r};return Object.assign(i,{version:t,filter:e}),X(r,e,[i]),r}function eh(e,t,r){let i=Object.assign({},r[r.length-1]);i.node=e,(0,l.ZL)(i,$,(0,l.G3)("Query"),t,r)}function ew(e){let t;return t="2.0.0"===e?I[e]:_[e]}var ec=Z}}]);
//# sourceMappingURL=2573.87106c102e849186.js.map