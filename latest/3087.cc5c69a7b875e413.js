"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["3087"],{91587:function(t,e,i){i.r(e);var r=i(21915),s=i(21882),o=i(5374),n=i(52209),l=i(79313),a=i(70701),h=i(78487),u=i(65952),g=i(49081);class p extends u.Z{constructor(t){let e=Object.assign({},(t=t||{}).params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,s){let l=(0,o.get)(i),a=this.getProjection()||l,h=this.getTileGrid();h||(h=this.getTileGridForProjection(a));let u=(0,o.transform)(t,l,a),p=(0,n.aA)(a,l,t,e),_=h.getZForResolution(p,this.zDirection),d=h.getResolution(_),c=h.getTileCoordForCoordAndZ(u,_);if(h.getResolutions().length<=c[0])return;let f=h.getTileCoordExtent(c,this.tmpExtent_),m=this.gutter_;0!==m&&(f=(0,r.buffer)(f,d*m,f));let E={QUERY_LAYERS:this.params_.LAYERS};Object.assign(E,(0,g.jt)(this.params_,"GetFeatureInfo"),s);let R=Math.floor((u[0]-f[0])/d),v=Math.floor((f[3]-u[1])/d);return E[this.v13_?"I":"X"]=R,E[this.v13_?"J":"Y"]=v,this.getRequestUrl_(c,f,1,a||l,E)}getLegendUrl(t,e){if(void 0===this.urls[0])return;let i={SERVICE:"WMS",VERSION:g.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){let t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){let e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return Object.assign(i,e),(0,h.B5)(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,o){let n;let l=this.urls;if(l){if(1==l.length)n=l[0];else{let e=(0,s.$W)((0,a.vp)(t),l.length);n=l[e]}return(0,g.Q4)(e,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,n,o,this.serverType_)}}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0,e=[];for(let i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){let t=this.params_.VERSION||g.eQ;this.v13_=(0,l.n)(t,"1.3")>=0}tileUrlFunction(t,e,i){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),s.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);let o=s.getResolution(t[0]),n=s.getTileCoordExtent(t,this.tmpExtent_),l=this.gutter_;0!==l&&(n=(0,r.buffer)(n,o*l,n));let a=Object.assign({},(0,g.jt)(this.params_,"GetMap"));return this.getRequestUrl_(t,n,e,i,a)}}e.default=p}}]);
//# sourceMappingURL=3087.cc5c69a7b875e413.js.map