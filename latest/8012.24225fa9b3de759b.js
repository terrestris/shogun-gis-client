"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["8012"],{20191:function(t,e,r){var n=r(69843),o=r.n(n),i=r(55482),s=r.n(i),a=r(93884);class l{static getLength(t,e,r=!0,n=6371008.8,o=6){let i=Math.pow(10,o);if(!r)return Math.round(t.getLength()*i)/i;{let r={projection:e.getView().getProjection().getCode(),radius:n};return(0,a.getLength)(t,r)}}static formatLength(t,e,r,n=!0){let o=Math.pow(10,r),i=l.getLength(t,e,n);return i>1e3?Math.round(i/1e3*o)/o+" km":i>1?Math.round(i*o)/o+" m":Math.round(1e3*i*o)/o+" mm"}static getArea(t,e,r=!0,n=6371008.8){if(!r)return t.getArea();{let r={projection:e.getView().getProjection().getCode(),radius:n};return(0,a.getArea)(t,r)}}static getAreaOfCircle(t,e){if(o()(e.getView().getProjection()))return NaN;if(!["radians","degrees"].includes(e.getView().getProjection().getUnits()))return Math.PI*Math.pow(t.getRadius(),2);{let e=t.getRadius(),r=2*Math.PI*40589753129677.44;return r*(1-Math.cos(e/6371008.8))}}static formatArea(t,e,r,n=!0){let o,i=Math.pow(10,r);return(o=t instanceof s()?l.getAreaOfCircle(t,e):l.getArea(t,e,n))>1e4?Math.round(o/1e6*i)/i+" km<sup>2</sup>":o>.01?Math.round(o*i)/i+" m<sup>2</sup>":Math.round(1e6*o*i)/i+" mm<sup>2</sup>"}static angle(t,e){let r=t[0]-e[0],n=Math.atan2(t[1]-e[1],r);return 180/Math.PI*n}static angle360(t,e){let r=l.angle(t,e);return r<0&&(r=360+r),r}static makeClockwise(t){return 360-t}static makeZeroDegreesAtNorth(t){let e=t+90;return e>360&&(e-=360),e}static formatAngle(t,e=2){let r=t.getCoordinates(),n=r.length;if(n<2)return"";let o=r[n-1],i=r[n-2],s=l.angle360(i,o);return s=l.makeZeroDegreesAtNorth(s),s=l.makeClockwise(s),`${s.toFixed(e)}\xb0`}}e.A=l},81851:function(t,e,r){r.d(e,{s:function(){return d}});var n=r(62193),o=r.n(n),i=r(69843),s=r.n(i),a=r(94092),l=r(99138),u=r.n(l),p=r(24910),c=r.n(p),h=r(49994),g=r.n(h),f=r(18635);class d{static getLink=(t,e=";",r=t=>t?.get("name"),n=t=>!s()(t)&&(t instanceof g()||t instanceof c())&&t.getVisible(),i=[])=>{let a=t.getView().getCenter()?.join(e)??"",l=t.getView().getZoom()?.toString()??"",u=t.getAllLayers(),p=u.filter(n).map(r).join(e),h=new URL(window.location.href);if(i.length>0){let t=[];u.forEach(e=>{let r={};i.forEach(t=>{s()(e.get(t))||(r[t]=e.get(t))}),o()(r)||t.push(r)});let e=JSON.stringify(t);h.searchParams.set("customLayerAttributes",e)}return h.searchParams.set("center",a),h.searchParams.set("zoom",l),h.searchParams.set("layers",p),h.href};static applyLink=(t,e=";",r=t=>t?.get("name"),n=t=>t instanceof g()||t instanceof c())=>{let o=new URL(window.location.href),i=o.searchParams.get("center"),s=o.searchParams.get("zoom"),l=o.searchParams.get("layers"),u=o.searchParams.get("customLayerAttributes"),p=f.A.getAllLayers(t);if(l){let o=l.split(e);p.filter(n).forEach(e=>{let n=o.includes(r(e));e.setVisible(n),n&&d.setParentsVisible(t,t.getLayerGroup().getLayers(),(0,a.getUid)(e))})}return(i&&t.getView().setCenter([parseFloat(i.split(e)[0]),parseFloat(i.split(e)[1])]),s&&t.getView().setZoom(parseInt(s,10)),u)?u:null};static setParentsVisible=(t,e,r)=>{e.forEach(e=>{e instanceof u()&&(f.A.getLayersByGroup(t,e).map(t=>(0,a.getUid)(t)).includes(r)&&e.setVisible(!0),d.setParentsVisible(t,e.getLayers(),r))})}}e.A=d},86644:function(t,e,r){r.d(e,{BY:function(){return u.A},s2:function(){return p.A},G5:function(){return c.G5},lb:function(){return c.lb}}),r(1882),r(69843),r(17936),r(30234),r(6273),r(51735),r(58980),r(15516),r(70038),r(37100);var n=()=>new DecompressionStream("deflate-raw");try{n(),async t=>{let e=n(),r=e.writable.getWriter(),o=e.readable.getReader(),i,s=[],a=0,l=0,u;for(r.write(t),r.close();!(u=await o.read()).done;)i=u.value,s.push(i),a+=i.length;return!s[1]&&i||(i=new Uint8Array(a),s.map(t=>(i.set(t,l),l+=t.length))),i}}catch{}new TextDecoder,i.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},i.prototype.parseZPoint=function(t){let e=this.parsePoint(t);return e.coordinates.push(t.getFloat64(16,!0)),e},i.prototype.parsePointArray=function(t,e,r){let n=[],o=0;for(;o<r;)n.push(this.parseCoord(t,e)),e+=16,o++;return n},i.prototype.parseZPointArray=function(t,e,r,n){let o=0;for(;o<r;)n[o].push(t.getFloat64(e,!0)),o++,e+=8;return n},i.prototype.parseArrayGroup=function(t,e,r,n,o){let i,s,a=[],l=0,u=0;for(;l<n;)l++,r+=4,i=u,(s=(u=l===n?o:t.getInt32(r,!0))-i)&&(a.push(this.parsePointArray(t,e,s)),e+=s<<4);return a},i.prototype.parseZArrayGroup=function(t,e,r,n){let o=0;for(;o<r;)n[o]=this.parseZPointArray(t,e,n[o].length,n[o]),e+=n[o].length<<3,o++;return n},i.prototype.parseMultiPoint=function(t){let e={},r=t.getInt32(32,!0);if(!r)return null;let n=this.parseCoord(t,0),o=this.parseCoord(t,16);return e.bbox=[n[0],n[1],o[0],o[1]],1===r?(e.type="Point",e.coordinates=this.parseCoord(t,36)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,36,r)),e},i.prototype.parseZMultiPoint=function(t){let e,r=this.parseMultiPoint(t);return r?"Point"===r.type?(r.coordinates.push(t.getFloat64(72,!0)),r):(e=r.coordinates.length,r.coordinates=this.parseZPointArray(t,52+(e<<4),e,r.coordinates),r):null},i.prototype.parsePolyline=function(t){let e,r={},n=t.getInt32(32,!0);if(!n)return null;let o=this.parseCoord(t,0),i=this.parseCoord(t,16);r.bbox=[o[0],o[1],i[0],i[1]];let s=t.getInt32(36,!0);return 1===n?(r.type="LineString",e=44,r.coordinates=this.parsePointArray(t,e,s)):(r.type="MultiLineString",e=40+(n<<2),r.coordinates=this.parseArrayGroup(t,e,40,n,s)),r},i.prototype.parseZPolyline=function(t){let e,r=this.parsePolyline(t);if(!r)return null;let n=r.coordinates.length;return"LineString"===r.type?(e=60+(n<<4),r.coordinates=this.parseZPointArray(t,e,n,r.coordinates)):(e=56+(r.coordinates.reduce(function(t,e){return t+e.length},0)<<4)+(n<<2),r.coordinates=this.parseZArrayGroup(t,e,n,r.coordinates)),r},i.prototype.polyFuncs=function(t){return t&&("LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates]):(t.coordinates=function(t){let e=[],r=[];for(let n of t){let t=function(t){let e,r,n=0,o=1,i=t.length,s=[t[0][0],t[0][1],t[0][0],t[0][1]];for(;o<i;)e=r||t[0],n+=((r=t[o])[0]-e[0])*(r[1]+e[1]),o++,r[0]<s[0]&&(s[0]=r[0]),r[1]<s[1]&&(s[1]=r[1]),r[0]>s[2]&&(s[2]=r[0]),r[1]>s[3]&&(s[3]=r[1]);return{ring:t,clockWise:n>0,bbox:s,children:[]}}(n);t.clockWise?e.push(t):r.push(t)}for(let t of r)for(let r of e)if(!(r.bbox[0]>t.bbox[0])&&!(r.bbox[1]>t.bbox[1])&&!(r.bbox[2]<t.bbox[2])&&!(r.bbox[3]<t.bbox[3])&&1){r.children.push(t.ring);break}let n=[];for(let t of e)n.push([t.ring].concat(t.children));return n}(t.coordinates),1===t.coordinates.length)?(t.type="Polygon",t.coordinates=t.coordinates[0]):t.type="MultiPolygon"),t},i.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},i.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};let o={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function i(t,e){if(!(this instanceof i))return new i(t,e);this.buffer=t,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}function s(t){return new Float64Array(t)}function a(t){return new Float64Array(t)}function l(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*=r,n*=n,Math.sqrt(r+n)}i.prototype.shpFuncs=function(t){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in o))throw Error(`I don't know shp type "${e}"`);this.parseFunc=this[o[e]],this.parseCoord=t?function(e,r){let n=[e.getFloat64(r,!0),e.getFloat64(r+8,!0)];return t.inverse(n)}:function(t,e){return[t.getFloat64(e,!0),t.getFloat64(e+8,!0)]}},i.prototype.getShpCode=function(){return this.parseHeader().shpCode},i.prototype.parseHeader=function(){let t=this.buffer;return{length:t.getInt32(24)<<1,version:t.getInt32(28,!0),shpCode:t.getInt32(32,!0),bbox:[t.getFloat64(36,!0),t.getFloat64(44,!0),t.getFloat64(52,!0),t.getFloat64(60,!0)]}},i.prototype.getRows=function(){let t,e=100,r=this.buffer.byteLength-8,n=[];for(;e<=r&&(t=this.getRow(e));)e+=8,e+=t.len,t.type?n.push(this.parseFunc(t.data)):n.push(null);return n},i.prototype.getRow=function(t){let e=this.buffer.getInt32(t),r=this.buffer.getInt32(t+4)<<1;return 0===r?{id:e,len:r,type:0}:t+r+8>this.buffer.byteLength?void 0:{id:e,len:r,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+t+12,r-4),type:this.buffer.getInt32(t+8,!0)}},new TextDecoder,r(66046),r(94934),r(1592),r(58346),r(81802),r(27436),s(4),s(8),s(12),s(16),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(8),s(8),s(8),s(4),s(8),s(8),s(8),s(12),s(192),s(192),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(8),s(8),s(8),s(8),s(8),s(8),s(8),s(8),s(8),s(4),s(4),s(4),s(8),s(16),s(16),s(16),s(32),s(32),s(48),s(64),s(1152),s(1152),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(4),s(24),s(24),s(24),s(24),s(24),s(24),s(24),s(24),s(24),s(24),s(1152),s(1152),s(1152),s(1152),s(1152),s(2304),s(2304),s(3456),s(5760),s(8),s(8),s(8),s(16),s(24),s(48),s(48),s(96),s(192),s(384),s(384),s(384),s(768),s(96),s(96),s(96),s(1152),a(4),a(8),a(12),a(16),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(8),a(8),a(8),a(4),a(8),a(8),a(8),a(12),a(192),a(192),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(8),a(8),a(8),a(8),a(8),a(8),a(8),a(8),a(8),a(4),a(4),a(4),a(8),a(16),a(16),a(16),a(32),a(32),a(48),a(64),a(1152),a(1152),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(4),a(24),a(24),a(24),a(24),a(24),a(24),a(24),a(24),a(24),a(24),a(1152),a(1152),a(1152),a(1152),a(1152),a(2304),a(2304),a(3456),a(5760),a(8),a(8),a(8),a(16),a(24),a(48),a(48),a(96),a(192),a(384),a(384),a(384),a(768),a(96),a(96),a(96),a(1152),(function(t,e,r,n){this.p=t,this.polylineEdge=e,this.polygonEdge=r,this.isHeadingIn=n,this.distanceFromPolylineEdgeStart=l(this.polylineEdge.p1.p,this.p),this.distanceFromPolygonEdgeStart=l(this.polygonEdge.p1.p,this.p),this.polygonEdge.intersectionPoints.push(this),this.polylineEdge.intersectionPoints.push(this),this.visitCount=0}).prototype.incrementVisitCount=function(){this.visitCount=this.visitCount+1},r(62659);var u=r(18635);r(20191);var p=r(81851);r(80903);var c=r(72251);r(34765),r(92123)},30126:function(t,e,r){r.d(e,{k:function(){return i}});var n=r(76395),o=r(73645);let i=()=>(0,n.useContext)(o.A);e.A=i}}]);
//# sourceMappingURL=8012.24225fa9b3de759b.js.map