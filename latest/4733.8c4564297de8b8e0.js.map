{"version":3,"file":"4733.8c4564297de8b8e0.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/source/StadiaMaps.js"],"sourcesContent":["/**\n * @module ol/source/StadiaMaps\n */\n\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from './OSM.js';\nimport XYZ from './XYZ.js';\n\n/**\n * @type {string}\n */\nconst STADIA_ATTRIBUTION =\n  '&copy; <a href=\"https://www.stadiamaps.com/\" target=\"_blank\">Stadia Maps</a>';\n\n/**\n * @type {string}\n */\nconst OMT_ATTRIBUTION =\n  '&copy; <a href=\"https://openmaptiles.org/\" target=\"_blank\">OpenMapTiles</a>';\n\n/**\n * @type {string}\n */\nconst STAMEN_ATTRIBUTION =\n  '&copy; <a href=\"https://stamen.com/\" target=\"_blank\">Stamen Design</a>';\n\n/**\n * @type {Object<string, {extension: string}>}\n */\nconst LayerConfig = {\n  'stamen_terrain': {\n    extension: 'png',\n  },\n  'stamen_terrain_background': {\n    extension: 'png',\n  },\n  'stamen_terrain_labels': {\n    extension: 'png',\n  },\n  'stamen_terrain_lines': {\n    extension: 'png',\n  },\n  'stamen_toner_background': {\n    extension: 'png',\n  },\n  'stamen_toner': {\n    extension: 'png',\n  },\n  'stamen_toner_labels': {\n    extension: 'png',\n  },\n  'stamen_toner_lines': {\n    extension: 'png',\n  },\n  'stamen_toner_lite': {\n    extension: 'png',\n  },\n  'stamen_watercolor': {\n    extension: 'jpg',\n  },\n  'alidade_smooth': {\n    extension: 'png',\n  },\n  'alidade_smooth_dark': {\n    extension: 'png',\n  },\n  'alidade_satellite': {\n    extension: 'png',\n  },\n  'outdoors': {\n    extension: 'png',\n  },\n  'osm_bright': {\n    extension: 'png',\n  },\n};\n\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number, retina: boolean}>}\n */\nconst ProviderConfig = {\n  'stamen_terrain': {\n    minZoom: 0,\n    maxZoom: 18,\n    retina: true,\n  },\n  'stamen_toner': {\n    minZoom: 0,\n    maxZoom: 20,\n    retina: true,\n  },\n  'stamen_watercolor': {\n    minZoom: 1,\n    maxZoom: 18,\n    retina: false,\n  },\n};\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Deprecated.  Use the cacheSize option on the layer instead.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {string} layer Layer name. Valid values: `alidade_smooth`, `alidade_smooth_dark`, `outdoors`, `stamen_terrain`, `stamen_terrain_background`, `stamen_terrain_labels`, `stamen_terrain_lines`, `stamen_toner_background`, `stamen_toner`, `stamen_toner_labels`, `stamen_toner_lines`, `stamen_toner_lite`, `stamen_watercolor`, and `osm_bright`.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n * @property {string} [apiKey] Stadia Maps API key. Not required for localhost or most public web deployments. See https://docs.stadiamaps.com/authentication/ for details.\n * @property {boolean} [retina] Use retina tiles (if available; not available for Stamen Watercolor).\n */\n\n/**\n * @classdesc\n * Layer source for the Stadia Maps tile server.\n * @api\n */\nclass StadiaMaps extends XYZ {\n  /**\n   * @param {Options} options StadiaMaps options.\n   */\n  constructor(options) {\n    const i = options.layer.indexOf('-');\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n    const providerConfig = ProviderConfig[provider] || {\n      'minZoom': 0,\n      'maxZoom': 20,\n      'retina': true,\n    };\n\n    const layerConfig = LayerConfig[options.layer];\n    const query = options.apiKey ? '?api_key=' + options.apiKey : '';\n    const retina = providerConfig.retina && options.retina ? '@2x' : '';\n\n    const url =\n      options.url !== undefined\n        ? options.url\n        : 'https://tiles.stadiamaps.com/tiles/' +\n          options.layer +\n          '/{z}/{x}/{y}' +\n          retina +\n          '.' +\n          layerConfig.extension +\n          query;\n\n    const attributions = [STADIA_ATTRIBUTION, OMT_ATTRIBUTION, OSM_ATTRIBUTION];\n\n    if (options.layer.startsWith('stamen_')) {\n      attributions.splice(1, 0, STAMEN_ATTRIBUTION);\n    }\n\n    super({\n      attributions: attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      interpolate: options.interpolate,\n      maxZoom:\n        options.maxZoom !== undefined\n          ? options.maxZoom\n          : providerConfig.maxZoom,\n      minZoom:\n        options.minZoom !== undefined\n          ? options.minZoom\n          : providerConfig.minZoom,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      transition: options.transition,\n      url: url,\n      tilePixelRatio: retina ? 2 : 1,\n      wrapX: options.wrapX,\n      zDirection: options.zDirection,\n    });\n  }\n}\n\nexport default StadiaMaps;\n"],"names":["LayerConfig","ProviderConfig","StadiaMaps","options","i","providerConfig","layerConfig","query","retina","url","undefined","attributions"],"mappings":"wLA4BA,IAAMA,EAAc,CAClB,eAAkB,CAChB,UAAW,KACb,EACA,0BAA6B,CAC3B,UAAW,KACb,EACA,sBAAyB,CACvB,UAAW,KACb,EACA,qBAAwB,CACtB,UAAW,KACb,EACA,wBAA2B,CACzB,UAAW,KACb,EACA,aAAgB,CACd,UAAW,KACb,EACA,oBAAuB,CACrB,UAAW,KACb,EACA,mBAAsB,CACpB,UAAW,KACb,EACA,kBAAqB,CACnB,UAAW,KACb,EACA,kBAAqB,CACnB,UAAW,KACb,EACA,eAAkB,CAChB,UAAW,KACb,EACA,oBAAuB,CACrB,UAAW,KACb,EACA,kBAAqB,CACnB,UAAW,KACb,EACA,SAAY,CACV,UAAW,KACb,EACA,WAAc,CACZ,UAAW,KACb,CACF,EAKMC,EAAiB,CACrB,eAAkB,CAChB,QAAS,EACT,QAAS,GACT,OAAQ,EACV,EACA,aAAgB,CACd,QAAS,EACT,QAAS,GACT,OAAQ,EACV,EACA,kBAAqB,CACnB,QAAS,EACT,QAAS,GACT,OAAQ,EACV,CACF,CAmCA,OAAMC,UAAmB,SAAG,CAI1B,YAAYC,CAAO,CAAE,CACnB,IAAMC,EAAID,EAAQ,KAAK,CAAC,OAAO,CAAC,KAE1BE,EAAiBJ,CAAc,CADpBG,AAAK,IAALA,EAAUD,EAAQ,KAAK,CAAGA,EAAQ,KAAK,CAAC,KAAK,CAAC,EAAGC,GACnB,EAAI,CACjD,QAAW,EACX,QAAW,GACX,OAAU,EACZ,EAEME,EAAcN,CAAW,CAACG,EAAQ,KAAK,CAAC,CACxCI,EAAQJ,EAAQ,MAAM,CAAG,YAAcA,EAAQ,MAAM,CAAG,GACxDK,EAASH,EAAe,MAAM,EAAIF,EAAQ,MAAM,CAAG,MAAQ,GAE3DM,EACJN,AAAgBO,KAAAA,IAAhBP,EAAQ,GAAG,CACPA,EAAQ,GAAG,CACX,sCACAA,EAAQ,KAAK,CACb,eACAK,EACA,IACAF,EAAY,SAAS,CACrBC,EAEAI,EAAe,CAnJvB,+EAMA,8EA6I6D,aAAe,CAAC,CAEvER,EAAQ,KAAK,CAAC,UAAU,CAAC,YAC3BQ,EAAa,MAAM,CAAC,EAAG,EA1I3B,0EA6IE,KAAK,CAAC,CACJ,aAAcA,EACd,UAAWR,EAAQ,SAAS,CAC5B,YAAa,YACb,YAAaA,EAAQ,WAAW,CAChC,QACEA,AAAoBO,KAAAA,IAApBP,EAAQ,OAAO,CACXA,EAAQ,OAAO,CACfE,EAAe,OAAO,CAC5B,QACEF,AAAoBO,KAAAA,IAApBP,EAAQ,OAAO,CACXA,EAAQ,OAAO,CACfE,EAAe,OAAO,CAC5B,2BAA4BF,EAAQ,0BAA0B,CAC9D,iBAAkBA,EAAQ,gBAAgB,CAC1C,WAAYA,EAAQ,UAAU,CAC9B,IAAKM,EACL,eAAgBD,EAAS,EAAI,EAC7B,MAAOL,EAAQ,KAAK,CACpB,WAAYA,EAAQ,UAAU,AAChC,EACF,CACF,CAEA,UAAeD,C"}