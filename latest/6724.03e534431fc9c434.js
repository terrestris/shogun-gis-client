"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["6724"],{85378:function(e,t,i){i.r(t);var s=i(23954),n=i(85215),a=i(32001),o=i(84674),l=i(17353),r=i(85752);let h="element",d="offset",p="position",g="positioning";class m extends n.default{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.Q5,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h,this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener(d,this.handleOffsetChanged),this.addChangeListener(p,this.handlePositionChanged),this.addChangeListener(g,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(h)}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get(d)}getPosition(){return this.get(p)}getPositioning(){return this.get(g)}handleElementChanged(){(0,o.gS)(this.element);let e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),(0,l.JH)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,l.KT)(e,s.A.POSTRENDER,this.render,this),this.updatePixelPosition();let t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(h,e)}setMap(e){this.set("map",e)}setOffset(e){this.set(d,e)}setPosition(e){this.set(p,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){let t=this.getMap();if(!t||!t.getTargetElement()||!this.get(p))return;let i=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),n=this.getRect(s,[(0,o.Gq)(s),(0,o.DK)(s)]),a=void 0===(e=e||{}).margin?20:e.margin;if(!(0,r.containsExtent)(i,n)){let s=n[0]-i[0],o=i[2]-n[2],l=n[1]-i[1],r=i[3]-n[3],h=[0,0];if(s<0?h[0]=s-a:o<0&&(h[0]=Math.abs(o)+a),l<0?h[1]=l-a:r<0&&(h[1]=Math.abs(r)+a),0!==h[0]||0!==h[1]){let i=t.getView().getCenterInternal(),s=t.getPixelFromCoordinateInternal(i);if(!s)return;let n=[s[0]+h[0],s[1]+h[1]],a=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(n),duration:a.duration,easing:a.easing})}}}getRect(e,t){let i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[s,n,s+t[0],n+t[1]]}setPositioning(e){this.set(g,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){let e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);let i=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(e,t){let i=this.element.style,s=this.getOffset(),n=this.getPositioning();this.setVisible(!0);let a=`${e[0]+s[0]}px`,o=`${e[1]+s[1]}px`,l="0%",r="0%";"bottom-right"==n||"center-right"==n||"top-right"==n?l="-100%":("bottom-center"==n||"center-center"==n||"top-center"==n)&&(l="-50%"),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?r="-100%":("center-left"==n||"center-center"==n||"center-right"==n)&&(r="-50%");let h=`translate(${l}, ${r}) translate(${a}, ${o})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}t.default=m},24751:function(e,t,i){i.r(t);var s=i(54616),n=i(25239),a=i(23954),o=i(26005),l=i(8959),r=i(85378),h=i(36297),d=i(19096),p=i(32001),g=i(84674),m=i(55506),_=i(17353),c=i(85752),v=i(29229),u=i(43325);class f extends u.A{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==e.rotateWithView&&e.rotateWithView,this.viewExtent_=void 0;const t=void 0!==e.className?e.className:"ol-overviewmap",i=void 0!==e.tipLabel?e.tipLabel:"Overview map",a=void 0!==e.collapseLabel?e.collapseLabel:"‹";"string"==typeof a?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a):this.collapseLabel_=a;const o=void 0!==e.label?e.label:"›";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=i,h.appendChild(l),h.addEventListener(m.default.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const d=new n.default({view:e.view,controls:new s.default,interactions:new s.default});this.ovmap_=d,e.layers&&e.layers.forEach(function(e){d.addLayer(e)});const g=document.createElement("div");g.className="ol-overviewmap-box",g.style.boxSizing="border-box",this.boxOverlay_=new r.default({position:[0,0],positioning:"center-center",element:g}),this.ovmap_.addOverlay(this.boxOverlay_);const _=t+" "+p.XI+" "+p.$N+(this.collapsed_&&this.collapsible_?" "+p.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=_,c.appendChild(this.ovmapDiv_),c.appendChild(h);const v=this.boxOverlay_,u=this.boxOverlay_.getElement(),f=function(e){let t={clientX:e.clientX,clientY:e.clientY},i=d.getEventCoordinate(t);v.setPosition(i)},b=e=>{let t=d.getEventCoordinateInternal(e),i=this.getMap();i.getView().setCenterInternal(t);let s=i.getOwnerDocument();s.removeEventListener("pointermove",f),s.removeEventListener("pointerup",b)};this.ovmapDiv_.addEventListener("pointerdown",e=>{let t=this.getMap().getOwnerDocument();e.target===u&&t.addEventListener("pointermove",f),t.addEventListener("pointerup",b)})}setMap(e){let t=this.getMap();if(e!==t){if(t){let e=t.getView();e&&this.unbindView_(e),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,_.KT)(e,l.A.PROPERTYCHANGE,this.handleMapPropertyChange_,this));let t=e.getView();t&&this.bindView_(t),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===o.A.VIEW){let t=e.oldValue;t&&this.unbindView_(t);let i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||e.key!==o.A.TARGET&&e.key!==o.A.SIZE||this.ovmap_.updateSize()}bindView_(e){if(!this.view_){let t=new h.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(d.A.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(d.A.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){let e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;let i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&(0,c.equals)(s,this.viewExtent_))return;this.viewExtent_=s;let n=t.getSize(),a=t.getView().calculateExtentInternal(n),o=t.getPixelFromCoordinateInternal((0,c.getTopLeft)(s)),l=t.getPixelFromCoordinateInternal((0,c.getBottomRight)(s)),r=Math.abs(o[0]-l[0]),h=Math.abs(o[1]-l[1]),d=n[0],p=n[1];r<.1*d||h<.1*p||r>.75*d||h>.75*p?this.resetExtent_():(0,c.containsExtent)(a,s)||this.recenter_()}resetExtent_(){let e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),n=t.getView(),a=1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2));(0,c.scaleFromCenter)(s,a),n.fitInternal((0,v.fromExtent)(s))}recenter_(){let e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){let e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;let i=e.getSize(),s=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-s.getRotation(),o=this.boxOverlay_,l=this.boxOverlay_.getElement(),r=s.getCenter(),h=s.getResolution(),d=n.getResolution(),p=i[0]*h/d,g=i[1]*h/d;o.setPosition(r),l&&(l.style.width=p+"px",l.style.height=g+"px",l.style.transform="rotate("+a+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,_.Jz)(this.ovmap_,a.A.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(p.nT),this.collapsed_?(0,g.fo)(this.collapseLabel_,this.label_):(0,g.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;let e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}t.default=f}}]);
//# sourceMappingURL=6724.03e534431fc9c434.js.map