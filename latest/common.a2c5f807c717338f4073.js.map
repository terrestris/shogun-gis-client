{"version":3,"file":"common.a2c5f807c717338f4073.js","mappings":"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","sources":["webpack://@terrestris/shogun-gis-client/./src/hooks/useAppDispatch.ts","webpack://@terrestris/shogun-gis-client/./src/hooks/useAppSelector.ts","webpack://@terrestris/shogun-gis-client/./src/components/AddLayerModal/index.less?3a66","webpack://@terrestris/shogun-gis-client/./src/components/AddLayerModal/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/usePlugins.ts","webpack://@terrestris/shogun-gis-client/./src/components/BasicMapComponent/index.tsx","webpack://@terrestris/shogun-gis-client/./src/plugin/index.ts","webpack://@terrestris/shogun-gis-client/./src/components/CookieBanner/index.less?eff3","webpack://@terrestris/shogun-gis-client/./src/components/CookieBanner/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useSHOGunAPIClient.ts","webpack://@terrestris/shogun-gis-client/./src/hooks/useExecuteWfsTransaction.ts","webpack://@terrestris/shogun-gis-client/./src/components/FileUpload/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useConvertImageUrl.ts","webpack://@terrestris/shogun-gis-client/./src/components/ImageUpload/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeatureInfoForm/index.less?d0f3","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeatureInfoForm/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ReferenceTable/index.less?1552","webpack://@terrestris/shogun-gis-client/./src/components/ReferenceTable/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/DisplayField/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditReferenceTable/index.less?bbe4","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditReferenceTable/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureForm/index.less?0b49","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureForm/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useExecuteWfsDescribeFeatureType.ts","webpack://@terrestris/shogun-gis-client/./src/hooks/useWriteWfsTransaction.ts","webpack://@terrestris/shogun-gis-client/./src/components/MapDrawer/index.less?074d","webpack://@terrestris/shogun-gis-client/./src/components/MapDrawer/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useExecuteGetFeature.ts","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureGeometryToolbar/index.less?cbd2","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureGeometryToolbar/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureTabs/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/DeleteButton/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/ResetButton/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/SaveButton/index.less?fbda","webpack://@terrestris/shogun-gis-client/./src/components/FeedbackIcon/index.less?77c8","webpack://@terrestris/shogun-gis-client/./src/components/FeedbackIcon/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/SaveButton/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureToolbar/index.less?6e4b","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureToolbar/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureFullForm/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useExecuteWfsTransactionLock.ts","webpack://@terrestris/shogun-gis-client/./src/hooks/useGetFeatureInfo.ts","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureSwitch/index.less?2952","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureSwitch/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/index.less?c362","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/Footer/index.less?bf45","webpack://@terrestris/shogun-gis-client/./src/components/Footer/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/DocumentationButton/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/BasicNominatimSearch/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/MultiSearch/index.less?3fe9","webpack://@terrestris/shogun-gis-client/./src/utils/generateSolrQuery.ts","webpack://@terrestris/shogun-gis-client/./src/components/MultiSearch/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/SearchField/index.less?bf24","webpack://@terrestris/shogun-gis-client/./src/components/SearchField/index.tsx","webpack://@terrestris/shogun-gis-client/./src/utils/getGravatarUrl.ts","webpack://@terrestris/shogun-gis-client/./src/components/ApplicationInfo/index.less?5255","webpack://@terrestris/shogun-gis-client/./src/components/ApplicationInfo/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useVersion.ts","webpack://@terrestris/shogun-gis-client/./src/components/UserMenu/index.less?f429","webpack://@terrestris/shogun-gis-client/./src/components/UserMenu/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/Header/index.less?b06e","webpack://@terrestris/shogun-gis-client/./src/components/Header/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/LayerConfiguration/index.less?9f82","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/LayerConfiguration/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/LayerDetails/index.less?4108","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/LayerDetails/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/index.less?b9d0","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/StylingDrawer/index.less?b6ee","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/StylingDrawerButton/StylingComponent/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/StylingDrawer/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/LanguageSelector/index.less?da3b","webpack://@terrestris/shogun-gis-client/./src/components/LanguageSelector/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/Permalink/index.less?76ea","webpack://@terrestris/shogun-gis-client/./src/components/Permalink/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/Serializer/SHOGunMapFishPrintV3WMSSerializer.ts","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/Serializer/SHOGunMapFishPrintV3TiledWMSSerializer.ts","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/CustomFieldInput/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/LayoutSelect/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/OutputFormatSelect/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/ResolutionSelect/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/ScaleSelect/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/Shared/Shared.ts","webpack://@terrestris/shogun-gis-client/./src/components/PrintForm/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/index.less?6377","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/Attributions/AttributionRow/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/Attributions/index.less?3fa9","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/Attributions/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/DeleteAllButton/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/StylingDrawerButton/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useHighlightVectorLayer.ts","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/PaginationToolbar/index.less?2293","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/PaginationToolbar/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeatureInfoTabs/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeaturePropertyGrid/index.less?a4df","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeaturePropertyGrid/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/index.less?7905","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/WmsTimeSlider/index.less?47fb","webpack://@terrestris/shogun-gis-client/./src/components/WmsTimeSlider/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/LayerTreeContextMenu/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/index.less?c926","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/LoadingIndicator/index.less?c9dc","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/LoadingIndicator/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Measure/index.less?beca","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Measure/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/index.less?b016","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/index.tsx","webpack://@terrestris/shogun-gis-client/./src/components/UploadDataModal/index.less?e08e","webpack://@terrestris/shogun-gis-client/./src/components/UploadDataModal/index.tsx","webpack://@terrestris/shogun-gis-client/./src/hooks/useRestoreTransientLayers.ts","webpack://@terrestris/shogun-gis-client/./src/hooks/useQueryParams.ts","webpack://@terrestris/shogun-gis-client/./src/App.less?984e","webpack://@terrestris/shogun-gis-client/./src/App.tsx","webpack://@terrestris/shogun-gis-client/./src/store/appInfo/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/description/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/legal/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/logoPath/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/searchEngines/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/title/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/user/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/store.ts","webpack://@terrestris/shogun-gis-client/./src/index.less?df1e","webpack://@terrestris/shogun-gis-client/./src/bootstrap.tsx","webpack://@terrestris/shogun-gis-client/./src/context/PluginContext.tsx","webpack://@terrestris/shogun-gis-client/./src/context/SHOGunAPIClientContext.tsx","webpack://@terrestris/shogun-gis-client/./src/i18n/index.ts","webpack://@terrestris/shogun-gis-client/./src/i18n/translations.ts","webpack://@terrestris/shogun-gis-client/./src/index.tsx","webpack://@terrestris/shogun-gis-client/./src/store/addLayerModal/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/editFeature/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/editFeatureDrawerOpen/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/featureInfo/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/layerDetailsModal/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/layerTree/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/print/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/selectedFeatures/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/stylingDrawerVisibility/index.tsx","webpack://@terrestris/shogun-gis-client/./src/store/toolMenu/index.ts","webpack://@terrestris/shogun-gis-client/./src/store/uploadDataModal/index.ts","webpack://@terrestris/shogun-gis-client/./src/App.less?ee38","webpack://@terrestris/shogun-gis-client/./src/components/AddLayerModal/index.less?6017","webpack://@terrestris/shogun-gis-client/./src/components/ApplicationInfo/index.less?f940","webpack://@terrestris/shogun-gis-client/./src/components/CookieBanner/index.less?0530","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureForm/index.less?a2dd","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureGeometryToolbar/index.less?141f","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureSwitch/index.less?c38e","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditFeatureToolbar/index.less?512e","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/EditReferenceTable/index.less?53a5","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/SaveButton/index.less?8e96","webpack://@terrestris/shogun-gis-client/./src/components/EditFeatureDrawer/index.less?8ba3","webpack://@terrestris/shogun-gis-client/./src/components/FeedbackIcon/index.less?78b5","webpack://@terrestris/shogun-gis-client/./src/components/Footer/index.less?a2b7","webpack://@terrestris/shogun-gis-client/./src/components/Header/index.less?b02d","webpack://@terrestris/shogun-gis-client/./src/components/LanguageSelector/index.less?bd2b","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/LayerConfiguration/index.less?2da8","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/LayerDetails/index.less?acf5","webpack://@terrestris/shogun-gis-client/./src/components/LayerDetailsModal/index.less?a101","webpack://@terrestris/shogun-gis-client/./src/components/MapDrawer/index.less?bfb2","webpack://@terrestris/shogun-gis-client/./src/components/MultiSearch/index.less?ea03","webpack://@terrestris/shogun-gis-client/./src/components/Permalink/index.less?68c2","webpack://@terrestris/shogun-gis-client/./src/components/ReferenceTable/index.less?7f72","webpack://@terrestris/shogun-gis-client/./src/components/SearchField/index.less?8fd0","webpack://@terrestris/shogun-gis-client/./src/components/StylingDrawer/index.less?bc42","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/Attributions/index.less?d745","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Draw/index.less?6534","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeatureInfoForm/index.less?6db1","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/FeaturePropertyGrid/index.less?27cc","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/PaginationToolbar/index.less?8e8c","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/FeatureInfo/index.less?f3c5","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/LoadingIndicator/index.less?22c2","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/LayerTree/index.less?d8e5","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/Measure/index.less?b29b","webpack://@terrestris/shogun-gis-client/./src/components/ToolMenu/index.less?949c","webpack://@terrestris/shogun-gis-client/./src/components/UploadDataModal/index.less?cb8c","webpack://@terrestris/shogun-gis-client/./src/components/UserMenu/index.less?a168","webpack://@terrestris/shogun-gis-client/./src/components/WmsTimeSlider/index.less?25f0","webpack://@terrestris/shogun-gis-client/./src/index.less?2fc8"],"sourcesContent":["import {\n  useDispatch\n} from 'react-redux';\n\nimport type {\n  AppDispatch\n} from '../store/store';\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n\nexport default useAppDispatch;\n","import {\n  TypedUseSelectorHook,\n  useSelector\n} from 'react-redux';\n\nimport type {\n  RootState\n} from '../store/store';\n\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\nexport default useAppSelector;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState,\n  useEffect\n} from 'react';\n\nimport {\n  Input,\n  Modal,\n  ModalProps,\n  notification,\n  Select,\n  Table,\n  Typography\n} from 'antd';\n\nimport {\n  InputStatus\n} from 'antd/lib/_util/statusUtils';\n\nimport {\n  getUid\n} from 'ol';\nimport OlLayerGroup from 'ol/layer/Group';\nimport ImageLayer from 'ol/layer/Image';\nimport TileLayer from 'ol/layer/Tile';\nimport ImageWMSSource from 'ol/source/ImageWMS';\nimport TileWMSSource from 'ol/source/TileWMS';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport UrlUtil from '@terrestris/base-util/dist/UrlUtil/UrlUtil';\nimport CapabilitiesUtil from '@terrestris/ol-util/dist/CapabilitiesUtil/CapabilitiesUtil';\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport { SimpleButton } from '@terrestris/react-geo';\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport {\n  hide\n} from '../../store/addLayerModal';\n\nimport './index.less';\n\nexport type AddLayerModalProps = Partial<ModalProps>;\n\nexport const AddLayerModal: React.FC<AddLayerModalProps> = ({\n  ...restProps\n}): JSX.Element => {\n  const [loading, setLoading] = useState(false);\n  const [layers, setLayers] = useState<(ImageLayer<ImageWMSSource> | TileLayer<TileWMSSource>)[]>([]);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n  const [validationStatus, setValidationStatus] = useState<InputStatus>('');\n  const [url, setUrl] = useState(\n    'https://sgx.geodatenzentrum.de/wms_topplus_open'\n  );\n  const [sanitizedUrl, setSanitizedUrl] = useState<string>();\n  const [version, setVersion] = useState<string>('1.3.0');\n\n  const isModalVisible = useAppSelector(state => state.addLayerModal.visible);\n\n  const dispatch = useAppDispatch();\n\n  const map = useMap();\n\n  const {\n    t\n  } = useTranslation();\n\n  useEffect(() => {\n    if (!isModalVisible) {\n      return;\n    }\n    setSanitizedUrl(UrlUtil.createValidGetCapabilitiesRequest(url, 'WMS', version));\n  }, [version, isModalVisible, url]);\n\n  const onUrlChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const value = evt.target.value;\n    setValidationStatus(UrlUtil.isValid(value.trim()) ? '' : 'error');\n    setUrl(evt.target.value);\n  };\n\n  const getCapabilities = async () => {\n    if (!sanitizedUrl) {\n      return;\n    }\n    try {\n      setLoading(true);\n\n      const capabilities = await CapabilitiesUtil.getWmsCapabilities(sanitizedUrl);\n      const externalLayers = CapabilitiesUtil.getLayersFromWmsCapabilities(capabilities, 'Title');\n\n      setLayers(externalLayers);\n    } catch (error) {\n      notification.error({\n        message: t('AddLayerModal.errorMessage'),\n        description: t('AddLayerModal.errorDescription')\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const closeModal = () => {\n    setSelectedRowKeys([]);\n    setLayers([]);\n    dispatch(hide());\n  };\n\n  const onAddSelected = () => {\n    const layersToAdd = layers.filter(layer => selectedRowKeys.includes(getUid(layer)));\n    addLayers(layersToAdd);\n  };\n\n  const onAddAll = () => {\n    addLayers(layers);\n  };\n\n  const addLayers = (layersToAdd: (ImageLayer<ImageWMSSource> | TileLayer<TileWMSSource>)[]) => {\n    if (!map) {\n      return;\n    }\n\n    const targetFolderName = t('AddLayerModal.externalWmsFolder');\n    let targetGroup = MapUtil.getLayerByName(map, targetFolderName) as OlLayerGroup;\n\n    if (!targetGroup) {\n      targetGroup = new OlLayerGroup({\n        layers: []\n      });\n      targetGroup.set('name', targetFolderName);\n      const existingGroups = map.getLayerGroup().getLayers();\n      existingGroups.insertAt(existingGroups?.getLength() || 0, targetGroup);\n    }\n\n    layersToAdd.forEach(layerToAdd => {\n      if (!targetGroup.getLayers().getArray().includes(layerToAdd)) {\n        layerToAdd.set('isExternalLayer', true);\n\n        let layerUrl: string | undefined;\n        if (layerToAdd instanceof ImageLayer) {\n          layerUrl = layerToAdd.getSource()?.getUrl();\n        }\n\n        if (layerToAdd instanceof TileLayer) {\n          const urls = layerToAdd.getSource()?.getUrls();\n          layerUrl = urls?.length === 1 ? urls[0] : undefined;\n        }\n\n        const layerConfig = {\n          name: layerToAdd.get('name'),\n          type: layerToAdd instanceof TileLayer ? 'TILEWMS' : 'WMS',\n          opacity: layerToAdd.getOpacity(),\n          sourceConfig: {\n            layerNames: layerToAdd.getSource()?.getParams().LAYERS,\n            url: layerUrl,\n            useBearerToken: false\n          }\n        };\n        layerToAdd.set('layerConfig', layerConfig);\n        targetGroup.getLayers().push(layerToAdd);\n      }\n    });\n\n    closeModal();\n  };\n\n  return (\n    <Modal\n      className=\"add-layer-modal\"\n      title={t('AddLayerModal.title')}\n      open={isModalVisible}\n      onCancel={closeModal}\n      width={600}\n      footer={[\n        <SimpleButton\n          aria-label='add-all'\n          key=\"add-all\"\n          disabled={layers?.length < 1}\n          onClick={onAddAll}\n        >\n          {t('AddLayerModal.addAllLayers')}\n        </SimpleButton>,\n        <SimpleButton\n          aria-label='add-selected'\n          key=\"add-selected\"\n          disabled={selectedRowKeys?.length < 1}\n          onClick={onAddSelected}\n        >\n          {t('AddLayerModal.addSelectedLayers')}\n        </SimpleButton>\n      ]}\n      {...restProps}\n    >\n      <span>{t('AddLayerModal.requestWmsGetCapabilitiesInstruction')}</span>\n      <Input.Search\n        aria-label='input-search'\n        className='url-input'\n        placeholder={t('AddLayerModal.inputPlaceholder')}\n        value={url}\n        onChange={onUrlChange}\n        onSearch={getCapabilities}\n        status={validationStatus}\n        enterButton={true}\n        addonBefore={\n          <Select\n            aria-label='select-version'\n            defaultValue='1.3.0'\n            onChange={setVersion}\n            options={[\n              {\n                value: '1.3.0',\n                label: `${t('AddLayerModal.version')} 1.3.0`\n              },\n              {\n                value: '1.1.1',\n                label: `${t('AddLayerModal.version')} 1.1.1`\n              }\n            ]}\n          >\n          </Select>\n        }\n      />\n      {\n        validationStatus !== '' &&\n        <Typography className='error'>\n          {t('AddLayerModal.invalidUrlErrorMsg')}\n        </Typography>\n      }\n      <Table\n        aria-label='wms-table'\n        loading={loading}\n        columns={[\n          {\n            title: t('AddLayerModal.columnTitle'),\n            render: (text: any, record: any) => {\n              return record.get('title');\n            }\n          }\n        ]}\n        scroll={{\n          y: 250\n        }}\n        rowKey={(record: any) => getUid(record)}\n        rowSelection={{\n          selectedRowKeys,\n          onChange: setSelectedRowKeys\n        }}\n        pagination={false}\n        dataSource={layers}\n      />\n    </Modal>\n  );\n};\n\nexport default AddLayerModal;\n","import { useContext } from 'react';\n\nimport PluginContext from '../context/PluginContext';\n\nimport { ClientPluginInternal } from '../plugin';\n\nexport const usePlugins = (): ClientPluginInternal[] => {\n  return useContext(PluginContext);\n};\n\nexport default usePlugins;\n","import React, {\n  useEffect\n} from 'react';\n\nimport { ObjectEvent as OlObjectEvent } from 'ol/Object';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport MapComponent, {\n  MapComponentProps\n} from '@terrestris/react-geo/dist/Map/MapComponent/MapComponent';\n\nimport usePlugins from '../../hooks/usePlugins';\n\nimport {\n  isMapIntegration\n} from '../../plugin';\n\nexport const BasicMapComponent: React.FC<Partial<MapComponentProps>> = ({\n  ...restProps\n}): JSX.Element => {\n  const map = useMap();\n  const plugins = usePlugins();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n\n  /**\n   * Updates external layer group name when language changes.\n   */\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const targetGroups = MapUtil.getLayersByProperty(map, 'isExternalLayerGroup', true);\n    if (targetGroups?.length !== 1) {\n      return;\n    }\n    const targetGroup = targetGroups[0];\n    const oldName = targetGroups[0].get('name');\n    targetGroup.set('name', t('AddLayerModal.externalWmsFolder'));\n    const changeEvent = new OlObjectEvent('change:layers', 'name', oldName);\n    targetGroup.dispatchEvent(changeEvent);\n  }, [i18n.language, map, t]);\n\n  const pluginComponents: JSX.Element[] = [];\n\n  if (plugins) {\n    plugins.forEach(plugin => {\n      if (isMapIntegration(plugin.integration)) {\n        const {\n          key,\n          wrappedComponent: WrappedPluginComponent\n        } = plugin;\n\n        pluginComponents.push(\n          <WrappedPluginComponent\n            key={key}\n          />\n        );\n      }\n    });\n  }\n\n  if (!map) {\n    return <></>;\n  }\n\n  return (\n    <MapComponent\n      map={map}\n      {...restProps}\n    >\n      {\n        pluginComponents\n      }\n    </MapComponent>\n  );\n};\n\nexport default BasicMapComponent;\n","import type { IconDefinition } from '@fortawesome/fontawesome-common-types';\n\nimport type {\n  Middleware,\n  Reducer\n} from '@reduxjs/toolkit';\n\nimport { CollapsePanelProps } from 'antd';\nimport type OlMap from 'ol/Map';\n\nimport type SHOGunAPIClient from '@terrestris/shogun-util/dist/service/SHOGunAPIClient';\n\nexport type ClientPluginLocale = {\n  [locale: string]: {\n    translation: {\n      [key: string]: any;\n    };\n  };\n};\n\nexport type ClientPluginComponentProps = {\n  map?: OlMap;\n  client?: SHOGunAPIClient;\n};\n\nexport type ClientPluginIntegration = {\n  /**\n   * The main identifier of the integration point of the plugin.\n   */\n  placement: string;\n};\n\nexport type ClientPluginIntegrationToolMenu = ClientPluginIntegration &\n  Omit<CollapsePanelProps, 'key' | 'header'> & {\n    placement: 'tool-menu';\n    /**\n     * The label for the plugin in the tool menu.\n     */\n    label?: string;\n    /**\n     * The insertion index for the plugin in the tool menu, starting from 0 which is on top.\n     */\n    insertionIndex?: number;\n    /**\n     * The icon for the plugin in the tool menu.\n     */\n    icon?: IconDefinition;\n  };\n\nexport type HeaderPlacementOrientation = 'left' | 'center' | 'right';\n\nexport type ClientPluginIntegrationHeader = ClientPluginIntegration & {\n  placement: 'header';\n  /**\n   * The placement orientation for the plugin in the header.\n   */\n  placementOrientation: HeaderPlacementOrientation;\n  /**\n   * The insertion index for the plugin in the header, starting from 0 which is on the left.\n   */\n  insertionIndex?: number;\n};\n\nexport type ClientPluginIntegrationFeatureInfo = ClientPluginIntegration & {\n  placement: 'feature-info';\n  /**\n   * The list of layer names the plugin component should be rendered for. If not\n   * specified, the component will be rendered for all layers.\n   */\n  layers?: string[];\n};\n\nexport type ClientPluginIntegrationMap = ClientPluginIntegration & {\n  placement: 'map';\n};\n\nexport type FooterPlacementOrientation = 'left' | 'right';\n\nexport type ClientPluginIntegrationFooter = ClientPluginIntegration & {\n  placement: 'footer';\n  /**\n  * The placement orientation for the plugin in the footer.\n  */\n  placementOrientation: FooterPlacementOrientation;\n  /**\n  * The insertion index for the plugin in the footer, starting from 0 which is on the left.\n  */\n  insertionIndex?: number;\n};\n\nexport type ClientPluginIntegrationCookieConsent = ClientPluginIntegration & {\n  placement: 'cookie-banner';\n};\n\nexport type ClientPluginIntegrations =\n  | ClientPluginIntegrationToolMenu\n  | ClientPluginIntegrationHeader\n  | ClientPluginIntegrationFeatureInfo\n  | ClientPluginIntegrationMap\n  | ClientPluginIntegrationFooter\n  | ClientPluginIntegrationCookieConsent;\n\nexport type ClientPlugin = {\n  /**\n   * The key of the plugin, usually used for internal references (e.g. element class names) only.\n   */\n  key: string;\n  /**\n   * The definition of the integration point.\n   */\n  integration: ClientPluginIntegrations;\n  /**\n   * The actual component of the plugin.\n   */\n  component: React.FunctionComponent<ClientPluginComponentProps>;\n  /**\n   * The i18n definition to be used in the plugin.\n   */\n  i18n?: ClientPluginLocale;\n  /**\n   * A set of redux reducers to be used in the plugin.\n   */\n  reducers?: {\n    [key: string]: Reducer;\n  };\n  /**\n   * A set of middlewares that should be added to the store\n   * especially useful for usage of redux-rtk\n   */\n  middlewares?: Middleware[];\n};\n\nexport type ClientPluginInternal = ClientPlugin & {\n  wrappedComponent: React.FunctionComponent<ClientPluginComponentProps>;\n};\n\nexport function isToolMenuIntegration(\n  pluginIntegration: ClientPluginIntegrations\n): pluginIntegration is ClientPluginIntegrationToolMenu {\n  return pluginIntegration && pluginIntegration.placement === 'tool-menu';\n}\n\nexport function isHeaderIntegration(\n  pluginIntegration: ClientPluginIntegrations\n): pluginIntegration is ClientPluginIntegrationHeader {\n  return pluginIntegration && pluginIntegration.placement === 'header';\n}\n\nexport function isFeatureInfoIntegration(\n  pluginIntegration: ClientPluginIntegrations\n): pluginIntegration is ClientPluginIntegrationFeatureInfo {\n  return pluginIntegration && pluginIntegration.placement === 'feature-info';\n}\n\nexport function isMapIntegration(\n  pluginIntegration: ClientPluginIntegrations\n): pluginIntegration is ClientPluginIntegrationMap {\n  return pluginIntegration && pluginIntegration.placement === 'map';\n}\n\nexport function isFooterIntegration(pluginIntegration: ClientPluginIntegrations): pluginIntegration is ClientPluginIntegrationFooter {\n  return pluginIntegration && pluginIntegration.placement === 'footer';\n}\n\nexport function isCookieConsentIntegration(\n  pluginIntegration: ClientPluginIntegrations\n): pluginIntegration is ClientPluginIntegrationCookieConsent {\n  return pluginIntegration && pluginIntegration.placement === 'cookie-banner';\n}\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport { CookieConsent } from 'react-cookie-consent';\nimport { useTranslation } from 'react-i18next';\n\nimport usePlugins from '../../hooks/usePlugins';\nimport { isCookieConsentIntegration } from '../../plugin';\n\nimport './index.less';\n\nexport const CookieBanner = () => {\n  const plugins = usePlugins();\n\n  const { t } = useTranslation();\n\n  const getPlugin = () => {\n    let cookiePlugin: React.ReactElement | null = null;\n\n    plugins.forEach(plugin => {\n      if (isCookieConsentIntegration(plugin.integration)) {\n        const {\n          key, wrappedComponent: WrappedPluginComponent\n        } = plugin;\n\n        cookiePlugin = <WrappedPluginComponent key={key} />;\n      }\n    });\n\n    return cookiePlugin;\n  };\n\n  return (\n    <CookieConsent\n      disableStyles={true}\n      key=\"default-cookie-consent\"\n      location=\"bottom\"\n      buttonText={t('CookieBanner.button')}\n      cookieName=\"SHOGun-Session-Cookie\"\n      buttonClasses=\"cookie-button\"\n      containerClasses=\"cookie-container\"\n      contentClasses=\"cookie-content\"\n      expires={150}\n    >\n      {getPlugin() ? getPlugin() : t('CookieBanner.info')}\n    </CookieConsent>\n  );\n};\n\nexport default CookieBanner;\n","import { useContext } from 'react';\n\nimport SHOGunAPIClient from '@terrestris/shogun-util/dist/service/SHOGunAPIClient';\n\nimport SHOGunAPIClientContext from '../context/SHOGunAPIClientContext';\n\nexport const useSHOGunAPIClient = (): SHOGunAPIClient | null => {\n  return useContext(SHOGunAPIClientContext);\n};\n\nexport default useSHOGunAPIClient;\n","import {\n  useCallback\n} from 'react';\n\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport type ExecuteWfsTransactionOpts = {\n  layer: WmsLayer;\n  transaction: Node;\n};\n\nexport const useExecuteWfsTransaction = () => {\n  const client = useSHOGunAPIClient();\n\n  // TODO Make detection more robust\n  const isFailed = (xmlDoc: Document) => {\n    const errorTagNameCandidates = [\n      'wfs:FAILED',\n      'ows:ExceptionReport'\n    ];\n\n    return errorTagNameCandidates.some(candidate =>\n      xmlDoc.getElementsByTagName(candidate).length > 0);\n  };\n\n  const executeWfsTransaction = useCallback(async (opts: ExecuteWfsTransactionOpts) => {\n    let url;\n\n    const source = opts.layer.getSource();\n    if (source instanceof OlSourceImageWMS) {\n      url = source.getUrl();\n    }\n    if (source instanceof OlSourceTileWMS) {\n      const urls = source.getUrls();\n      url = urls ? urls[0] : undefined;\n    }\n\n    if (!url) {\n      return;\n    }\n\n    if (url.endsWith('?')) {\n      url = url.slice(0, -1);\n    }\n\n    const defaultHeaders = {\n      'Content-Type': 'application/xml'\n    };\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: opts.layer?.get('useBearerToken') ? {\n        ...defaultHeaders,\n        ...getBearerTokenHeader(client?.getKeycloak())\n      } : defaultHeaders,\n      body: new XMLSerializer().serializeToString(opts.transaction)\n    });\n\n    if (!response.ok) {\n      throw new Error('No successful response while executing a WFS-Transaction');\n    }\n\n    const responseText = await response.text();\n\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(responseText, 'text/xml');\n\n    if (isFailed(xmlDoc)) {\n      throw new Error(`Something failed: ${responseText}`);\n    }\n\n    return responseText;\n  }, [client]);\n\n  return executeWfsTransaction;\n};\n\nexport default useExecuteWfsTransaction;\n","import React from 'react';\n\nimport {\n  Upload,\n  Button\n} from 'antd';\n\nimport {\n  UploadFile,\n  UploadProps\n} from 'antd/lib/upload/interface';\n\nimport _isNil from 'lodash/isNil';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport ShogunFile from '@terrestris/shogun-util/dist/model/File';\nimport {\n  PropertyFormItemEditConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\nimport {\n  getCsrfTokenHeader\n} from '@terrestris/shogun-util/dist/security/getCsrfTokenHeader';\n\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\n\nexport type FileUploadProps = {\n  fieldConfig?: PropertyFormItemEditConfig;\n  readOnly?: boolean;\n} & Partial<UploadProps>;\n\nexport const FileUpload: React.FC<FileUploadProps> = ({\n  readOnly = false,\n  fieldConfig,\n  ...passThroughProps\n}): JSX.Element => {\n\n  const client = useSHOGunAPIClient();\n  const {\n    t\n  } = useTranslation();\n\n  /**\n   * Workaround which allows to download files that need authentication.\n   */\n  const showPreview = async (file: UploadFile<ShogunFile>) => {\n    if (!client) {\n      return;\n    }\n    const { response } = file;\n    const fileName = response?.fileName;\n    const fileUrl = `/files/${response?.fileUuid}`;\n\n    if (_isNil(fileName) || _isNil(response?.fileUuid)) {\n      return;\n    }\n\n    const anchor = document.createElement('a');\n    document.body.appendChild(anchor);\n\n    const opts = {\n      headers: { ... getBearerTokenHeader(client.getKeycloak())}\n    };\n\n    const result = await fetch(fileUrl, opts);\n    const blob = await result.blob();\n    let objectUrl = window.URL.createObjectURL(blob);\n\n    anchor.href = objectUrl;\n    anchor.download = fileName;\n    anchor.click();\n    window.URL.revokeObjectURL(objectUrl);\n  };\n\n  const removeFile = async (file: UploadFile<ShogunFile>) => {\n    const uuid = file?.response?.fileUuid;\n    if (uuid) {\n      const url = `${client?.getBasePath()}files/${uuid}`;\n      return await fetch(url, {\n        method: 'DELETE',\n        credentials: 'same-origin',\n        headers: {\n          ...getCsrfTokenHeader(),\n          ...getBearerTokenHeader(client?.getKeycloak())\n        }\n      });\n    }\n  };\n\n  if (!client) {\n    return <></>;\n  }\n\n  return (\n    <Upload\n      multiple\n      name='file'\n      action='/files/uploadToFileSystem'\n      withCredentials={true}\n      headers={{\n        ...getCsrfTokenHeader(),\n        ...getBearerTokenHeader(client.getKeycloak())\n      }}\n      onRemove={removeFile}\n      onPreview={showPreview}\n      {...fieldConfig?.fieldProps}\n      {...passThroughProps}\n    >\n      {\n        !readOnly && (\n          <Button>{t('FileUpload.upload')}</Button>\n        )\n      }\n    </Upload>\n  );\n};\n\nexport default FileUpload;\n","import {\n  useCallback\n} from 'react';\n\nimport _isNil from 'lodash/isNil';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport const useConvertImageUrl = () => {\n  const client = useSHOGunAPIClient();\n\n  const imageUrlToBase64 = useCallback(async (url: string) => {\n    if (_isNil(url)) {\n      return Promise.reject();\n    }\n\n    const response = await fetch(url, {\n      credentials: 'include',\n      headers: {\n        ...getBearerTokenHeader(client?.getKeycloak())\n      }\n    });\n\n    const blob = await response.blob();\n    return new Promise<string>((onSuccess, onError) => {\n      try {\n        const reader = new FileReader() ;\n        reader.onload = function () { onSuccess(this.result as string); };\n        reader.readAsDataURL(blob);\n      } catch (e) {\n        onError(e);\n      }\n    });\n  }, [client]);\n\n  return imageUrlToBase64;\n};\n\nexport default useConvertImageUrl;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faPlus\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Upload,\n  Modal\n} from 'antd';\n\nimport {\n  UploadFile,\n  UploadProps\n} from 'antd/lib/upload/interface';\n\nimport _isNil from 'lodash/isNil';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport { useAsyncEffect } from '@terrestris/react-util/dist/hooks/useAsyncEffect/useAsyncEffect';\n\nimport ShogunFile from '@terrestris/shogun-util/dist/model/File';\nimport {\n  PropertyFormItemEditConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\nimport {\n  getCsrfTokenHeader\n} from '@terrestris/shogun-util/dist/security/getCsrfTokenHeader';\n\nimport useConvertImageUrl from '../../hooks/useConvertImageUrl';\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\n\nexport type ImageUploadProps = {\n  fieldConfig?: PropertyFormItemEditConfig;\n  readOnly?: boolean;\n  initialFileList?: UploadFile<any>[];\n} & Partial<UploadProps>;\n\nexport const ImageUpload: React.FC<ImageUploadProps> = ({\n  fieldConfig,\n  readOnly = false,\n  initialFileList,\n  ...passThroughProps\n}): JSX.Element => {\n\n  const [mediaPreviewVisible, setMediaPreviewVisible] = useState<boolean>(false);\n  const [previewImage, setPreviewImage] = useState<string>('');\n  const [defaultFileListWithBlob, setDefaultFileListWithBlob] = useState<UploadFile<ShogunFile>[]>();\n\n  const client = useSHOGunAPIClient();\n  const imageUrlToBase64 = useConvertImageUrl();\n  const {\n    t\n  } = useTranslation();\n\n  useAsyncEffect(async () => {\n    if (!initialFileList || initialFileList.length === 0) {\n      return;\n    }\n    const convertDefaultFileList = async (fileList: UploadFile<ShogunFile>[]) => {\n      const fileListPromises = fileList.map(async (val: any) => ({\n        ...val,\n        thumbUrl: await imageUrlToBase64(`${client?.getBasePath()}imagefiles/${val?.response?.fileUuid}/thumbnail`),\n        url: undefined\n      }));\n      return await Promise.all(fileListPromises);\n    };\n    const fl = await convertDefaultFileList(initialFileList);\n    setDefaultFileListWithBlob(fl);\n  }, [initialFileList?.length]);\n\n  /**\n   * Shows preview of clicked uploaded image.\n   * @param {Object} file Image file object.\n   */\n  const showImagePreview = async (file: UploadFile<ShogunFile>) => {\n    const { response } = file;\n    if (_isNil(response) || _isNil(response?.fileUuid)) {\n      return;\n    }\n    const previewImageUrl = `${client?.getBasePath()}imagefiles/${response.fileUuid}`;\n    const img = await imageUrlToBase64(previewImageUrl);\n    setPreviewImage(img);\n    setMediaPreviewVisible(true);\n  };\n\n  const removeFile = async (file: UploadFile<ShogunFile>) => {\n    const uuid = file?.response?.fileUuid;\n    if (uuid) {\n      const url = `${client?.getBasePath()}imagefiles/${uuid}`;\n      return await fetch(url, {\n        method: 'DELETE',\n        credentials: 'same-origin',\n        headers: {\n          ...getCsrfTokenHeader(),\n          ...getBearerTokenHeader(client?.getKeycloak())\n        }\n      });\n    }\n  };\n\n  if (!client) {\n    return <></>;\n  }\n\n  return (\n    <>\n      <Upload\n        accept=\"image/*\"\n        multiple\n        name=\"file\"\n        action={`${client.getBasePath()}imagefiles/uploadToFileSystem`}\n        withCredentials={true}\n        listType=\"picture-card\"\n        headers={{\n          ...getCsrfTokenHeader(),\n          ...getBearerTokenHeader(client.getKeycloak())\n        }}\n        onRemove={removeFile}\n        onPreview={showImagePreview}\n        fileList={readOnly ? defaultFileListWithBlob : undefined}\n        {...fieldConfig?.fieldProps}\n        {...passThroughProps}\n      >\n        {\n          !readOnly && (\n            <div>\n              <FontAwesomeIcon icon={faPlus} />\n              <div style={{ marginTop: 8 }}>{t('ImageUpload.upload')}</div>\n            </div>\n          )\n        }\n      </Upload>\n      <Modal\n        open={mediaPreviewVisible}\n        footer={null}\n        onCancel={() => setMediaPreviewVisible(false)}\n      >\n        <img\n          alt=\"example\"\n          style={{ width: '100%' }}\n          src={previewImage}\n        />\n      </Modal>\n    </>\n  );\n};\n\nexport default ImageUpload;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect\n} from 'react';\n\nimport {\n  Form,\n  FormProps\n} from 'antd';\n\nimport {\n  useForm\n} from 'antd/lib/form/Form';\n\nimport OlFeature from 'ol/Feature';\n\nimport {\n  PropertyFormItemReadConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport DisplayField from '../../../DisplayField';\n\nimport './index.less';\n\nexport type FeatureInfoFormProps = FormProps & {\n  feature: OlFeature;\n  formConfig?: PropertyFormItemReadConfig[];\n};\n\nexport const FeatureInfoForm: React.FC<FeatureInfoFormProps> = ({\n  feature,\n  formConfig,\n  ...passThroughProps\n}): JSX.Element => {\n\n  const [form] = useForm();\n\n  useEffect(() => {\n    form.resetFields();\n    form.setFieldsValue(feature.getProperties());\n  }, [feature, form]);\n\n  const createFormItem = (fieldCfg: PropertyFormItemReadConfig) => {\n    return (\n      <Form.Item\n        key={fieldCfg.propertyName}\n        name={fieldCfg.propertyName}\n        label={fieldCfg.displayName || fieldCfg.propertyName}\n      >\n        <DisplayField\n          label={fieldCfg.displayName || fieldCfg.propertyName}\n          {...fieldCfg.fieldProps}\n        />\n      </Form.Item>\n    );\n  };\n\n  return (\n    <Form\n      className=\"feature-info-form\"\n      form={form}\n      labelCol={{\n        span: 8\n      }}\n      labelAlign=\"left\"\n      labelWrap\n      {...passThroughProps}\n    >\n      {formConfig?.map(createFormItem)}\n    </Form>\n  );\n\n};\n\nexport default FeatureInfoForm;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faBoxOpen\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  Modal,\n  Table\n} from 'antd';\n\nimport {\n  TableProps\n} from 'antd/lib/table';\n\nimport OlFeature from 'ol/Feature';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport {\n  ReferenceConfig\n} from '../DisplayField';\n\nimport FeatureInfoForm from '../ToolMenu/FeatureInfo/FeatureInfoForm';\n\nimport './index.less';\n\nexport type ReferenceDataType = {\n  [key: string]: any;\n};\n\nexport type ReferenceTableProps = TableProps<ReferenceDataType> & {\n  value?: string;\n  referenceConfig?: ReferenceConfig;\n};\n\nexport const ReferenceTable: React.FC<ReferenceTableProps> = ({\n  value,\n  referenceConfig,\n  ...passThroughProps\n}) => {\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n  const [selectedFeature, setSelectedFeature] = useState<OlFeature>();\n\n  const {\n    t\n  } = useTranslation();\n\n  const defaultPropertyName = 'id';\n\n  const resolvePlaceholder = (record: ReferenceDataType) => {\n    if (referenceConfig?.tablePropertyName) {\n      const regex = /{{(.*?)}}/g;\n\n      if (referenceConfig?.tablePropertyName.match(regex)) {\n        let resolved = referenceConfig?.tablePropertyName;\n        let match;\n\n        while (match = regex.exec(referenceConfig?.tablePropertyName)) {\n          resolved = resolved.replace(match[0], record[match[1]]);\n        }\n\n        return resolved;\n      }\n\n      return record[referenceConfig?.tablePropertyName];\n    }\n\n    if (record[defaultPropertyName]) {\n      return record[defaultPropertyName];\n    }\n  };\n\n  const columns = [{\n    width: '100%',\n    render: (val: any, record: ReferenceDataType) => resolvePlaceholder(record) ?\n      resolvePlaceholder(record) :\n      t('ReferenceTable.defaultRowPlaceholder')\n  }, {\n    render: (val: any, record: ReferenceDataType) => {\n      return (\n        <Button\n          onClick={() => onDetailsClick(val, record)}\n          icon={(\n            <FontAwesomeIcon\n              icon={faBoxOpen}\n            />\n          )}\n        />\n      );\n    }\n  }];\n\n  const getDataSource = () => {\n    if (!value) {\n      return [];\n    }\n\n    try {\n      const parsedValue = JSON.parse(value);\n\n      if (Array.isArray(parsedValue)) {\n        return parsedValue;\n      }\n\n      if (parsedValue === null || parsedValue === undefined || typeof parsedValue === 'number' ||\n        typeof parsedValue === 'boolean' || typeof parsedValue === 'string') {\n        Logger.warn('Unsupported value given');\n        return [];\n      }\n\n      if (typeof parsedValue === 'object') {\n        return [parsedValue];\n      }\n    } catch (error) {\n      Logger.warn('Error while parsing the table data ', error);\n      return [];\n    }\n  };\n\n  const getModalTitle = () => {\n    if (!selectedFeature) {\n      return t('ReferenceTable.defaultModalTitle');\n    }\n\n    const placeholder = resolvePlaceholder(selectedFeature.getProperties());\n\n    if (!placeholder) {\n      return t('ReferenceTable.defaultModalTitle');\n    }\n\n    return `${t('ReferenceTable.modalTitle', {\n      referenceValue: placeholder\n    })}`;\n  };\n\n  const onDetailsClick = (val: any, record: ReferenceDataType) => {\n    const feature = new OlFeature();\n    feature.setProperties(record);\n\n    setSelectedFeature(feature);\n    setIsModalOpen(true);\n  };\n\n  const onCancel = async () => {\n    setIsModalOpen(false);\n    setSelectedFeature(undefined);\n  };\n\n  return (\n    <>\n      <Table\n        size=\"small\"\n        showHeader={false}\n        pagination={false}\n        columns={columns}\n        rowKey={defaultPropertyName}\n        dataSource={getDataSource()}\n        {...passThroughProps}\n      />\n      <Modal\n        className=\"reference-table-modal\"\n        open={isModalOpen}\n        maskClosable={false}\n        footer={null}\n        width={600}\n        destroyOnClose={true}\n        title={getModalTitle()}\n        onCancel={onCancel}\n      >\n        {selectedFeature && (\n          <FeatureInfoForm\n            feature={selectedFeature}\n            formConfig={referenceConfig?.featureInfoFormConfig}\n          />\n        )}\n      </Modal>\n    </>\n  );\n};\n\nexport default ReferenceTable;\n","import React from 'react';\n\nimport {\n  Checkbox,\n  Typography,\n  UploadFile\n} from 'antd';\n\nimport isString from 'lodash/isString';\nimport moment, {\n  isMoment\n} from 'moment';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport ShogunFile from '@terrestris/shogun-util/dist/model/File';\nimport {\n  PropertyFormItemReadConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport { isFileConfig } from '../EditFeatureDrawer/EditFeatureForm';\nimport FileUpload from '../FileUpload';\nimport ImageUpload from '../ImageUpload';\nimport ReferenceTable from '../ReferenceTable';\n\nexport type ValueType = string | number | boolean | moment.Moment | Record<string, any>;\nexport type DataType = 'auto' | 'number' | 'boolean' | 'string' | 'date' | 'url' | 'json';\n\nexport type ReferenceConfig = {\n  tablePropertyName?: string;\n  featureInfoFormConfig?: PropertyFormItemReadConfig[];\n};\n\nexport type DisplayFieldProps = {\n  /**\n   * The data type of the value to display. If set to 'auto' (default),\n   * the component tries to guess the data type based on the value. Otherwise\n   * the component will try to enforce the given data type.\n   */\n  dataType?: DataType;\n  /**\n   * A map of values to display instead of the actual value. The key is the\n   * original value and the value is the value to display instead.\n   */\n  valueMap?: Record<string, ValueType>;\n  format?: string;\n  suffix?: string;\n  value?: ValueType | ValueType[];\n  label?: string;\n  referenceConfig?: ReferenceConfig;\n  /**\n   * If set, it displays the given value instead of the URL.\n   */\n  urlDisplayValue?: string;\n};\n\nexport const DisplayField: React.FC<DisplayFieldProps> = ({\n  dataType = 'auto',\n  valueMap,\n  format = 'DD.MM.YYYY',\n  suffix,\n  value,\n  label,\n  referenceConfig,\n  urlDisplayValue,\n  ...passThroughProps\n}): JSX.Element => {\n\n  const {\n    i18n\n  } = useTranslation();\n\n  let displayValue: React.ReactNode = '';\n\n  if (value && typeof value === 'string' && valueMap?.hasOwnProperty(value)) {\n    value = valueMap[value];\n  }\n\n  if (\n    dataType === 'string' ||\n    (dataType === 'auto' && typeof value === 'string')\n  ) {\n    if (value) {\n      displayValue = value?.toString();\n    }\n  }\n\n  if (\n    dataType === 'boolean' ||\n    (dataType === 'auto' && typeof value === 'boolean' || value === 'false' || value === 'true')\n  ) {\n    return (\n      <Checkbox\n        checked={value !== 'false' && value !== false}\n        disabled\n      />\n    );\n  }\n\n  if (\n    dataType === 'number' ||\n    (dataType === 'auto' && Number.isFinite(value))\n  ) {\n    if (value) {\n      displayValue = new Intl.NumberFormat(i18n.language, {\n        useGrouping: false\n      }).format(Number(value));\n    }\n  }\n\n  if (\n    dataType === 'date' ||\n    (dataType === 'auto' && isMoment(value))\n  ) {\n    if (value) {\n      displayValue = moment(value as string).format(format);\n    }\n  }\n\n  if (dataType === 'auto' && Array.isArray(value)) {\n    displayValue = value.join(', ');\n  }\n\n  const isUrl = (candidate: string) => {\n    const lowerCandidate = candidate.toLowerCase();\n    const protocols = ['http://', 'https://', 'ftp://', 'mailto:'];\n    return protocols.some(protocol => lowerCandidate.startsWith(protocol));\n  };\n\n  if (\n    dataType === 'url' ||\n    (dataType === 'auto' && isString(value) && isUrl(value))\n  ) {\n    if (value) {\n      displayValue = (\n        <a\n          href={value?.toString()}\n          target=\"_blank\"\n          rel='noreferrer'\n        >\n          {urlDisplayValue ? urlDisplayValue : value?.toString()}\n        </a>\n      );\n    }\n  }\n\n  const getUpload = (val: ValueType | ValueType[]): UploadFile<ShogunFile>[] | null => {\n    if (!value) {\n      return null;\n    }\n    let v = typeof val !== 'string' ? JSON.stringify(val) : val;\n\n    try {\n      v = JSON.parse(v);\n    } catch (e) {\n      return null;\n    }\n\n    if (typeof v === 'object' && v !== null && isFileConfig(v[0])) {\n      return v as UploadFile<ShogunFile>[];\n    }\n    return null;\n  };\n\n  const uploadValue = value && getUpload(value);\n\n  if (dataType === 'auto' && uploadValue) {\n    if (uploadValue[0].response?.fileType?.startsWith('image/')) {\n      return (\n        <ImageUpload\n          initialFileList={uploadValue}\n          disabled\n          readOnly\n        />\n      );\n    } else {\n      return (\n        <FileUpload\n          defaultFileList={uploadValue}\n          disabled\n          readOnly\n        />\n      );\n    }\n  }\n\n  const isJson = (val: ValueType | ValueType[]): boolean => {\n    let v = typeof val !== 'string' ? JSON.stringify(val) : val;\n\n    try {\n      v = JSON.parse(v);\n    } catch (e) {\n      return false;\n    }\n\n    return typeof v === 'object' && v !== null;\n  };\n\n  if (\n    dataType === 'json' ||\n    dataType === 'auto' && value && isJson(value)\n  ) {\n    return (\n      <ReferenceTable\n        value={typeof value === 'string' ? value : JSON.stringify(value)}\n        referenceConfig={referenceConfig}\n      />\n    );\n  }\n\n  if (suffix) {\n    displayValue = <>{displayValue} {suffix}</>;\n  }\n\n  return (\n    <Typography.Text\n      className=\"displayfield\"\n      {...passThroughProps}\n    >\n      {displayValue}\n    </Typography.Text>\n  );\n};\n\nexport default DisplayField;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faEdit,\n  faTrash,\n  faPlus\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  Modal,\n  Popconfirm,\n  Table\n} from 'antd';\n\nimport {\n  FormInstance,\n  useForm\n} from 'antd/lib/form/Form';\n\nimport {\n  ColumnsType,\n  TableProps\n} from 'antd/lib/table';\n\nimport { FileInfoList } from 'hooks/useWriteWfsTransaction';\n\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport moment from 'moment';\n\nimport OlFeature from 'ol/Feature';\nimport {\n  getUid\n} from 'ol/util';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport {\n  PropertyFormItemEditConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport useConvertImageUrl from '../../../hooks/useConvertImageUrl';\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\n\nimport EditFeatureForm from '../../EditFeatureDrawer/EditFeatureForm';\n\nimport './index.less';\n\nexport type EditReferenceDataType = {\n  id?: number;\n  internalId?: number;\n  [key: string]: any;\n};\n\nexport type EditReferenceTableProps = Omit<TableProps<EditReferenceDataType>, 'onChange'> & {\n  parentForm: FormInstance<EditReferenceDataType>;\n  propertyName: string;\n  value?: EditReferenceDataType;\n  tablePropertyName?: string;\n  formConfig?: PropertyFormItemEditConfig[];\n  onChange?: (changedValues: EditReferenceDataType[]) => void;\n};\n\nexport const EditReferenceTable: React.FC<EditReferenceTableProps> = ({\n  parentForm,\n  propertyName,\n  value,\n  tablePropertyName,\n  formConfig,\n  onChange = () => {},\n  ...passThroughProps\n}) => {\n  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n  const [selectedFeature, setSelectedFeature] = useState<OlFeature>();\n\n  const [form] = useForm<EditReferenceDataType>();\n\n  const {\n    t\n  } = useTranslation();\n\n  const imageUrlToBase64 = useConvertImageUrl();\n  const client = useSHOGunAPIClient();\n\n  const defaultPropertyName = 'id';\n\n  const resolvePlaceholder = (record: EditReferenceDataType): string | number => {\n    if (!tablePropertyName) {\n      return record[defaultPropertyName] || '';\n    }\n\n    const regex = /{{(.*?)}}/g;\n\n    if (!tablePropertyName.match(regex)) {\n      return record[tablePropertyName];\n    }\n\n    let resolved = tablePropertyName;\n    let match;\n\n    while (match = regex.exec(tablePropertyName)) {\n      resolved = resolved.replace(match[0], record[match[1]]);\n    }\n\n    return resolved;\n  };\n\n  const columns: ColumnsType<EditReferenceDataType> = [{\n    width: '100%',\n    defaultSortOrder: 'ascend',\n    sorter: (a, b) => {\n      const valA = resolvePlaceholder(a);\n      const valB = resolvePlaceholder(b);\n\n      if (Number.isFinite(valA) && Number.isFinite(valB)) {\n        return (valA as number) - (valB as number);\n      }\n\n      if (typeof valA === 'string' && typeof valB === 'string') {\n        return valA.localeCompare(valB);\n      }\n\n      return 0;\n    },\n    render: (_: any, record: EditReferenceDataType) => resolvePlaceholder(record)\n  }, {\n    render: (_: any, record: EditReferenceDataType) => {\n      return (\n        <Button\n          onClick={() => onDetailsClick(record)}\n          icon={(\n            <FontAwesomeIcon\n              icon={faEdit}\n            />\n          )}\n        />\n      );\n    }\n  }, {\n    render: (_: any, record: EditReferenceDataType) => {\n      return (\n        <Popconfirm\n          title={t('EditReferenceTable.confirmDeleteTitle')}\n          onConfirm={() => onConfirmDelete(record)}\n          placement=\"bottomRight\"\n        >\n          <Button\n            danger={true}\n            icon={(\n              <FontAwesomeIcon\n                icon={faTrash}\n              />\n            )}\n          />\n        </Popconfirm>\n      );\n    }\n  }];\n\n  const getDataSource = () => {\n    if (!value) {\n      return;\n    }\n\n    if (!Array.isArray(value)) {\n      Logger.warn('Reference value must be of of type array.');\n      return;\n    }\n\n    const valueCopy = _cloneDeep(value);\n    valueCopy.forEach(v => {\n      Object.entries(v).forEach(async ([key, val]) => {\n        const isDate = formConfig?.some(cfg => cfg.propertyName === key && cfg.component === 'DATE');\n        if (isDate && val) {\n          const parsedDate = moment(value);\n\n          if (parsedDate.isValid()) {\n            v[key] = moment(val);\n          } else {\n            Logger.warn('Could not parse date');\n            v[key] = null;\n          }\n        }\n\n        const isUpload = formConfig?.some(cfg => cfg.propertyName === key && cfg.component === 'UPLOAD');\n        if (isUpload) {\n          if (Array.isArray(v[key])) {\n            const vMap = v[key]?.map(async (upload: FileInfoList) => ({\n              ...upload,\n              thumbUrl: upload.type.startsWith('image')\n                ? await imageUrlToBase64(\n                  `${client?.getBasePath()}imagefiles/${\n                    upload?.response?.fileUuid\n                  }/thumbnail`\n                )\n                : undefined,\n              url: upload.type.startsWith('image') ? undefined : upload.url\n            }));\n            const result = await Promise.all(vMap);\n            v[key] = result;\n          } else {\n            v[key] = [];\n          }\n        }\n      });\n    });\n\n    const isIdAvailable = valueCopy.every(el => {\n      if (Number.isFinite(el.id)) {\n        return true;\n      }\n\n      if (typeof el.id === 'string' && el.id.length > 0) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (!isIdAvailable) {\n      Logger.warn('Not all elements in the referenced array contain an id value. ' +\n        'This might result in unexpected behaviour');\n    }\n\n    return valueCopy;\n  };\n\n  const onAddClick = () => {\n    const feature = new OlFeature();\n    // We need to set a temporarily internal id on the feature to have it\n    // detectable while it's not being saved and has no id property set.\n    feature.set('internalId', getUid(feature));\n\n    form.setFieldsValue(feature.getProperties());\n\n    setSelectedFeature(feature);\n    setIsModalOpen(true);\n  };\n\n  const onConfirmDelete = (record: EditReferenceDataType) => {\n    const parentFormValues = parentForm.getFieldsValue();\n\n    if (!parentFormValues[propertyName]) {\n      Logger.warn(`Could not find the property ${propertyName} in the form values`);\n      return;\n    }\n\n    const deleteCandidates = _cloneDeep(parentFormValues[propertyName]);\n\n    if (!Array.isArray(deleteCandidates)) {\n      Logger.warn('The delete candidate is not of required type array');\n      return;\n    }\n\n    const deleteIdx = deleteCandidates.findIndex(deleteCandidate => {\n      if (Number.isFinite(deleteCandidate.id) && (deleteCandidate.id === record.id)) {\n        return true;\n      }\n\n      if (deleteCandidate.internalId && (deleteCandidate.internalId === record.internalId)) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (deleteIdx === -1) {\n      Logger.warn(`Could not find the index (${record.id}) to delete`);\n      return;\n    }\n\n    deleteCandidates.splice(deleteIdx, 1);\n\n    onChange(deleteCandidates);\n  };\n\n  const onDetailsClick = (record: EditReferenceDataType) => {\n    const feature = new OlFeature();\n    feature.setProperties(record);\n\n    form.setFieldsValue(feature.getProperties());\n\n    setSelectedFeature(feature);\n    setIsModalOpen(true);\n  };\n\n  const updateReferences = () => {\n    const formValues = _cloneDeep<EditReferenceDataType>(form.getFieldsValue(true));\n\n    let existingReferences: EditReferenceDataType[] = [];\n    if (Array.isArray(parentForm.getFieldValue(propertyName))) {\n      existingReferences = _cloneDeep(parentForm.getFieldValue(propertyName));\n    }\n\n    const targetIdx = existingReferences.findIndex(existingReference => {\n      if (Number.isFinite(existingReference.id) && (existingReference.id === formValues.id)) {\n        return true;\n      }\n\n      if (existingReference.internalId && (existingReference.internalId === formValues.internalId)) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (targetIdx > -1) {\n      // Update\n      existingReferences[targetIdx] = formValues;\n    } else {\n      // Add\n      existingReferences.push(formValues);\n    }\n\n    if (form.isFieldsTouched()) {\n      onChange(existingReferences);\n    }\n  };\n\n  const onCancel = () => {\n    closeModal();\n  };\n\n  const onOk = async () => {\n    try {\n      await form.validateFields();\n    } catch (error) {\n      Logger.warn('Form validation failed: ', error);\n      return;\n    }\n\n    updateReferences();\n\n    closeModal();\n  };\n\n  const closeModal = () => {\n    form.resetFields();\n\n    setIsModalOpen(false);\n    setSelectedFeature(undefined);\n  };\n\n  return (\n    <>\n      <Button\n        className=\"add-reference-button\"\n        onClick={onAddClick}\n        icon={(\n          <FontAwesomeIcon\n            icon={faPlus}\n          />\n        )}\n      />\n      <Table\n        size=\"small\"\n        showHeader={false}\n        pagination={false}\n        columns={columns}\n        rowKey={defaultPropertyName}\n        dataSource={getDataSource()}\n        {...passThroughProps}\n      />\n      <Modal\n        className=\"edit-reference-table-modal\"\n        open={isModalOpen}\n        maskClosable={false}\n        width={600}\n        destroyOnClose={true}\n        title={`${t('EditReferenceTable.modalTitle', {\n          referenceValue: selectedFeature ?\n            resolvePlaceholder(selectedFeature.getProperties() as EditReferenceDataType) :\n            undefined\n        })}`}\n        onCancel={onCancel}\n        onOk={onOk}\n      >\n        {selectedFeature && (\n          <EditFeatureForm\n            form={form}\n            formConfig={formConfig}\n            applyFormDirty={false}\n          />\n        )}\n      </Modal>\n    </>\n  );\n};\n\nexport default EditReferenceTable;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  Input,\n  InputNumber,\n  DatePicker,\n  Select,\n  Switch,\n  Checkbox,\n  Form,\n  FormItemProps\n} from 'antd';\n\nimport {\n  FormInstance,\n  FormProps\n} from 'antd/lib/form/Form';\nimport {\n  UploadChangeParam,\n  UploadFile\n} from 'antd/lib/upload/interface';\n\nimport _debounce from 'lodash/debounce';\nimport _isNil from 'lodash/isNil';\nimport _isObject from 'lodash/isObject';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\nimport ShogunFile from '@terrestris/shogun-util/dist/model/File';\n\nimport {\n  PropertyFormItemEditConfig,\n  PropertyFormItemEditReferenceTableConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../hooks/useAppSelector';\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\nimport {\n  setFormDirty\n} from '../../../store/editFeature';\nimport DisplayField from '../../DisplayField';\nimport FileUpload from '../../FileUpload';\nimport ImageUpload from '../../ImageUpload';\nimport EditReferenceTable from '../EditReferenceTable';\n\nimport './index.less';\n\nexport type EditFeatureFormProps = FormProps & {\n  form: FormInstance;\n  formConfig?: PropertyFormItemEditConfig[];\n  applyFormDirty?: boolean;\n};\n\nexport function isFileConfig(val: any): val is UploadFile<ShogunFile> {\n  if (_isNil(val)) {\n    return false;\n  }\n\n  return val.uid &&\n    !_isNil(val.name) &&\n    !_isNil(val.type) &&\n    !_isNil(val.uid) &&\n    _isObject(val.response) &&\n    !_isNil(val.response.id) &&\n    !_isNil(val.response.fileUuid) &&\n    !_isNil(val.response.fileName) &&\n    !_isNil(val.response.fileType);\n}\n\nexport const EditFeatureForm: React.FC<EditFeatureFormProps> = ({\n  form,\n  formConfig,\n  applyFormDirty = true,\n  ...passThroughProps\n}): JSX.Element => {\n\n  const client = useSHOGunAPIClient();\n  const dispatch = useAppDispatch();\n\n  const formDirty = useAppSelector(\n    state => state.editFeature.formDirty\n  );\n\n  const createFormItem = (fieldCfg: PropertyFormItemEditConfig): React.ReactNode => {\n    let field: React.ReactNode;\n    if (fieldCfg.readOnly) {\n      field = createReadOnlyComponent(fieldCfg);\n    } else if (fieldCfg.component) {\n      field = createFieldComponent(fieldCfg);\n    } else {\n      Logger.warn('FieldConfig is missing `readOnly`, `component` or `dataType` property.');\n      field = (\n        <Input\n          key={fieldCfg.propertyName}\n          placeholder=\"\"\n        />\n      );\n    }\n\n    const formItemProps: FormItemProps = {\n      rules: []\n    };\n\n    formItemProps.rules = [{\n      required: fieldCfg.required\n    }];\n\n    if ((fieldCfg.component === 'SWITCH' || fieldCfg.component === 'CHECKBOX') && !fieldCfg.readOnly) {\n      formItemProps.valuePropName = 'checked';\n    }\n\n    if (fieldCfg.component === 'UPLOAD' && !fieldCfg.readOnly) {\n      formItemProps.valuePropName = 'fileList';\n      /**\n       * Setting `getValueFromEvent` to provide the proper file list to the antd Upload component.\n       */\n      formItemProps.getValueFromEvent = (e: UploadFile<ShogunFile>[] | UploadChangeParam<UploadFile<ShogunFile>>) => {\n        if (Array.isArray(e)) {\n          return e;\n        }\n        return e && e.fileList;\n      };\n    }\n\n    return (\n      <Form.Item\n        key={fieldCfg.propertyName}\n        name={fieldCfg.propertyName}\n        label={fieldCfg.displayName || fieldCfg.propertyName}\n        {...formItemProps}\n      >\n        {field}\n      </Form.Item>\n    );\n  };\n\n  const createReadOnlyComponent = (fieldConfig: PropertyFormItemEditConfig): React.ReactNode => {\n    return (\n      <DisplayField\n        {...fieldConfig.fieldProps}\n      />\n    );\n  };\n\n  const createFieldComponent = (fieldCfg: PropertyFormItemEditConfig): React.ReactNode => {\n    if (!client) {\n      return;\n    }\n\n    switch (fieldCfg.component) {\n      case 'CHECKBOX':\n        return (\n          <Checkbox\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'DATE':\n        return (\n          <DatePicker\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'DISPLAY':\n        return (\n          <span {...fieldCfg?.fieldProps} />\n        );\n      case 'INPUT':\n        return (\n          <Input\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'NUMBER':\n        return (\n          <InputNumber\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'SELECT':\n        return (\n          <Select\n            allowClear={true}\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'SWITCH':\n        return (\n          <Switch\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'TEXTAREA':\n        return (\n          <Input.TextArea\n            {...fieldCfg?.fieldProps}\n          />\n        );\n      case 'UPLOAD':\n        if (fieldCfg?.fieldProps?.type === 'IMAGE') {\n          return (\n            <ImageUpload\n              {...fieldCfg?.fieldProps}\n            />\n          );\n        } else {\n          return (\n            <FileUpload\n              {...fieldCfg?.fieldProps}\n            />\n          );\n        }\n      case 'REFERENCE_TABLE':\n        const referenceTableConfig = (fieldCfg as PropertyFormItemEditReferenceTableConfig);\n\n        return (\n          <EditReferenceTable\n            key={referenceTableConfig.propertyName}\n            tablePropertyName={referenceTableConfig.tablePropertyName}\n            propertyName={referenceTableConfig.propertyName}\n            formConfig={referenceTableConfig.editFormConfig}\n            parentForm={form}\n            {...referenceTableConfig.fieldProps}\n          />\n        );\n      default:\n        Logger.error(`Component type \"${fieldCfg?.component}\" is not supported`);\n        return <></>;\n    }\n  };\n\n  const onValuesChange = async (changedValues: any) => {\n    if (applyFormDirty && changedValues && !formDirty) {\n      dispatch(setFormDirty(true));\n    }\n  };\n\n  return (\n    <Form\n      className=\"edit-feature-form\"\n      form={form}\n      labelCol={{\n        span: 8\n      }}\n      labelAlign=\"left\"\n      labelWrap\n      onValuesChange={_debounce(onValuesChange, 250)}\n      {...passThroughProps}\n    >\n      { formConfig?.map(createFormItem) }\n    </Form>\n  );\n};\n\nexport default EditFeatureForm;\n","import {\n  useCallback\n} from 'react';\n\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport UrlUtil from '@terrestris/base-util/dist/UrlUtil/UrlUtil';\n\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport type LocalGeometryType = 'MultiPoint' | 'Point' | 'MultiLineString' | 'LineString' | 'MultiPolygon' | 'Polygon';\nexport type GeometryType = 'gml:MultiPoint' | 'gml:Point' | 'gml:MultiLineString' | 'gml:LineString' | 'gml:MultiPolygon' | 'gml:Polygon';\n\nexport type Property = {\n  localType: 'int' | 'number' | 'string' | 'boolean' | 'date' | LocalGeometryType;\n  maxOccurs: 0 | 1;\n  minOccurs: 0 | 1;\n  name: string;\n  nillable: boolean;\n  type: 'xsd:int' | 'xsd:number' | 'xsd:string' | 'xsd:boolean' | 'xsd:date' | GeometryType;\n};\n\nexport type FeatureType = {\n  typeName: string;\n  properties: Property[];\n};\n\nexport type DescribeFeatureType = {\n  elementFormDefault: string;\n  featureTypes: FeatureType[];\n  targetNamespace: string;\n  targetPrefix: string;\n};\n\nexport const isGeometryType = (propertyType: string): propertyType is GeometryType => {\n  const geometryTypes = [\n    'gml:MultiPoint',\n    'gml:Point',\n    'gml:MultiLineString',\n    'gml:LineString',\n    'gml:MultiPolygon',\n    'gml:Polygon'\n  ];\n\n  return geometryTypes.includes(propertyType);\n};\n\nexport const useExecuteWfsDescribeFeatureType = () => {\n  const client = useSHOGunAPIClient();\n\n  const executeWfsDescribeFeatureType = useCallback(async (layer: WmsLayer) => {\n    let url;\n\n    const source = layer.getSource();\n    if (source instanceof OlSourceImageWMS) {\n      url = source.getUrl();\n    }\n    if (source instanceof OlSourceTileWMS) {\n      const urls = source.getUrls();\n      url = urls ? urls[0] : undefined;\n    }\n\n    if (!url) {\n      return;\n    }\n\n    if (url.endsWith('?')) {\n      url = url.slice(0, -1);\n    }\n\n    const params = {\n      SERVICE: 'WFS',\n      REQUEST: 'DescribeFeatureType',\n      VERSION: '2.0.0',\n      OUTPUTFORMAT: 'application/json',\n      TYPENAMES: layer.getSource()?.getParams().LAYERS\n    };\n\n    const defaultHeaders = {\n      'Content-Type': 'application/json'\n    };\n\n    const response = await fetch(`${url}?${UrlUtil.objectToRequestString(params)}`, {\n      method: 'GET',\n      headers: layer.get('useBearerToken') ? {\n        ...defaultHeaders,\n        ...getBearerTokenHeader(client?.getKeycloak())\n      } : defaultHeaders\n    });\n\n    if (!response.ok) {\n      throw new Error('No successful response while executing a WFS-Transaction');\n    }\n\n    return await response.json() as DescribeFeatureType;\n  }, [client]);\n\n  return executeWfsDescribeFeatureType;\n};\n\nexport default useExecuteWfsDescribeFeatureType;\n","import {\n  useCallback\n} from 'react';\n\nimport {\n  FormInstance\n} from 'antd';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport {\n  isMoment\n} from 'moment';\n\nimport {\n  isEmpty\n} from 'ol/extent';\nimport OlFeature from 'ol/Feature';\nimport OlFormatWFS, {\n  WriteTransactionOptions as OlWriteTransactionOptions\n} from 'ol/format/WFS';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  PropertyFormTabConfig,\n  PropertyFormItemEditConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport {\n  isFileConfig\n} from '../components/EditFeatureDrawer/EditFeatureForm';\n\nimport useAppSelector from './useAppSelector';\nimport useExecuteWfsDescribeFeatureType, {\n  isGeometryType\n} from './useExecuteWfsDescribeFeatureType';\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport type WriteWfsTransactionOpts = {\n  layer: WmsLayer;\n  upsertFeatures?: OlFeature[];\n  deleteFeatures?: OlFeature[];\n  form?: FormInstance;\n};\n\nexport type FileInfoList = {\n  uid: string;\n  lastModified: number;\n  name: string;\n  type: string;\n  url: string;\n  response: {\n    id: number;\n    created: string;\n    fileName: string;\n    fileType: string;\n    fileUuid: string;\n  };\n};\n\nexport const useWriteWfsTransaction = () => {\n  const map = useMap();\n  const executeWfsDescribeFeatureType = useExecuteWfsDescribeFeatureType();\n  const client = useSHOGunAPIClient();\n  const allowedEditMode = useAppSelector(state => state.editFeature.userEditMode);\n\n  const cleanFormValues = useCallback((formValues: Record<string, any>,\n    formConfig: PropertyFormTabConfig<PropertyFormItemEditConfig>[], stringify?: boolean) => {\n    for (const [key, value] of Object.entries(formValues)) {\n      if (Array.isArray(value)) {\n        const cleanedValue = value.map(v => cleanFormValues(v, formConfig));\n        formValues[key] = stringify ? JSON.stringify(cleanedValue) : cleanedValue;\n      }\n\n      // Transform undefined to null values.\n      if (value === undefined) {\n        formValues[key] = null;\n      }\n\n      // Filter out read-only fields.\n      const isReadOnly = formConfig.some(cfg => cfg.children\n        ?.some(child => child.propertyName === key && child.readOnly));\n\n      if (isReadOnly) {\n        delete formValues[key];\n      }\n\n      // Transform moments back to iso string.\n      if (isMoment(value)) {\n        formValues[key] = value.toISOString();\n      }\n\n      if (Array.isArray(value) && value.length > 0 && isFileConfig(value[0])) {\n        const filePath = value[0].response?.fileType?.startsWith('image/') ? 'imagefiles/' : 'files/';\n        const fileInfoList: FileInfoList[] = value.map((val: FileInfoList) => ({\n          uid: val.uid,\n          lastModified: val.lastModified,\n          name: val.name,\n          type: val.type,\n          url: `${client?.getBasePath()}${filePath}${val.response.fileUuid}`,\n          response: {\n            id: val.response?.id,\n            created: val.response?.created,\n            fileName: val.response?.fileName,\n            fileType: val.response?.fileType,\n            fileUuid: val.response?.fileUuid\n          }\n        }));\n        formValues[key] = JSON.stringify(fileInfoList);\n      }\n    }\n\n    return formValues;\n  }, [client]);\n\n  const writeWfsTransaction = useCallback(async (opts: WriteWfsTransactionOpts) => {\n    if (!map) {\n      return;\n    }\n\n    const inserts: OlFeature[] = [];\n    const updates: OlFeature[] = [];\n    const deletes: OlFeature[] = [];\n\n    const describeFeatureType = await executeWfsDescribeFeatureType(opts.layer);\n\n    if (!describeFeatureType) {\n      return;\n    }\n\n    const formConfig = opts.layer.get('editFormConfig') as PropertyFormTabConfig<PropertyFormItemEditConfig>[];\n\n    const geomProperty = describeFeatureType.featureTypes[0]?.properties\n      ?.find(property => isGeometryType(property.type));\n\n    let overallUpdateMode = false;\n\n    if (opts.upsertFeatures) {\n      for (const feature of opts.upsertFeatures) {\n        const feat = new OlFeature();\n\n        const geometry = feature.getGeometry()?.clone();\n\n        if (geometry && !isEmpty(geometry.getExtent()) && allowedEditMode?.includes('EDIT_GEOMETRY')) {\n          feat.set(geomProperty?.name || 'geom', geometry);\n          feat.setGeometryName(geomProperty?.name || 'geom');\n        }\n\n        if (opts.form) {\n          feat.setProperties(cleanFormValues(_cloneDeep(opts.form?.getFieldsValue()), formConfig, true));\n        }\n\n        const updateMode = !!feature.getId();\n\n        if (updateMode && !overallUpdateMode) {\n          overallUpdateMode = true;\n        }\n\n        if (updateMode) {\n          feat.setId(feature.getId());\n        }\n\n        if (updateMode) {\n          updates.push(feat);\n        } else {\n          inserts.push(feat);\n        }\n      }\n    }\n\n    if (opts.deleteFeatures) {\n      deletes.push(...opts.deleteFeatures);\n    }\n\n    const transactionOpts: OlWriteTransactionOptions = {\n      featureNS: describeFeatureType.targetNamespace,\n      featurePrefix: describeFeatureType.targetPrefix,\n      featureType: opts.layer.getSource()?.getParams().LAYERS,\n      srsName: map.getView().getProjection().getCode(),\n      version: '1.1.0',\n      nativeElements: []\n    };\n\n    const format = new OlFormatWFS();\n\n    const transaction = format.writeTransaction(inserts, updates, deletes, transactionOpts);\n\n    if (overallUpdateMode && ClientConfiguration.wfsLockFeatureEnabled) {\n      const rootNode = transaction.getRootNode() as Element;\n      const lockId = document.createElementNS('http://www.opengis.net/wfs', 'LockId');\n      const lockIdValue = document.createTextNode('GeoServer');\n      lockId.appendChild(lockIdValue);\n      rootNode.appendChild(lockId);\n    }\n\n    return transaction;\n  }, [map, allowedEditMode, executeWfsDescribeFeatureType, cleanFormValues]);\n\n  return writeWfsTransaction;\n};\n\nexport default useWriteWfsTransaction;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect\n} from 'react';\n\nimport {\n  Drawer\n} from 'antd';\n\nimport type {\n  DrawerProps\n} from 'antd/es/drawer';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport './index.less';\n\nexport type MapDrawerProps = DrawerProps;\n\nexport const MapDrawer: React.FC<MapDrawerProps> = ({\n  open,\n  children,\n  ...passThroughProps\n}) => {\n\n  const map = useMap();\n\n  useEffect(() => {\n    document.querySelectorAll('#map')[0]?.classList.toggle('bisected', !!open);\n  }, [open]);\n\n  const onAfterDrawerOpenChange = () => {\n    map?.updateSize();\n  };\n\n  return (\n    <Drawer\n      className=\"map-drawer\"\n      mask={false}\n      open={open}\n      placement=\"right\"\n      width={getComputedStyle(document.documentElement).getPropertyValue('--editDrawerWidth')}\n      afterOpenChange={onAfterDrawerOpenChange}\n      {...passThroughProps}\n    >\n      {children}\n    </Drawer>\n  );\n};\n\nexport default MapDrawer;\n","import {\n  useCallback\n} from 'react';\n\nimport {\n  FeatureCollection\n} from 'geojson';\n\nimport OlFormatFilter from 'ol/format/filter/Filter';\nimport OlFormatWFS from 'ol/format/WFS';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useExecuteWfsDescribeFeatureType from './useExecuteWfsDescribeFeatureType';\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport type GetFeatureOpts = {\n  layer: WmsLayer;\n  filter?: OlFormatFilter;\n};\n\nexport const useExecuteGetFeature = () => {\n  const client = useSHOGunAPIClient();\n  const map = useMap();\n  const executeWfsDescribeFeatureType = useExecuteWfsDescribeFeatureType();\n\n  const executeGetFeature = useCallback(async (opts: GetFeatureOpts) => {\n    if (!map) {\n      return;\n    }\n\n    const describeFeatureType = await executeWfsDescribeFeatureType(opts.layer);\n\n    if (!describeFeatureType) {\n      return;\n    }\n\n    let url;\n\n    const source = opts.layer.getSource();\n    if (source instanceof OlSourceImageWMS) {\n      url = source.getUrl();\n    }\n    if (source instanceof OlSourceTileWMS) {\n      const urls = source.getUrls();\n      url = urls ? urls[0] : undefined;\n    }\n\n    if (!url) {\n      return;\n    }\n\n    if (url.endsWith('?')) {\n      url = url.slice(0, -1);\n    }\n\n    const featureRequest = new OlFormatWFS().writeGetFeature({\n      srsName: map.getView().getProjection().getCode(),\n      featureNS: describeFeatureType.targetNamespace,\n      featurePrefix: describeFeatureType.targetPrefix,\n      featureTypes: [source?.getParams().LAYERS],\n      outputFormat: 'application/json',\n      filter: opts.filter\n    });\n\n    const defaultHeaders = {\n      'Content-Type': 'application/json'\n    };\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: opts.layer?.get('useBearerToken') ? {\n        ...defaultHeaders,\n        ...getBearerTokenHeader(client?.getKeycloak())\n      } : defaultHeaders,\n      body: new XMLSerializer().serializeToString(featureRequest)\n    });\n\n    if (!response.ok) {\n      throw new Error('No successful response');\n    }\n\n    return await response.json() as FeatureCollection;\n  }, [client, executeWfsDescribeFeatureType, map]);\n\n  return executeGetFeature;\n};\n\nexport default useExecuteGetFeature;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\n\nimport {\n  faPencil,\n  faTrash,\n  faDrawPolygon,\n  faUndo\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport { TooltipPlacement } from 'antd/es/tooltip';\nimport {\n  FeatureCollection,\n  Feature\n} from 'geojson';\nimport { t } from 'i18next';\n\nimport _isEmpty from 'lodash/isEmpty';\n\nimport { isEmpty as isEmptyOlExtent } from 'ol/extent';\nimport OlFormatGeoJson from 'ol/format/GeoJSON';\nimport OlGeometry from 'ol/geom/Geometry';\nimport { DrawEvent as OlDrawEvent } from 'ol/interaction/Draw';\nimport OlLayerVector from 'ol/layer/Vector';\nimport OlSourceVector from 'ol/source/Vector';\n\nimport DeleteButton from '@terrestris/react-geo/dist/Button/DeleteButton/DeleteButton';\nimport DrawButton from '@terrestris/react-geo/dist/Button/DrawButton/DrawButton';\nimport ModifyButton from '@terrestris/react-geo/dist/Button/ModifyButton/ModifyButton';\nimport SimpleButton from '@terrestris/react-geo/dist/Button/SimpleButton/SimpleButton';\nimport ToggleGroup from '@terrestris/react-geo/dist/Button/ToggleGroup/ToggleGroup';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport Toolbar, { ToolbarProps } from '@terrestris/react-geo/dist/Toolbar/Toolbar';\n\nimport {\n  DigitizeUtil\n} from '@terrestris/react-geo/dist/Util/DigitizeUtil';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../hooks/useAppSelector';\n\nimport {\n  setFormDirty\n} from '../../../store/editFeature';\n\nimport './index.less';\n\nexport type EditFeatureGeometryToolbarProps = ToolbarProps & {\n  feature: Feature;\n  historyLength?: number;\n};\n\ntype DrawType = 'Point' | 'LineString' | 'Polygon';\n\ntype EditHistory = {\n  past: FeatureCollection[];\n  future: FeatureCollection[];\n};\nexport const EditFeatureGeometryToolbar: React.FC<EditFeatureGeometryToolbarProps> = ({\n  feature,\n  historyLength = 10\n}) => {\n\n  const editHistory = useRef<EditHistory>({\n    past: [],\n    future: []\n  });\n\n  const map = useMap();\n  const dispatch = useAppDispatch();\n\n  const [editLayer, setEditLayer] = useState<OlLayerVector<OlSourceVector<OlGeometry>>>();\n  const [, setRevision] = useState<number>(0);\n\n  const gjFormat = useMemo(() => new OlFormatGeoJson(), []);\n\n  const allowedEditMode = useAppSelector(state => state.editFeature.userEditMode);\n  const formDirty = useAppSelector(state => state.editFeature.formDirty);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    if (!editLayer) {\n      setEditLayer(DigitizeUtil.getDigitizeLayer(map));\n    }\n\n    return () => {\n      if (editLayer) {\n        map?.removeLayer(editLayer);\n      }\n    };\n  }, [editLayer, map]);\n\n  useEffect(() => {\n    const isModified = editHistory.current.past.length > 0;\n    if (isModified && !formDirty) {\n      dispatch(setFormDirty(true));\n    }\n  // we only want to change formDirty state when the editHistory changes\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dispatch, editHistory.current.past]);\n\n  useEffect(() => {\n    if (editLayer && feature?.id) {\n      editLayer.getSource()?.clear();\n      const olFeat = gjFormat.readFeature(feature);\n      const source = editLayer.getSource() as OlSourceVector;\n      source.addFeature(olFeat);\n      setRevision(r => r + 1);\n\n      if (!isEmptyOlExtent(source.getExtent())) {\n        map?.getView().fit(source.getExtent(), {\n          padding: [50, 50, 50, 50]\n        });\n      }\n    }\n  }, [feature, editLayer, gjFormat, map]);\n\n  const undoEdit = () => {\n\n    const editSource = editLayer?.getSource();\n    const features = editSource?.getFeatures();\n\n    if (!features) {\n      return;\n    }\n\n    const clone: FeatureCollection = gjFormat.writeFeaturesObject(features);\n    const previousSource = editHistory.current.past[editHistory.current.past.length - 1];\n    if (!_isEmpty(previousSource)) {\n      editSource?.clear();\n      editSource?.addFeatures(gjFormat.readFeatures(previousSource));\n      editHistory.current = {\n        past: editHistory.current.past.slice(0, -1),\n        future: [...editHistory.current.future, clone].slice(-historyLength)\n      };\n      setRevision(r => r + 1);\n    }\n  };\n\n  const redoEdit = () => {\n\n    const editSource = editLayer?.getSource();\n    const features = editSource?.getFeatures();\n\n    if (!features) {\n      return;\n    }\n\n    const clone = gjFormat.writeFeaturesObject(features);\n    const nextSource = editHistory.current.future[editHistory.current.future.length - 1];\n    if (!_isEmpty(nextSource)) {\n      editSource?.clear();\n      editSource?.addFeatures(gjFormat.readFeatures(nextSource));\n\n      editHistory.current = {\n        future: editHistory.current.future.slice(0, -1),\n        past: [...editHistory.current.past, clone].slice(-historyLength)\n      };\n      setRevision(r => r + 1);\n    }\n  };\n\n  const onDrawEnd = (e: OlDrawEvent) => {\n    // overwrite existing geometry of feature\n    if (!feature.geometry.type.toLocaleLowerCase().startsWith('multi')) {\n      const source = editLayer?.getSource();\n      const existingFeature = source?.getFeatures()[0];\n      if (existingFeature) {\n        // drawbutton automatically adds the feature to the source so we need to remove it again\n        source?.once('addfeature', (e2) => source.removeFeature(e2.feature!));\n        existingFeature.setGeometry(e.feature.getGeometry());\n      }\n    }\n    updateRevision();\n  };\n\n  const updateRevision = () => {\n\n    const features = editLayer?.getSource()?.getFeatures();\n\n    if (!features) {\n      return;\n    }\n\n    const clone: FeatureCollection = gjFormat.writeFeaturesObject(features);\n    editHistory.current = {\n      ...editHistory.current,\n      past: [...editHistory.current.past, clone].slice(-10)\n    };\n    setRevision(r => r + 1);\n  };\n\n  const btnTooltipProps = {\n    tooltipPlacement: 'left' as TooltipPlacement,\n    tooltipProps: {\n      mouseEnterDelay: 0.5\n    }\n  };\n\n  if (!editLayer) {\n    return <></>;\n  }\n\n  if (allowedEditMode.includes('EDIT_GEOMETRY')) {\n    return (\n      <Toolbar\n        className=\"geometry-edit-tb\"\n        alignment=\"vertical\"\n      >\n        <ToggleGroup>\n          {\n            allowedEditMode.includes('CREATE') ?\n              <DrawButton\n                icon={\n                  <FontAwesomeIcon icon={faPencil} />\n                }\n                pressedIcon={\n                  <FontAwesomeIcon icon={faPencil} />\n                }\n                name=\"draw\"\n                digitizeLayer={editLayer}\n                tooltip={t('EditFeatureGeometryToolbar.draw')}\n                drawType={feature.geometry.type as DrawType}\n                onDrawEnd={onDrawEnd}\n                {...btnTooltipProps}\n              />\n              : <></>\n          }\n          {\n            allowedEditMode.includes('UPDATE') ?\n              <ModifyButton\n                icon={\n                  <FontAwesomeIcon icon={faDrawPolygon} />\n                }\n                pressedIcon={\n                  <FontAwesomeIcon icon={faDrawPolygon} />\n                }\n                name=\"edit\"\n                digitizeLayer={editLayer}\n                tooltip={t('EditFeatureGeometryToolbar.edit')}\n                onModifyStart={updateRevision}\n                onModifyEnd={updateRevision}\n                onTranslateEnd={updateRevision}\n                {...btnTooltipProps}\n              />\n              : <></>\n          }\n          {\n            allowedEditMode.includes('DELETE') ?\n              <DeleteButton\n                icon={\n                  <FontAwesomeIcon icon={faTrash} />\n                }\n                pressedIcon={\n                  <FontAwesomeIcon icon={faTrash} />\n                }\n                name=\"delete\"\n                digitizeLayer={editLayer}\n                tooltip={t('EditFeatureGeometryToolbar.delete')}\n                onFeatureRemove={updateRevision}\n                {...btnTooltipProps}\n              />\n              : <></>\n          }\n        </ToggleGroup>\n        <SimpleButton\n          icon={\n            <FontAwesomeIcon icon={faUndo} />\n          }\n          tooltip={t('EditFeatureGeometryToolbar.undo')}\n          onClick={undoEdit}\n          disabled={editHistory.current.past?.length === 0}\n          {...btnTooltipProps}\n        />\n        <SimpleButton\n          icon={\n            <FontAwesomeIcon\n              icon={faUndo}\n              flip=\"horizontal\"\n            />\n          }\n          tooltip={t('EditFeatureGeometryToolbar.redo')}\n          onClick={redoEdit}\n          disabled={editHistory.current.future?.length === 0}\n          {...btnTooltipProps}\n        />\n      </Toolbar>\n    );\n  } else {\n    return <></>;\n  }\n};\n\nexport default EditFeatureGeometryToolbar;\n","import React from 'react';\n\nimport {\n  Tabs,\n  TabsProps\n} from 'antd';\n\nimport {\n  FormInstance\n} from 'antd/lib/form/Form';\n\nimport {\n  Tab\n} from 'rc-tabs/lib/interface';\n\nimport {\n  PropertyFormItemEditConfig,\n  PropertyFormTabConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport EditFeatureForm from '../EditFeatureForm';\n\nexport type EditFeatureTabsProps = TabsProps & {\n  tabConfig?: PropertyFormTabConfig<PropertyFormItemEditConfig>[];\n  form: FormInstance;\n  initialValues?: Record<string, any>;\n};\n\nexport const EditFeatureTabs: React.FC<EditFeatureTabsProps> = ({\n  tabConfig,\n  form,\n  initialValues,\n  ...passThroughProps\n}) => {\n\n  const items = tabConfig?.map((config, idx) => {\n    return {\n      label: config.title,\n      key: `${idx}`,\n      forceRender: true,\n      children: (\n        <EditFeatureForm\n          name={config.title}\n          form={form}\n          initialValues={initialValues}\n          formConfig={config.children}\n        />\n      )\n    } as Tab;\n  });\n\n  return (\n    <Tabs\n      items={items}\n      {...passThroughProps}\n    />\n  );\n};\n\nexport default EditFeatureTabs;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faTrash\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  ButtonProps,\n  Popconfirm\n} from 'antd';\n\nimport {\n  Feature\n} from 'geojson';\n\nimport OlFormatGeoJSON from 'ol/format/GeoJSON';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  Logger\n} from '@terrestris/base-util';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  WmsLayer,\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport useExecuteWfsTransaction from '../../../hooks/useExecuteWfsTransaction';\nimport useWriteWfsTransaction from '../../../hooks/useWriteWfsTransaction';\n\nexport type DeleteButtonProps = ButtonProps & {\n  feature: Feature;\n  layer: WmsLayer;\n  onError?: (error: unknown) => void;\n  onSuccess?: () => void;\n};\n\nexport const DeleteButton: React.FC<DeleteButtonProps> = ({\n  feature,\n  layer,\n  onError = () => {},\n  onSuccess = () => {},\n  ...passThroughProps\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const {\n    t\n  } = useTranslation();\n\n  const map = useMap();\n\n  const writeWfsTransaction = useWriteWfsTransaction();\n  const executeWfsTransaction = useExecuteWfsTransaction();\n\n  const onConfirmDelete = async () => {\n    if (!map) {\n      return;\n    }\n\n    if (!layer || !isWmsLayer(layer)) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const olFeature = new OlFormatGeoJSON().readFeature(feature);\n\n      const transaction = await writeWfsTransaction({\n        deleteFeatures: [olFeature],\n        layer: layer\n      });\n\n      if (!transaction) {\n        return;\n      }\n\n      await executeWfsTransaction({\n        layer: layer,\n        transaction: transaction\n      });\n\n      layer.getSource()?.refresh();\n\n      onSuccess();\n    } catch (error) {\n      Logger.error(error);\n\n      onError(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Popconfirm\n      title={t('DeleteButton.confirm')}\n      onConfirm={onConfirmDelete}\n      placement='bottomRight'\n    >\n      <Button\n        type='primary'\n        loading={loading}\n        disabled={!feature.id}\n        danger\n        icon={(\n          <FontAwesomeIcon\n            icon={faTrash}\n          />\n        )}\n        {...passThroughProps}\n      >\n        {\n          t('DeleteButton.title')\n        }\n      </Button>\n    </Popconfirm>\n  );\n};\n\nexport default DeleteButton;\n","import React from 'react';\n\nimport {\n  faRotateLeft\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  ButtonProps\n} from 'antd';\n\nimport {\n  FormInstance\n} from 'antd/lib/form/Form';\n\nimport {\n  Feature\n} from 'geojson';\n\nimport OlFormatGeoJson from 'ol/format/GeoJSON';\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport { DigitizeUtil } from '@terrestris/react-geo/dist/Util/DigitizeUtil';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport {\n  setFormDirty\n} from '../../../store/editFeature';\n\nexport type ResetButtonProps = Omit<ButtonProps, 'form'> & {\n  feature: Feature;\n  form: FormInstance;\n};\n\nexport const ResetButton: React.FC<ResetButtonProps> = ({\n  feature,\n  form,\n  ...passThroughProps\n}) => {\n\n  const {\n    t\n  } = useTranslation();\n\n  const map = useMap();\n\n  const dispatch = useAppDispatch();\n\n  const onClick = () => {\n    form.resetFields();\n    dispatch(setFormDirty(false));\n\n    if (map) {\n      const editLayer = DigitizeUtil.getDigitizeLayer(map);\n      if (editLayer) {\n        editLayer.getSource()?.clear();\n        const format = new OlFormatGeoJson();\n        const olFeat = format.readFeature(feature);\n        editLayer.getSource()?.addFeature(olFeat);\n      }\n    }\n  };\n\n  return (\n    <Button\n      type='primary'\n      onClick={onClick}\n      icon={(\n        <FontAwesomeIcon\n          icon={faRotateLeft}\n        />\n      )}\n      {...passThroughProps}\n    >\n      {\n        t('ResetButton.title')\n      }\n    </Button>\n  );\n};\n\nexport default ResetButton;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport './index.less';\n\nexport type FeedbackIconProps = {\n  loadComplete: boolean;\n};\n\nexport const FeedbackIcon: React.FC<FeedbackIconProps> = ({\n  loadComplete = false\n}) => {\n\n  return (\n    <div className={loadComplete ? 'feedback-icon' : 'feedback-icon hidden'}>\n      <div className={loadComplete ? 'checkmark' : 'checkmark-hidden'} />\n    </div>\n  );\n};\n\nexport default FeedbackIcon;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faFloppyDisk\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  ButtonProps\n} from 'antd';\n\nimport {\n  FormInstance\n} from 'antd/lib/form/Form';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  Logger\n} from '@terrestris/base-util';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  DigitizeUtil\n} from '@terrestris/react-geo/dist/Util/DigitizeUtil';\nimport {\n  WmsLayer,\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../hooks/useAppSelector';\nimport useExecuteWfsTransaction from '../../../hooks/useExecuteWfsTransaction';\nimport useWriteWfsTransaction from '../../../hooks/useWriteWfsTransaction';\nimport {\n  setFormDirty\n} from '../../../store/editFeature';\n\nimport './index.less';\nimport FeedbackIcon from '../../FeedbackIcon';\n\nexport type SaveButtonProps = Omit<ButtonProps, 'form'> & {\n  form: FormInstance;\n  layer: WmsLayer;\n  onError?: (error?: unknown) => void;\n  onSuccess?: (response?: string) => void;\n};\n\nexport const SaveButton: React.FC<SaveButtonProps> = ({\n  form,\n  layer,\n  onError = () => {},\n  onSuccess = () => {},\n  ...passThroughProps\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [saveCompleted, setSaveCompleted] = useState(false);\n\n  const map = useMap();\n\n  const writeWfsTransaction = useWriteWfsTransaction();\n  const executeWfsTransaction = useExecuteWfsTransaction();\n\n  const dispatch = useAppDispatch();\n\n  const formDirty = useAppSelector(\n    state => state.editFeature.formDirty\n  );\n\n  const {\n    t\n  } = useTranslation();\n\n  const onClick = async () => {\n    if (!map) {\n      return;\n    }\n\n    if (!layer || !isWmsLayer(layer)) {\n      return;\n    }\n\n    const editLayer = DigitizeUtil.getDigitizeLayer(map);\n\n    if (!editLayer) {\n      Logger.error('Cannot find the digitize layer');\n      onError();\n      return;\n    }\n\n    const features = editLayer.getSource()?.getFeatures();\n\n    if (!features || features.length === 0) {\n      Logger.error('Cannot save feature without geometry');\n      onError(t('SaveButton.errorNoGeometry'));\n      return;\n    }\n\n    try {\n      await form.validateFields();\n    } catch (error) {\n      onError(error);\n      Logger.warn('Validation has failed: ', error);\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const transaction = await writeWfsTransaction({\n        upsertFeatures: features,\n        form: form,\n        layer: layer\n      });\n\n      if (!transaction) {\n        return;\n      }\n\n      const result = await executeWfsTransaction({\n        layer: layer,\n        transaction: transaction\n      });\n\n      layer.getSource()?.refresh();\n\n      setSaveCompleted(true);\n      setTimeout(() => {\n        setSaveCompleted(false);\n      }, 3000);\n\n      dispatch(setFormDirty(false));\n\n      onSuccess(result);\n    } catch (error) {\n      Logger.error(error);\n\n      onError(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Button\n      className='save-button'\n      type='primary'\n      onClick={onClick}\n      loading={loading}\n      disabled={!formDirty}\n      icon={(\n        <FontAwesomeIcon\n          icon={faFloppyDisk}\n        />\n      )}\n      {...passThroughProps}\n    >\n      {\n        t('SaveButton.title')\n      }\n      <FeedbackIcon loadComplete={saveCompleted} />\n    </Button>\n  );\n};\n\nexport default SaveButton;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  FormInstance\n} from 'antd';\n\nimport {\n  Feature\n} from 'geojson';\n\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport useAppSelector from '../../../hooks/useAppSelector';\n\nimport DeleteButton from '../DeleteButton';\nimport ResetButton from '../ResetButton';\nimport SaveButton from '../SaveButton';\n\nimport './index.less';\n\nexport type EditFeatureToolbarProps = {\n  feature: Feature;\n  layer: WmsLayer;\n  form: FormInstance;\n  onSaveSuccess?: (responseText?: string) => void;\n  onSaveError?: (error: unknown) => void;\n  onDeleteSuccess?: () => void;\n  onDeleteError?: (error: unknown) => void;\n};\n\nexport const EditFeatureToolbar: React.FC<EditFeatureToolbarProps> = ({\n  feature,\n  layer,\n  form,\n  onSaveSuccess = () => {},\n  onSaveError = () => {},\n  onDeleteSuccess = () => {},\n  onDeleteError = () => {}\n}) => {\n  const allowedEditMode = useAppSelector(state => state.editFeature.userEditMode);\n\n  return (\n    <div\n      className='edit-feature-toolbar'\n    >\n      {\n        allowedEditMode.includes('CREATE') ||\n        allowedEditMode.includes('UPDATE') ?\n          <>\n            <ResetButton\n              feature={feature}\n              form={form}\n            />\n            <SaveButton\n              form={form}\n              layer={layer}\n              onSuccess={onSaveSuccess}\n              onError={onSaveError}\n            />\n          </>: <></>\n      }\n      {\n        allowedEditMode.includes('DELETE') &&\n        <DeleteButton\n          feature={feature}\n          layer={layer}\n          onSuccess={onDeleteSuccess}\n          onError={onDeleteError}\n        />\n      }\n    </div>\n  );\n};\n\nexport default EditFeatureToolbar;\n","import React, {\n  ReactNode,\n  useCallback,\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  Alert,\n  UploadFile\n} from 'antd';\nimport {\n  useForm\n} from 'antd/lib/form/Form';\n\nimport {\n  Feature\n} from 'geojson';\n\nimport moment from 'moment';\n\nimport {\n  equalTo\n} from 'ol/format/filter';\n\nimport { ValidateErrorEntity } from 'rc-field-form/es/interface';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  Logger\n} from '@terrestris/base-util';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport {\n  WmsLayer,\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport ShogunFile from '@terrestris/shogun-util/dist/model/File';\nimport {\n  PropertyFormItemEditConfig,\n  PropertyFormTabConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport useConvertImageUrl from '../../../hooks/useConvertImageUrl';\nimport useExecuteGetFeature from '../../../hooks/useExecuteGetFeature';\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\n\nimport {\n  setFeature\n} from '../../../store/editFeature';\n\nimport { isFileConfig } from '../EditFeatureForm';\nimport EditFeatureGeometryToolbar from '../EditFeatureGeometryToolbar';\nimport EditFeatureTabs from '../EditFeatureTabs';\nimport EditFeatureToolbar from '../EditFeatureToolbar';\n\nexport type EditFeatureFullFormProps = {\n  feature: Feature;\n  layer: WmsLayer;\n};\n\nexport const EditFeatureFullForm: React.FC<EditFeatureFullFormProps> = ({\n  feature,\n  layer\n}) => {\n  const {\n    t\n  } = useTranslation();\n  const executeGetFeature = useExecuteGetFeature();\n  const imageUrlToBase64 = useConvertImageUrl();\n\n  const [tabConfig, setTabConfig] = useState<PropertyFormTabConfig<PropertyFormItemEditConfig>[]>();\n  const [initialValues, setInitialValues] = useState<Record<string, any>>();\n  const [errorMsg, setErrorMsg] = useState<string | ReactNode>();\n\n  const [form] = useForm();\n  const map = useMap();\n  const dispatch = useAppDispatch();\n  const client = useSHOGunAPIClient();\n\n  const reloadFeature = useCallback(async (id: string) => {\n    if (!layer || !isWmsLayer(layer)) {\n      return;\n    }\n\n    const updatedFeatures = await executeGetFeature({\n      layer: layer,\n      filter: equalTo('id', id)\n    });\n\n    if (\n      updatedFeatures?.features[0]\n    ) {\n      dispatch(setFeature(updatedFeatures?.features[0]));\n    }\n  }, [dispatch, executeGetFeature, layer]);\n\n  const update = useCallback(async () => {\n    if (!map || !client) {\n      return;\n    }\n\n    let editFormConfig = layer.get('editFormConfig') as PropertyFormTabConfig<PropertyFormItemEditConfig>[];\n\n    if (editFormConfig?.length === 0) {\n      Logger.warn(`Layer ${layer.get('name')} has no 'editFormConfig' set`);\n      return;\n    }\n\n    const properties = structuredClone(feature?.properties) || {};\n\n    const setPropertiesPromises = Object.entries(properties).map(async ([key, value]) => {\n      const tabConfigs = editFormConfig?.filter(tabCfg => {\n        return tabCfg.children?.find(formCfg => formCfg.propertyName === key);\n      });\n\n      if (tabConfigs.length > 1) {\n        Logger.warn(`Property ${key} is configured in multiple tabs. Is this intended?`);\n      }\n\n      if (tabConfigs && tabConfigs[0]) {\n        const isDate = tabConfigs[0].children?.some(cfg => {\n          return cfg.propertyName === key && cfg.component === 'DATE';\n        });\n\n        if (isDate) {\n          const parsedDate = moment(value);\n\n          if (parsedDate.isValid()) {\n            properties[key] = parsedDate;\n          } else {\n            Logger.warn('Could not parse date');\n            properties[key] = null;\n          }\n        }\n\n        const isUpload = tabConfigs[0].children?.some(cfg => {\n          return cfg.propertyName === key && cfg.component === 'UPLOAD';\n        });\n\n        if (isUpload) {\n          if (value) {\n            try {\n              const parsedJson = JSON.parse(value);\n              if (!isFileConfig(parsedJson[0])) {\n                throw new Error('File config is no valid SHOGun file.');\n              }\n              const fileList = parsedJson as UploadFile<ShogunFile>[];\n              properties[key] = fileList;\n              const fileListWithBlob = fileList.map(async (val: any) => {\n                const isImageFile = fileList[0].response?.fileType?.startsWith('image/');\n                const thumbUrl = isImageFile ?\n                  await imageUrlToBase64(`${client.getBasePath()}imagefiles/${val?.response?.fileUuid}/thumbnail`) : undefined;\n                return {\n                  ...val,\n                  thumbUrl,\n                  url: isImageFile ? undefined : val.url\n                };\n              });\n\n              const result = await Promise.all(fileListWithBlob);\n              properties[key] = result;\n            } catch (error) {\n              Logger.error('Could not parse file list from JSON config: ', error);\n              properties[key] = [];\n            }\n          } else {\n            properties[key] = [];\n          }\n        }\n\n        const isReference = tabConfigs[0].children?.some(cfg =>\n          cfg.propertyName === key && cfg.component === 'REFERENCE_TABLE');\n\n        if (isReference) {\n          try {\n            properties[key] = JSON.parse(properties[key]);\n          } catch (error) {\n            Logger.warn('Could not parse the input for the REFERENCE_TABLE', error);\n          }\n        }\n      }\n    });\n\n    await Promise.all(setPropertiesPromises);\n\n    setInitialValues(properties);\n    form.resetFields();\n    form.setFieldsValue(properties);\n\n    setTabConfig(editFormConfig);\n  }, [map, client, layer, feature?.properties, form, imageUrlToBase64]);\n\n  useEffect(() => {\n    update();\n  }, [update]);\n\n  const formatErrorMessage = (error: ValidateErrorEntity): React.ReactNode => {\n    const collectedFieldErrors: string[] = [];\n    const errorFields = error.errorFields || [];\n\n    errorFields.forEach((field) => {\n      if (Array.isArray(field.errors)) {\n        collectedFieldErrors.push(...field.errors);\n      }\n    });\n\n    const formattedMessage = collectedFieldErrors.map((line, index) => (\n      <React.Fragment key={index}>\n        {line}\n        {index !== collectedFieldErrors.length - 1 && <br />}\n      </React.Fragment>\n    ));\n\n    return formattedMessage;\n  };\n\n  const onSaveSuccess = (responseText?: string) => {\n    if (!responseText) {\n      return;\n    }\n    setErrorMsg(undefined);\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(responseText, 'text/xml');\n\n    // get feature id from response\n    const featureId = xmlDoc.getElementsByTagName('ogc:FeatureId');\n    const idString = featureId.item(0)?.getAttribute('fid');\n    const id = idString?.split('.')[1];\n    if (id) {\n      reloadFeature(id);\n    }\n  };\n\n  const onSaveError = (error?: unknown) => {\n    if (typeof error === 'object' && error !== null && 'errorFields' in error) {\n      const formattedErrorMessage = formatErrorMessage(\n        error as ValidateErrorEntity\n      );\n      setErrorMsg(formattedErrorMessage);\n    } else if (typeof error === 'string') {\n      setErrorMsg(error);\n    } else {\n      setErrorMsg(t('EditFeatureFullForm.saveErrorMsg'));\n    }\n  };\n\n  const onDeleteSuccess = () => {\n    setErrorMsg(undefined);\n    dispatch(setFeature(null));\n  };\n\n  const onDeleteError = () => {\n    setErrorMsg(t('EditFeatureFullForm.deleteErrorMsg'));\n  };\n\n  return (\n    <>\n      <EditFeatureGeometryToolbar\n        feature={feature}\n      />\n      {\n        errorMsg && (\n          <Alert\n            className=\"error-alert\"\n            message={errorMsg}\n            type=\"error\"\n            showIcon\n          />\n        )\n      }\n      <EditFeatureToolbar\n        feature={feature}\n        layer={layer}\n        form={form}\n        onSaveSuccess={onSaveSuccess}\n        onSaveError={onSaveError}\n        onDeleteSuccess={onDeleteSuccess}\n        onDeleteError={onDeleteError}\n      />\n      <EditFeatureTabs\n        tabConfig={tabConfig}\n        initialValues={initialValues}\n        form={form}\n      />\n    </>\n  );\n};\n\nexport default EditFeatureFullForm;\n","import {\n  useCallback\n} from 'react';\n\nimport {\n  Feature\n} from 'geojson';\n\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport type ExecuteWfsLockOpts = {\n  layer: WmsLayer;\n  feature: Feature;\n};\n\nexport const useExecuteWfsLockFeature = () => {\n  const client = useSHOGunAPIClient();\n\n  const writeWfsLockFeature = (opts: ExecuteWfsLockOpts) => {\n    const featureId = opts.feature.id;\n    const featureProperties = opts.feature.properties;\n\n    if (!featureId || !featureProperties) {\n      Logger.warn('Either the id of the feature or its properties (or even both) aren\\'t available');\n      return;\n    }\n\n    let id: number;\n    if (typeof featureId === 'number') {\n      id = featureId;\n    } else {\n      id = parseInt(featureId.split('.')[1], 10);\n    }\n\n    const match = Object.entries(featureProperties).find(([, value]) => (value === id || value === id.toString()));\n\n    if (!match) {\n      Logger.warn('Count not detect the id property');\n      return;\n    }\n\n    const idProperty = match[0];\n\n    const typeName = opts.layer.getSource()?.getParams().LAYERS;\n\n    const lockFeatureDoc = document.createElementNS('http://www.opengis.net/wfs/2.0', 'LockFeature');\n\n    lockFeatureDoc.setAttribute('service', 'WFS');\n    lockFeatureDoc.setAttribute('version', '2.0.0');\n    // Expiry in seconds.\n    lockFeatureDoc.setAttribute('expiry', '300');\n    lockFeatureDoc.setAttribute('lockAction', 'SOME');\n\n    const queryElement = document.createElementNS('http://www.opengis.net/wfs/2.0', 'Query');\n    queryElement.setAttribute('typeNames', typeName);\n\n    const filterElement = document.createElementNS('http://www.opengis.net/fes/2.0', 'Filter');\n    const isEqualToElement = document.createElementNS('http://www.opengis.net/fes/2.0', 'PropertyIsEqualTo');\n\n    const valueReferenceElement = document.createElementNS('http://www.opengis.net/fes/2.0', 'ValueReference');\n    const valueReferenceValue = document.createTextNode(idProperty);\n    valueReferenceElement.appendChild(valueReferenceValue);\n\n    const literalElement = document.createElementNS('http://www.opengis.net/fes/2.0', 'Literal');\n    const literalValue = document.createTextNode(id.toString());\n    literalElement.appendChild(literalValue);\n\n    isEqualToElement.appendChild(valueReferenceElement);\n    isEqualToElement.appendChild(literalElement);\n\n    filterElement.appendChild(isEqualToElement);\n\n    queryElement.appendChild(filterElement);\n\n    lockFeatureDoc.appendChild(queryElement);\n\n    return lockFeatureDoc;\n  };\n\n  const executeWfsLockFeature = useCallback(async (opts: ExecuteWfsLockOpts) => {\n    let url;\n\n    const source = opts.layer.getSource();\n    if (source instanceof OlSourceImageWMS) {\n      url = source.getUrl();\n    }\n    if (source instanceof OlSourceTileWMS) {\n      const urls = source.getUrls();\n      url = urls ? urls[0] : undefined;\n    }\n\n    if (!url) {\n      return;\n    }\n\n    if (url.endsWith('?')) {\n      url = url.slice(0, -1);\n    }\n\n    const lockFeatureDoc = writeWfsLockFeature({\n      layer: opts.layer,\n      feature: opts.feature\n    });\n\n    if (!lockFeatureDoc) {\n      return;\n    }\n\n    const defaultHeaders = {\n      'Content-Type': 'application/xml'\n    };\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: opts.layer?.get('useBearerToken') ? {\n        ...defaultHeaders,\n        ...getBearerTokenHeader(client?.getKeycloak())\n      } : defaultHeaders,\n      body: new XMLSerializer().serializeToString(lockFeatureDoc)\n    });\n\n    if (!response.ok) {\n      throw new Error('No successful response while executing a WFS-LockFeature');\n    }\n\n    const responseText = await response.text();\n\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(responseText, 'text/xml');\n\n    // TODO Make detection more robust\n    const transactionLockFailed = xmlDoc.getElementsByTagName('wfs:FeaturesNotLocked');\n\n    if (transactionLockFailed.length > 0) {\n      throw new Error(`Error while locking a feature: ${responseText}`);\n    }\n\n    return responseText;\n  }, [client]);\n\n  return executeWfsLockFeature;\n};\n\nexport default useExecuteWfsLockFeature;\n","import {\n  useCallback,\n  useEffect\n} from 'react';\n\nimport {\n  FeatureCollection\n} from 'geojson';\n\nimport MapBrowserEvent from 'ol/MapBrowserEvent';\n\nimport {\n  Logger\n} from '@terrestris/base-util';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport const useGetFeatureInfo = (layer?: WmsLayer, onSuccess?: (featureCollection: FeatureCollection) => void, onFailure?: () => void) => {\n  const map = useMap();\n  const client = useSHOGunAPIClient();\n\n  const onSingleClick = useCallback(async (evt: MapBrowserEvent<MouseEvent>) => {\n    if (!map || !layer) {\n      return;\n    }\n\n    const coords = evt.coordinate;\n\n    const viewResolution = map.getView().getResolution();\n\n    if (!viewResolution) {\n      return;\n    }\n\n    const source = layer.getSource();\n    const url = source?.getFeatureInfoUrl(\n      coords,\n      viewResolution,\n      map.getView().getProjection(),\n      {\n        INFO_FORMAT: 'application/json',\n        BUFFER: 10\n      }\n    );\n\n    const defaultHeaders = {\n      'Content-Type': 'application/json'\n    };\n\n    if (!url) {\n      return;\n    }\n\n    try {\n      map.getTargetElement().style.cursor = 'wait';\n\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: layer.get('useBearerToken') ? {\n          ...defaultHeaders,\n          ...getBearerTokenHeader(client?.getKeycloak())\n        } : defaultHeaders\n      });\n\n      if (!response.ok) {\n        throw new Error('No successful response');\n      }\n\n      const featureCollection: FeatureCollection = await response.json();\n\n      if (onSuccess) {\n        onSuccess(featureCollection);\n      }\n    } catch (error) {\n      Logger.error('Error: ', error);\n\n      if (onFailure) {\n        onFailure();\n      }\n    } finally {\n      map.getTargetElement().style.cursor = '';\n    }\n  }, [client, layer, map, onSuccess, onFailure]);\n\n  const onPointerMove = useCallback((evt: MapBrowserEvent<MouseEvent>) => {\n    if (!map || !layer) {\n      return;\n    }\n\n    if (evt.dragging) {\n      return;\n    }\n\n    const data = layer.getData(evt.pixel);\n\n    if (!(data instanceof Uint8ClampedArray)) {\n      return;\n    }\n\n    const hit = data && data[3] > 0;\n\n    map.getTargetElement().style.cursor = hit ? 'pointer' : '';\n  }, [layer, map]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    map.on('pointermove', onPointerMove);\n    map.on('singleclick', onSingleClick);\n\n    return () => {\n      map.un('pointermove', onPointerMove);\n      map.un('singleclick', onSingleClick);\n    };\n  }, [map, onPointerMove, onSingleClick]);\n};\n\nexport default useGetFeatureInfo;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  Button\n} from 'antd';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../hooks/useAppSelector';\nimport useExecuteWfsDescribeFeatureType, {\n  isGeometryType\n} from '../../../hooks/useExecuteWfsDescribeFeatureType';\nimport useExecuteWfsLockFeature from '../../../hooks/useExecuteWfsTransactionLock';\nimport useGetFeatureInfo from '../../../hooks/useGetFeatureInfo';\n\nimport {\n  setFeature\n} from '../../../store/editFeature';\n\nimport './index.less';\n\nexport type EditFeatureSwitchProps = {\n  layer: WmsLayer;\n  onLockSuccess?: (responseText: string) => void;\n  onLockError?: (error: unknown) => void;\n  onCreate?: () => void;\n};\n\nexport const EditFeatureSwitch: React.FC<EditFeatureSwitchProps> = ({\n  layer,\n  onLockSuccess = () => {},\n  onLockError = () => {},\n  onCreate = () => {}\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const executeWfsDescribeFeatureType = useExecuteWfsDescribeFeatureType();\n  const executeWfsLockFeature = useExecuteWfsLockFeature();\n  const dispatch = useAppDispatch();\n  const map = useMap();\n  const {\n    t\n  } = useTranslation();\n\n  const allowedEditMode = useAppSelector(\n    state => state.editFeature.userEditMode\n  );\n\n  useGetFeatureInfo(layer, async (featureCollection) => {\n    if (\n      featureCollection.features.length &&\n      (allowedEditMode.includes('UPDATE') || allowedEditMode.includes('DELETE'))\n    ) {\n\n      const feature = featureCollection.features[0];\n\n      if (!layer || !feature) {\n        return;\n      }\n\n      if (ClientConfiguration.wfsLockFeatureEnabled) {\n        try {\n          const response = await executeWfsLockFeature({\n            layer: layer,\n            feature: feature\n          });\n\n          if (!response) {\n            return;\n          }\n\n          dispatch(setFeature(feature));\n\n          onLockSuccess(response);\n        } catch (error) {\n          onLockError(error);\n        }\n      } else {\n        dispatch(setFeature(feature));\n      }\n    }\n  });\n\n  const getGeometryType = async () => {\n    if (!map || !layer) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n\n      const describeFeatureType = await executeWfsDescribeFeatureType(layer);\n\n      if (!describeFeatureType) {\n        return;\n      }\n\n      // We expect a single featureType here.\n      const geomProperty = describeFeatureType.featureTypes[0]?.properties\n        ?.find(property => isGeometryType(property.type));\n\n      switch (geomProperty?.type) {\n        case 'gml:MultiPoint':\n          return 'MultiPoint';\n        case 'gml:Point':\n          return 'Point';\n        case 'gml:MultiLineString':\n          return 'MultiLineString';\n        case 'gml:LineString':\n          return 'LineString';\n        case 'gml:MultiPolygon':\n          return 'MultiPolygon';\n        case 'gml:Polygon':\n          return 'Polygon';\n        default:\n          break;\n      }\n    } catch (error) {\n      Logger.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onCreateClick = async () => {\n    const geomType = await getGeometryType();\n\n    if (!geomType) {\n      return;\n    }\n\n    dispatch(setFeature({\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: geomType,\n        coordinates: []\n      }\n    }));\n\n    onCreate();\n  };\n\n  return (\n    <div className=\"edit-feature-switch\">\n      {allowedEditMode.includes('CREATE') && (\n        <>\n          {\n            allowedEditMode.includes('UPDATE') &&\n            <div>{t('EditFeatureSwitch.usageHint')}</div>\n          }\n          <Button\n            loading={loading}\n            onClick={onCreateClick}\n          >\n            {t('EditFeatureSwitch.createFeature')}\n          </Button>\n        </>\n      )}\n      {!allowedEditMode.includes('CREATE') &&\n        (allowedEditMode.includes('UPDATE') ||\n        allowedEditMode.includes('DELETE')) && (\n        <div>{t('EditFeatureSwitch.limitedUsageHint')}</div>\n      )}\n    </div>\n  );\n};\n\nexport default EditFeatureSwitch;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  Alert, Modal\n} from 'antd';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport OlFeature from 'ol/Feature';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  Logger\n} from '@terrestris/base-util';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport {\n  WmsLayer,\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport useExecuteWfsTransaction from '../../hooks/useExecuteWfsTransaction';\nimport useWriteWfsTransaction from '../../hooks/useWriteWfsTransaction';\n\nimport {\n  reset,\n  setFormDirty\n} from '../../store/editFeature';\nimport {\n  hide as hideEditFeatureDrawer\n} from '../../store/editFeatureDrawerOpen';\n\nimport MapDrawer, {\n  MapDrawerProps\n} from '../MapDrawer';\n\nimport EditFeatureFullForm from './EditFeatureFullForm';\nimport EditFeatureSwitch from './EditFeatureSwitch';\n\nimport './index.less';\n\nexport type EditFeatureDrawerProps = MapDrawerProps;\n\nexport const EditFeatureDrawer: React.FC<EditFeatureDrawerProps> = ({\n  ...passThroughProps\n}) => {\n  const {\n    t\n  } = useTranslation();\n\n  const [layer, setLayer] = useState<WmsLayer>();\n  const [isFeatureLocked, setIsFeatureLocked] = useState<boolean>(false);\n  const [drawerTitle, setDrawerTitle] = useState<string>(t('EditFeatureDrawer.featureEditor'));\n\n  const isDrawerOpen = useAppSelector(state => state.editFeatureDrawerOpen);\n  const layerId = useAppSelector(state => state.editFeature.layerId);\n  const feature = useAppSelector(state => state.editFeature.feature);\n  const formDirty = useAppSelector(state => state.editFeature.formDirty);\n\n  const map = useMap();\n  const dispatch = useAppDispatch();\n  const writeWfsTransaction = useWriteWfsTransaction();\n  const executeWfsTransaction = useExecuteWfsTransaction();\n\n  useEffect(() => {\n    if (!map || !layerId) {\n      return;\n    }\n\n    const olLayer = MapUtil.getLayerByOlUid(map, layerId);\n\n    if (!olLayer || !isWmsLayer(olLayer)) {\n      Logger.warn(`Could not find layer with id ${layerId}`);\n      return;\n    }\n\n    setDrawerTitle(`${t('EditFeatureDrawer.featureEditor')} - ${olLayer.get('name')}`);\n    setLayer(olLayer);\n  }, [map, layerId, t]);\n\n  const releaseLock = async () => {\n    if (!layer || !feature || !feature.id || !ClientConfiguration.wfsLockFeatureEnabled) {\n      return;\n    }\n\n    try {\n      const feat = new OlFeature();\n      feat.setId(feature.id);\n\n      const transaction = await writeWfsTransaction({\n        layer: layer,\n        deleteFeatures: [],\n        upsertFeatures: [feat]\n      });\n\n      if (!transaction) {\n        return;\n      }\n\n      await executeWfsTransaction({\n        layer: layer,\n        transaction: transaction\n      });\n    } catch (error) {\n      Logger.error('Error while releasing the lock on the feature');\n    }\n  };\n\n  const closeDrawer = async () => {\n    await releaseLock();\n\n    dispatch(hideEditFeatureDrawer());\n    dispatch(setFormDirty(false));\n    dispatch(reset());\n    setIsFeatureLocked(false);\n  };\n\n  const onDrawerClose = () => {\n    if (layer && feature && formDirty) {\n      Modal.confirm({\n        maskClosable: false,\n        title: t('EditFeatureDrawer.closeDrawerWarnTitle'),\n        content: t('EditFeatureDrawer.closeDrawerWarnContent'),\n        okType: 'danger',\n        onOk: closeDrawer\n      });\n    } else {\n      closeDrawer();\n    }\n  };\n\n  const onLockSuccess = () => {\n    setIsFeatureLocked(false);\n  };\n\n  const onLockError = () => {\n    setIsFeatureLocked(true);\n  };\n\n  const onCreate = () => {\n    setIsFeatureLocked(false);\n  };\n\n  return (\n    <MapDrawer\n      className=\"map-drawer edit-feature-drawer\"\n      onClose={onDrawerClose}\n      open={isDrawerOpen}\n      title={drawerTitle}\n      {...passThroughProps}\n    >\n      {\n        !layer && (\n          <Alert\n            message={t('EditFeatureDrawer.noLayerFoundError')}\n            type=\"error\"\n            showIcon\n          />\n        )\n      }\n      {\n        isFeatureLocked && (\n          <Alert\n            message={t('EditFeatureDrawer.isFeatureLockedErrorMsg')}\n            type=\"error\"\n            showIcon\n          />\n        )\n      }\n      {\n        layer && layerId && !feature &&\n        <EditFeatureSwitch\n          layer={layer}\n          onLockSuccess={onLockSuccess}\n          onLockError={onLockError}\n          onCreate={onCreate}\n        />\n      }\n      {\n        layer && feature &&\n        <EditFeatureFullForm\n          feature={feature}\n          layer={layer}\n        />\n      }\n    </MapDrawer>\n  );\n};\n\nexport default EditFeatureDrawer;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useEffect } from 'react';\n\nimport {\n  Button, Divider\n} from 'antd';\n\nimport OlControlMousePosition from 'ol/control/MousePosition';\nimport OlControlScaleLine from 'ol/control/ScaleLine';\nimport { createStringXY } from 'ol/coordinate';\n\nimport { useTranslation } from 'react-i18next';\n\nimport ScaleCombo from '@terrestris/react-geo/dist/Field/ScaleCombo/ScaleCombo';\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport './index.less';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport { usePlugins } from '../../hooks/usePlugins';\n\nimport {\n  FooterPlacementOrientation,\n  isFooterIntegration\n} from '../../plugin';\nimport { Legal } from '../../store/legal';\n\nexport interface FooterProps extends React.ComponentProps<'div'> { }\n\nexport const Footer: React.FC<FooterProps> = ({\n  ...restProps\n}): JSX.Element => {\n  const plugins = usePlugins();\n  const { t } = useTranslation();\n\n  const legalInformation: Legal = useAppSelector(state => state.legal);\n  const map = useMap();\n\n  const insertPlugins = (itemPosition: FooterPlacementOrientation, items: JSX.Element[]) => {\n    plugins.forEach(plugin => {\n      if (isFooterIntegration(plugin.integration) && plugin.integration?.placementOrientation === itemPosition) {\n        const {\n          key,\n          wrappedComponent: WrappedPluginComponent\n        } = plugin;\n\n        items.splice(plugin.integration?.insertionIndex || 0, 0,\n          <WrappedPluginComponent\n            key={key}\n          />\n        );\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const existingControl = map\n      .getControls()\n      .getArray()\n      .find(control => control instanceof OlControlScaleLine);\n\n    if (existingControl) {\n      return;\n    }\n\n    map.addControl(\n      new OlControlScaleLine({\n        target: 'scale-line-container'\n      })\n    );\n  }, [map]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const existingControl = map\n      .getControls()\n      .getArray()\n      .find(control => control instanceof OlControlMousePosition);\n\n    if (existingControl) {\n      return;\n    }\n\n    map.addControl(\n      new OlControlMousePosition({\n        coordinateFormat: createStringXY(2),\n        projection: map.getView().getProjection(),\n        target: 'mouse-position'\n      })\n    );\n  }, [map]);\n\n  if (!map) {\n    return <></>;\n  }\n\n  const getLeftItems = () => {\n    const items = [\n      <div\n        key=\"scale-line-container\"\n        id=\"scale-line-container\"\n        aria-label=\"scale-line\"\n      />,\n      <Divider\n        key=\"scale-line-divider\"\n        type=\"vertical\"\n      />,\n      <div\n        key=\"scale-combo-container\"\n        className=\"scale-combo\"\n        aria-label='scale-combo'\n      >\n        {t('Footer.scale')}:&nbsp;\n        <ScaleCombo\n          aria-label='scalecombo-dropdown'\n          map={map}\n        />\n        <Divider\n          type=\"vertical\"\n        />\n      </div>,\n      <div\n        key=\"reference-system-container\"\n        className=\"reference-system\"\n        aria-label=\"reference-system\"\n      >\n        {t('Footer.refSystem')}: {map.getView().getProjection().getCode()}\n        <Divider\n          type=\"vertical\"\n        />\n      </div>,\n      <div\n        key=\"mouse-position-container\"\n        className=\"mouse-position-wrapper\"\n      >\n        {t('Footer.mousePosition')}:&nbsp;\n        <div\n          id=\"mouse-position\"\n          className=\"mouse-position\"\n          aria-label=\"mouse-position\"\n        />\n      </div>\n    ];\n\n    insertPlugins('left', items);\n\n    return items;\n  };\n\n  const getRightItems = () => {\n    const items = [\n      <Button\n        key=\"open-contact\"\n        onClick={openContactModal}\n        type=\"link\"\n      >\n        {t('Footer.contact')}\n      </Button>,\n      <Button\n        key=\"open-imprint\"\n        onClick={openImprintModal}\n        type=\"link\"\n      >\n        {t('Footer.imprint')}\n      </Button>,\n      <Button\n        key=\"open-privacy\"\n        onClick={openPrivacyModal}\n        type=\"link\"\n      >\n        {t('Footer.privacypolicy')}\n      </Button>\n    ];\n\n    if (plugins.length > 0) {\n      insertPlugins('right', items);\n    }\n\n    return items;\n  };\n\n  const openContactModal = (): void => {\n    window.open(legalInformation.contact, '_blank');\n  };\n\n  const openImprintModal = (): void => {\n    window.open(legalInformation.imprint, '_blank');\n  };\n\n  const openPrivacyModal = (): void => {\n    window.open(legalInformation.privacy, '_blank');\n  };\n\n  return (\n    <div\n      className=\"footer\"\n      {...restProps}\n    >\n      <div\n        className=\"item-container left-items\"\n      >\n        {\n          getLeftItems()\n        }\n      </div>\n      <div\n        className=\"item-container right-items\"\n      >\n        {\n          getRightItems()\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React from 'react';\n\nimport { faCircleQuestion } from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport SimpleButton, { SimpleButtonProps } from '@terrestris/react-geo/dist/Button/SimpleButton/SimpleButton';\n\nexport type DocumentationButtonProps = SimpleButtonProps;\n\nconst defaultClassName = 'documentationbutton';\nexport const DocumentationButton: React.FC<DocumentationButtonProps> = ({\n  className\n}) => {\n\n  const finalClassName = className\n    ? `${defaultClassName} ${className}`\n    : defaultClassName;\n\n  return (\n    <SimpleButton\n      onClick={() => window.open('/gis-docs', '_blank')}\n      className={finalClassName}\n      icon={\n        <FontAwesomeIcon\n          icon={faCircleQuestion}\n        />\n      }\n    >\n    </SimpleButton>\n  );\n};\n\nexport default DocumentationButton;\n","import React, {\n  useEffect, useState\n} from 'react';\n\nimport {\n  Extent as OlExtent\n} from 'ol/extent';\nimport {\n  transformExtent\n} from 'ol/proj';\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport NominatimSearch, {\n  NominatimSearchProps\n} from '@terrestris/react-geo/dist/Field/NominatimSearch/NominatimSearch';\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nexport const BasicNominatimSearch: React.FC<Partial<NominatimSearchProps>> = ({\n  ...restProps\n}): JSX.Element => {\n  const map = useMap();\n  const {\n    t\n  } = useTranslation();\n  const [viewBox, setViewBox] = useState<string>();\n\n  useEffect(() => {\n    const mapViewProjection = map?.getView().getProjection();\n    const extent: OlExtent = map?.getView()?.get('extent');\n    if (extent) {\n      const transformedExtent = transformExtent(extent, mapViewProjection, 'EPSG:4326');\n      setViewBox(transformedExtent.toString());\n    }\n  }, [map]);\n\n  if (!map) {\n    return <></>;\n  }\n\n  return (\n    <NominatimSearch\n      countryCodes={''}\n      allowClear={true}\n      nominatimBaseUrl={'https://nominatim.terrestris.de/search.php?'}\n      placeholder={t('Nominatim.placeholder')}\n      viewBox={viewBox ? viewBox : ''}\n      {...restProps}\n    />\n  );\n};\n\nexport default BasicNominatimSearch;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import _groupBy from 'lodash/groupBy';\nimport Map from 'ol/Map';\n\nimport {\n  WmsLayer,\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  SearchConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nexport interface SolrQueryProps {\n  searchValue: string;\n  map: Map;\n}\n\ntype SolrQuery = {\n  query: string;\n  fieldList?: string;\n};\n\n/**\n * Generates a solr search query based on the `searchConfiguration` and `searchable` properties of each layer. This\n * currently considers all layers which are part of the layer tree / map.\n */\nexport const generateSolrQuery = ({\n  searchValue,\n  map\n}: SolrQueryProps): SolrQuery[] => {\n  // parse searchValue into an array of search terms,\n  // removing special characters and white spaces\n  let parts = searchValue.trim()\n    .replaceAll(/[()\\\\\\-_./\\/]/g, ' ')\n    .split(' ')\n    .map(s => s.trim())\n    .filter(s => s !== '');\n\n  const searchQueries: SolrQuery[] = [];\n  const layers = map.getAllLayers().filter(l => l.get('searchable'));\n  const groupedLayers = _groupBy(layers, (l) => (l.get('searchConfig') as SearchConfig)?.attributes);\n\n  Object.entries(groupedLayers).forEach(([key, layerList]) => {\n    const layerNames = layerList\n      .filter(l => isWmsLayer(l))\n      .map(l => (l as WmsLayer).getSource()?.getParams()?.LAYERS);\n\n    const featureTypeParts = layerNames.map(layerName => `featureType:\"${layerName}\"`);\n    const featureTypeQuery = featureTypeParts.join(' OR ');\n\n    const query = `(${featureTypeQuery}) AND (${generateSearchQuery(parts)})`;\n    searchQueries.push({\n      query: query,\n      fieldList: key !== 'undefined' ? key.split(',').join(' ') : undefined\n    });\n  });\n\n  return searchQueries;\n};\n\n/**\n * Applies operators for wildcard and fuzzy search to a solr (sub)query for multiple search terms.\n * Also includes exact matches to allow searching for numeric values.\n * @param searchParts The search input which may consist of multiple search terms, e.g. [\"foo\", \"bar\"]\n */\nconst generateSearchQuery = (\n  searchParts: string[]\n): string => {\n  const subQueries = searchParts.map(part => {\n    return `(${part.trim()}^4 OR *${part.trim()}*^2 OR ${part.trim()}~1)`;\n  });\n  return subQueries.join(' AND ');\n};\n\nexport default generateSolrQuery;\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from 'react';\n\nimport {\n  LoadingOutlined,\n  SearchOutlined,\n  SettingOutlined\n} from '@ant-design/icons';\nimport {\n  Checkbox,\n  Dropdown,\n  Empty,\n  Input,\n  InputProps\n} from 'antd';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport _groupBy from 'lodash/groupBy';\nimport _isNil from 'lodash/isNil';\n\nimport { getUid } from 'ol';\nimport {\n  Extent as OlExtent\n} from 'ol/extent';\nimport OlFeature from 'ol/Feature';\nimport OlFormatGeoJSON from 'ol/format/GeoJSON';\nimport OlFormatWKT from 'ol/format/WKT';\nimport OlGeometry from 'ol/geom/Geometry';\nimport { transformExtent } from 'ol/proj';\nimport OlStyleCircle from 'ol/style/Circle';\nimport OlStyleFill from 'ol/style/Fill';\nimport OlStyleStroke from 'ol/style/Stroke';\nimport OlStyle from 'ol/style/Style';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport logger from '@terrestris/base-util/dist/Logger';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\nimport PermalinkUtil from '@terrestris/ol-util/dist/PermalinkUtil/PermalinkUtil';\nimport { NominatimPlace } from '@terrestris/react-geo/dist/Field/NominatimSearch/NominatimSearch';\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\nimport SearchResultsPanel, {\n  Category as ResultCategory\n} from '@terrestris/react-geo/dist/Panel/SearchResultsPanel/SearchResultsPanel';\nimport {\n  WmsLayer,\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  SearchConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport './index.less';\n\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\nimport generateSolrQuery from '../../utils/generateSolrQuery';\n\ninterface MultiSearchProps extends InputProps {\n  useNominatim: boolean;\n}\n\nexport type DataSearchResult = {\n  [key: string]: string | string[] | number[];\n};\n\nexport type HighlightingResult = {\n  [key: string]: string;\n};\n\nexport type HighlightingResults = {\n  [key: string]: HighlightingResult;\n};\n\nconst isFulfilled = <T, >(p: PromiseSettledResult<T>): p is PromiseFulfilledResult<T> => p.status === 'fulfilled';\n\nexport type SolrQueryConfig = {\n  q: string;\n  fq?: string;\n  defType?: 'lucene' | 'dismax' | 'edismax';\n  qf?: string;\n  rows?: number;\n  hl?: boolean;\n  'hl.fl'?: string;\n  'hl.tag.pre'?: string;\n  'hl.tag.post'?: string;\n  'hl.requireFieldMatch'?: boolean;\n};\n\nexport type Item = {\n  feature: OlFeature;\n};\n\nexport const MultiSearch: React.FC<MultiSearchProps> = ({\n  useNominatim\n}): JSX.Element => {\n\n  const client = useSHOGunAPIClient();\n  const map = useMap();\n  const {\n    t\n  } = useTranslation();\n  const clickAwayRef = useRef<HTMLDivElement>(null);\n\n  const [searchNominatim, setSearchNominatim] = useState<boolean>(useNominatim);\n  const [searchData, setSearchData] = useState<boolean>(true);\n  const [useViewBox, setUseViewBox] = useState<boolean>(ClientConfiguration.search?.defaultUseViewBox ?? true);\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [resultsVisible, setResultsVisible] = useState<boolean>(false);\n  const [settingsVisible, setSettingsVisible] = useState<boolean>(false);\n  const [dataSearchResults, setDataSearchResults] = useState<DataSearchResult[]>([]);\n  const [highlightingResults, setHighlightingResults] = useState<HighlightingResults>({});\n  const [nominatimResults, setNominatimResults] = useState<NominatimPlace[]>([]);\n  const [searchResults, setSearchResults] = useState<ResultCategory[]>([]);\n\n  useEffect(() => {\n    window.addEventListener('mousedown', handleClickAway);\n\n    return () => {\n      window.removeEventListener('mousedown', handleClickAway);\n    };\n  }, []);\n\n  const handleClickAway = (e: Event) => {\n    let target = e.target;\n    while (target) {\n      target = (target as Node).parentNode;\n    }\n\n    if ((clickAwayRef.current && ((clickAwayRef.current as Element).contains(e.target as Node)))) {\n      return;\n    }\n\n    setResultsVisible(false);\n  };\n\n  const settingsMenu = useMemo(() => {\n    return {\n      items: [{\n        label: (\n          <Checkbox\n            checked={useViewBox}\n            onChange={e => setUseViewBox(e.target.checked)}\n          >\n            {t('MultiSearch.searchInViewBox')}\n          </Checkbox>\n        ),\n        key: 'viewbox'\n      }, {\n        label: (\n          <Checkbox\n            checked={searchData}\n            onChange={e => setSearchData(e.target.checked)}\n          >\n            {t('MultiSearch.searchData')}\n          </Checkbox>\n        ),\n        key: 'data'\n      }, {\n        label: (\n          <Checkbox\n            checked={searchNominatim}\n            onChange={e => setSearchNominatim(e.target.checked)}\n          >\n            {t('MultiSearch.searchNominatim')}\n          </Checkbox>\n        ),\n        key: 'nominatim'\n      }]\n    };\n  }, [searchData, searchNominatim, useViewBox, t]);\n\n  const performSearch = useCallback(async () => {\n    const minChars = ClientConfiguration.search?.minChars ?? 3;\n    if (searchValue.length < minChars) {\n      resetSearch();\n      return;\n    }\n\n    if (!searchData && !searchNominatim) {\n      return;\n    }\n\n    setLoading(true);\n    setNominatimResults([]);\n    setDataSearchResults([]);\n    setHighlightingResults({});\n\n    let response;\n    let viewBox: OlExtent | null = null;\n\n    if (useViewBox) {\n      const mapViewProjection = map?.getView().getProjection();\n      const extent = map?.getView()?.calculateExtent();\n      if (extent) {\n        viewBox = transformExtent(extent, mapViewProjection, 'EPSG:4326');\n      }\n    }\n\n    if (searchData && map) {\n      try {\n        const solrBasePath = ClientConfiguration.search?.solrBasePath ?? '/search/query';\n        const searchUrl = new URL(`${window.location.origin}${solrBasePath}`);\n        const queriesPerLayer = generateSolrQuery({\n          searchValue,\n          map\n        });\n\n        const promises = queriesPerLayer.map(q => {\n          const solrQueryConfig: SolrQueryConfig = {\n            q: q.query,\n            rows: ClientConfiguration.search?.solrQueryConfig?.rowsPerQuery ?? 100,\n            defType: ClientConfiguration.search?.solrQueryConfig?.queryParser ?? 'edismax'\n          };\n\n          if (q.fieldList) {\n            solrQueryConfig.qf = q.fieldList;\n          } else {\n            solrQueryConfig.qf = ClientConfiguration.search?.coreName ?? 'search';\n          }\n\n          if (useViewBox && viewBox) {\n            const bboxFilter = `geometry:[${viewBox[1]},${viewBox[0]} TO ${viewBox[3]},${viewBox[2]}]`;\n            solrQueryConfig.fq = bboxFilter;\n          }\n\n          if (ClientConfiguration.search?.useSolrHighlighting) {\n            solrQueryConfig.hl = true;\n            solrQueryConfig['hl.fl'] = '*';\n            solrQueryConfig['hl.tag.pre'] = ClientConfiguration.search?.solrQueryConfig?.tagPre ?? '<b>';\n            solrQueryConfig['hl.tag.post'] = ClientConfiguration.search?.solrQueryConfig?.tagPost ?? '</b>';\n            solrQueryConfig['hl.requireFieldMatch'] = ClientConfiguration.search?.solrQueryConfig?.requireFieldMatch ?? true;\n          }\n\n          const defaultHeaders = {\n            'Content-Type': 'application/json'\n          };\n\n          return fetch(searchUrl.href, {\n            method: 'POST',\n            headers: {\n              ...defaultHeaders,\n              ...getBearerTokenHeader(client?.getKeycloak())\n            },\n            body: JSON.stringify(solrQueryConfig)\n          });\n        });\n\n        const results = await Promise.allSettled(promises.map(async pr => {\n          const res = await pr;\n          return res.json();\n        }));\n\n        const successfulResults = results.filter(isFulfilled);\n        const dataResults = successfulResults.flatMap(sR => sR.value?.response?.docs).filter(r => r);\n        const hlResults = Object.assign({}, ...successfulResults.map(sr => sr.value?.highlighting));\n\n        setDataSearchResults(dataResults);\n        setHighlightingResults(hlResults);\n      } catch (error) {\n        setDataSearchResults([]);\n        setHighlightingResults({});\n        logger.error('Error while fetching the layer search results: ', error);\n      } finally {\n        if (!searchNominatim) {\n          setLoading(false);\n        }\n      }\n    }\n\n    if (searchNominatim) {\n      try {\n        const nominatimUrl = new URL('https://nominatim.terrestris.de/search');\n        nominatimUrl.searchParams.set('q', searchValue);\n        nominatimUrl.searchParams.set('format', 'json');\n        nominatimUrl.searchParams.set('polygon_geojson', '1');\n\n        if (useViewBox && viewBox) {\n          nominatimUrl.searchParams.set('viewbox', viewBox.toString());\n          nominatimUrl.searchParams.set('bounded', '1');\n        }\n        response = await fetch(nominatimUrl.href);\n        setNominatimResults(await response.json());\n      }\n      catch (error) {\n        setNominatimResults([]);\n        logger.error('Error while fetching the nominatim results: ', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  }, [searchValue, searchData, searchNominatim, useViewBox, map, client]);\n\n  const replaceTemplates = (template: string, data: DataSearchResult): string => {\n    const pattern = /{\\s*(\\w+?)\\s*}/g; // regex for template string with values in brackets, e.g. {name}\n    return template.replace(pattern, (_, token) => data[token]?.toString() || '');\n  };\n\n  const getFeatureTitle = useCallback((dsResult: DataSearchResult, highlightResult?: HighlightingResult): string => {\n    if (!map) {\n      return '';\n    }\n\n    const layer = MapUtil.getLayerByNameParam(map, dsResult.featureType[0] as string);\n    const searchConfig = layer?.get('searchConfig') as SearchConfig;\n\n    const blacklistedAttributes = [\n      'category',\n      'id',\n      'featureType',\n      'geometry',\n      'search'\n    ];\n\n    let title: string = '';\n\n    if (searchConfig?.displayTemplate) {\n      return replaceTemplates(searchConfig.displayTemplate, dsResult);\n    }\n\n    if (highlightResult) {\n      const filteredHighlightKeys = Object.keys(highlightResult).filter(key => !blacklistedAttributes.includes(key));\n      if (filteredHighlightKeys.length > 0) {\n        const highlightValue = highlightResult[filteredHighlightKeys[0]];\n        return `${highlightValue} [${filteredHighlightKeys[0]}]`;\n      }\n    }\n\n    Object.keys(dsResult)\n      .filter(key => !blacklistedAttributes.includes(key))\n      .forEach(propKey => {\n        let propValue = dsResult[propKey]?.toString();\n        if (!title && propValue.toLowerCase().indexOf(searchValue?.toLowerCase()) > -1) {\n          // show matched value followed by the attribute name in square brackets (e.g. '53111 Bonn [city]')\n          title = `${propValue} [${propKey}]`;\n        }\n      });\n\n    if (!title) {\n      // fallback -> should never happen after adding of the valid layer search config\n      title = dsResult.id as string;\n    }\n\n    return title;\n  }, [searchValue, map]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    let updatedResults: ResultCategory[] = [];\n\n    if (nominatimResults.length > 0) {\n\n      const geoJsonFormat = new OlFormatGeoJSON();\n      const nFeats = nominatimResults.filter(f => !_isNil(f?.geojson)).map(f => {\n        const olFeat = geoJsonFormat.readFeature(f.geojson, {\n          dataProjection: 'EPSG:4326',\n          featureProjection: map.getView().getProjection()\n        });\n        olFeat.set('title', f.display_name);\n        return olFeat;\n      });\n\n      const nResults: ResultCategory = {\n        title: t('MultiSearch.nominatimTitle'),\n        features: nFeats\n      };\n      updatedResults.push(nResults);\n    }\n\n    if (dataSearchResults?.length > 0) {\n\n      const wktFormat = new OlFormatWKT();\n\n      // 1. group by category or layer title\n      let categories;\n      if (ClientConfiguration.search?.groupByCategory) {\n        categories = _groupBy(dataSearchResults, res => res?.category[0]);\n      } else {\n        const layers = map.getAllLayers().filter(l => l.get('searchable'));\n        const resultsWithLayerName = dataSearchResults.map(result => {\n          const layerTitle = layers.filter(l => isWmsLayer(l))\n            .find((l) => (l as WmsLayer).getSource()?.getParams()?.LAYERS === result.featureType[0])\n            ?.get('name');\n\n          return {\n            layerTitle,\n            ...result\n          } as DataSearchResult;\n        });\n        categories = _groupBy(resultsWithLayerName, res => res?.layerTitle);\n      }\n\n      // 2. build features\n      Object.keys(categories).forEach(category => {\n        const features = categories[category].map(dsResult => {\n          if (!dsResult?.geometry?.[0]) {\n            return;\n          }\n          const id = dsResult.id as string;\n\n          const geometry = wktFormat.readGeometry(dsResult.geometry[0], {\n            dataProjection: 'EPSG:4326',\n            featureProjection: map.getView().getProjection()\n          });\n          const olFeat = new OlFeature({\n            geometry\n          });\n          olFeat.set('title', getFeatureTitle(dsResult, highlightingResults?.[id]));\n          let ftName;\n          if (dsResult.featureType?.[0]) {\n            const layer = MapUtil.getLayerByNameParam(map, dsResult.featureType?.[0] as string);\n            if (layer) {\n              olFeat.set('layer', layer);\n              ftName = layer.get('name');\n            }\n          } else {\n            ftName = id.substring(0, id.lastIndexOf('_'));\n          }\n          olFeat.set('ftName', ftName);\n          return olFeat;\n        }).filter(f => f) as OlFeature<OlGeometry>[];\n        const resultCategory: ResultCategory = {\n          title: category,\n          features\n        };\n        updatedResults.push(resultCategory);\n      });\n    }\n\n    setResultsVisible(true);\n    setSearchResults(updatedResults);\n\n  }, [dataSearchResults, highlightingResults, nominatimResults, map, getFeatureTitle, t]);\n\n  useEffect(() => {\n    const delay = ClientConfiguration.search?.delay ?? 1000;\n    const timeout = setTimeout(() => {\n      performSearch();\n    }, delay);\n\n    return () => clearTimeout(timeout);\n\n  }, [performSearch]);\n\n  const resetSearch = () => {\n    setDataSearchResults([]);\n    setNominatimResults([]);\n  };\n\n  const actionsCreator = (item: any) => {\n    const feat = item.feature;\n    const layer = feat.get('layer');\n\n    if (!layer?.get('editable')) {\n      return;\n    }\n\n    // button is temporarily disabled\n    return [<></>];\n  };\n\n  const layerStyle = useMemo(() => (\n    new OlStyle({\n      stroke: new OlStyleStroke({\n        color: 'rgb(255,0,0)',\n        width: 2\n      }),\n      fill: new OlStyleFill({\n        color: 'rgba(255,255,255, 0.5)'\n      }),\n      image: new OlStyleCircle({\n        radius: 10,\n        fill: new OlStyleFill({\n          color: 'rgba(255,255,255, 0.5)'\n        }),\n        stroke: new OlStyleStroke({\n          color: 'rgb(255,0,0)',\n          width: 3\n        })\n      })\n    })\n  ), []);\n\n  const resultRenderer = () => {\n    if (searchValue.length < 2 || !resultsVisible || loading || !dataSearchResults) {\n      return null;\n    }\n\n    const numTotal = nominatimResults.length + dataSearchResults.length;\n\n    if (numTotal === 0) {\n      return (\n        <div\n          className='no-search-result-div'\n        >\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n          />\n        </div>\n      );\n    }\n\n    const onSearchResultClick = (item: Item) => {\n      setResultsVisible(false);\n      zoomOffsetOnClick(item);\n      if (ClientConfiguration.search?.activateLayerOnClick) {\n        activateLayer(item);\n      }\n    };\n\n    const activateLayer = (item: Item) => {\n      const layer = item?.feature?.get('layer');\n      if (layer && map && !layer.getVisible()) {\n        layer.setVisible(true);\n        // also make all parent folders / groups visible so\n        // that the layer becomes visible in map\n        PermalinkUtil.setParentsVisible(\n          map,\n          map.getLayerGroup().getLayers(),\n          getUid(layer)\n        );\n      }\n    };\n\n    const zoomOffsetOnClick = (item: Item) => {\n      const extent = item.feature.getGeometry()?.getExtent();\n      const toolMenuElement = document.getElementsByClassName('tool-menu');\n      const toolMenuWidth = toolMenuElement[0]?.clientWidth ?? 0;\n      let padding = [0, 0, 0, toolMenuWidth];\n\n      if (extent) {\n        map?.getView().fit(extent, {\n          size: map.getSize(),\n          padding\n        });\n      }\n    };\n\n    return (\n      <SearchResultsPanel\n        searchResults={searchResults}\n        numTotal={numTotal}\n        accordion\n        searchTerms={searchValue.split(' ')}\n        actionsCreator={actionsCreator}\n        layerStyle={layerStyle}\n        onClick={onSearchResultClick}\n      />\n    );\n  };\n\n  if (!map) {\n    return <></>;\n  }\n\n  return (\n    <div ref={clickAwayRef}>\n      <Input\n        value={searchValue}\n        disabled={!searchData && !searchNominatim}\n        onChange={event => {\n          setLoading(event.target.value !== '');\n          setSearchValue(event.target.value);\n        }}\n        allowClear\n        addonAfter={\n          <Dropdown\n            placement=\"bottomRight\"\n            menu={settingsMenu}\n            trigger={['click']}\n            onOpenChange={setSettingsVisible}\n            open={settingsVisible}\n          >\n            <SettingOutlined />\n          </Dropdown >\n        }\n        onFocus={() => setResultsVisible(true)}\n        placeholder={t('MultiSearch.searchPlaceholder')}\n        prefix={<SearchOutlined />}\n        suffix={loading ? <LoadingOutlined /> : null}\n      />\n      {resultRenderer()}\n    </div>\n  );\n};\n\nexport default MultiSearch;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  InputProps\n} from 'antd/lib/input';\n\nimport logger from '@terrestris/base-util/dist/Logger';\n\nimport useAppSelector from '../../hooks/useAppSelector';\nimport BasicNominatimSearch from '../BasicNominatimSearch';\nimport MultiSearch from '../MultiSearch';\n\nimport './index.less';\n\ninterface SearchFieldProps extends InputProps { }\n\nexport const SearchField: React.FC<SearchFieldProps> = (): JSX.Element => {\n\n  const useNominatim = useAppSelector((state) => state.searchEngines.includes('nominatim'));\n  const useSolr = useAppSelector((state) => state.searchEngines.includes('solr'));\n\n  if (!useNominatim && !useSolr) {\n    logger.warn('Neither nominatim nor solr search is configured.');\n    return <></>;\n  }\n\n  return (\n    <div\n      className=\"search\"\n      aria-label='search-field'\n    >\n      {\n        useSolr ?\n          <MultiSearch\n            aria-label='search'\n            useNominatim={useNominatim}\n          /> :\n          <BasicNominatimSearch\n            aria-label='search'\n          />\n      }\n    </div>\n  );\n};\n\nexport default SearchField;\n","import md5 from 'js-md5';\n\nexport interface GravatarProps {\n  email: string;\n  size?: number;\n  rating?: 'g' | 'pg' | 'r' | 'x';\n  defaultImage?: '404' | 'mp' | 'identicon' | 'monsterid' | 'wavatar' | 'retro' | 'robohash' | 'blank';\n  force?: boolean;\n}\n\nconst GRAVATAR_BASE_URL = 'https://www.gravatar.com/avatar/';\n\n/**\n * https://de.gravatar.com/site/implement/images/\n */\nexport const getGravatarUrl = ({\n  email = '',\n  size = 80,\n  rating = 'g',\n  defaultImage = 'identicon',\n  force = false\n}: GravatarProps): string => {\n  const lowerCaseEmail = email.toLowerCase();\n  const hash = md5(lowerCaseEmail);\n\n  let url = `${GRAVATAR_BASE_URL}${hash}?s=${size}&r=${rating}&d=${defaultImage}`;\n\n  if (force) {\n    url = `${url}&f=y`;\n  }\n\n  return url;\n};\n\nexport default getGravatarUrl;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  Modal,\n  Statistic\n} from 'antd';\n\nimport {\n  ModalProps\n} from 'antd/lib/modal';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport useAppSelector from '../../hooks/useAppSelector';\n\nimport {\n  useClientVersion\n} from '../../hooks/useVersion';\n\nimport './index.less';\n\ninterface ApplicationInfoProps extends ModalProps {\n  opener?: JSX.Element;\n}\n\nexport const ApplicationInfo: React.FC<ApplicationInfoProps> = ({\n  opener,\n  ...restProps\n}) => {\n  const {\n    t\n  } = useTranslation();\n\n  const appInfo = useAppSelector(state => state.appInfo);\n  const logoPath = useAppSelector(state => state.logoPath);\n  const appDescription = useAppSelector(state => state.description);\n\n  const [isVisible, setVisible] = useState<boolean>(false);\n\n  const toggleVisibility = () => {\n    setVisible(!isVisible);\n  };\n\n  let Opener;\n  if (opener) {\n    Opener = React.cloneElement(\n      opener,\n      {\n        onClick: toggleVisibility\n      }\n    );\n  } else {\n    Opener = <button onClick={toggleVisibility}>Open</button>;\n  }\n\n  return (\n    <>\n      {\n        Opener\n      }\n      <Modal\n        className='application-info'\n        title={t('ApplicationInfo.title')}\n        centered={true}\n        open={isVisible}\n        onOk={toggleVisibility}\n        onCancel={toggleVisibility}\n        footer={null}\n        {...restProps}\n      >\n        <img\n          className=\"logo\"\n          src={logoPath}\n        />\n        <div\n          className=\"description\"\n        >\n          {appDescription}\n        </div>\n        <Statistic\n          title={t('ApplicationInfo.clientVersionTitle')}\n          value={useClientVersion()}\n        />\n        {\n          (appInfo.version && appInfo.buildTime) &&\n          <Statistic\n            title={t('ApplicationInfo.backendVersionTitle')}\n            value={`${appInfo.version} (${appInfo.buildTime})`}\n          />\n        }\n      </Modal>\n    </>\n  );\n};\n\nexport default ApplicationInfo;\n","export const useClientVersion = () => {\n  return PROJECT_VERSION;\n};\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  faInfo,\n  faUserCog,\n  faSignOut,\n  faSignIn,\n  faAngleDown,\n  faCircleQuestion\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport { Button } from 'antd';\nimport {\n  ItemType\n} from 'antd/lib/menu/hooks/useItems';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport _isEmpty from 'lodash/isEmpty';\n\nimport {\n  MenuInfo\n} from 'rc-menu/lib/interface';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport UserChip from '@terrestris/react-geo/dist/UserChip/UserChip';\n\nimport useAppSelector from '../../hooks/useAppSelector';\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\nimport {\n  getGravatarUrl\n} from '../../utils/getGravatarUrl';\n\nimport ApplicationInfo from '../ApplicationInfo';\n\nimport './index.less';\n\ninterface OwnProps { }\n\ntype UserProps = OwnProps;\n\nexport const UserMenu: React.FC<UserProps> = (): JSX.Element => {\n  const {\n    t\n  } = useTranslation();\n\n  const client = useSHOGunAPIClient();\n  const keycloak = client?.getKeycloak();\n\n  const user = useAppSelector((state) => state.user);\n\n  const onMenuClick = (evt: MenuInfo) => {\n    switch (evt.key) {\n      case 'settings':\n        if (keycloak) {\n          keycloak.accountManagement();\n        }\n        break;\n      case 'info':\n        // Don't do anything, visible state will be handled by the menu itself.\n        break;\n      case 'login':\n        if (keycloak) {\n          keycloak.login();\n        }\n        break;\n      case 'logout':\n        if (keycloak) {\n          keycloak.logout({\n            redirectUri: keycloak.createLoginUrl()\n          });\n        }\n        break;\n      default:\n        break;\n    }\n  };\n\n  const getMenu = () => {\n    const login: ItemType = {\n      key: 'login',\n      icon: (\n        <FontAwesomeIcon\n          icon={faSignIn}\n        />\n      ),\n      label: t('UserMenu.loginMenuTitle')\n    };\n\n    const username: ItemType = {\n      key: 'username',\n      label: (\n        <div\n          className=\"user-name\"\n          aria-label='user-name'\n        >\n          <span>\n            {\n              user.providerDetails?.email\n            }\n          </span>\n        </div>\n      )\n    };\n\n    const divider: ItemType = {\n      type: 'divider'\n    };\n\n    const settings: ItemType = {\n      key: 'settings',\n      icon: (\n        <FontAwesomeIcon\n          icon={faUserCog}\n        />\n      ),\n      label: t('UserMenu.settingsMenuTitle')\n    };\n\n    const info: ItemType = {\n      key: 'info',\n      icon: (\n        <FontAwesomeIcon\n          icon={faInfo}\n        />\n      ),\n      label: (\n        <ApplicationInfo\n          opener={\n            <span\n              className=\"info-opener\"\n              aria-label='info-opener'\n            >\n              {t('UserMenu.infoMenuTitle')}\n            </span>\n          }\n        />\n      )\n    };\n\n    const docs: ItemType = {\n      key: 'docs',\n      icon: (\n        <FontAwesomeIcon\n          icon={faCircleQuestion}\n        />\n      ),\n      label: (\n        <Button\n          type='text'\n          className=\"user-documentation\"\n          aria-label='user-documentation'\n          onClick={() => window.open('/gis-docs', '_blank')}\n        >\n          {t('UserMenu.helpMenuTitle')}\n        </Button>\n      )\n    };\n\n    const logout: ItemType = {\n      key: 'logout',\n      icon: (\n        <FontAwesomeIcon\n          icon={faSignOut}\n        />\n      ),\n      label: (\n        <div\n          aria-label='login'\n        >\n          {t('UserMenu.logoutMenuTitle')}\n        </div>\n      )\n    };\n\n    const items: ItemType[] = [];\n\n    if (_isEmpty(user)) {\n      if (ClientConfiguration.keycloak?.enabled) {\n        items.push(login);\n      }\n      items.push(info);\n    } else {\n      const accountRoles = keycloak?.tokenParsed?.resource_access?.account?.roles;\n      const hasUserManagementAccess = Array.isArray(accountRoles) && accountRoles.indexOf('manage-account') > -1;\n      const itemsForLoggedInUser = hasUserManagementAccess ? [\n        username,\n        divider,\n        settings,\n        info,\n        divider,\n        logout\n      ] : [\n        username,\n        divider,\n        info,\n        divider,\n        logout\n      ];\n\n      items.push(...itemsForLoggedInUser);\n    }\n\n    return {\n      items,\n      onClick: onMenuClick\n    };\n  };\n\n  if (_isEmpty(user)) {\n    return <></>;\n  }\n\n  return (\n    <UserChip\n      size={'small'}\n      imageSrc={getGravatarUrl({\n        email: user.providerDetails?.email || '',\n        size: 28\n      })}\n      userName={\n        <FontAwesomeIcon\n          icon={faAngleDown}\n        />\n      }\n      userMenu={getMenu()}\n    />\n  );\n};\n\nexport default UserMenu;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport DocumentationButton from '../../components/DocumentationButton';\nimport {\n  useAppSelector\n} from '../../hooks/useAppSelector';\nimport {\n  usePlugins\n} from '../../hooks/usePlugins';\n\nimport {\n  HeaderPlacementOrientation,\n  isHeaderIntegration\n} from '../../plugin';\nimport SearchField from '../SearchField';\n\nimport UserMenu from '../UserMenu';\n\nimport './index.less';\n\nexport interface HeaderProps extends React.ComponentProps<'div'> { }\n\nexport const Header: React.FC<HeaderProps> = ({\n  ...restProps\n}): JSX.Element => {\n  const title = useAppSelector((state) => state.title);\n  const logoPath = useAppSelector((state) => state.logoPath);\n  const plugins = usePlugins();\n\n  const insertPlugins = (itemPosition: HeaderPlacementOrientation, items: JSX.Element[]) => {\n    plugins.forEach(plugin => {\n      if (isHeaderIntegration(plugin.integration) && plugin.integration?.placementOrientation === itemPosition) {\n        const {\n          key,\n          wrappedComponent: WrappedPluginComponent\n        } = plugin;\n\n        items.splice(plugin.integration?.insertionIndex || 0, 0,\n          <WrappedPluginComponent\n            key={key}\n          />\n        );\n      }\n    });\n  };\n\n  const getLeftItems = () => {\n    const items = [(\n      <img\n        key=\"logo\"\n        className=\"logo\"\n        aria-label=\"logo\"\n        src={logoPath}\n      />\n    ), (\n      <div\n        key=\"title\"\n        className=\"title\"\n        aria-label=\"title\"\n      >\n        {title}\n      </div>\n    )];\n\n    insertPlugins('left', items);\n\n    return items;\n  };\n\n  const getCenterItems = () => {\n    const items = [\n      <SearchField\n        key=\"search\"\n        aria-label='search-input'\n        name='search-input'\n        className='search-input'\n      />\n    ];\n\n    insertPlugins('center', items);\n\n    return items;\n  };\n\n  const getDocsButton = () => {\n    if (ClientConfiguration.documentationButtonVisible) {\n      return (\n        <div\n          key=\"documentation-button\"\n          aria-label=\"documentation-button\"\n        >\n          <DocumentationButton\n            key=\"documentation-button\"\n            type=\"link\"\n          >\n          </DocumentationButton>\n\n        </div>\n      );\n    }\n  };\n\n  const getUserMenu = () => {\n    return (\n      <div\n        key=\"user-menu\"\n        aria-label=\"user-menu\"\n      >\n        <UserMenu\n          key=\"user-menu\"\n        />\n      </div>\n    );\n  };\n\n  const getRightItems = () => {\n    const items = [\n      getDocsButton(),\n      getUserMenu()\n    ].filter((item) => {\n      return item !== undefined;\n    });\n\n    insertPlugins('right', items);\n    return items;\n  };\n\n  return (\n    <div\n      className=\"header\"\n      {...restProps}\n    >\n      <div\n        className=\"item-container left-items\"\n      >\n        {\n          getLeftItems()\n        }\n      </div>\n      <div\n        className=\"item-container center-items\"\n      >\n        {\n          getCenterItems()\n        }\n      </div>\n      <div\n        className=\"item-container right-items\"\n      >\n        {\n          getRightItems()\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState,\n  useEffect,\n  useCallback\n} from 'react';\n\nimport {\n  Alert,\n  Spin\n} from 'antd';\n\nimport OlLayer from 'ol/layer/Layer';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport Layer from '@terrestris/shogun-util/dist/model/Layer';\n\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\n\nimport './index.less';\n\nexport type LayerConfigurationProps = React.ComponentProps<'pre'> & {\n  layer?: OlLayer;\n};\n\nexport const LayerConfiguration: React.FC<LayerConfigurationProps> = ({\n  layer,\n  ...restProps\n}): JSX.Element => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errorMessage, setErrorMessage] = useState<string>();\n  const [layerConfiguration, setLayerConfiguration] = useState<Layer>();\n\n  const client = useSHOGunAPIClient();\n\n  const {\n    t\n  } = useTranslation();\n\n  const getLayerConfiguration = useCallback(async () => {\n    try {\n      setLoading(true);\n      setErrorMessage('');\n\n      if (!layer || !layer.get('shogunId')) {\n        throw new Error('No layer provided or the layer has no shogunId set');\n      }\n\n      const conf = await client?.layer().findOne(layer.get('shogunId'));\n\n      setLayerConfiguration(conf);\n    } catch (error) {\n      Logger.error(error);\n      setErrorMessage(t('LayerConfiguration.errorMessage'));\n    } finally {\n      setLoading(false);\n    }\n  }, [t, client, layer]);\n\n  useEffect(() => {\n    getLayerConfiguration();\n  }, [getLayerConfiguration]);\n\n  if (errorMessage) {\n    return (\n      <Alert\n        type=\"error\"\n        closable={true}\n        message={errorMessage}\n      />\n    );\n  }\n\n  return (\n    <Spin\n      spinning={loading}\n    >\n      <pre\n        className=\"layer-configuration\"\n        {...restProps}\n      >\n        <code>\n          {\n            JSON.stringify(layerConfiguration, null, '  ')\n          }\n        </code>\n      </pre>\n    </Spin>\n  );\n};\n\nexport default LayerConfiguration;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState,\n  useEffect,\n  useCallback\n} from 'react';\n\nimport {\n  Alert,\n  Form,\n  FormProps,\n  Spin\n} from 'antd';\n\nimport OlLayerImage from 'ol/layer/Image';\nimport OlLayer from 'ol/layer/Layer';\nimport OlLayerTile from 'ol/layer/Tile';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\nimport UrlUtil from '@terrestris/base-util/dist/UrlUtil/UrlUtil';\n\nimport CapabilitiesUtil from '@terrestris/ol-util/dist/CapabilitiesUtil/CapabilitiesUtil';\n\nimport {\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\n\nimport './index.less';\n\nexport type LayerDetailsProps = Partial<FormProps> & {\n  layer?: OlLayer;\n};\n\nexport const LayerDetails: React.FC<LayerDetailsProps> = ({\n  layer,\n  ...restProps\n}): JSX.Element => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [capabilities, setCapabilities] = useState<any>();\n  const [errorMessage, setErrorMessage] = useState<string>();\n\n  const client = useSHOGunAPIClient();\n\n  const {\n    t\n  } = useTranslation();\n\n  const getCapabilities = useCallback(async () => {\n    if (!layer || !isWmsLayer(layer)) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setErrorMessage('');\n      setCapabilities(undefined);\n\n      const capa = await CapabilitiesUtil.getWmsCapabilitiesByLayer(\n        (layer as OlLayerImage<OlSourceImageWMS> | OlLayerTile<OlSourceTileWMS>), {\n          headers: {\n            ...layer.get('useBearerToken') ? {\n              ...getBearerTokenHeader(client?.getKeycloak())\n            } : undefined\n          }\n        });\n\n      setCapabilities(capa);\n    } catch (error) {\n      Logger.error(error);\n      setErrorMessage(t('LayerDetails.errorMessage'));\n    } finally {\n      setLoading(false);\n    }\n  }, [t, client, layer]);\n\n  useEffect(() => {\n    getCapabilities();\n  }, [getCapabilities]);\n\n  const getLayerName = () => {\n    if (!layer || !isWmsLayer(layer)) {\n      return;\n    }\n\n    return layer.getSource()?.getParams().LAYERS;\n  };\n\n  const getCapabilitiesUrl = () => {\n    if (!layer || !isWmsLayer(layer)) {\n      return;\n    }\n\n    let layerUrl;\n    if (layer.getSource() instanceof OlSourceImageWMS) {\n      layerUrl = (layer.getSource() as OlSourceImageWMS).getUrl();\n    }\n    if (layer.getSource() instanceof OlSourceTileWMS) {\n      const urls = (layer.getSource() as OlSourceTileWMS).getUrls();\n      layerUrl = urls ? urls[0] : undefined;\n    }\n\n    if (layerUrl) {\n      return UrlUtil.createValidGetCapabilitiesRequest(layerUrl, 'WMS', '1.3.0');\n    }\n  };\n\n  const getCapabilitiesLayer = () => {\n    const layers: any[] = capabilities?.Capability?.Layer?.Layer;\n    const layerName = getLayerName();\n    let lay;\n    if (Array.isArray(layers)) {\n      lay = layers?.find(l => l?.Name === layerName);\n    } else {\n      return layers;\n    }\n    return lay;\n  };\n\n  const getBBox = () => {\n    const lay = getCapabilitiesLayer();\n\n    if (!lay || !lay.EX_GeographicBoundingBox) {\n      return;\n    }\n\n    return [\n      lay.EX_GeographicBoundingBox.westBoundLongitude,\n      lay.EX_GeographicBoundingBox.southBoundLatitude,\n      lay.EX_GeographicBoundingBox.eastBoundLongitude,\n      lay.EX_GeographicBoundingBox.northBoundLatitude\n    ].join(', ');\n  };\n\n  const getMinScale = () => {\n    const lay = getCapabilitiesLayer();\n\n    if (!lay) {\n      return;\n    }\n\n    return lay.MinScaleDenominator;\n  };\n\n  const getMaxScale = () => {\n    const lay = getCapabilitiesLayer();\n\n    if (!lay) {\n      return;\n    }\n\n    return lay.MaxScaleDenominator;\n  };\n\n  const getAbstract = () => {\n    const lay = getCapabilitiesLayer();\n\n    if (!lay) {\n      return;\n    }\n\n    return lay.Abstract;\n  };\n\n  const getServiceAbstract = () => {\n    return capabilities?.Service?.Abstract;\n  };\n\n  const getContact = () => {\n    return capabilities?.Service?.ContactInformation?.ContactElectronicMailAddress;\n  };\n\n  const getLayerTitle = () => {\n    const lay = getCapabilitiesLayer();\n\n    if (!lay) {\n      return;\n    }\n\n    return lay.Title;\n  };\n\n  const getAccessConstraints = () => {\n    return capabilities?.Service?.AccessConstraints;\n  };\n\n  if (errorMessage) {\n    return (\n      <Alert\n        type=\"error\"\n        closable={true}\n        message={errorMessage}\n      />\n    );\n  }\n\n  return (\n    <Spin\n      spinning={loading}\n    >\n      <Form\n        className=\"layer-details\"\n        layout=\"horizontal\"\n        size=\"small\"\n        labelAlign=\"left\"\n        labelWrap={true}\n        labelCol={{\n          flex: '150px'\n        }}\n        {...restProps}\n      >\n        <Form.Item\n          name=\"layerName\"\n          label={t('LayerDetails.layerNameLabel')}\n        >\n          <span>{getLayerName() ? getLayerName() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"layerTitle\"\n          label={t('LayerDetails.layerTitleLabel')}\n        >\n          <span>{getLayerTitle() ? getLayerTitle() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"service-abstract\"\n          label={t('LayerDetails.serviceAbstractLabel')}\n        >\n          <span>{getServiceAbstract() ? getServiceAbstract() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"abstract\"\n          label={t('LayerDetails.abstractLabel')}\n        >\n          <span>{getAbstract() ? getAbstract() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"accessConstraints\"\n          label={t('LayerDetails.accessConstraintsLabel')}\n        >\n          <span>{getAccessConstraints() ? getAccessConstraints() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"CapabilitiesUrl\"\n          label={t('LayerDetails.capabilitiesUrlLabel')}\n        >\n          <a href={getCapabilitiesUrl()}>{getCapabilitiesUrl()}</a>\n        </Form.Item>\n        <Form.Item\n          name=\"contact\"\n          label={t('LayerDetails.contactLabel')}\n        >\n          {getContact() ? <a href={`mailto:${getContact()}`}>{getContact()}</a> : <span>{t('LayerDetails.noDataPlaceholder')}</span>}\n        </Form.Item>\n        <Form.Item\n          name=\"minScale\"\n          label={t('LayerDetails.minScaleLabel')}\n        >\n          <span>{getMinScale() ? getMinScale() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"maxScale\"\n          label={t('LayerDetails.maxScaleLabel')}\n        >\n          <span>{getMaxScale() ? getMaxScale() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n        <Form.Item\n          name=\"bbox\"\n          label={t('LayerDetails.bboxLabel')}\n        >\n          <span>{getBBox() ? getBBox() : t('LayerDetails.noDataPlaceholder')}</span>\n        </Form.Item>\n      </Form>\n    </Spin>\n  );\n};\n\nexport default LayerDetails;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState,\n  useEffect\n} from 'react';\n\nimport {\n  FileTextOutlined\n} from '@ant-design/icons';\n\nimport {\n  Button,\n  Modal,\n  ModalProps,\n  Tooltip\n} from 'antd';\n\nimport OlLayer from 'ol/layer/Layer';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\n\nimport {\n  hide as hideLayerDetailsModal,\n  setLayer as setDetailsLayer\n} from '../../store/layerDetailsModal';\n\nimport LayerConfiguration from './LayerConfiguration';\nimport LayerDetails from './LayerDetails';\n\nimport './index.less';\n\nexport type LayerDetailsModalProps = Partial<ModalProps>;\n\nexport const LayerDetailsModal: React.FC<LayerDetailsModalProps> = ({\n  ...restProps\n}): JSX.Element => {\n  const [layer, setLayer] = useState<OlLayer>();\n  const [configurationVisible, setConfigurationVisible] = useState<boolean>(false);\n\n  const isModalVisible = useAppSelector(state => state.layerDetailsModal.visible);\n  const layerId = useAppSelector(state => state.layerDetailsModal.layerId);\n\n  const dispatch = useAppDispatch();\n\n  const map = useMap();\n\n  const {\n    t\n  } = useTranslation();\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    if (!layerId) {\n      setLayer(undefined);\n      return;\n    }\n\n    const l = MapUtil.getLayerByOlUid(map, layerId);\n\n    if (!(l instanceof OlLayer)) {\n      return;\n    }\n\n    setLayer(l);\n  }, [map, layerId]);\n\n  const closeModal = () => {\n    dispatch(hideLayerDetailsModal());\n    dispatch(setDetailsLayer(undefined));\n  };\n\n  const onShowConfigurationClick = () => {\n    setConfigurationVisible(!configurationVisible);\n  };\n\n  return (\n    <Modal\n      className=\"layer-details-modal\"\n      title={(\n        <div\n          className=\"title-group\"\n        >\n          <span>{t('LayerDetailsModal.title', {\n            layerName: layer?.get('name')\n          })}\n          </span>\n          {\n            layer?.get('shogunId') && (\n              <Tooltip\n                title={configurationVisible ?\n                  t('LayerDetailsModal.internalConfigurationButtonTooltipPressed') :\n                  t('LayerDetailsModal.internalConfigurationButtonTooltip')\n                }\n              >\n                <Button\n                  type=\"link\"\n                  className={configurationVisible ? 'pressed' : ''}\n                  icon={<FileTextOutlined />}\n                  onClick={onShowConfigurationClick}\n                />\n              </Tooltip>\n            )\n          }\n        </div>\n      )}\n      open={isModalVisible}\n      onCancel={closeModal}\n      width={800}\n      footer={false}\n      {...restProps}\n    >\n      <LayerDetails\n        layer={layer}\n        hidden={configurationVisible}\n      />\n      {\n        layer?.get('shogunId') && (\n          <LayerConfiguration\n            layer={layer}\n            hidden={!configurationVisible}\n          />\n        )\n      }\n    </Modal>\n  );\n};\n\nexport default LayerDetailsModal;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import * as React from 'react';\n\nimport {\n  useEffect,\n  useState\n} from 'react';\n\nimport CardStyle, {\n  CardStyleProps\n} from 'geostyler/dist/Component/CardStyle/CardStyle';\n\nimport OlParser from 'geostyler-openlayers-parser';\n\nimport {\n  Style as GsStyle\n} from 'geostyler-style';\n\nimport OlFeature from 'ol/Feature';\n\nimport OlLayerVector from 'ol/layer/Vector';\n\nimport VectorSource from 'ol/source/Vector';\n\nimport {\n  StyleFunction,\n  StyleLike as OlStyleLike\n} from 'ol/style/Style';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nexport type StylingComponentProps = CardStyleProps;\n\nexport const StylingComponent: React.FC<StylingComponentProps> = ({\n  ...passThroughProps\n}): JSX.Element => {\n\n  const defaultStyle: GsStyle = {\n    name: 'Default Style',\n    rules: [{\n      name: 'Area',\n      symbolizers: [{\n        kind: 'Fill',\n        color: '#00b72b',\n        outlineOpacity: 0.8,\n        opacity: 0.5,\n        fillOpacity: 0.8,\n        outlineWidth: 2,\n        outlineColor: '#00b72b'\n      }]\n    }, {\n      name: 'Line',\n      symbolizers: [{\n        kind: 'Line',\n        color: '#00b72b',\n        width: 2,\n        opacity: 0.8\n      }]\n    }, {\n      name: 'Point',\n      symbolizers: [{\n        kind: 'Mark',\n        wellKnownName: 'circle',\n        color: '#00b72b',\n        strokeColor: '#00b72b',\n        strokeOpacity: 0.8,\n        opacity: 0.5,\n        radius: 7\n      }],\n      filter: [\n        '==',\n        'label',\n        'undefined'\n      ]\n    }, {\n      name: 'Text',\n      symbolizers: [{\n        kind: 'Text',\n        label: '{{label}}',\n        size: 12,\n        font: [\n          'sans-serif'\n        ],\n        opacity: 0.8,\n        color: '#00b72b',\n        offset: [\n          5,\n          5\n        ],\n        haloColor: '#00b72b',\n        haloWidth: 1\n      }],\n      filter: [\n        '!=',\n        'label',\n        'undefined'\n      ]\n    }]\n  };\n\n  const [style, setStyle] = useState<GsStyle>(defaultStyle);\n\n  const map = useMap();\n\n  useEffect(() => {\n    if (!style || !map) {\n      return;\n    }\n\n    const olParser = new OlParser();\n\n    let drawVectorLayer = MapUtil.getLayerByName(map, 'react-geo_digitize') as OlLayerVector<VectorSource>;\n\n    const parseStyles = async () => {\n      let olStylePolygon: OlStyleLike;\n      let olStyleLineString: OlStyleLike;\n      let olStylePoint: OlStyleLike;\n      let olStyleText: OlStyleLike;\n\n      for (const rule of style.rules) {\n        const newStyle: GsStyle = {\n          name: '',\n          rules: [rule]\n        };\n\n        const olStyle = await olParser.writeStyle(newStyle);\n\n        if (!olStyle.output) {\n          return;\n        }\n\n        if (rule.symbolizers[0].kind === 'Fill') {\n          olStylePolygon = olStyle.output;\n        }\n\n        if (rule.symbolizers[0].kind === 'Text') {\n          olStyleText = olStyle.output;\n        }\n\n        if (rule.symbolizers[0].kind === 'Line') {\n          olStyleLineString = olStyle.output;\n        }\n\n        if (rule.symbolizers[0].kind === 'Mark') {\n          olStylePoint = olStyle.output;\n        }\n      }\n\n      const drawLayerStyleFunction = (feature: OlFeature, resolution: number) => {\n        const geometryType = feature.getGeometry()?.getType();\n\n        if (!geometryType) {\n          return;\n        }\n\n        if (['MultiPolygon', 'Polygon', 'Circle'].includes(geometryType)) {\n          return typeof olStylePolygon === 'function' ? olStylePolygon(feature, resolution) : olStylePolygon;\n        }\n\n        if (['MultiLineString', 'LineString'].includes(geometryType)) {\n          return typeof olStyleLineString === 'function' ? olStyleLineString(feature, resolution) : olStyleLineString;\n        }\n\n        if (['MultiPoint', 'Point'].includes(geometryType)) {\n          if (feature.get('label')) {\n            return typeof olStyleText === 'function' ? olStyleText(feature, resolution) : olStyleText;\n          }\n\n          return typeof olStylePoint === 'function' ? olStylePoint(feature, resolution) : olStylePoint;\n        }\n      };\n\n      drawVectorLayer.setStyle(drawLayerStyleFunction as StyleFunction);\n    };\n\n    parseStyles();\n  }, [style, map]);\n\n  return (\n    <CardStyle\n      style={style}\n      onStyleChange={setStyle}\n      {...passThroughProps}\n    />\n  );\n};\n\nexport default StylingComponent;\n","import React from 'react';\n\nimport {\n  Drawer,\n  DrawerProps\n} from 'antd';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport './index.less';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport { setStylingDrawerVisibility } from '../../store/stylingDrawerVisibility';\nimport StylingComponent from '../ToolMenu/Draw/StylingDrawerButton/StylingComponent';\n\nexport type StylingDrawerProps = DrawerProps;\n\nexport const StylingDrawer: React.FC<StylingDrawerProps> = ({\n  ...passThroughProps\n}): JSX.Element => {\n\n  const dispatch = useAppDispatch();\n  const isStylingDrawerVisible = useAppSelector(state => state.stylingDrawerVisibility);\n\n  const {\n    t\n  } = useTranslation();\n\n  const onClose = () => {\n    dispatch(setStylingDrawerVisibility(false));\n  };\n\n  return (\n    <Drawer\n      title={t('StylingDrawer.title')}\n      placement=\"right\"\n      onClose={onClose}\n      open={isStylingDrawerVisible}\n      className=\"color-pick-drawer\"\n      maskClosable={false}\n      mask={false}\n      {...passThroughProps}\n    >\n      <StylingComponent />\n    </Drawer>\n  );\n};\n\nexport default StylingDrawer;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport './index.less';\n\nimport {\n  Select\n} from 'antd';\n\nconst {\n  Option\n} = Select;\n\nimport i18n from '../../i18n';\n\nexport const LanguageSelect = () => {\n  const supportedLanguages = Object.keys(i18n.services.resourceStore.data);\n\n  const onLanguageChange = (lang: string) => {\n    i18n.changeLanguage(lang);\n  };\n\n  return (\n    <div\n      className=\"language-select\"\n      aria-label='language-selector'\n    >\n      <Select\n        defaultValue={i18n.language || 'en'}\n        onChange={onLanguageChange}\n      >\n        {\n          supportedLanguages.map(supportedLanguage => {\n            return (\n              <Option\n                key={supportedLanguage}\n                value={supportedLanguage}\n              >\n                {supportedLanguage.toUpperCase()}\n              </Option>\n            );\n          })\n        }\n      </Select>\n    </div>\n  );\n};\n\nexport default LanguageSelect;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect, useState, useMemo\n} from 'react';\n\nimport {\n  CopyOutlined,\n  MailOutlined,\n  WhatsAppOutlined\n} from '@ant-design/icons';\nimport {\n  Input, Tooltip, message\n} from 'antd';\nimport copy from 'copy-to-clipboard';\nimport {\n  EventsKey\n} from 'ol/events';\nimport BaseLayer from 'ol/layer/Base';\nimport LayerGroup from 'ol/layer/Group';\nimport ImageLayer from 'ol/layer/Image';\nimport TileLayer from 'ol/layer/Tile';\nimport {\n  unByKey\n} from 'ol/Observable';\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport PermalinkUtil from '@terrestris/ol-util/dist/PermalinkUtil/PermalinkUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport Layer from '@terrestris/shogun-util/dist/model/Layer';\n\nimport './index.less';\n\ninterface DefaultPermalinkProps { }\n\nexport interface PermalinkProps extends Partial<DefaultPermalinkProps> { }\n\nexport const Permalink: React.FC<PermalinkProps> = () => {\n  const map = useMap();\n  const layerAttributes = useMemo(() => [\n    'layerConfig',\n    'isExternalLayer',\n    'isUploadedLayer',\n    'groupName'\n  ], []);\n  const {\n    t\n  } = useTranslation();\n\n  const initialPermalink = map ? PermalinkUtil.getLink(\n    map,\n    ';',\n    l => l.get('name'),\n    l => (l instanceof TileLayer || l instanceof ImageLayer) && l.getVisible(),\n    layerAttributes\n  ) : '';\n\n  const [permalink, setPermalink] = useState(initialPermalink);\n\n  const mailSubject = 'SHOGun Web-GIS';\n  const mailBody = `Hey,\\r\\ncheck out the layer-composition I created:\\r\\n\\r\\n${permalink}`;\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n    let eventKeys: EventsKey[] = [];\n\n    const identifierFunction = (l: BaseLayer) => l.get('name');\n    const filterFunction = (l: BaseLayer) => (l instanceof TileLayer || l instanceof ImageLayer) && l.getVisible();\n    const updatePermalink = () => {\n      setPermalink(PermalinkUtil.getLink(\n        map,\n        ';',\n        identifierFunction,\n        filterFunction,\n        layerAttributes\n      ));\n    };\n\n    const updateLayerConfig = () => {\n      const externalLayers = map.getAllLayers().filter(l => l.get('isExternalLayer') || l.get('isUploadedLayer'));\n      externalLayers.forEach(externalLayer => {\n        const layerConfig = externalLayer.get('layerConfig') as Layer;\n        if (layerConfig) {\n          if (layerConfig.clientConfig) {\n            layerConfig.clientConfig.opacity = externalLayer.getOpacity();\n          } else {\n            layerConfig.clientConfig = {\n              opacity: externalLayer.getOpacity()\n            };\n          }\n          externalLayer.set('layerConfig', layerConfig);\n        }\n      });\n      updatePermalink();\n    };\n\n    const registerLayerCallback = (layerGroup: LayerGroup) => {\n      const layersInGroup = layerGroup.getLayers().getArray();\n      for (let i = 0; i < layersInGroup.length; i++) {\n        const layerInGroup = layersInGroup[i];\n\n        if (layerInGroup instanceof LayerGroup) {\n          registerLayerCallback(layerInGroup);\n        } else {\n          let eventKeyVisibility = layerInGroup.on('change:visible', updatePermalink);\n          let eventKeyOpacity = layerInGroup.on('change:opacity', updateLayerConfig);\n          eventKeys.push(eventKeyVisibility, eventKeyOpacity);\n        }\n      }\n    };\n\n    const listenerKeyCenter = map.getView().on('change:center', updatePermalink);\n    const listenerKeyResolution = map.getView().on('change:resolution', updatePermalink);\n\n    let mapLayerGroup = map.getLayerGroup();\n    registerLayerCallback(mapLayerGroup);\n    updateLayerConfig();\n\n    return () => {\n      unByKey(listenerKeyCenter);\n      unByKey(listenerKeyResolution);\n      unByKey(eventKeys);\n    };\n  }, [layerAttributes, map, t]);\n\n  function onTwitterClick() {\n    const twitterUrl = new URL('https://twitter.com/intent/tweet');\n    twitterUrl.searchParams.set('url', mailBody);\n    window.open(twitterUrl);\n  }\n\n  function onWhatsAppClick() {\n    const whatsAppUrl = new URL('https://wa.me');\n    whatsAppUrl.searchParams.set('text', mailBody);\n    window.open(whatsAppUrl);\n  }\n\n  function onMailClick() {\n    const mailToUrl = new URL('mailto:');\n    mailToUrl.searchParams.set('subject', mailSubject);\n    mailToUrl.searchParams.set('body', mailBody);\n    window.open(mailToUrl.toString().replace(/\\+/g, '%20'), '_self');\n  }\n\n  function onCopyClick() {\n    const success = copy(permalink);\n    if (success) {\n      message.info(t('Permalink.copiedToClipboard'));\n    } else {\n      message.info(t('Permalink.copyToClipboardFailed'));\n    }\n  }\n\n  return (\n    <div className=\"permalink-wrapper\">\n      <div className=\"icons\">\n        <Tooltip title={t('Permalink.whatsAppTooltip')}>\n          <WhatsAppOutlined onClick={onWhatsAppClick} />\n        </Tooltip>\n        <Tooltip title={t('Permalink.mailTooltip')}>\n          <MailOutlined onClick={onMailClick} />\n        </Tooltip>\n      </div>\n      <div\n        className=\"link\"\n        aria-label='permalink-url'\n      >\n        <Input value={permalink}\n          readOnly\n        />\n        <Tooltip title={t('Permalink.copyTooltip')}>\n          <CopyOutlined onClick={onCopyClick} />\n        </Tooltip>\n      </div>\n    </div>\n  );\n};\n\nexport default Permalink;\n","import OlLayer from 'ol/layer/Layer';\n\nimport MapFishPrintV3WMSSerializer from '@terrestris/mapfish-print-manager/dist/serializer/MapFishPrintV3WMSSerializer';\n\nexport class SHOGunMapFishPrintV3WMSSerializer extends MapFishPrintV3WMSSerializer {\n\n  serialize(layer: OlLayer, opts?: any) {\n    const serialized: any = super.serialize(layer, opts);\n\n    if (serialized.baseURL.startsWith('/geoserver/ows')) {\n      serialized.baseURL = `http://shogun-geoserver:8080${serialized.baseURL}`;\n    }\n\n    if (serialized.baseURL.startsWith('/geoserver/SHOGUN')) {\n      serialized.baseURL = `http://shogun-geoserver:8080${serialized.baseURL}`;\n    }\n\n    return serialized;\n  }\n}\n\nexport default SHOGunMapFishPrintV3WMSSerializer;\n","import OlLayer from 'ol/layer/Layer';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport MapFishPrintV3TiledWMSSerializer from '@terrestris/mapfish-print-manager/dist/serializer/MapFishPrintV3TiledWMSSerializer';\n\nimport SHOGunMapFishPrintV3WMSSerializer from './SHOGunMapFishPrintV3WMSSerializer';\n\nexport class SHOGunMapFishPrintV3TiledWMSSerializer extends SHOGunMapFishPrintV3WMSSerializer {\n\n  serialize(layer: OlLayer<OlSourceTileWMS>, opts: any) {\n    const optsToApply = {\n      tileSize: [512, 512],\n      ...opts\n    };\n\n    const source = layer.getSource();\n\n    if (!source || !this.validateSource(source)) {\n      return;\n    }\n\n    const serialized = {\n      ...super.serialize(layer, optsToApply),\n      ...{\n        type: MapFishPrintV3TiledWMSSerializer.TYPE_WMS\n      },\n      ...opts\n    };\n\n    return serialized;\n  }\n}\n\nexport default SHOGunMapFishPrintV3TiledWMSSerializer;\n","import React, {\n  useEffect, useState\n} from 'react';\n\nimport { Input } from 'antd';\nimport { InputProps } from 'antd/lib/input';\n\nimport _isNil from 'lodash/isNil';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport { addCustomParam } from '../../../store/print';\n\ninterface CustomFieldInputProps extends InputProps {}\n\nexport const CustomFieldInput: React.FC<CustomFieldInputProps> = ({\n  value,\n  id,\n  placeholder,\n  maxLength,\n  ...restProps\n}): JSX.Element => {\n\n  const [inputText, setInputText] = useState<any>(value);\n\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    if (!_isNil(id)) {\n      dispatch(addCustomParam({\n        [id]: inputText\n      }));\n    }\n  }, [inputText, id, dispatch]);\n\n  useEffect(() => {\n    setInputText(value);\n  }, [value]);\n\n  return (\n    <Input\n      id={id}\n      value={inputText}\n      onChange={(event) => setInputText(event.target.value)}\n      placeholder={placeholder}\n      maxLength={maxLength}\n      showCount={!!(maxLength && maxLength > 1)}\n      {...restProps}\n    />\n  );\n};\n\nexport default CustomFieldInput;\n","import React, {\n  useEffect,\n  useRef,\n  useState\n} from 'react';\n\nimport {\n  Select\n} from 'antd';\nimport {\n  SelectProps\n} from 'antd/lib/select';\n\nimport {\n  MapFishPrintV3Manager\n} from '@terrestris/mapfish-print-manager';\n\nimport {\n  Layout\n} from '../';\n\nexport interface LayoutSelectProps extends SelectProps<string> {\n  printManager: MapFishPrintV3Manager;\n  onValueChange: Function;\n}\n\nexport const LayoutSelect: React.FC<LayoutSelectProps> = ({\n  printManager,\n  onValueChange,\n  placeholder = 'Bitte wählen Sie eine Vorlage aus',\n  value,\n  ...restProps\n}): JSX.Element => {\n\n  const [layout, setLayout] = useState<any>(value);\n  const prevLayoutRef = useRef<string | null | undefined>(layout);\n\n  useEffect(() => {\n    prevLayoutRef.current = value;\n  }, [value]);\n\n  useEffect(() => {\n    if (printManager) {\n      printManager.setLayout(layout);\n      if (prevLayoutRef.current !== layout) {\n        onValueChange();\n      }\n    }\n  }, [printManager, layout, onValueChange, value]);\n\n  useEffect(() => {\n    setLayout(value);\n  }, [value]);\n\n  return (\n    <Select\n      placeholder={placeholder}\n      value={layout}\n      onChange={setLayout}\n      {...restProps}\n    >\n      {\n        printManager?.getLayouts().map((l: Layout) => (\n          <Select.Option\n            key={l.name}\n            value={l.name}\n          >\n            {l.name}\n          </Select.Option>\n        ))\n      }\n    </Select>\n  );\n};\n\nexport default LayoutSelect;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  Select\n} from 'antd';\nimport {\n  SelectProps\n} from 'antd/lib/select';\n\nimport {\n  MapFishPrintV3Manager\n} from '@terrestris/mapfish-print-manager';\n\nexport interface OutputFormatSelectProps extends SelectProps<string> {\n  printManager: MapFishPrintV3Manager;\n  outputFormats: string[];\n}\n\nexport const OutputFormatSelect: React.FC<OutputFormatSelectProps> = ({\n  printManager,\n  placeholder,\n  value,\n  outputFormats,\n  ...restProps\n}): JSX.Element => {\n\n  const [outputFormat, setOutputFormat] = useState<any>(value);\n\n  useEffect(() => {\n    if (printManager) {\n      printManager.setOutputFormat(outputFormat);\n    }\n  }, [printManager, outputFormat]);\n\n  useEffect(() => {\n    setOutputFormat(value);\n  }, [value]);\n\n  return (\n    <Select\n      placeholder={placeholder}\n      value={outputFormat}\n      onChange={setOutputFormat}\n      {...restProps}\n    >\n      {\n        outputFormats.map((f: string) => (\n          <Select.Option\n            key={f}\n            value={f}\n          >\n            {f.toLocaleUpperCase()}\n          </Select.Option>\n        ))\n      }\n    </Select>\n  );\n};\n\nexport default OutputFormatSelect;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  Select\n} from 'antd';\nimport {\n  SelectProps\n} from 'antd/lib/select';\n\nimport {\n  MapFishPrintV3Manager\n} from '@terrestris/mapfish-print-manager';\n\nexport interface ResolutionSelectProps extends SelectProps<number> {\n  printManager: MapFishPrintV3Manager;\n}\n\nexport const ResolutionSelect: React.FC<ResolutionSelectProps> = ({\n  printManager,\n  placeholder,\n  value,\n  ...restProps\n}): JSX.Element => {\n\n  const [resolution, setResolution] = useState<any>(value);\n\n  useEffect(() => {\n    if (printManager) {\n      printManager.setDpi(resolution);\n    }\n  }, [printManager, resolution]);\n\n  useEffect(() => {\n    setResolution(value);\n  }, [value]);\n\n  return (\n    <Select\n      placeholder={placeholder}\n      value={resolution}\n      onChange={setResolution}\n      {...restProps}\n    >\n      {\n        printManager?.getDpis().map((d: number) => (\n          <Select.Option\n            key={d}\n            value={d}\n          >\n            {`${d} DPI`}\n          </Select.Option>\n        ))\n      }\n    </Select>\n  );\n};\n\nexport default ResolutionSelect;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  Select\n} from 'antd';\nimport {\n  SelectProps\n} from 'antd/lib/select';\n\nimport {\n  MapFishPrintV3Manager\n} from '@terrestris/mapfish-print-manager';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nexport interface ScaleSelectProps extends SelectProps<number> {\n  printManager: MapFishPrintV3Manager;\n}\n\nexport const ScaleSelect: React.FC<ScaleSelectProps> = ({\n  printManager,\n  placeholder,\n  value,\n  ...restProps\n}): JSX.Element => {\n\n  const map = useMap();\n\n  const [scale, setScale] = useState<number>(0);\n\n  useEffect(() => {\n    if (printManager && scale) {\n      printManager.setScale(scale);\n    }\n  }, [printManager, scale]);\n\n  useEffect(() => {\n    const updateScale = () => {\n      const pmScale = printManager.getScale();\n      if (pmScale) {\n        setScale(pmScale);\n      }\n    };\n    const transformInteraction = map?.getInteractions().getArray().find(i => {\n      return i.get('name') === MapFishPrintV3Manager.TRANSFORM_INTERACTION_NAME;\n    });\n\n    if (printManager && transformInteraction) {\n      // @ts-ignore\n      transformInteraction.on('scaling', updateScale);\n\n      return () => {\n        // @ts-ignore\n        transformInteraction.un('scaling', updateScale);\n      };\n    }\n  }, [printManager, map]);\n\n  useEffect(() => {\n    if (value) {\n      setScale(value);\n    }\n  }, [value]);\n\n  return (\n    <Select\n      placeholder={placeholder}\n      value={scale}\n      onChange={setScale}\n      {...restProps}\n    >\n      {\n        printManager?.getScales().map((s: number) => (\n          <Select.Option\n            key={s}\n            value={s}\n          >\n            {`1 : ${s.toLocaleString()}`}\n          </Select.Option>\n        ))\n      }\n    </Select>\n  );\n};\n\nexport default ScaleSelect;\n","import OlLayer from 'ol/layer/Layer';\nimport OlRendererLayer from 'ol/renderer/Layer';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSource from 'ol/source/Source';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport Shared from '@terrestris/mapfish-print-manager/dist/util/Shared';\n\nShared.getLegendGraphicUrl = (layer: OlLayer<OlSource, OlRendererLayer<any>>): string => {\n  if (layer.get('legendUrl')) {\n    return layer.get('legendUrl');\n  }\n\n  if (layer.getSource() instanceof OlSourceTileWMS ||\n    layer.getSource() instanceof OlSourceImageWMS) {\n\n    const customParams: any = layer.get('customPrintLegendParams');\n    const source: any = layer.getSource();\n\n    const {\n      LAYERS,\n      VERSION,\n      FORMAT\n    } = source.getParams();\n\n    let url: string = source instanceof OlSourceImageWMS ?\n      source.getUrl() :\n      source.getUrls()[0];\n\n    if (url.startsWith('/geoserver/ows')) {\n      url = `http://shogun-geoserver:8080${url}`;\n    }\n\n    const params: any = {\n      LAYER: LAYERS.split(',')[0],\n      VERSION: VERSION || '1.3.0',\n      SERVICE: 'WMS',\n      REQUEST: 'GetLegendGraphic',\n      FORMAT: FORMAT || 'image/png',\n      ...customParams\n    };\n\n    const queryParams = Object.keys(params).map(key => {\n      return `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`;\n    }).join('&');\n\n    if (url.startsWith('/geoserver/SHOGUN')) {\n      url = `http://shogun-geoserver:8080${url}/service?`;\n      return `${url}${queryParams}`;\n    }\n\n    if (url.endsWith('?')) {\n      return `${url}${queryParams}`;\n    } else {\n      return `${url}?${queryParams}`;\n    }\n  }\n\n  return '';\n};\n","import React, {\n  useCallback, useEffect, useState\n} from 'react';\n\nimport { faDownload } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport {\n  Alert, Button, Form\n} from 'antd';\nimport { FormProps } from 'antd/lib/form/Form';\nimport ClientConfiguration from 'clientConfig';\nimport _isNil from 'lodash/isNil';\n\nimport OlGeometry from 'ol/geom/Geometry';\nimport OlLayerGroup from 'ol/layer/Group';\nimport OlLayer from 'ol/layer/Layer';\n\nimport OlLayerVector from 'ol/layer/Vector';\nimport OlLayerRenderer from 'ol/renderer/Layer';\nimport OlSource from 'ol/source/Source';\nimport OlSourceVector from 'ol/source/Vector';\n\nimport { useTranslation } from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport { MapFishPrintV3Manager } from '@terrestris/mapfish-print-manager';\nimport { MapFishPrintV3ManagerOpts } from '@terrestris/mapfish-print-manager/dist/manager/MapFishPrintV3Manager';\nimport MapFishPrintV3GeoJsonSerializer\n  from '@terrestris/mapfish-print-manager/dist/serializer/MapFishPrintV3GeoJsonSerializer';\nimport MapFishPrintV3OSMSerializer from '@terrestris/mapfish-print-manager/dist/serializer/MapFishPrintV3OSMSerializer';\nimport MapFishPrintV3WMTSSerializer\n  from '@terrestris/mapfish-print-manager/dist/serializer/MapFishPrintV3WMTSSerializer';\n\nimport { LayerUtil } from '@terrestris/ol-util';\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\nimport { useMap } from '@terrestris/react-geo/dist/Hook/useMap';\nimport { getBearerTokenHeader } from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\nimport { addCustomParam } from '../../store/print';\nimport SHOGunMapFishPrintV3TiledWMSSerializer from '../PrintForm/Serializer/SHOGunMapFishPrintV3TiledWMSSerializer';\nimport SHOGunMapFishPrintV3WMSSerializer from '../PrintForm/Serializer/SHOGunMapFishPrintV3WMSSerializer';\n\nimport CustomFieldInput from './CustomFieldInput';\nimport LayoutSelect from './LayoutSelect';\nimport OutputFormatSelect from './OutputFormatSelect';\nimport ResolutionSelect from './ResolutionSelect';\nimport ScaleSelect from './ScaleSelect';\n\nimport '../PrintForm/Shared/Shared';\n\nexport interface Layout {\n  name: string;\n  attributes: any[];\n}\n\nexport interface PrintFormProps extends Omit<FormProps, 'form'> {\n  active: boolean;\n  customPrintScales?: number[];\n  layerBlackList?: string[];\n  layouts?: Layout[];\n  outputFormats?: string[];\n}\n\nexport type LayerType = OlLayer<OlSource, OlLayerRenderer<OlLayerVector<OlSourceVector<OlGeometry>>>>;\n\nexport const PrintForm: React.FC<PrintFormProps> = ({\n  active,\n  customPrintScales = [],\n\n  layerBlackList = [],\n  outputFormats = ['pdf', 'png'],\n  ...restProps\n}): JSX.Element => {\n\n  const [form] = Form.useForm();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n\n  const map = useMap();\n\n  const dispatch = useAppDispatch();\n\n  const currentLanguageCode = i18n.language;\n\n  const client = useSHOGunAPIClient();\n\n  const customMapParams = useAppSelector(state => state.print.customMapParams);\n  const customParams = useAppSelector(state => state.print.customParams);\n  const printApp = useAppSelector(state => state.print.printApp);\n\n  const [printManager, setPrintManager] = useState<MapFishPrintV3Manager | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n\n  const layerFilter = useCallback((l: OlLayer<OlSource>) => {\n    if (!map) {\n      return;\n    }\n\n    const layerName = l.get('name');\n\n    return layerName && !layerBlackList.includes(layerName) &&\n      l.getVisible() && !(l instanceof OlLayerGroup) &&\n      MapUtil.layerInResolutionRange(l, map);\n  }, [map, layerBlackList]);\n\n  const legendFilter = useCallback((l: OlLayer<OlSource>) => {\n    if (_isNil(map)) {\n      return false;\n    }\n    const layerName = l.get('name');\n    const notBlacklisted = !layerBlackList.includes(layerName);\n    const notHidden = !l.get('hideLegendInPrint');\n    const visible = l.getVisible() && MapUtil.layerInResolutionRange(l, map);\n    const printableLayer = !(l instanceof OlLayerGroup);\n\n    if (notBlacklisted && notHidden && visible && printableLayer) {\n      const res = map?.getView().getResolution();\n      if (res) {\n        l.set('customPrintLegendParams', {\n          SCALE: MapUtil.getScaleForResolution(res, 'm')\n        });\n      }\n      return true;\n    }\n    return false;\n  }, [map, layerBlackList]);\n\n  const getPrintableLayers = useCallback((printLayer: LayerType) => {\n    if (!map) {\n      return [];\n    }\n\n    return MapUtil.getAllLayers(map).filter((layer) => {\n      const layerName = layer.get('name');\n      return layerName &&\n        !(layerName.includes('react-geo')) &&\n        layer.getVisible() &&\n        !(layer instanceof OlLayerGroup) &&\n        layer !== printLayer;\n    }) as LayerType[];\n  }, [map]);\n\n  const getAttributions = useCallback((manager: MapFishPrintV3Manager) => {\n    const extentLayer = manager.getExtentLayer();\n    if (!extentLayer) {\n      return '';\n    }\n\n    const layers = getPrintableLayers(extentLayer);\n    let allAttributions: string[] = [];\n\n    layers.filter((layer: LayerType) => {\n      return layer.getSource && layer.getSource()?.getAttributions && layer.getSource()?.getAttributions();\n    }).forEach((layer: LayerType) => {\n      const currentLayerAttribution = LayerUtil.getLayerAttributionsText(layer, ',', true);\n\n      if (!allAttributions.includes(currentLayerAttribution)) {\n        allAttributions.push(currentLayerAttribution);\n      }\n    });\n    return allAttributions.join(', ').trim();\n  }, [getPrintableLayers]);\n\n  const initializeMapProvider = useCallback(async () => {\n    if (_isNil(map)) {\n      return;\n    }\n    let pManagerOpts: MapFishPrintV3ManagerOpts = {\n      url: ClientConfiguration.print?.url || '/print',\n      map,\n      customPrintScales: map\n        ?.getView()\n        ?.getResolutions()\n        ?.map((d: number | undefined) => {\n          const units = map?.getView()?.getProjection()?.getUnits();\n          if (typeof d !== 'undefined') {\n            const scale = MapUtil.getScaleForResolution(d, units);\n            if (typeof scale !== 'undefined') {\n              return MapUtil.roundScale(scale);\n            }\n          }\n          return undefined;\n        })\n        .filter((scale: number | undefined) => typeof scale !== 'undefined')\n        ?.reverse() as number[] | undefined,\n      timeout: 60000,\n      layerFilter,\n      headers: {\n        ...getBearerTokenHeader(client?.getKeycloak())\n      },\n      transformOpts: {\n        rotate: false\n      },\n      serializers: [\n        new MapFishPrintV3GeoJsonSerializer(),\n        new MapFishPrintV3OSMSerializer(),\n        new MapFishPrintV3WMTSSerializer(),\n        new SHOGunMapFishPrintV3WMSSerializer(),\n        new SHOGunMapFishPrintV3TiledWMSSerializer()\n      ],\n      legendFilter\n    };\n\n    if (customPrintScales.length > 0) {\n      pManagerOpts = {\n        ...pManagerOpts,\n        ...{\n          customPrintScales: customPrintScales.toReversed()\n        }\n      };\n    }\n\n    const pManager: MapFishPrintV3Manager = new MapFishPrintV3Manager(pManagerOpts);\n\n    try {\n      await pManager.init();\n\n      // Use locale print app if available.\n      // Implies that a print app with the language code exists.\n      const apps = pManager.getPrintApps();\n      if (!printApp) {\n        if (apps && currentLanguageCode && apps.includes(currentLanguageCode)) {\n          await pManager.setPrintApp(currentLanguageCode);\n        }\n      } else {\n        await pManager.setPrintApp(printApp);\n      }\n\n      pManager.setOutputFormat(pManager.getOutputFormats()[0]);\n      pManager.setDpi(pManager.getDpis()[0]);\n      pManager.setLayout(pManager.getLayouts()[0]?.name);\n      setPrintManager(pManager);\n    } catch (error) {\n      setErrorMsg(() => t('PrintForm.managerErrorMessage'));\n      Logger.error('Could not initialize print manager: ', error);\n    }\n  }, [map, layerFilter, client, legendFilter, customPrintScales, printApp, currentLanguageCode, t]);\n\n  useEffect(() => {\n    if (printManager) {\n      dispatch(addCustomParam({\n        attributions: getAttributions(printManager)\n      }));\n    }\n  }, [dispatch, getAttributions, printManager]);\n\n  useEffect(() => {\n    if (active) {\n      if (!printManager) {\n        form.resetFields();\n        initializeMapProvider();\n      }\n    } else {\n      printManager?.shutdownManager();\n      setPrintManager(null);\n    }\n  }, [printManager, active, initializeMapProvider, form]);\n\n  useEffect(() => {\n    if (printManager) {\n      if (customParams) {\n        printManager.setCustomParams(customParams);\n      }\n      if (customMapParams) {\n        printManager.setCustomMapParams(customMapParams);\n      }\n    }\n  }, [printManager, customParams, customMapParams]);\n\n  const onDownloadClick = async () => {\n    try {\n      setErrorMsg(null);\n      setLoading(true);\n\n      if (!printManager) {\n        return;\n      }\n\n      const downloadUrl = await printManager.print(false);\n\n      if (!downloadUrl) {\n        throw new Error('No download URL available, the job has failed.');\n      }\n\n      window.open(downloadUrl);\n    } catch (error: any) {\n      setErrorMsg(t('PrintForm.printJobErrorMsg') || null);\n      Logger.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onAlertClose = () => {\n    setErrorMsg(null);\n  };\n\n  const handleLayoutChange = () => {\n    form.setFieldValue('dpi', printManager?.getDpis()[0]);\n  };\n\n  return (\n    <div\n      className=\"print\"\n      aria-label='print-form'\n    >\n      {\n        errorMsg && (\n          <Alert\n            className=\"print-alert\"\n            message={errorMsg}\n            type=\"error\"\n            closable\n            showIcon\n            onClose={onAlertClose}\n          />\n        )\n      }\n      {\n        printManager?.isInitiated() && (\n          <>\n            <Form\n              form={form}\n              className=\"print-form\"\n              labelAlign=\"left\"\n              labelCol={{\n                flex: '90px'\n              }}\n              {...restProps}\n            >\n              <Form.Item\n                aria-label='print-title'\n                name=\"title\"\n                label={t('PrintForm.title')}\n                initialValue={t('PrintForm.initialTitle')}\n              >\n                <CustomFieldInput\n                  aria-label='print-title-input'\n                  maxLength={50}\n                  placeholder={t('PrintForm.titlePlaceholder')}\n                />\n              </Form.Item>\n              <Form.Item\n                aria-label='print-comment'\n                name=\"comment\"\n                label={t('PrintForm.comment')}\n              >\n                <CustomFieldInput\n                  aria-label='print-comment-input'\n                  maxLength={200}\n                  placeholder={t('PrintForm.commentPlaceholder')}\n                />\n              </Form.Item>\n              <Form.Item\n                aria-label='print-layout'\n                name=\"layout\"\n                label={t('PrintForm.layout')}\n                initialValue={printManager?.getLayouts()[0]?.name}\n              >\n                <LayoutSelect\n                  aria-label='print-layout-input'\n                  printManager={printManager}\n                  onValueChange={handleLayoutChange}\n                />\n              </Form.Item>\n              <Form.Item\n                aria-label='print-scale'\n                name='scale'\n                label={t('PrintForm.scale')}\n                initialValue={printManager?.getClosestScaleToFitMap()}\n              >\n                <ScaleSelect\n                  aria-label='print-scale-input'\n                  printManager={printManager}\n                />\n              </Form.Item>\n              <Form.Item\n                aria-label='print-dpi'\n                name=\"dpi\"\n                label={t('PrintForm.dpi')}\n                initialValue={printManager.getDpis()[0]}\n              >\n                <ResolutionSelect\n                  aria-label='print-dpi-input'\n                  printManager={printManager}\n                  placeholder={t('PrintForm.resolutionPlaceholder')}\n                />\n              </Form.Item>\n              <Form.Item\n                aria-label='print-format'\n                name=\"format\"\n                label={t('PrintForm.format')}\n                initialValue=\"pdf\"\n              >\n                <OutputFormatSelect\n                  aria-label='print-format-input'\n                  printManager={printManager}\n                  outputFormats={outputFormats}\n                  placeholder={t('PrintForm.outputFormatPlaceholder')}\n                />\n              </Form.Item>\n            </Form>\n            <Button\n              aria-label='create-print'\n              className='print-button tool-menu-button'\n              disabled={!printManager?.isInitiated()}\n              icon={<FontAwesomeIcon icon={faDownload} />}\n              loading={loading}\n              onClick={onDownloadClick}\n            >\n              {t('PrintForm.downloadBtnText')}\n            </Button>\n          </>\n        )\n      }\n    </div>\n  );\n};\n\nexport default PrintForm;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  AutoComplete,\n  Form,\n  Input\n} from 'antd';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport type {\n  FormData\n} from '..';\n\nexport type AttributionRowProps = {\n  keyName: string | number;\n  onChange?: (value: string) => void;\n  options?: string[];\n};\n\nconst AttributionRow: React.FC<AttributionRowProps> = ({\n  keyName,\n  onChange = () => {},\n  options\n}) => {\n\n  const {\n    t\n  } = useTranslation();\n\n  return (\n    <>\n      <Form.Item\n        name={[keyName, 'name']}\n        rules={[{\n          required: true,\n          message: t('AttributionRow.missingKey')\n        }, ({ getFieldsValue }) => ({\n          validator(_, value: string) {\n            const fields: FormData = getFieldsValue(true);\n\n            if (fields.fields) {\n              const filtered = Object.entries(fields.fields).filter(([, val]) => val?.name === value);\n\n              if (filtered.length > 1) {\n                return Promise.reject(new Error(t('AttributionRow.keyInUse')));\n              }\n            }\n\n            return Promise.resolve();\n          }\n        })]}\n      >\n        <AutoComplete\n          placeholder={t('AttributionRow.keyPlaceholder')}\n          onChange={(value) => {\n            onChange(value);\n          }}\n          options={options?.map(o => ({ value: o }))}\n        />\n      </Form.Item>\n      <Form.Item\n        name={[keyName, 'value']}\n        rules={[{\n          required: true,\n          message: t('AttributionRow.missingValue')\n        }]}\n      >\n        <Input\n          placeholder={t('AttributionRow.valuePlaceholder')}\n          onChange={evt => {\n            onChange(evt.target.value);\n          }}\n        />\n      </Form.Item>\n    </>\n  );\n};\n\nexport default AttributionRow;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useCallback,\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  faMinusSquare\n} from '@fortawesome/free-regular-svg-icons';\nimport {\n  faPlus\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  Drawer,\n  DrawerProps,\n  Form,\n  FormListFieldData,\n  Popconfirm,\n  notification,\n  Row\n} from 'antd';\n\nimport OlFeature from 'ol/Feature';\nimport OlGeometry from 'ol/geom/Geometry';\nimport Select from 'ol/interaction/Select';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport {\n  DigitizeUtil\n} from '@terrestris/react-geo/dist/Util/DigitizeUtil';\n\nimport AttributionRow from './AttributionRow';\n\nimport './index.less';\n\nexport type FormData = {\n  fields?: [{\n    name?: string;\n    value?: string;\n  }];\n};\n\nexport interface AttributionDrawerProps extends DrawerProps {\n  onCustomClose?: (open: boolean) => void;\n}\n\nconst AttributionDrawer: React.FC<AttributionDrawerProps> = ({\n  onCustomClose,\n  open,\n  onClose,\n  ...passThroughProps\n}) => {\n  const [selectedFeature, setSelectedFeature] = useState<OlFeature>();\n  const [isFormValid, setIsFormIsValid] = useState(true);\n  const [availableFeatureCollectionAttributes, setAvailableFeatureCollectionAttributes] = useState<string[]>([]);\n  const [availableFeatureAttributes, setAvailableFeatureAttributes] = useState<string[]>([]);\n  const [, contextHolder] = notification.useNotification();\n  const [form] = Form.useForm<FormData>();\n\n  const map = useMap();\n\n  const {\n    t\n  } = useTranslation();\n\n  const updateAvailableFeatureAttributes = useCallback((fields: FormData) => {\n    const currentKeys = fields.fields\n      ?.map(field => field?.name?.toLowerCase())\n      .filter(key => key !== undefined);\n\n    setAvailableFeatureAttributes(availableFeatureCollectionAttributes.filter(o => !(currentKeys?.includes(o.toLowerCase()))));\n  }, [availableFeatureCollectionAttributes]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const properties = selectedFeature?.getProperties();\n\n    form.setFieldValue('fields', []);\n\n    if (properties) {\n      const filteredPropertyEntries = Object.entries(properties)\n        .filter(([, value]) => !(value instanceof OlGeometry))\n        .map(([key, value]) => [key, value]);\n      const filteredProperties = Object.fromEntries(filteredPropertyEntries);\n\n      const formProperties = Object.entries(filteredProperties)\n        .map(([key, value]) => {\n          return {\n            name: key,\n            value: value\n          };\n        });\n\n      form.setFieldValue('fields', formProperties);\n    }\n\n    const digitizeLayer = DigitizeUtil.getDigitizeLayer(map);\n    const digitizedFeatures = digitizeLayer.getSource()?.getFeatures();\n\n    const featureCollectionAttributes: Set<string> = new Set();\n    digitizedFeatures?.forEach(feat => {\n      Object.keys(feat.getProperties()).forEach(prop => {\n        if (!(feat.get(prop) instanceof OlGeometry)) {\n          featureCollectionAttributes.add(prop);\n        }\n      });\n    });\n    setAvailableFeatureCollectionAttributes(Array.from(featureCollectionAttributes));\n  }, [selectedFeature, form, map]);\n\n  useEffect(() => {\n    setSelectedFeature(undefined);\n  }, [open]);\n\n  // todo revisit react-geo to make name of the slect-interaction configurable\n  const selectInteraction = map?.getInteractions().getArray().filter(interaction => {\n    if (interaction.get('active') === true && interaction.get('name') === 'react-geo-select-interaction') {\n      return true;\n    } else {\n      return false;\n    }\n  })[0] as Select;\n\n  if (selectInteraction) {\n    selectInteraction.on('select', () => {\n      setSelectedFeature(selectInteraction.getFeatures().getArray()[0]);\n    });\n  }\n\n  const onFinish = (input: FormData) => {\n    if (!selectedFeature) {\n      return;\n    }\n    notification.destroy();\n    notification.success({\n      message: (t('notificationApplyText.title')),\n      placement: 'top',\n      duration: 3.5\n    });\n\n    for (const property in selectedFeature.getProperties()) {\n      if (!(selectedFeature.get(property) instanceof OlGeometry)) {\n        selectedFeature.unset(property);\n      }\n    }\n\n    if (input.fields) {\n      Object.values(input.fields).forEach(field => {\n        if (!field?.name) {\n          return;\n        }\n        selectedFeature.set(field.name, field.value);\n      });\n    }\n  };\n\n  const remove = (rmFn: any, name: number) => {\n    rmFn(name);\n  };\n\n  const onChange = async () => {\n    try {\n      await form.validateFields();\n      setIsFormIsValid(true);\n    } catch (error) {\n      setIsFormIsValid(false);\n    }\n  };\n\n  const onValuesChange = (changedFields: FormData, fields: FormData) => {\n    updateAvailableFeatureAttributes(fields);\n  };\n\n  const getFormItems = (fields: FormListFieldData[], rmFn: any) => {\n    return fields.map((field) => {\n      const removeAndMessage = () => {\n        notification.destroy();\n        notification.info({\n          message: (t('notificationDeleteText.title')),\n          description: (t('notificationDeleteText.info')),\n          placement: 'top',\n          duration: 6\n        });\n        remove(rmFn, field.name);\n      };\n      return (\n        <div\n          key={field.key}\n          className='attribute-row'\n        >\n          <AttributionRow\n            keyName={field.name}\n            key={field.key}\n            onChange={onChange}\n            options={availableFeatureAttributes}\n          />\n          <Popconfirm\n            title={t('AttributionPopConfirm.title')}\n            okText={t('AttributionPopConfirm.okText')}\n            cancelText={t('AttributionPopConfirm.cancelText')}\n            placement='topRight'\n            onConfirm={removeAndMessage}\n          >\n            {contextHolder}\n            <Button\n              className=\"remove-attribute-button\"\n              type='primary'\n              danger={true}\n              icon={\n                <FontAwesomeIcon\n                  icon={faMinusSquare}\n                />\n              }\n            />\n          </Popconfirm>\n        </div>\n      );\n    });\n  };\n\n  return (\n    <Drawer\n      title={t('Attribution.title')}\n      className=\"attribution-drawer\"\n      placement=\"right\"\n      mask={false}\n      maskClosable={false}\n      closable={false}\n      open={open}\n      {...passThroughProps}\n    >\n      {!selectedFeature &&\n        <>\n          {t('Attribution.select')}\n        </>\n      }\n      <Row>\n        <Form\n          onFinish={onFinish}\n          autoComplete=\"off\"\n          form={form}\n          onValuesChange={onValuesChange}\n        >\n          <Form.List\n            name=\"fields\"\n          >\n            {(fields, {\n              add,\n              remove: rmFn\n            }) => (\n              <>\n                {\n                  getFormItems(fields, rmFn)\n                }\n                <Form.Item>\n                  {\n                    selectedFeature ?\n                      <Button\n                        type=\"dashed\"\n                        onClick={() => {\n                          add();\n                        }}\n                        className=\"add-attribute-button\"\n                        icon={\n                          <FontAwesomeIcon\n                            icon={faPlus}\n                          />\n                        }\n                      >\n                        {t('Attribution.add')}\n                      </Button> :\n                      <></>\n                  }\n                </Form.Item>\n              </>\n            )}\n          </Form.List>\n          <Form.Item>\n            <Button\n              className=\"submit-attributes-button\"\n              type=\"primary\"\n              htmlType=\"submit\"\n              disabled={!isFormValid}\n              hidden={selectedFeature ? false: true}\n            >\n              {t('Attribution.submit')}\n            </Button>\n          </Form.Item>\n        </Form>\n      </Row>\n    </Drawer>\n  );\n};\n\nexport default AttributionDrawer;\n","import * as React from 'react';\nimport {\n  useEffect, useState\n} from 'react';\n\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport { Modal } from 'antd';\nimport OlGeometry from 'ol/geom/Geometry';\nimport OlVectorLayer from 'ol/layer/Vector';\nimport OlVectorSource from 'ol/source/Vector';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  SimpleButton, useMap\n} from '@terrestris/react-geo';\nimport { SimpleButtonProps } from '@terrestris/react-geo/dist/Button/SimpleButton/SimpleButton';\nimport { DigitizeUtil } from '@terrestris/react-util/dist/Util/DigitizeUtil';\n\nconst { confirm } = Modal;\n\ninterface OwnProps {\n  /**\n   * The vector layer which will be used for digitize features.\n   * The standard digitizeLayer can be retrieved via `DigitizeUtil.getDigitizeLayer(map)`.\n   */\n  digitizeLayer?: OlVectorLayer<OlVectorSource<OlGeometry>>;\n}\n\nexport type DeleteAllButtonProps = OwnProps & SimpleButtonProps;\n\n/**\n * The className added to this component.\n */\nconst defaultClassName = 'deleteallbutton';\n\nexport const DeleteAllButton: React.FC<DeleteAllButtonProps> = ({\n  className,\n  digitizeLayer,\n  ...passThroughProps\n}) => {\n  const [layers, setLayers] = useState<[OlVectorLayer<OlVectorSource<OlGeometry>>]|null>(null);\n\n  const map = useMap();\n\n  const {\n    t\n  } = useTranslation();\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    if (digitizeLayer) {\n      setLayers([digitizeLayer]);\n    } else {\n      setLayers([DigitizeUtil.getDigitizeLayer(map)]);\n    }\n  }, [map, digitizeLayer]);\n\n  if (!layers) {\n    return null;\n  }\n\n  const onClick = () => {\n\n    confirm({\n      title: (t('DeleteAllButton.deleteAll')),\n      content: (t('DeleteAllButton.confirmMessage')),\n      icon: <ExclamationCircleOutlined />,\n      onOk(){\n        layers[0].getSource()?.clear();\n      }\n    });\n  };\n\n  const finalClassName = className\n    ? `${defaultClassName} ${className}`\n    : defaultClassName;\n\n  return (\n    <SimpleButton\n      onClick={onClick}\n      className={finalClassName}\n      {...passThroughProps}\n    />\n  );\n};\n\nexport default DeleteAllButton;\n","import React from 'react';\n\nimport {\n  faPaintBrush\n} from '@fortawesome/free-solid-svg-icons';\n\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport { Button } from 'antd';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport useAppDispatch from '../../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../../hooks/useAppSelector';\nimport { setStylingDrawerVisibility } from '../../../../store/stylingDrawerVisibility';\n\nexport const StylingButton: React.FC = (): JSX.Element => {\n\n  const dispatch = useAppDispatch();\n\n  const {\n    t\n  } = useTranslation();\n\n  const drawerVisibilty = useAppSelector(state => state.stylingDrawerVisibility);\n\n  const toggleDrawer = () => {\n    dispatch(setStylingDrawerVisibility(!drawerVisibilty));\n  };\n\n  return (\n    <Button\n      type=\"link\"\n      onClick={toggleDrawer}\n      icon={<FontAwesomeIcon icon={faPaintBrush} />}\n    >\n      {drawerVisibilty ? t('StylingDrawer.closeColorPalette') : t('StylingDrawer.openColorPalette')}\n    </Button>\n  );\n};\n\nexport default StylingButton;\n","import React, {\n  ChangeEvent,\n  useState\n} from 'react';\n\nimport {\n  faGripLines,\n  faCircle,\n  faSquare,\n  faFont,\n  faCircleNotch,\n  faShapes,\n  faPenToSquare,\n  faUpload,\n  faTrash,\n  faEraser,\n  faDownload\n} from '@fortawesome/free-solid-svg-icons';\n\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport { message } from 'antd';\nimport {\n  Feature\n} from 'ol';\nimport GeoJSON from 'ol/format/GeoJSON';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport DeleteButton from '@terrestris/react-geo/dist/Button/DeleteButton/DeleteButton';\nimport DrawButton from '@terrestris/react-geo/dist/Button/DrawButton/DrawButton';\nimport ModifyButton from '@terrestris/react-geo/dist/Button/ModifyButton/ModifyButton';\nimport SimpleButton from '@terrestris/react-geo/dist/Button/SimpleButton/SimpleButton';\nimport ToggleGroup from '@terrestris/react-geo/dist/Button/ToggleGroup/ToggleGroup';\nimport UploadButton from '@terrestris/react-geo/dist/Button/UploadButton/UploadButton';\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  DigitizeUtil\n} from '@terrestris/react-geo/dist/Util/DigitizeUtil';\n\nimport './index.less';\n\nimport AttributionDrawer from './Attributions';\nimport DeleteAllButton from './DeleteAllButton';\nimport StylingButton from './StylingDrawerButton';\n\ninterface DefaultDrawProps {\n  showDrawPoint?: boolean;\n  showDrawLine?: boolean;\n  showDrawPolygon?: boolean;\n  showDrawCircle?: boolean;\n  showDrawRectangle?: boolean;\n  showDrawAnnotation?: boolean;\n  showModifyFeatures?: boolean;\n  showUploadFeatures?: boolean;\n  showDownloadFeatures?: boolean;\n  showDeleteFeatures?: boolean;\n  showStyleFeatures?: boolean;\n}\n\nexport interface DrawProps extends Partial<DefaultDrawProps> { }\n\nexport const Draw: React.FC<DrawProps> = ({\n  showDrawPoint,\n  showDrawLine,\n  showDrawPolygon,\n  showDrawCircle,\n  showDrawRectangle,\n  showDrawAnnotation,\n  showModifyFeatures,\n  showUploadFeatures,\n  showDeleteFeatures\n}): JSX.Element => {\n  const [isAttributeDrawerOpen, setIsAttributeDrawerOpen] = useState(false);\n  const [selectedButton, setSelectedButton] = useState<string>();\n\n  const {\n    t\n  } = useTranslation();\n\n  const map = useMap();\n\n  const onGeoJSONDownload = () => {\n    const clonedFeatures: Feature[] = [];\n    if (map) {\n      const mapProjection = map.getView().getProjection().getCode();\n      const digitizeLayer = DigitizeUtil.getDigitizeLayer(map);\n      const digitizedFeatures = digitizeLayer.getSource()?.getFeatures();\n      if (digitizedFeatures && digitizedFeatures.length > 0) {\n        digitizedFeatures.forEach(feat => {\n          const clonedFeature = feat.clone();\n          clonedFeature.getGeometry()?.transform(mapProjection, 'EPSG:4326');\n          clonedFeatures.push(clonedFeature);\n        });\n        const geoJSON = new GeoJSON().writeFeatures(clonedFeatures);\n\n        const fileToDownload = new Blob([geoJSON], {\n          type: 'application/geo+json'\n        });\n\n        // download the file\n        const url = window.URL.createObjectURL(fileToDownload);\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', 'exportedFeatures.geojson');\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      }\n    }\n  };\n\n  const checkValidityOfUploadFile = (e: ChangeEvent<HTMLInputElement>) => {\n    const uploadedFiles = e.target.files;\n    let validity = false;\n    if (\n      (uploadedFiles && uploadedFiles.length === 1) &&\n      (\n        uploadedFiles[0].type === 'application/geo+json' ||\n        uploadedFiles[0].type === 'application/geojson' ||\n        uploadedFiles[0].name.includes('.geojson') ||\n        uploadedFiles[0].name.includes('.json')\n      )\n    ){\n      validity = true;\n    }\n    return validity;\n  };\n\n  const onUploadChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const uploadedFiles = e.target.files;\n    if (checkValidityOfUploadFile(e)){\n      onGeoJSONUpload(uploadedFiles![0]);\n    } else {\n\n      message.error(t('Draw.uploadError'));\n\n    }\n  };\n\n  const onGeoJSONUpload = (geoJSONFile: File) => {\n    const fileReader = new FileReader();\n\n    fileReader.onload = () => {\n      try {\n\n        const geoJSONFeatures = new GeoJSON().readFeatures(fileReader.result);\n\n        if (map) {\n          const mapProjection = map.getView().getProjection().getCode();\n          geoJSONFeatures.forEach(feat => {\n            feat.getGeometry()?.transform('EPSG:4326', mapProjection);\n          });\n          const digitizeLayer = DigitizeUtil.getDigitizeLayer(map);\n          const digitizeLayerSource = digitizeLayer.getSource();\n          digitizeLayerSource?.addFeatures(geoJSONFeatures);\n        }\n        message.success(t('Draw.uploadSuccess'));\n      } catch (err) {\n\n        message.error(t('Draw.uploadError'));\n\n      }\n    };\n\n    fileReader.readAsText(geoJSONFile);\n  };\n\n  if (!map) {\n    return <></>;\n  }\n\n  const onToggleChange = (childProps: any) => {\n\n    if (childProps) {\n      setSelectedButton(childProps.name);\n    }\n  };\n\n  const onModifyButtonToggle = (active: boolean) => {\n    setIsAttributeDrawerOpen(active);\n  };\n\n  return (\n    <>\n      <ToggleGroup\n        selectedName={selectedButton}\n        onChange={onToggleChange}\n      >\n        {showDrawPoint ? (\n          <DrawButton\n            name=\"draw-point\"\n            drawType=\"Point\"\n            type=\"link\"\n            pressed={false}\n          >\n            <FontAwesomeIcon\n              icon={faCircle}\n            />\n            <span\n              className=\"draw-point\"\n            >\n              {t('Draw.point')}\n            </span>\n          </DrawButton>\n        ) : <></>}\n\n        {showDrawLine ? (\n          <DrawButton\n            name=\"draw-line\"\n            drawType=\"LineString\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faGripLines}\n            />\n            <span\n              className=\"draw-line\"\n            >\n              {t('Draw.line')}\n            </span>\n          </DrawButton>\n        ) : <></>}\n\n        {showDrawPolygon ? (\n          <DrawButton\n            name=\"draw-polygon\"\n            drawType=\"Polygon\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faShapes}\n            />\n            <span\n              className=\"draw-polygon\"\n            >\n              {t('Draw.polygon')}\n            </span>\n          </DrawButton>\n        ) : <></>}\n\n        {showDrawCircle ? (\n          <DrawButton\n            name=\"draw-circle\"\n            drawType=\"Circle\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faCircleNotch}\n            />\n            <span\n              className=\"draw-circle\"\n            >\n              {t('Draw.circle')}\n            </span>\n          </DrawButton>\n        ) : <></>}\n\n        {showDrawRectangle ? (\n          <DrawButton\n            name=\"draw-rectangle\"\n            drawType=\"Rectangle\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faSquare}\n            />\n            <span\n              className=\"draw-rectangle\"\n            >\n              {t('Draw.rectangle')}\n            </span>\n          </DrawButton>\n        ) : <></>}\n        {showDrawAnnotation ? (\n          <DrawButton\n            name=\"draw-text\"\n            drawType=\"Text\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faFont}\n            />\n            <span\n              className=\"draw-text\"\n            >\n              {t('Draw.text')}\n            </span>\n          </DrawButton>\n        ) : <></>}\n        <StylingButton />\n        {showModifyFeatures ? (\n          <ModifyButton\n            name=\"draw-modify\"\n            type=\"link\"\n            onToggle={onModifyButtonToggle}\n          >\n            <FontAwesomeIcon\n              icon={faPenToSquare}\n            />\n            <span\n              className=\"draw-modify\"\n            >\n              {t('Draw.modify')}\n            </span>\n          </ModifyButton>\n        ) : <></>}\n        {showDeleteFeatures ? (\n          <DeleteButton\n            name=\"draw-delete\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faEraser}\n            />\n            <span\n              className=\"draw-delete\"\n            >\n              {t('Draw.delete')}\n            </span>\n          </DeleteButton>\n        ) : <></>}\n        {showDeleteFeatures ? (\n          <DeleteAllButton\n            name=\"draw-delete-all\"\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faTrash}\n            />\n            <span\n              className=\"draw-delete-all\"\n            >\n              {t('DeleteAllButton.deleteAll')}\n            </span>\n          </DeleteAllButton>\n        ):<></>}\n\n        {showUploadFeatures ? (\n          <UploadButton\n            name=\"draw-upload\"\n            onChange={onUploadChange}\n            type=\"link\"\n            aria-label='draw-upload'\n          >\n            <SimpleButton\n              type=\"link\"\n            >\n              <FontAwesomeIcon\n                icon={faUpload}\n              />\n              <span\n                className=\"draw-upload\"\n              >\n                {t('Draw.upload')}\n              </span>\n            </SimpleButton>\n          </UploadButton>\n        ) : <></>}\n\n        {showUploadFeatures ? (\n          <SimpleButton\n            name=\"draw-export\"\n            onClick={onGeoJSONDownload}\n            type=\"link\"\n          >\n            <FontAwesomeIcon\n              icon={faDownload}\n            />\n            <span\n              className=\"draw-export\"\n            >\n              {t('Draw.export')}\n            </span>\n          </SimpleButton>\n        ) : <></>}\n      </ToggleGroup>\n      <AttributionDrawer\n        open={isAttributeDrawerOpen}\n        onCustomClose={() => setIsAttributeDrawerOpen(false)}\n      />\n    </>\n  );\n};\n\nexport default Draw;\n","import {\n  useCallback,\n  useEffect\n} from 'react';\n\nimport OlLayerVector from 'ol/layer/Vector';\nimport OlSourceVector from 'ol/source/Vector';\nimport OlStyleCircle from 'ol/style/Circle';\nimport OlStyleFill from 'ol/style/Fill';\nimport OlStyleStroke from 'ol/style/Stroke';\nimport OlStyle from 'ol/style/Style';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nexport type HighlightVectorLayerOpts = {\n  layerName: string;\n};\n\nexport const useHighlightVectorLayer = (opts: HighlightVectorLayerOpts) => {\n  const map = useMap();\n\n  const initVectorLayer = useCallback(async () => {\n    if (!map) {\n      return;\n    }\n\n    if (MapUtil.getLayerByName(map, opts.layerName)) {\n      return;\n    }\n\n    const source = new OlSourceVector();\n\n    const fill = new OlStyleFill({\n      color: 'rgba(255, 255, 255, 0.15)'\n    });\n    const stroke = new OlStyleStroke({\n      color: 'rgba(209, 70, 47, 1)',\n      width: 2\n    });\n    const featureStyle = new OlStyle({\n      fill,\n      stroke,\n      image: new OlStyleCircle({\n        radius: 5,\n        fill,\n        stroke\n      })\n    });\n\n    const layer = new OlLayerVector({\n      source: source,\n      style: featureStyle\n    });\n\n    layer.set('name', opts.layerName);\n\n    map.addLayer(layer);\n  }, [map, opts.layerName]);\n\n  const deinitVectorLayer = useCallback(() => {\n    if (!map) {\n      return;\n    }\n\n    const vectorLayer = MapUtil.getLayerByName(map, opts.layerName) as OlLayerVector<OlSourceVector>;\n\n    if (!vectorLayer) {\n      return;\n    }\n\n    map.removeLayer(vectorLayer);\n  }, [map, opts.layerName]);\n\n  useEffect(() => {\n    initVectorLayer();\n\n    return () => deinitVectorLayer();\n  }, [deinitVectorLayer, initVectorLayer]);\n};\n\nexport default useHighlightVectorLayer;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  faClipboardCheck,\n  faClipboardList,\n  faEdit\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  Pagination,\n  PaginationProps,\n  Tooltip\n} from 'antd';\n\nimport copy from 'copy-to-clipboard';\n\nimport {\n  Feature\n} from 'geojson';\nimport _clone from 'lodash/clone';\n\nimport {\n  getUid\n} from 'ol';\nimport { isEmpty as isEmptyOlExtent } from 'ol/extent';\nimport OlFeature from 'ol/Feature';\nimport OlFormatGeoJSON from 'ol/format/GeoJSON';\nimport OlGeometry from 'ol/geom/Geometry';\nimport OlLayer from 'ol/layer/Layer';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport { DigitizeUtil } from '@terrestris/react-geo/dist/Util/DigitizeUtil';\n\nimport useAppDispatch from '../../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../../hooks/useAppSelector';\nimport {\n  setLayerId,\n  setFeature\n} from '../../../../store/editFeature';\nimport {\n  show as showEditFeatureDrawer\n} from '../../../../store/editFeatureDrawerOpen';\nimport { CopyTools } from '../../../../store/featureInfo';\n\nimport './index.less';\n\nexport type PaginationToolbarProps = {\n  exportFilter?: (propertyName: string, propertyValue: string) => boolean;\n  features: OlFeature[];\n  layer?: OlLayer;\n  selectedFeature: OlFeature;\n} & PaginationProps;\n\nexport const PaginationToolbar: React.FC<PaginationToolbarProps> = ({\n  exportFilter,\n  features,\n  layer,\n  selectedFeature,\n  ...passThroughProps\n}): JSX.Element => {\n\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useAppDispatch();\n  const map = useMap();\n\n  const activeCopyTools = useAppSelector(state => state.featureInfo.activeCopyTools);\n\n  const allowedEditMode = useAppSelector(\n    state => state.editFeature.userEditMode\n  );\n\n  const onCopyAsGeoJSONClick = () => {\n    if (!selectedFeature) {\n      return;\n    }\n\n    const selectedFeatureClone = selectedFeature.clone();\n\n    if (exportFilter) {\n      const propertyEntries = Object.entries(selectedFeatureClone.getProperties());\n      const filteredPropertyEntries = propertyEntries.filter(([key, value]) => exportFilter(key, value));\n\n      for (const [key, value] of propertyEntries) {\n        if (value instanceof OlGeometry) {\n          continue;\n        }\n\n        selectedFeatureClone.unset(key);\n      }\n\n      selectedFeatureClone.setProperties(Object.fromEntries(filteredPropertyEntries));\n    }\n\n    copy(new OlFormatGeoJSON().writeFeature(selectedFeatureClone));\n  };\n\n  const onCopyAsObjectClick = () => {\n    if (!selectedFeature) {\n      return;\n    }\n\n    let props = Object.entries(_clone(selectedFeature.getProperties()))\n      .filter(([, value]) => !(value instanceof OlGeometry));\n\n    if (exportFilter) {\n      props = props.filter(([key, value]) => exportFilter(key, value));\n    }\n\n    copy(JSON.stringify(Object.fromEntries(props)));\n  };\n\n  const onEditFeatureBtnClick = () => {\n    if (!layer || !map) {\n      return;\n    }\n\n    const geojsonFeatureString = new OlFormatGeoJSON().writeFeature(selectedFeature);\n\n    try {\n      const geojsonFeature = JSON.parse(geojsonFeatureString) as Feature;\n      const editLayer = DigitizeUtil.getDigitizeLayer(map);\n\n      if (!editLayer) {\n        return;\n      }\n\n      const source = editLayer.getSource();\n\n      if (!source) {\n        return;\n      }\n\n      source.clear();\n      source.addFeature(selectedFeature);\n\n      if (isEmptyOlExtent(source.getExtent())) {\n        return;\n      }\n\n      map.getView().fit(source.getExtent(), {\n        padding: [150, 150, 150, 150]\n      });\n      dispatch(setLayerId(getUid(layer)));\n      dispatch(setFeature(geojsonFeature));\n      dispatch(showEditFeatureDrawer());\n    } catch (error) {\n      Logger.error('Could not parse GeoJSON: ', error);\n    }\n  };\n\n  const isEditButtonVisible = allowedEditMode.includes('CREATE') ||\n    allowedEditMode.includes('DELETE') ||\n    allowedEditMode.includes('UPDATE');\n  const isLayerEditable = layer?.get('editable');\n\n  return (\n    <div\n      className=\"pagination-toolbar\"\n    >\n      <Pagination\n        simple\n        total={features.length}\n        size=\"small\"\n        pageSize={1}\n        {...passThroughProps}\n      />\n      <div\n        className=\"copy-buttons\"\n      >\n        {\n          isEditButtonVisible && (\n            <Tooltip\n              key=\"edit\"\n              title={isLayerEditable ? t('PaginationToolbar.editFeature') : t('PaginationToolbar.editDisabled')}\n            >\n              <Button\n                type=\"text\"\n                size=\"small\"\n                onClick={onEditFeatureBtnClick}\n                icon={<FontAwesomeIcon icon={faEdit} />}\n                disabled={!isLayerEditable}\n              />\n            </Tooltip>\n          )\n        }\n        {\n          activeCopyTools?.includes(CopyTools.COPY_AS_GEOJSON) && (\n            <Tooltip\n              title={t('PaginationToolbar.copyAsGeoJson')}\n            >\n              <Button\n                type=\"text\"\n                size=\"small\"\n                onClick={onCopyAsGeoJSONClick}\n                icon={<FontAwesomeIcon icon={faClipboardCheck} />}\n              />\n            </Tooltip>\n          )\n        }\n        {\n          activeCopyTools?.includes(CopyTools.COPY_AS_OBJECT) && (\n            <Tooltip\n              title={t('PaginationToolbar.copyAsObject')}\n            >\n              <Button\n                type=\"text\"\n                size=\"small\"\n                onClick={onCopyAsObjectClick}\n                icon={<FontAwesomeIcon icon={faClipboardList} />}\n              />\n            </Tooltip>\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default PaginationToolbar;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  Tabs,\n  TabsProps\n} from 'antd';\n\nimport _isNil from 'lodash/isNil';\nimport OlFeature from 'ol/Feature';\nimport OlLayer from 'ol/layer/Layer';\nimport OlLayerVector from 'ol/layer/Vector';\nimport OlSourceVector from 'ol/source/Vector';\n\nimport {\n  Tab\n} from 'rc-tabs/lib/interface';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport {\n  PropertyFormItemReadConfig,\n  PropertyFormTabConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\n\nimport useHighlightVectorLayer from '../../../../hooks/useHighlightVectorLayer';\n\nimport FeatureInfoForm from '../FeatureInfoForm';\nimport PaginationToolbar from '../PaginationToolbar';\n\nexport type FeatureInfoTabsProps = TabsProps & {\n  features: OlFeature[];\n  layerName: string;\n  tabConfig?: PropertyFormTabConfig<PropertyFormItemReadConfig>[];\n  layer: OlLayer;\n};\n\nexport const FeatureInfoTabs: React.FC<FeatureInfoTabsProps> = ({\n  features,\n  layerName,\n  layer,\n  tabConfig,\n  ...passThroughProps\n}) => {\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [selectedFeature, setSelectedFeature] = useState<OlFeature>();\n  const [activeKey, setActiveKey] = useState<string>('0');\n\n  const map = useMap();\n\n  const vectorLayerName = `selection-layer-${layerName}`;\n\n  useHighlightVectorLayer({\n    layerName: vectorLayerName\n  });\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const vectorLayer = MapUtil.getLayerByName(map, vectorLayerName) as OlLayerVector<OlSourceVector>;\n\n    if (!vectorLayer) {\n      return;\n    }\n\n    vectorLayer.getSource()?.clear();\n    setCurrentPage(1);\n\n    if (features.length > 0) {\n      setActiveKey('0');\n      setSelectedFeature(features[0]);\n    }\n  }, [features, map, vectorLayerName]);\n\n  useEffect(() => {\n    if (!selectedFeature || !map) {\n      return;\n    }\n\n    const vectorLayer = MapUtil.getLayerByName(map, vectorLayerName) as OlLayerVector<OlSourceVector>;\n\n    if (!vectorLayer) {\n      return;\n    }\n\n    vectorLayer.getSource()?.clear();\n    vectorLayer.getSource()?.addFeature(selectedFeature);\n  }, [selectedFeature, map, vectorLayerName]);\n\n  const onChange = (page: number) => {\n    if (page < 1) {\n      return;\n    }\n\n    setCurrentPage(page);\n    setSelectedFeature(features[page - 1]);\n  };\n\n  if (!tabConfig || !selectedFeature) {\n    return <></>;\n  }\n\n  const exportFilter = (propertyName: string) => {\n    let match = false;\n\n    for (const conf of tabConfig) {\n      if (!conf.children) {\n        continue;\n      }\n\n      for (const child of conf.children) {\n        if (child.propertyName === propertyName) {\n          match = true;\n          break;\n        }\n      }\n    }\n\n    return match;\n  };\n\n  const items = tabConfig\n    .filter(config => !_isNil(config))\n    .map((config, idx) => {\n      return {\n        label: config.title,\n        key: `${idx}`,\n        forceRender: true,\n        children: (\n          <FeatureInfoForm\n            name={config.title}\n            feature={selectedFeature}\n            formConfig={config.children}\n          />\n        )\n      } as Tab;\n    });\n\n  const changeKey = (key: string) => {\n    setActiveKey(key);\n  };\n\n  return (\n    <div\n      className=\"feature-info-tabs\"\n    >\n      <PaginationToolbar\n        current={currentPage}\n        exportFilter={exportFilter}\n        features={features}\n        layer={layer}\n        onChange={onChange}\n        selectedFeature={selectedFeature}\n      />\n      <Tabs\n        items={items}\n        activeKey={activeKey}\n        defaultActiveKey='0'\n        onTabClick={changeKey}\n        {...passThroughProps}\n      />\n    </div>\n  );\n};\n\nexport default FeatureInfoTabs;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  TableProps\n} from 'antd';\n\nimport OlFeature from 'ol/Feature';\nimport OlGeometry from 'ol/geom/Geometry';\nimport OlLayerVector from 'ol/layer/Vector';\nimport OlSourceVector from 'ol/source/Vector';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport PropertyGrid from '@terrestris/react-geo/dist/Grid/PropertyGrid/PropertyGrid';\nimport useMap from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport useHighlightVectorLayer from '../../../../hooks/useHighlightVectorLayer';\n\nimport PaginationToolbar from '../PaginationToolbar';\n\nimport './index.less';\n\nexport type FeatureInfoPropertyGridProps = {\n  features: OlFeature[];\n  layerName: string;\n} & TableProps<OlFeature>;\n\nexport const FeatureInfoPropertyGrid: React.FC<FeatureInfoPropertyGridProps> = ({\n  features,\n  layerName,\n  ...restProps\n}): JSX.Element => {\n  const [currentPage, setCurrentPage] = useState<number>();\n  const [selectedFeature, setSelectedFeature] = useState<OlFeature>();\n  const [blacklistedAttributes, setBlacklistedAttributes] = useState<string[]>([]);\n\n  const map = useMap();\n\n  const {\n    t\n  } = useTranslation();\n\n  const vectorLayerName = `selection-layer-${layerName}`;\n\n  useHighlightVectorLayer({\n    layerName: vectorLayerName\n  });\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const vectorLayer = MapUtil.getLayerByName(map, vectorLayerName) as OlLayerVector<OlSourceVector>;\n\n    if (!vectorLayer) {\n      return;\n    }\n\n    vectorLayer.getSource()?.clear();\n    setCurrentPage(1);\n\n    if (features.length > 0) {\n      setSelectedFeature(features[0]);\n    }\n  }, [features, map, vectorLayerName]);\n\n  useEffect(() => {\n    if (!selectedFeature || !map) {\n      return;\n    }\n\n    const vectorLayer = MapUtil.getLayerByName(map, vectorLayerName) as OlLayerVector<OlSourceVector>;\n\n    if (!vectorLayer) {\n      return;\n    }\n\n    const geomAttributes = Object.entries(selectedFeature.getProperties())\n      .filter(([, value]) => value instanceof OlGeometry)\n      .map(([key]) => key);\n\n    setBlacklistedAttributes(geomAttributes);\n\n    vectorLayer.getSource()?.clear();\n    vectorLayer.getSource()?.addFeature(selectedFeature);\n  }, [selectedFeature, map, vectorLayerName]);\n\n  const onChange = (page: number) => {\n    setCurrentPage(page);\n    setSelectedFeature(features[page - 1]);\n  };\n\n  if (!selectedFeature) {\n    return <></>;\n  }\n\n  const attributeFilter = selectedFeature.getKeys()\n    .filter((prop: string | number | boolean) => {\n      return !blacklistedAttributes.includes((prop as string).toLocaleLowerCase());\n    });\n\n  return (\n    <PropertyGrid\n      className=\"property-grid\"\n      feature={selectedFeature}\n      attributeFilter={attributeFilter}\n      size=\"small\"\n      sticky={true}\n      title={() => (\n        <PaginationToolbar\n          features={features}\n          selectedFeature={selectedFeature}\n          current={currentPage}\n          onChange={onChange}\n        />\n      )}\n      columns={[{\n        title: t('FeaturePropertyGrid.key'),\n        dataIndex: 'attributeName',\n        key: 'attributeName',\n        width: '50%',\n        ellipsis: true,\n        defaultSortOrder: 'ascend',\n        sorter: (a, b) => a.key.localeCompare(b.key)\n      }, {\n        title: t('FeaturePropertyGrid.value'),\n        dataIndex: 'attributeValue',\n        key: 'attributeValue',\n        width: '50%',\n        ellipsis: true\n      }]}\n      scroll={{\n        scrollToFirstRowOnChange: true,\n        y: 'calc(100% - 90px)'\n      }}\n      {...restProps}\n    />\n  );\n};\n\nexport default FeatureInfoPropertyGrid;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useCallback, useEffect, useState\n} from 'react';\n\nimport {\n  FormProps, Spin, Tabs\n} from 'antd';\n\nimport OlFormatGeoJSON from 'ol/format/GeoJSON';\nimport OlLayerBase from 'ol/layer/Base';\nimport OlLayerImage from 'ol/layer/Image';\nimport OlLayerTile from 'ol/layer/Tile';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport { Tab } from 'rc-tabs/lib/interface';\n\nimport { useTranslation } from 'react-i18next';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport CoordinateInfo, {\n  CoordinateInfoProps,\n  CoordinateInfoState\n} from '@terrestris/react-geo/dist/CoordinateInfo/CoordinateInfo';\nimport { useMap } from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  isWmsLayer, WmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport { getBearerTokenHeader } from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useAppDispatch from '../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../hooks/useAppSelector';\nimport usePlugins from '../../../hooks/usePlugins';\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\n\nimport { isFeatureInfoIntegration } from '../../../plugin';\n\nimport { CopyTools } from '../../../store/featureInfo';\nimport {\n  SelectedFeatures, setSelectedFeatures\n} from '../../../store/selectedFeatures';\n\nimport FeatureInfoTabs from './FeatureInfoTabs';\n\nimport FeatureInfoPropertyGrid from './FeaturePropertyGrid';\n\nimport './index.less';\n\nexport type FeatureInfoConfig = {\n  enabled?: boolean;\n  activeCopyTools?: CopyTools[];\n};\n\nexport type FeatureInfoProps = FormProps & Partial<CoordinateInfoProps>;\n\ntype LayerIndex = {\n  layerName: string;\n  index: number;\n};\n\nexport const FeatureInfo: React.FC<FeatureInfoProps> = ({\n  ...restProps\n}): JSX.Element => {\n\n  const {\n    t\n  } = useTranslation();\n\n  const map = useMap();\n  const client = useSHOGunAPIClient();\n  const plugins = usePlugins();\n  const dispatch = useAppDispatch();\n\n  const [queryLayers, setQueryLayers] = useState<WmsLayer[]>([]);\n  const [activeTabKey, setActiveTabKey] = useState<string | undefined>(undefined);\n  const featureInfoEnabled = useAppSelector(state => state.featureInfo.enabled);\n\n  const layerFilter = (layer: OlLayerBase) => {\n    if (!layer.get('hoverable')) {\n      return false;\n    }\n    if (layer instanceof OlLayerImage && layer.getSource() instanceof OlSourceImageWMS) {\n      return true;\n    }\n    return layer instanceof OlLayerTile && layer.getSource() instanceof OlSourceTileWMS;\n  };\n\n  const updateQueryLayers = useCallback(() => {\n    if (!map) {\n      return;\n    }\n\n    const layerCandidates = MapUtil.getAllLayers(map, layerFilter) as WmsLayer[];\n    setQueryLayers(layerCandidates.filter(l => l.getVisible()));\n  }, [map]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    updateQueryLayers();\n\n    const mapLayers = MapUtil.getAllLayers(map, layerFilter) as WmsLayer[];\n    mapLayers.forEach(l => l.on('change:visible', updateQueryLayers));\n\n    return () => {\n      mapLayers.forEach(l => l.un('change:visible', updateQueryLayers));\n    };\n\n  }, [map, updateQueryLayers]);\n\n  if (!map) {\n    return <></>;\n  }\n\n  const changeActiveKey = (key: string) => {\n    setActiveTabKey(key);\n  };\n\n  const findMapLayerIndex = (layerName: string) => {\n    const allLayers = map.getAllLayers();\n\n    return allLayers.findIndex(l => {\n      if (isWmsLayer(l)) {\n        const source = l.getSource();\n        const unqualifiedMapLayerName = getUnqualifiedLayerName(source?.getParams().LAYERS);\n        const unqualifiedLayerName = getUnqualifiedLayerName(layerName);\n\n        return unqualifiedLayerName === unqualifiedMapLayerName;\n      }\n      return false;\n    });\n  };\n\n  const resultRenderer = (coordinateInfoState: CoordinateInfoState) => {\n    const features = coordinateInfoState.features;\n    const loading = coordinateInfoState.loading;\n\n    if (Object.keys(features).length === 0) {\n      return (\n        <span className='usage-hint'>\n          {t('FeatureInfo.usageHint')}\n        </span>\n      );\n    }\n\n    const items: Array<Tab & { index: number }> = [];\n\n    Object.keys(features).forEach(layerName => {\n      let pluginRendererAvailable = false;\n\n      const allLayers = map.getAllLayers();\n\n      const mapLayerIndex = findMapLayerIndex(layerName);\n      const mapLayer = allLayers[mapLayerIndex];\n\n      plugins.forEach(plugin => {\n        if (isFeatureInfoIntegration(plugin.integration) &&\n          ((Array.isArray(plugin.integration.layers) && plugin.integration.layers.includes(layerName)) ||\n            !plugin.integration.layers)) {\n          const {\n            key,\n            wrappedComponent: WrappedPluginComponent\n          } = plugin;\n\n          items.push({\n            label: layerName,\n            index: mapLayerIndex,\n            key: layerName,\n            children: (\n              <WrappedPluginComponent\n                key={key}\n              />\n            )\n          });\n\n          pluginRendererAvailable = true;\n        }\n      });\n\n      if (!pluginRendererAvailable) {\n        items.push({\n          label: mapLayer?.get('name') || layerName,\n          index: mapLayerIndex,\n          key: layerName,\n          children: (\n            <div\n              key={layerName}\n            >\n              {\n                mapLayer?.get('featureInfoFormConfig') ?\n                  <FeatureInfoTabs\n                    tabConfig={mapLayer?.get('featureInfoFormConfig')}\n                    features={features[layerName]}\n                    layerName={layerName}\n                    layer={mapLayer}\n                  /> :\n                  <FeatureInfoPropertyGrid\n                    features={features[layerName]}\n                    layerName={layerName}\n                  />\n              }\n            </div>\n          )\n        });\n      }\n    });\n\n    items.sort((a, b) => b.index - a.index);\n\n    return (\n      <Spin\n        spinning={loading}\n      >\n        <Tabs\n          destroyInactiveTabPane={true}\n          items={items}\n          activeKey={activeTabKey}\n          defaultActiveKey={items[0].key}\n          onTabClick={changeActiveKey}\n        />\n      </Spin>\n    );\n  };\n\n  const getUnqualifiedLayerName = (layerName: string) => {\n    return layerName.split(':').length > 1 ?\n      layerName.split(':')[1] :\n      layerName.split(':')[0];\n  };\n\n  if (!featureInfoEnabled) {\n    return <></>;\n  }\n\n  const getFetchOpts = (layer: WmsLayer) => {\n    return {\n      headers: {\n        ...layer.get('useBearerToken') ? {\n          ...getBearerTokenHeader(client?.getKeycloak())\n        } : undefined\n      }\n    };\n  };\n\n  const onSuccess = (coordinateInfoState: CoordinateInfoState) => {\n    const features = coordinateInfoState.features;\n\n    const serializedFeatures: SelectedFeatures = {};\n    Object.entries(features).forEach(entry => {\n      const layerName = entry[0];\n      const selectedFeatures = entry[1];\n\n      serializedFeatures[layerName] = new OlFormatGeoJSON().writeFeatures(selectedFeatures);\n    });\n\n    const layers: LayerIndex[] = Object.keys(features).map(layerName => ({\n      layerName: layerName,\n      index: findMapLayerIndex(layerName)\n    })).sort((a, b) => b.index - a.index);\n\n    if (layers.length > 0) {\n      setActiveTabKey(layers[0].layerName);\n    }\n\n    dispatch(setSelectedFeatures(serializedFeatures));\n  };\n\n  return (\n    <div className='feature-info-panel'>\n      <CoordinateInfo\n        featureCount={10}\n        map={map}\n        queryLayers={queryLayers}\n        resultRenderer={resultRenderer}\n        fetchOpts={getFetchOpts}\n        onSuccess={onSuccess}\n        {...restProps}\n      />\n    </div>\n  );\n};\n\nexport default FeatureInfo;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect,\n  useState\n} from 'react';\n\nimport {\n  faClock\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Divider\n} from 'antd';\n\nimport moment from 'moment';\n\nimport OlLayerImage from 'ol/layer/Image';\nimport OlLayerTile from 'ol/layer/Tile';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport TimeSlider, {\n  TimeSliderProps\n} from '@terrestris/react-geo/dist/Slider/TimeSlider/TimeSlider';\n\nimport './index.less';\n\ninterface WmsTimeSliderProps extends Omit<TimeSliderProps, 'min' | 'max' | 'marks' | 'useRange' |\n  'onChange' | 'defaultValue' | 'value' | 'formatString'> {\n  layer: OlLayerTile<OlSourceTileWMS> | OlLayerImage<OlSourceImageWMS>;\n}\n\nexport const WmsTimeSlider: React.FC<WmsTimeSliderProps> = ({\n  layer,\n  ...passThroughProps\n}) => {\n  const [value, setValue] = useState<string | [string, string]>(layer.getSource()?.getParams().TIME);\n  const [min, setMin] = useState<string>();\n  const [max, setMax] = useState<string>();\n  const [marks, setMarks] = useState<Record<string | number, string> | undefined>();\n\n  const {\n    t\n  } = useTranslation();\n\n  useEffect(() => {\n    const dimension = layer.get('dimension');\n\n    if (!dimension) {\n      return;\n    }\n\n    let timeValues;\n    if (dimension.values) {\n      timeValues = dimension.values.split(',');\n    }\n\n    if (!timeValues || timeValues.length === 0) {\n      return;\n    }\n\n    setMin(timeValues[0]);\n    setMax(timeValues[timeValues.length - 1]);\n    setValue(timeValues[timeValues.length - 1]);\n\n    const m: Record<string | number, string> = {};\n    timeValues.forEach((val: string, idx: number) => {\n      m[val] = moment(val).format('YYYY-MM-DD');\n    });\n\n    setMarks(m);\n\n    if (timeValues.default === 'current') {\n      let nearest: [number, string] = [NaN, ''];\n      Object.values(m).forEach(d => {\n        let diff = moment().diff(moment(d));\n\n        if (diff < nearest[0]) {\n          nearest = [diff, d];\n        }\n      });\n\n      setValue(nearest[1]);\n    }\n  }, [layer]);\n\n  const onChange = (val: string | [string, string]) => {\n    setValue(val);\n\n    layer.getSource()?.updateParams({\n      TIME: val\n    });\n  };\n\n  return (\n    <div\n      className=\"wms-time-slider\"\n    >\n      <Divider>\n        <FontAwesomeIcon\n          icon={faClock}\n        />\n        {t('WmsTimeSlider.title')}\n      </Divider>\n      {\n        marks ?\n          <TimeSlider\n            min={min}\n            max={max}\n            marks={marks}\n            value={value}\n            onChange={onChange}\n            step={null}\n            {...passThroughProps}\n          /> :\n          <span>\n            {t('WmsTimeSlider.default')}\n          </span>\n      }\n    </div>\n  );\n};\n\nexport default WmsTimeSlider;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faEllipsisV\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Dropdown,\n  DropDownProps,\n  notification,\n  Spin\n} from 'antd';\nimport {\n  ItemType\n} from 'antd/lib/menu/hooks/useItems';\n\nimport {\n  getUid\n} from 'ol';\nimport OlLayerBase from 'ol/layer/Base';\nimport OlLayerGroup from 'ol/layer/Group';\nimport OlLayerImage from 'ol/layer/Image';\nimport OlLayerTile from 'ol/layer/Tile';\nimport {\n  transformExtent\n} from 'ol/proj';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\n\nimport {\n  MenuInfo\n} from 'rc-menu/lib/interface';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport LayerUtil from '@terrestris/ol-util/dist/LayerUtil/LayerUtil';\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport {\n  isWmsLayer\n} from '@terrestris/react-geo/dist/Util/typeUtils';\n\nimport {\n  DownloadConfig\n} from '@terrestris/shogun-util/dist/model/Layer';\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useAppDispatch from '../../../../hooks/useAppDispatch';\nimport useAppSelector from '../../../../hooks/useAppSelector';\nimport useSHOGunAPIClient from '../../../../hooks/useSHOGunAPIClient';\n\nimport {\n  setLayerId,\n  setFeature\n} from '../../../../store/editFeature';\nimport {\n  show as showEditFeatureDrawer\n} from '../../../../store/editFeatureDrawerOpen';\n\nimport {\n  setLayer as setLayerDetailsLayer,\n  show as showLayerDetailsModal\n} from '../../../../store/layerDetailsModal';\n\nexport type LayerTreeContextMenuProps = {\n  layer: OlLayerTile<OlSourceTileWMS> | OlLayerImage<OlSourceImageWMS>;\n  visibleLegendsIds: string[];\n  setVisibleLegendsIds: (ids: string[]) => void;\n} & Partial<DropDownProps>;\n\nexport const LayerTreeContextMenu: React.FC<LayerTreeContextMenuProps> = ({\n  layer,\n  visibleLegendsIds,\n  setVisibleLegendsIds,\n  ...restProps\n}): JSX.Element => {\n\n  const [settingsVisible, setSettingsVisible] = useState<boolean>(false);\n  const [extentLoading, setExtentLoading] = useState<boolean>(false);\n\n  const dispatch = useAppDispatch();\n  const client = useSHOGunAPIClient();\n  const map = useMap();\n  const {\n    t\n  } = useTranslation();\n\n  const downloadConfig: DownloadConfig[] = layer.get('downloadConfig') ?? null;\n  const allowedEditMode = useAppSelector(\n    state => state.editFeature.userEditMode\n  );\n\n  const onContextMenuItemClick = (evt: MenuInfo): void => {\n    if (evt?.key.startsWith('downloadLayer')) {\n      const url = evt.key.split('|')[1];\n      downloadLayer(decodeURI(url));\n    }\n    switch (evt?.key) {\n      case 'zoomToExtent':\n        zoomToLayerExtent();\n        break;\n      case 'removeExternal':\n        removeExternalLayer();\n        break;\n      case 'toggleLegend':\n        const legendId: string = getUid(layer);\n        const newLegendIds = [...visibleLegendsIds];\n        if (newLegendIds.includes(legendId)) {\n          newLegendIds.splice(newLegendIds.indexOf(legendId), 1);\n        } else {\n          newLegendIds.push(legendId);\n        }\n        setVisibleLegendsIds(newLegendIds);\n        break;\n      case 'editLayer':\n        dispatch(setFeature(null));\n        dispatch(setLayerId(getUid(layer)));\n        dispatch(showEditFeatureDrawer());\n        break;\n      case 'layerDetails':\n        dispatch(setLayerDetailsLayer(getUid(layer)));\n        dispatch(showLayerDetailsModal());\n        break;\n      default:\n        break;\n    }\n    setSettingsVisible(false);\n  };\n\n  const zoomToLayerExtent = async (): Promise<void> => {\n    if (!map) {\n      return;\n    }\n\n    setExtentLoading(true);\n\n    try {\n      let extent = await LayerUtil.getExtentForLayer(layer, {\n        headers: layer.get('useBearerToken') ? {\n          ...getBearerTokenHeader(client?.getKeycloak())\n        } : {}\n      });\n      extent = transformExtent(extent, 'EPSG:4326', map.getView().getProjection());\n      map.getView().fit(extent);\n    } catch (error) {\n      Logger.error(error);\n      notification.error({\n        message: t('LayerTreeContextMenu.extentError')\n      });\n    } finally {\n      setExtentLoading(false);\n    }\n  };\n\n  const getParentLayerGroups = (l: OlLayerBase): OlLayerGroup[] => {\n    if (!map) {\n      return [];\n    }\n\n    const layerGroups = getAllLayerGroups(map.getLayerGroup())\n      .filter(layerGroup => layerGroup.getLayers().getArray().includes(l));\n\n    return layerGroups;\n  };\n\n  const getAllLayerGroups = (layerGroup: OlLayerGroup): OlLayerGroup[] => {\n    const layerGroups = [layerGroup];\n\n    for (const l of layerGroup.getLayers().getArray()) {\n      if (l instanceof OlLayerGroup) {\n        layerGroups.push(...getAllLayerGroups(l));\n      }\n    }\n\n    return layerGroups;\n  };\n\n  const removeLayer = (l: OlLayerBase) => {\n    const parentGroups = getParentLayerGroups(l);\n\n    parentGroups.forEach(parentGroup => parentGroup.getLayers().remove(l));\n  };\n\n  const removeExternalLayer = () => {\n    if (!map) {\n      return;\n    }\n\n    removeLayer(layer);\n\n    const externalLayerGroup = MapUtil.getLayerByName(map, t('AddLayerModal.externalWmsFolder')) as OlLayerGroup;\n    const uploadedLayerGroup = MapUtil.getLayerByName(map, t('UploadDataModal.uploadedDataFolder')) as OlLayerGroup;\n\n    if (externalLayerGroup && externalLayerGroup.getLayers().getLength() === 0) {\n      removeLayer(externalLayerGroup);\n    }\n\n    if (uploadedLayerGroup && uploadedLayerGroup.getLayers().getLength() === 0) {\n      removeLayer(uploadedLayerGroup);\n    }\n  };\n\n  const downloadLayer = async (url: string) => {\n    if (!layer) {\n      return;\n    }\n    const reqOpts = {\n      method: 'GET',\n      headers: {\n        ...layer.get('useBearerToken') ? {\n          ...getBearerTokenHeader(client?.getKeycloak())\n        } : undefined\n      }\n    };\n\n    const res = await fetch(url, reqOpts);\n    const blob = await res.blob();\n    const a = document.createElement('a');\n    a.href = URL.createObjectURL(blob);\n    a.setAttribute('download', layer.get('name'));\n    a.click();\n  };\n\n  let dropdownMenuItems: ItemType[] = [];\n\n  if (isWmsLayer(layer)) {\n    dropdownMenuItems.push({\n      label: (\n        <Spin\n          spinning={extentLoading}\n        >\n          {t('LayerTreeContextMenu.layerZoomToExtent')}\n        </Spin>\n      ),\n      key: 'zoomToExtent'\n    });\n  }\n\n  if (isWmsLayer(layer) && layer.getVisible()) {\n    const legendVisible = visibleLegendsIds.includes(getUid(layer));\n\n    dropdownMenuItems.push({\n      label: legendVisible ? t('LayerTreeContextMenu.hideLegend') : t('LayerTreeContextMenu.showLegend'),\n      key: 'toggleLegend'\n    });\n  }\n\n  if (layer.get('isExternalLayer') || layer.get('isUploadedLayer')) {\n    dropdownMenuItems.push({\n      label: t('LayerTreeContextMenu.removeLayer'),\n      key: 'removeExternal'\n    });\n  }\n\n  if (downloadConfig) {\n    const downloadItems = downloadConfig.map((dlConfig: DownloadConfig) => {\n      return {\n        label: t('LayerTreeContextMenu.downloadLayer', {\n          formatName: dlConfig.formatName ?? 'XML'\n        }),\n        key: `downloadLayer|${encodeURI(dlConfig.downloadUrl)}`\n      };\n    });\n    dropdownMenuItems.push(...downloadItems);\n  }\n\n  if (\n    layer.get('editable') &&\n    (allowedEditMode.includes('CREATE') ||\n      allowedEditMode.includes('UPDATE') ||\n      allowedEditMode.includes('DELETE'))\n  ) {\n    dropdownMenuItems.push({\n      label: t('LayerTreeContextMenu.editLayer'),\n      key: 'editLayer'\n    });\n  }\n\n  dropdownMenuItems.push({\n    label: t('LayerTreeContextMenu.layerDetails'),\n    key: 'layerDetails'\n  });\n\n  return (\n    <div\n      aria-label='layer-context'\n    >\n      <Dropdown\n        menu={{\n          items: dropdownMenuItems,\n          onClick: onContextMenuItemClick\n        }}\n        placement=\"bottomLeft\"\n        onOpenChange={setSettingsVisible}\n        open={settingsVisible}\n        trigger={['click']}\n        {...restProps}\n      >\n        <FontAwesomeIcon icon={faEllipsisV} />\n      </Dropdown>\n    </div>\n  );\n};\n\nexport default LayerTreeContextMenu;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport './index.less';\n\nexport const LoadingIndicator: React.FC = (): JSX.Element => {\n  return (\n    <div className=\"layer-node-title-loading-animation\">\n      <span className=\"dot-one\">.</span>\n      <span className=\"dot-two\">.</span>\n      <span className=\"dot-three\">.</span>\n    </div>\n  );\n};\n\nexport default LoadingIndicator;\n","import React, {\n  useState,\n  useEffect,\n  useCallback\n} from 'react';\n\nimport {\n  getUid\n} from 'ol';\nimport BaseEvent from 'ol/events/Event';\nimport OlBaseLayer from 'ol/layer/Base';\nimport OlLayerGroup from 'ol/layer/Group';\nimport OlLayerImage from 'ol/layer/Image';\nimport OlLayer from 'ol/layer/Layer';\nimport OlLayerTile from 'ol/layer/Tile';\nimport OlSourceImageWMS from 'ol/source/ImageWMS';\nimport OlSource from 'ol/source/Source';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\nimport OlSourceVector from 'ol/source/Vector';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\nimport RgLayerTree, {\n  LayerTreeProps as RgLayerTreeProps\n} from '@terrestris/react-geo/dist/LayerTree/LayerTree';\nimport Legend from '@terrestris/react-geo/dist/Legend/Legend';\nimport LayerTransparencySlider from '@terrestris/react-geo/dist/Slider/LayerTransparencySlider/LayerTransparencySlider';\n\nimport LayerType from '@terrestris/shogun-util/dist/model/enum/LayerType';\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useAppSelector from '../../../hooks/useAppSelector';\nimport useSHOGunAPIClient from '../../../hooks/useSHOGunAPIClient';\n\nimport WmsTimeSlider from '../../WmsTimeSlider';\n\nimport LayerTreeContextMenu from './LayerTreeContextMenu';\n\nimport './index.less';\nimport LoadingIndicator from './LoadingIndicator';\n\nexport type LayerTreeProps = Partial<RgLayerTreeProps>;\n\nexport type LayerTileLoadCounter = {\n  [key: string]: {\n    loading: number;\n    loaded: number;\n    percent: number;\n  };\n};\n\nexport const LayerTree: React.FC<LayerTreeProps> = ({\n  ...restProps\n}): JSX.Element => {\n  const map = useMap();\n  const client = useSHOGunAPIClient();\n  const {\n    t\n  } = useTranslation();\n\n  const showLegendsState: boolean = useAppSelector(state => state.layerTree.showLegends) ?? false;\n\n  const initialLayersUid = map?.getAllLayers().map(l => getUid(l));\n\n  const [visibleLegendsIds, setVisibleLegendsIds] = useState<string[]> (showLegendsState ? initialLayersUid ?? [] : []);\n  const [layerTileLoadCounter, setLayerTileLoadCounter] = useState<LayerTileLoadCounter>({});\n\n  const registerTileLoadHandler = useCallback(() => {\n    if (!map) {\n      return;\n    }\n\n    const allLayers = MapUtil.getAllLayers(map);\n    allLayers.forEach(layer => {\n      if (layer instanceof OlLayer) {\n        const source = layer.getSource();\n        if (source instanceof OlSourceTileWMS) {\n          if (!source.hasListener('tileloadstart')) {\n            source.on('tileloadstart', tileLoadStartListener);\n          }\n          if (!source.hasListener('tileloadend') && !source.hasListener('tileloaderror')) {\n            source.on(['tileloadend', 'tileloaderror'], tileLoadEndListener);\n          }\n        }\n        if (source instanceof OlSourceImageWMS) {\n          if (!source.hasListener('imageloadstart')) {\n            source.on('imageloadstart', tileLoadStartListener);\n          }\n          if (!source.hasListener('imageloadend') && !source.hasListener('imageloaderror')) {\n            source.on(['imageloadend', 'imageloaderror'], tileLoadEndListener);\n          }\n        }\n      }\n    });\n  }, [map]);\n\n  const checkListeners = useCallback(() => {\n    const activeLayers = map?.getAllLayers().map(l => getUid(l));\n\n    if (activeLayers?.length !== initialLayersUid?.length) {\n      registerTileLoadHandler();\n    }\n  }, [map, initialLayersUid, registerTileLoadHandler]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    registerTileLoadHandler();\n\n    map.getLayers().on('change', checkListeners);\n\n    return () => {\n      const allLayers = MapUtil.getAllLayers(map);\n      allLayers.forEach(layer => {\n        if (layer instanceof OlLayer) {\n          const source = layer.getSource();\n          if (source.hasListener('tileloadstart')) {\n            source.un('tileloadstart', tileLoadStartListener);\n          }\n          if (source.hasListener('tileloadend')) {\n            source.un('tileloadend', tileLoadEndListener);\n          }\n          if (source.hasListener('tileloaderror')) {\n            source.un('tileloaderror', tileLoadEndListener);\n          }\n        }\n      });\n      map.getLayers().un('change', checkListeners);\n    };\n  }, [map, registerTileLoadHandler, checkListeners]);\n\n  const tileLoadStartListener = (evt: BaseEvent) => {\n    setLayerTileLoadCounter((counter: LayerTileLoadCounter) => {\n      const uid = parseInt(getUid(evt.target), 10);\n      const update = { ...counter };\n      // reset when load was finished\n      if (update[uid] && update[uid].loaded >= update[uid].loading) {\n        update[uid].loading = 1;\n        update[uid].loaded = 0;\n        update[uid].percent = 0;\n        return update;\n      }\n      if (!update[uid]) {\n        update[uid] = {\n          loading: 0,\n          loaded: 0,\n          percent: 0\n        };\n      }\n      update[uid].loading = Number.isInteger(update[uid].loading) ?\n        update[uid].loading + 1 : 1;\n      return update;\n    });\n  };\n\n  const tileLoadEndListener = (evt: BaseEvent | Event) => {\n    setLayerTileLoadCounter((counter: LayerTileLoadCounter) => {\n      const uid = parseInt(getUid(evt.target), 10);\n      const update = { ...counter };\n      if (!update[uid]) {\n        update[uid] = {\n          loading: 0,\n          loaded: 0,\n          percent: 0\n        };\n      }\n      update[uid].loaded = Number.isInteger(update[uid].loaded) ?\n        update[uid].loaded + 1 : 1;\n      const percent = Math.round(update[uid].loaded / update[uid].loading * 100);\n      if (percent > update[uid].percent) {\n        update[uid].percent = percent;\n      }\n      return update;\n    });\n  };\n\n  const treeFilterFunction = (layer: OlLayer<OlSource> | OlLayerGroup) => {\n    if ((layer as OlLayerGroup).getLayers) {\n      return !layer.get('hideInLayerTree');\n    }\n\n    return !((layer as OlLayer).getSource && ((layer as OlLayer).getSource() as OlSourceVector)?.forEachFeature);\n  };\n\n  const treeNodeTitleRenderer = (layer: OlBaseLayer) => {\n    if (!map) {\n      return;\n    }\n\n    const mapView = map.getView();\n    const unit = mapView.getProjection().getUnits() || 'm';\n    const resolution = mapView.getResolution();\n    const scale = resolution ? MapUtil.getScaleForResolution(resolution, unit) : undefined;\n    const percent = layer instanceof OlLayer && getUid(layer.getSource()) ?\n      layerTileLoadCounter[getUid(layer.getSource())]?.percent : 100;\n\n    if (layer instanceof OlLayerGroup) {\n      return (\n        <div\n          aria-label='layer-group'\n        >\n          {layer.get('name')}\n        </div>\n      );\n    } else {\n      return (\n        <>\n          <div\n            className=\"tree-node-header\"\n            aria-label=\"tree-node-header\"\n          >\n            <span\n              aria-label='layer-name'\n              className='layer-name'\n            >\n              {layer.get('name')}\n              <span\n                className='loading-dots'\n              >\n                {percent < 100 && <LoadingIndicator />}\n              </span>\n            </span>\n            {\n              (layer instanceof OlLayerTile || layer instanceof OlLayerImage) && (\n                <div\n                  aria-label='layer-context-menu'\n                >\n                  <LayerTreeContextMenu\n                    layer={layer}\n                    visibleLegendsIds={visibleLegendsIds}\n                    setVisibleLegendsIds={setVisibleLegendsIds}\n                  />\n                </div>\n              )\n            }\n\n          </div>\n          {\n            layer.get('visible') &&\n            <div\n              className=\"layer-transparency\"\n              aria-label='transparency-slider'\n            >\n              <LayerTransparencySlider\n                tooltip={{\n                  formatter: val => `${t('LayerTree.transparency')}: ${val}%`\n                }}\n                layer={layer}\n              />\n            </div>\n          }\n          {\n            (layer.get('visible') && layer.get('type') as LayerType === 'WMSTIME') &&\n            <div className=\"layer-time-slider\">\n              <WmsTimeSlider\n                layer={layer as OlLayerTile<OlSourceTileWMS> | OlLayerImage<OlSourceImageWMS>}\n              />\n            </div>\n          }\n          {\n            (layer.get('visible') && visibleLegendsIds.includes(getUid(layer))) &&\n            <Legend\n              layer={layer as OlLayerTile<OlSourceTileWMS> | OlLayerImage<OlSourceImageWMS>}\n              errorMsg={t('LayerTree.noLegendAvailable')}\n              extraParams={{\n                scale,\n                LEGEND_OPTIONS: 'fontAntiAliasing:true;forceLabels:on',\n                TRANSPARENT: true\n              }}\n              headers={\n                layer.get('useBearerToken') ?\n                  {\n                    ...getBearerTokenHeader(client?.getKeycloak())\n                  } :\n                  {}\n              }\n            />\n          }\n        </>\n      );\n    }\n  };\n\n  if (!map) {\n    return <></>;\n  }\n\n  return (\n    <RgLayerTree\n      aria-label=\"layertree\"\n      className=\"layertree\"\n      map={map}\n      nodeTitleRenderer={treeNodeTitleRenderer}\n      filterFunction={treeFilterFunction}\n      draggable\n      {...restProps}\n    />\n  );\n};\n\nexport default LayerTree;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  faDrawPolygon,\n  faPenRuler\n} from '@fortawesome/free-solid-svg-icons';\n\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport MeasureButton from '@terrestris/react-geo/dist/Button/MeasureButton/MeasureButton';\nimport ToggleGroup from '@terrestris/react-geo/dist/Button/ToggleGroup/ToggleGroup';\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport './index.less';\n\ninterface DefaultMeasureProps {\n  showMeasureDistance?: boolean;\n  showMeasureArea?: boolean;\n}\n\nexport interface MeasureProps extends Partial<DefaultMeasureProps> { }\n\nexport const Measure: React.FC<MeasureProps> = ({\n  showMeasureDistance,\n  showMeasureArea\n}): JSX.Element => {\n  const {\n    t\n  } = useTranslation();\n\n  const map = useMap();\n\n  if (!map) {\n    return <></>;\n  }\n\n  return (\n    <ToggleGroup>\n      {showMeasureDistance ? (\n        <MeasureButton\n          geodesic\n          name=\"line\"\n          map={map}\n          measureType=\"line\"\n          type=\"link\"\n          continueLineMsg={t('Measure.clicktodrawline')}\n        >\n          <FontAwesomeIcon icon={faPenRuler} />\n          <span className=\"measure-text\">{t('Measure.line')}</span>\n        </MeasureButton>\n      ) : <></>}\n\n      {showMeasureArea ? (\n        <MeasureButton\n          geodesic\n          name=\"poly\"\n          map={map}\n          measureType=\"polygon\"\n          type=\"link\"\n          continuePolygonMsg={t('Measure.clicktodrawarea')}\n        >\n          <FontAwesomeIcon icon={faDrawPolygon} />\n          <span className=\"measure-text\">{t('Measure.area')}</span>\n        </MeasureButton>\n      ) : <></>}\n\n    </ToggleGroup>\n  );\n};\n\nexport default Measure;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useCallback,\n  useEffect,\n  useState\n} from 'react';\n\nimport type {\n  IconDefinition\n} from '@fortawesome/fontawesome-common-types';\n\nimport {\n  faChevronLeft,\n  faChevronRight,\n  faPalette,\n  faFileDownload,\n  faLanguage,\n  faCircleInfo,\n  faPlus,\n  faRuler,\n  faShareNodes,\n  faStream,\n  faUpload\n} from '@fortawesome/free-solid-svg-icons';\n\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Button,\n  Collapse,\n  CollapsePanelProps,\n  Tooltip\n} from 'antd';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport _toArray from 'lodash/toArray';\n\nconst { Panel } = Collapse;\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport usePlugins from '../../hooks/usePlugins';\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\n\nimport {\n  isToolMenuIntegration\n} from '../../plugin';\n\nimport {\n  show as showAdd\n} from '../../store/addLayerModal';\nimport { setFeatureInfoEnabled } from '../../store/featureInfo';\nimport {\n  UploadTools, setLayerTreeEnabled\n} from '../../store/layerTree';\nimport {\n  setActiveKeys\n} from '../../store/toolMenu';\nimport {\n  show as showUpload\n} from '../../store/uploadDataModal';\n\nimport LanguageSelect from '../LanguageSelector';\nimport Permalink from '../Permalink';\nimport PrintForm from '../PrintForm';\n\nimport Draw from './Draw';\nimport FeatureInfo from './FeatureInfo';\nimport LayerTree from './LayerTree';\n\nimport Measure from './Measure';\nimport './index.less';\n\nexport interface TitleEventEntity {\n  key: string;\n  domEvent: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>;\n}\n\nexport type ToolPanelConfig = {\n  icon: IconDefinition;\n  title: string;\n  wrappedComponent: JSX.Element;\n};\n\nexport type ToolMenuProps = Partial<CollapsePanelProps> & {\n  collapseWidth?: number;\n  minWidth?: number;\n  maxWidth?: number;\n};\n\nexport const ToolMenu: React.FC<ToolMenuProps> = ({\n  collapseWidth = 40,\n  minWidth = 240,\n  maxWidth = 600,\n  ...restProps\n}): JSX.Element => {\n  const {\n    t\n  } = useTranslation();\n  const map = useMap();\n\n  const plugins = usePlugins();\n\n  const dispatch = useAppDispatch();\n  const availableTools = useAppSelector(state => state.toolMenu.availableTools);\n  const activeKeys = useAppSelector(state => state.toolMenu.activeKeys);\n\n  const client = useSHOGunAPIClient();\n  const keycloak = client?.getKeycloak();\n\n  const [collapsed, setCollapsed] = useState<boolean>(false);\n  const [menuTools, setMenuTools] = useState<string[]>([]);\n  const [isResizing, setIsResizing] = useState(false);\n  const [width, setWidth] = useState(320);\n  const [noCollapseWidth, setNoCollapseWidth] = useState(width);\n\n  useEffect(() => {\n    const mobileQuery = window.matchMedia('only screen and (max-width: 450px) and (orientation: portrait),' +\n      'only screen and (max-width: 750px) and (orientation: landscape), only screen and (max-width: 580px)');\n    const mobileNavigatorRegEx = new RegExp('/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle' +\n      '|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/');\n    const isMobile = mobileQuery.matches || mobileNavigatorRegEx.test(window.navigator.userAgent);\n\n    if (isMobile) {\n      setCollapsed(true);\n      setWidth(collapseWidth);\n    }\n  }, [collapseWidth]);\n\n  useEffect(() => {\n    if (menuTools.length < 1) {\n      if (availableTools.includes('default')) {\n        setMenuTools([\n          'measure_tools',\n          'draw_tools',\n          'feature_info',\n          'print',\n          'tree',\n          'permalink',\n          'language_selector'\n        ]);\n      } else {\n        setMenuTools(availableTools);\n      }\n    }\n  }, [menuTools, availableTools]);\n\n  useEffect(() => {\n    const exclusiveTools = [\n      'print',\n      'measure_tools',\n      'draw_tools',\n      'feature_info',\n      'tree'\n    ];\n\n    const activeExclusiveTools = exclusiveTools.filter(tool =>\n      activeKeys.includes(tool)\n    );\n\n    if (activeExclusiveTools.length > 1) {\n      const lastExclusiveTool = activeKeys\n        .slice(0, activeKeys.length - 1)\n        .reverse()\n        .find(tool => exclusiveTools.includes(tool));\n\n      if (lastExclusiveTool) {\n        dispatch(\n          setActiveKeys(activeKeys.filter(keys => keys !== lastExclusiveTool))\n        );\n      }\n    }\n\n    dispatch(setFeatureInfoEnabled(activeKeys.includes('feature_info')));\n    dispatch(setLayerTreeEnabled(activeKeys.includes('tree')));\n\n  }, [activeKeys, dispatch]);\n\n  const getToolPanels = (): JSX.Element[] => {\n\n    const panels: JSX.Element[] = [];\n\n    menuTools.forEach((tool: string) => {\n      const toolPanelConfig: ToolPanelConfig | undefined = getToolPanelConfig(tool);\n\n      if (!toolPanelConfig) {\n        return;\n      }\n      const {\n        icon,\n        title,\n        wrappedComponent\n      } = toolPanelConfig;\n\n      const panel = (\n        <Panel\n          className={tool}\n          header={\n            <>\n              {icon ? <FontAwesomeIcon icon={icon} /> : undefined}\n              <span>{title}</span>\n            </>\n          }\n          key={tool}\n        >\n          {wrappedComponent}\n        </Panel>\n      );\n      panels.push(panel);\n    });\n\n    if (plugins) {\n      plugins.forEach(plugin => {\n        if (isToolMenuIntegration(plugin.integration)) {\n          const {\n            key,\n            wrappedComponent: WrappedPluginComponent,\n            integration: {\n              placement,\n              label = 'Plugin',\n              insertionIndex,\n              icon,\n              ...passThroughProps\n            }\n          } = plugin;\n\n          panels.splice(insertionIndex || 0, 0, (\n            <Panel\n              header={\n                <>\n                  {icon ? <FontAwesomeIcon icon={icon} /> : undefined}\n                  <span>{t(label)}</span>\n                </>\n              }\n              key={key}\n              {...passThroughProps}\n            >\n              <WrappedPluginComponent />\n            </Panel>\n          ));\n        }\n      });\n    }\n    return panels;\n  };\n\n  const activeUploadTools = useAppSelector(state => state.layerTree.activeUploadTools);\n\n  const getToolPanelConfig = (tool: string): ToolPanelConfig | undefined => {\n    switch (tool) {\n      case 'measure_tools':\n        return {\n          icon: faRuler,\n          title: t('ToolMenu.measure'),\n          wrappedComponent: (\n            <Measure\n              showMeasureDistance={\n                availableTools.includes('default') || availableTools.includes('measure_tools_distance')\n              }\n              showMeasureArea={availableTools.includes('default') || availableTools.includes('measure_tools_area')}\n            />\n          )\n        };\n      case 'draw_tools':\n        return {\n          icon: faPalette,\n          title: t('ToolMenu.draw'),\n          wrappedComponent: (\n            <Draw\n              showDrawPoint={availableTools.includes('default') || availableTools.includes('draw_tools_point')}\n              showDrawLine={availableTools.includes('default') || availableTools.includes('draw_tools_line')}\n              showDrawPolygon={availableTools.includes('default') || availableTools.includes('draw_tools_polygon')}\n              showDrawCircle={availableTools.includes('default') || availableTools.includes('draw_tools_circle')}\n              showDrawRectangle={availableTools.includes('default') || availableTools.includes('draw_tools_rectangle')}\n              showDrawAnnotation={\n                availableTools.includes('default') || availableTools.includes('draw_tools_annotation')\n              }\n              showModifyFeatures={availableTools.includes('default') || availableTools.includes('draw_tools_modify')}\n              showUploadFeatures={availableTools.includes('default') || availableTools.includes('draw_tools_upload')}\n              showDownloadFeatures={\n                availableTools.includes('default') || availableTools.includes('draw_tools_download')\n              }\n              showDeleteFeatures={availableTools.includes('default') || availableTools.includes('draw_tools_delete')}\n              showStyleFeatures={availableTools.includes('default') || availableTools.includes('draw_tools_style')}\n            />\n          )\n        };\n      case 'feature_info':\n        return {\n          icon: faCircleInfo,\n          title: t('ToolMenu.featureInfo'),\n          wrappedComponent: (\n            <FeatureInfo />\n          )\n        };\n      case 'print':\n        return {\n          icon: faFileDownload,\n          title: t('ToolMenu.print'),\n          wrappedComponent: map ? (\n            <PrintForm\n              active={activeKeys.includes('print')}\n              layerBlackList={[\n                'react-geo_measure',\n                'hoverVectorLayer'\n              ]}\n            />\n          ) : <></>\n        };\n      case 'tree':\n        return {\n          icon: faStream,\n          title: t('ToolMenu.layertree'),\n          wrappedComponent: (\n            <div className='tree-wrapper'>\n              <LayerTree />\n              {activeUploadTools?.includes(UploadTools.addWMS) && (\n                <Button\n                  className='add-wms-button tool-menu-button'\n                  icon={<FontAwesomeIcon icon={faPlus} />}\n                  onClick={() => dispatch(showAdd())}\n                >\n                  {t('ToolMenu.addWms')}\n                </Button>\n              )\n              }\n              {\n                keycloak && ClientConfiguration.geoserver?.upload?.authorizedRoles?.some(\n                  role => keycloak.hasResourceRole(role, keycloak.clientId)) &&\n                  activeUploadTools?.includes(UploadTools.dataUpload) && (\n                  <Button\n                    className='upload-data-button tool-menu-button'\n                    icon={<FontAwesomeIcon icon={faUpload} />}\n                    onClick={() => dispatch(showUpload())}\n                  >\n                    {t('ToolMenu.uploadData')}\n                  </Button>\n                )\n              }\n            </div>\n          )\n        };\n      case 'permalink':\n        return {\n          icon: faShareNodes,\n          title: t('Permalink.title'),\n          wrappedComponent: <Permalink />\n        };\n      case 'language_selector':\n        return {\n          icon: faLanguage,\n          title: t('ToolMenu.languageSelect'),\n          wrappedComponent: <LanguageSelect />\n        };\n      default:\n        break;\n    }\n  };\n\n  const onMouseDown = useCallback(() => {\n    setIsResizing(true);\n  }, []);\n\n  const onMouseUp = useCallback(() => {\n    setIsResizing(false);\n  }, []);\n\n  const onMouseMove = useCallback((e: MouseEvent) => {\n    if (isResizing && !collapsed) {\n      let offsetLeft = (e.clientX - document.body.offsetLeft);\n      if (offsetLeft > minWidth && offsetLeft < maxWidth) {\n        setWidth(offsetLeft);\n        setNoCollapseWidth(offsetLeft);\n      }\n    }\n  }, [isResizing, collapsed, minWidth, maxWidth]);\n\n  useEffect(() => {\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [onMouseMove, onMouseUp]);\n\n  return (\n    <div\n      aria-label=\"tool-menu\"\n      className={`tool-menu ${collapsed ? 'collapsed' : ''}`}\n      style={{width: width} as React.CSSProperties}\n    >\n      <Collapse\n        expandIconPosition='end'\n        activeKey={activeKeys}\n        destroyInactivePanel={true}\n        onChange={(keys: string[] | string) => {\n          setCollapsed(false);\n          dispatch(setActiveKeys(_toArray(keys)));\n          if (collapsed) {\n            setWidth(noCollapseWidth);\n          }\n        }}\n        {...restProps}\n      >\n        {getToolPanels()}\n      </Collapse>\n      <Tooltip\n        placement={'right'}\n        title={collapsed ? t('ToolMenu.expand') : t('ToolMenu.collapse')}\n      >\n        <Button\n          className=\"collapse-btn\"\n          aria-label=\"collapse-button\"\n          icon={\n            collapsed ?\n              <FontAwesomeIcon icon={faChevronRight} /> :\n              <FontAwesomeIcon icon={faChevronLeft} />\n          }\n          onClick={() => {\n            dispatch(setActiveKeys([]));\n            setCollapsed(!collapsed);\n            if (collapsed){\n              setWidth(noCollapseWidth);\n            } else {\n              setWidth(collapseWidth);\n            }\n          }}\n        />\n      </Tooltip>\n      {!collapsed ? (\n        <div\n          className =\"dynamicWidth\"\n          onMouseDown={onMouseDown}\n        />\n      ) : <></>}\n    </div>\n  );\n};\n\nexport default ToolMenu;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useState\n} from 'react';\n\nimport {\n  faUpload\n} from '@fortawesome/free-solid-svg-icons';\nimport {\n  FontAwesomeIcon\n} from '@fortawesome/react-fontawesome';\n\nimport {\n  Alert,\n  Modal,\n  ModalProps,\n  Spin,\n  Upload\n} from 'antd';\n\nconst { Dragger } = Upload;\n\nimport {\n  RcFile,\n  UploadChangeParam,\n  UploadFile\n} from 'antd/lib/upload/interface';\n\nimport ClientConfiguration from 'clientConfig';\n\nimport OlLayerGroup from 'ol/layer/Group';\nimport TileLayer from 'ol/layer/Tile';\nimport TileWMSSource from 'ol/source/TileWMS';\n\nimport {\n  UploadRequestOption\n} from 'rc-upload/lib/interface';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport {\n  Shapefile\n} from 'shapefile.js';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport Layer from '@terrestris/shogun-util/dist/model/Layer';\nimport SHOGunApplicationUtil from '@terrestris/shogun-util/dist/parser/SHOGunApplicationUtil';\nimport {\n  getBearerTokenHeader\n} from '@terrestris/shogun-util/dist/security/getBearerTokenHeader';\n\nimport useAppDispatch from '../../hooks/useAppDispatch';\nimport useAppSelector from '../../hooks/useAppSelector';\nimport useSHOGunAPIClient from '../../hooks/useSHOGunAPIClient';\nimport {\n  hide\n} from '../../store/uploadDataModal';\n\nimport './index.less';\n\ntype FeatureTypeAttribute = {\n  name: string;\n  minOccurs: number;\n  maxOccurs: number;\n  nillable: boolean;\n  binding?: string | null;\n  length?: number;\n};\n\ntype FeatureTypeAttributes = {\n  attribute: FeatureTypeAttribute[];\n};\n\nexport type LayerUploadOptions = {\n  baseUrl: string;\n  workspace: string;\n  storeName: string;\n  layerName: string;\n  file: RcFile;\n};\n\nexport type LayerUploadResponse = {\n  layerName: string;\n  workspace: string;\n  baseUrl: string;\n};\n\nexport type UploadDataModalProps = Partial<ModalProps>;\n\nexport const UploadDataModal: React.FC<UploadDataModalProps> = ({\n  ...restProps\n}): JSX.Element => {\n  const [uploadError, setUploadError] = useState('');\n  const [uploadSuccess, setUploadSuccess] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n\n  const isModalVisible = useAppSelector(state => state.uploadDataModal.visible);\n  const user = useAppSelector((state) => state.user);\n\n  const dispatch = useAppDispatch();\n\n  const map = useMap();\n  const client = useSHOGunAPIClient();\n\n  const {\n    t\n  } = useTranslation();\n\n  const closeModal = () => {\n    setUploadError('');\n    setUploadSuccess('');\n    dispatch(hide());\n  };\n\n  const addLayer = (layer: TileLayer<TileWMSSource>) => {\n    if (!map) {\n      return;\n    }\n\n    const targetFolderName = t('UploadDataModal.uploadedDataFolder');\n    let targetGroup = MapUtil.getLayerByName(map, targetFolderName) as OlLayerGroup;\n\n    if (!targetGroup) {\n      targetGroup = new OlLayerGroup({\n        layers: [],\n        properties: {\n          name: targetFolderName\n        }\n      });\n      const existingGroups = map.getLayerGroup().getLayers();\n      existingGroups.insertAt(existingGroups?.getLength() || 0, targetGroup);\n    }\n\n    if (!targetGroup.getLayers().getArray().includes(layer)) {\n      targetGroup.getLayers().push(layer);\n    }\n  };\n\n  const onBeforeFileUpload = (file: RcFile) => {\n    const maxSize = ClientConfiguration.geoserver?.upload?.limit || 200000000;\n    const fileType = file.type;\n    const fileSize = file.size;\n\n    setUploadError('');\n    setUploadSuccess('');\n\n    if (fileSize > maxSize) {\n      setUploadError(t('UploadDataModal.error.maxSize', {\n        maxSize: maxSize / 1000000\n      }));\n\n      return false;\n    }\n\n    const supportedFormats = ['application/zip', 'image/tiff'];\n    if (!supportedFormats.includes(fileType)) {\n      setUploadError(t('UploadDataModal.error.supportedFormats', {\n        supportedFormats: supportedFormats.join(', ')\n      }));\n\n      return false;\n    }\n\n    return true;\n  };\n\n  const uploadGeoTiff = async (options: LayerUploadOptions): Promise<void> => {\n    const {\n      baseUrl,\n      workspace,\n      storeName,\n      layerName,\n      file\n    } = options;\n\n    const coverageStoreUrl = `${baseUrl}/rest/workspaces/${workspace}/coveragestores/` +\n      `${storeName}/file.geotiff?configure=none`;\n\n    const coverageStoreResponse = await fetch(coverageStoreUrl, {\n      method: 'PUT',\n      headers: {\n        ...getBearerTokenHeader(client?.getKeycloak()),\n        'Content-Type': 'image/tiff'\n      },\n      body: file\n    });\n\n    if (!coverageStoreResponse.ok) {\n      throw new Error(t('UploadDataModal.error.general', {\n        fileName: file.name\n      }));\n    }\n\n    const coverageUrl = `${baseUrl}/rest/workspaces/${workspace}/coveragestores/${storeName}/coverages`;\n\n    const coverageResponse = await fetch(coverageUrl, {\n      method: 'POST',\n      headers: {\n        ...getBearerTokenHeader(client?.getKeycloak()),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        coverage: {\n          enabled: true,\n          name: layerName,\n          nativeName: layerName,\n          title: layerName,\n          keywords: {\n            // eslint-disable-next-line quote-props\n            'string': [\n              'User upload',\n              `Uploaded by ${user.providerDetails?.username}`\n            ]\n          }\n        }\n      })\n    });\n\n    if (!coverageResponse.ok) {\n      throw new Error(t('UploadDataModal.error.general', {\n        fileName: file.name\n      }));\n    }\n  };\n\n  const uploadShapeZip = async (options: LayerUploadOptions): Promise<void> => {\n    const {\n      baseUrl,\n      workspace,\n      storeName,\n      layerName,\n      file\n    } = options;\n\n    const shp = await Shapefile.load(file);\n\n    let featureTypeName = '';\n    let featureTypeAttributes: FeatureTypeAttributes = {\n      attribute: []\n    };\n\n    if (Object.entries(shp).length !== 1) {\n      throw new Error(t('UploadDataModal.error.zipContent'));\n    }\n\n    Object.entries(shp).forEach(([k, v]) => {\n      featureTypeName = k;\n\n      const dbfContent = v.parse('dbf', {\n        properties: false\n      });\n\n      featureTypeAttributes.attribute = dbfContent.fields.map(field => ({\n        name: field.name,\n        minOccurs: 0,\n        maxOccurs: 1,\n        nillable: true,\n        binding: getAttributeType(field.type),\n        length: field.length\n      }));\n\n      const shxContent = v.parse('shx');\n\n      featureTypeAttributes.attribute.push({\n        name: 'the_geom',\n        minOccurs: 0,\n        maxOccurs: 1,\n        nillable: true,\n        binding: getGeometryType(shxContent.header.type)\n      });\n    });\n\n    const url = `${baseUrl}/rest/workspaces/${workspace}/datastores/` +\n      `${storeName}/file.shp?configure=none`;\n\n    const response = await fetch(url, {\n      method: 'PUT',\n      headers: {\n        ...getBearerTokenHeader(client?.getKeycloak()),\n        'Content-Type': 'application/zip'\n      },\n      body: file\n    });\n\n    if (!response.ok) {\n      throw new Error(t('UploadDataModal.error.general', {\n        fileName: file.name\n      }));\n    }\n\n    const featureTypeUrl = `${baseUrl}/rest/workspaces/${workspace}/datastores/${storeName}/featuretypes`;\n\n    const featureTypeResponse = await fetch(featureTypeUrl, {\n      method: 'POST',\n      headers: {\n        ...getBearerTokenHeader(client?.getKeycloak()),\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        featureType: {\n          enabled: true,\n          name: layerName,\n          nativeName: featureTypeName,\n          title: layerName,\n          attributes: featureTypeAttributes,\n          keywords: {\n            // eslint-disable-next-line quote-props\n            'string': [\n              'User upload',\n              `Uploaded by ${user.providerDetails?.username}`\n            ]\n          }\n        }\n      })\n    });\n\n    if (!featureTypeResponse.ok) {\n      throw new Error(t('UploadDataModal.error.general', {\n        fileName: file.name\n      }));\n    }\n  };\n\n  const onFileUploadAction = async (options: UploadRequestOption<LayerUploadResponse>) => {\n    const {\n      onError,\n      onSuccess,\n      file\n    } = options;\n\n    const splittedFileName = (file as RcFile).name.split('.');\n    const fileType = (file as RcFile).type;\n    const geoServerBaseUrl = ClientConfiguration.geoserver?.base || '/geoserver';\n    const workspace = ClientConfiguration.geoserver?.upload?.workspace || 'SHOGUN';\n    const layerName = `${splittedFileName[0]}_${Date.now()}`.toUpperCase();\n\n    const uploadData = {\n      file: file as RcFile,\n      baseUrl: geoServerBaseUrl,\n      workspace: workspace,\n      storeName: layerName,\n      layerName: layerName\n    };\n\n    try {\n      if (fileType === 'image/tiff') {\n        await uploadGeoTiff(uploadData);\n      }\n\n      if (fileType === 'application/zip') {\n        await uploadShapeZip(uploadData);\n      }\n\n      if (onSuccess) {\n        onSuccess({\n          baseUrl: geoServerBaseUrl,\n          workspace: workspace,\n          layerName: layerName\n        });\n      }\n    } catch (error) {\n      if (onError) {\n        onError({\n          name: 'UploadError',\n          message: (error instanceof Error) ? error.message : t('UploadDataModal.error.general', {\n            fileName: (file as RcFile).name\n          })\n        });\n      }\n    }\n  };\n\n  const onFileUploadChange = async (info: UploadChangeParam<UploadFile<LayerUploadResponse>>) => {\n    const file = info.file;\n\n    if (file.status === 'uploading') {\n      setIsUploading(true);\n    }\n\n    if (file.status === 'done') {\n      if (!client || !file.response) {\n        return;\n      }\n\n      const layerConfig: Layer = {\n        name: file.response.layerName,\n        type: 'TILEWMS',\n        clientConfig: {\n          hoverable: true\n        },\n        sourceConfig: {\n          url: `${file.response.baseUrl}/ows?`,\n          layerNames: `${file.response.workspace}:${file.response.layerName}`,\n          useBearerToken: true\n        }\n      };\n\n      const parser = new SHOGunApplicationUtil({\n        client\n      });\n\n      const olLayer = parser.parseTileLayer(layerConfig);\n      olLayer.set('layerConfig', layerConfig);\n      olLayer.set('isUploadedLayer', true);\n      olLayer.set('groupName', t('UploadDataModal.uploadedDataFolder'));\n      addLayer(olLayer);\n\n      setUploadSuccess(t('UploadDataModal.success', {\n        fileName: file.name,\n        layerName: file.response.layerName\n      }));\n\n      setIsUploading(false);\n    } else if (file.status === 'error') {\n      setIsUploading(false);\n\n      Logger.error(file.error);\n\n      if (file.error && file.error.message) {\n        setUploadError(file.error.message);\n      } else {\n        setUploadError(t('UploadDataModal.error.general', {\n          fileName: file.name\n        }));\n      }\n    }\n  };\n\n  const getGeometryType = (type: number) => {\n    const types: {\n      [key: number]: string | null;\n    } = {\n      0: null, // Null\n      1: 'org.locationtech.jts.geom.Point', // Point\n      3: 'org.locationtech.jts.geom.LineString', // Polyline\n      5: 'org.locationtech.jts.geom.Polygon', // Polygon\n      8: 'org.locationtech.jts.geom.MultiPoint', // MultiPoint\n      11: 'org.locationtech.jts.geom.Point', // PointZ\n      13: 'org.locationtech.jts.geom.LineString', // PolylineZ\n      15: 'org.locationtech.jts.geom.Polygon', // PolygonZ\n      18: 'org.locationtech.jts.geom.MultiPoint', // MultiPointZ\n      21: 'org.locationtech.jts.geom.Point', // PointM\n      23: 'org.locationtech.jts.geom.LineString', // PolylineM\n      25: 'org.locationtech.jts.geom.Polygon', // PolygonM\n      28: 'org.locationtech.jts.geom.MultiPoint', // MultiPointM\n      31: null // MultiPatch\n    };\n\n    return types[type];\n  };\n\n  const getAttributeType = (dbfFieldType: string) => {\n    switch (dbfFieldType) {\n      case 'C': // Character\n        return 'java.lang.String';\n      case 'D': // Date\n        return 'java.util.Date';\n      case 'N': // Numeric\n        return 'java.lang.Long';\n      case 'F': // Floating point\n        return 'java.lang.Double';\n      case 'L': // Logical\n        return 'java.lang.Boolean';\n      case 'M': // Memo\n        return null;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Modal\n      className=\"upload-data-modal\"\n      title={t('UploadDataModal.title')}\n      open={isModalVisible}\n      onCancel={closeModal}\n      width={600}\n      footer={false}\n      {...restProps}\n    >\n      {\n        uploadSuccess && (\n          <Alert\n            message={uploadSuccess}\n            closable={true}\n            type=\"success\"\n          />\n        )\n      }\n\n      {\n        uploadError && (\n          <Alert\n            message={uploadError}\n            closable={true}\n            type=\"error\"\n          />\n        )\n      }\n\n      <Spin\n        spinning={isUploading}\n      >\n        <Dragger\n          customRequest={onFileUploadAction}\n          accept='image/tiff,application/zip'\n          maxCount={1}\n          showUploadList={false}\n          beforeUpload={onBeforeFileUpload}\n          onChange={onFileUploadChange}\n        >\n          <p className=\"ant-upload-drag-icon\">\n            <FontAwesomeIcon\n              icon={faUpload}\n            />\n          </p>\n          <p className=\"ant-upload-text\">\n            {t('UploadDataModal.description')}\n          </p>\n          <p className=\"ant-upload-hint\">\n            {t('UploadDataModal.hint')}\n          </p>\n        </Dragger>\n      </Spin>\n    </Modal>\n  );\n};\n\nexport default UploadDataModal;\n","import _isEmpty from 'lodash/isEmpty';\n\nimport BaseLayer from 'ol/layer/Base';\nimport OlLayerGroup from 'ol/layer/Group';\n\nimport OlLayerImage from 'ol/layer/Image';\nimport OlLayerTile from 'ol/layer/Tile';\n\nimport {\n  useTranslation\n} from 'react-i18next';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\n\nimport MapUtil from '@terrestris/ol-util/dist/MapUtil/MapUtil';\nimport PermalinkUtil from '@terrestris/ol-util/dist/PermalinkUtil/PermalinkUtil';\n\nimport {\n  useMap\n} from '@terrestris/react-geo/dist/Hook/useMap';\n\nimport Layer from '@terrestris/shogun-util/dist/model/Layer';\nimport SHOGunApplicationUtil from '@terrestris/shogun-util/dist/parser/SHOGunApplicationUtil';\n\nimport useQueryParams from './useQueryParams';\nimport useSHOGunAPIClient from './useSHOGunAPIClient';\n\nexport const useRestoreTransientLayers = async () => {\n  const map = useMap();\n  const client = useSHOGunAPIClient();\n  const queryParams = useQueryParams();\n  const {\n    t\n  } = useTranslation();\n\n  const layers = queryParams.get('layers');\n\n  if (!map) {\n    return;\n  }\n\n  const identifier = (l: BaseLayer) => l.get('name');\n  const filter = (l: BaseLayer) => (l instanceof OlLayerTile || l instanceof OlLayerImage);\n  const configString = PermalinkUtil.applyLink(map, ';', identifier, filter);\n\n  if (!configString) {\n    return;\n  }\n\n  const addLayerGroup = (name: string) => {\n    const layerGroup = new OlLayerGroup({\n      layers: []\n    });\n    layerGroup.set('name', name);\n    const existingGroups = map.getLayerGroup().getLayers();\n    existingGroups.insertAt(existingGroups?.getLength() || 0, layerGroup);\n\n    return layerGroup;\n  };\n\n  try {\n    const config = JSON.parse(configString);\n\n    if (!client) {\n      throw new Error('Client is not available');\n    }\n\n    const parser = new SHOGunApplicationUtil({\n      client\n    });\n\n    for (let i = 0; i < config.length; i++) {\n      const cfg = config[i];\n      if (!_isEmpty(cfg?.layerConfig)) {\n        const layerConfig: Layer = cfg.layerConfig;\n        const olLayer = await parser.parseLayer(layerConfig);\n\n        if (!olLayer) {\n          continue;\n        }\n\n        if (cfg.isExternalLayer) {\n          olLayer.set('isExternalLayer', cfg.isExternalLayer);\n        }\n\n        if (cfg.isUploadedLayer) {\n          olLayer.set('isUploadedLayer', cfg.isUploadedLayer);\n        }\n\n        olLayer.set('groupName', cfg.groupName);\n        olLayer.set('layerConfig', cfg.layerConfig);\n\n        olLayer.setVisible(!!layers?.split(';').some(l => l === layerConfig.name));\n\n        if (!(olLayer.get('isExternalLayer') || olLayer.get('isUploadedLayer'))) {\n          continue;\n        }\n\n        let targetGroup: OlLayerGroup;\n\n        if (olLayer.get('groupName')) {\n          // handle custom layer group\n          targetGroup = MapUtil.getLayerByName(map, olLayer.get('groupName')) as OlLayerGroup;\n\n          if (!targetGroup) {\n            targetGroup = addLayerGroup(olLayer.get('groupName'));\n          }\n        } else {\n          // handle default layer group for external layers (external and uploaded layers)\n          targetGroup = MapUtil.getLayersByProperty(map, 'isExternalLayerGroup', true)?.[0] as OlLayerGroup;\n          if (!targetGroup) {\n            targetGroup = addLayerGroup(t('AddLayerModal.externalWmsFolder'));\n            targetGroup.set('isExternalLayerGroup', true);\n          }\n        }\n\n        if (!MapUtil.getLayerByName(map, olLayer.get('name'))) {\n          targetGroup.getLayers().push(olLayer);\n        }\n      }\n    }\n  } catch (error) {\n    Logger.error(error);\n  }\n};\n\nexport default useRestoreTransientLayers;\n","import React from 'react';\n\nexport default function useQueryParams() {\n  const {\n    search\n  } = window.location;\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./App.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./App.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, {\n  useEffect\n} from 'react';\n\nimport AddLayerModal from './components/AddLayerModal/index';\nimport BasicMapComponent from './components/BasicMapComponent';\nimport CookieBanner from './components/CookieBanner';\nimport EditFeatureDrawer from './components/EditFeatureDrawer';\nimport Footer from './components/Footer';\nimport Header from './components/Header';\nimport LayerDetailsModal from './components/LayerDetailsModal';\nimport StylingDrawer from './components/StylingDrawer';\nimport ToolMenu from './components/ToolMenu';\nimport UploadDataModal from './components/UploadDataModal';\n\nimport useRestoreTransientLayers from './hooks/useRestoreTransientLayers';\n\nimport './App.less';\n\nexport interface AppProps extends React.ComponentProps<'div'> {}\n\nexport const App: React.FC<AppProps> = ({\n  ...restProps\n}): JSX.Element => {\n\n  useRestoreTransientLayers();\n\n  useEffect(() => {\n    const loadingMask = document.querySelectorAll('.loadmask')[0];\n\n    if (loadingMask) {\n      loadingMask.classList.add('loadmask-hidden');\n    }\n  }, []);\n\n  return (\n    <div\n      className=\"App\"\n      {...restProps}\n    >\n      <Header />\n      <BasicMapComponent />\n      <ToolMenu />\n      <Footer />\n      <CookieBanner />\n      <AddLayerModal />\n      <UploadDataModal />\n      <EditFeatureDrawer />\n      <LayerDetailsModal />\n      <StylingDrawer />\n    </div>\n  );\n};\n\nexport default App;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nimport {\n  AppInfo\n} from '@terrestris/shogun-util/dist/model/AppInfo';\n\nconst initialState: AppInfo = {\n  authorities: [],\n  buildTime: '',\n  commitHash: '',\n  userId: -1,\n  version: ''\n};\n\nexport const slice = createSlice({\n  name: 'appInfo',\n  initialState,\n  reducers: {\n    setAppInfo(state, action: PayloadAction<AppInfo>) {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setAppInfo\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nconst initialState: string = '';\n\nexport const slice = createSlice({\n  name: 'description',\n  initialState,\n  reducers: {\n    setDescription: (state, action: PayloadAction<string>) => {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setDescription\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice, PayloadAction\n} from '@reduxjs/toolkit';\n\nexport type Legal = {\n  contact?: string;\n  imprint?: string;\n  privacy?: string;\n};\n\nconst initialState: Legal = {\n  contact: 'https://www.terrestris.de/de/kontakt/',\n  imprint: 'https://www.terrestris.de/de/impressum/',\n  privacy: 'https://www.terrestris.de/de/datenschutzerklaerung/'\n};\n\nexport const slice = createSlice({\n  name: 'legal',\n  initialState,\n  reducers: {\n    setLegal: (state, action: PayloadAction<Legal>) => {\n      return {\n        contact: action.payload.contact || initialState.contact,\n        imprint: action.payload.imprint || initialState.imprint,\n        privacy: action.payload.privacy || initialState.privacy\n      };\n    }\n  }\n});\n\nexport const { setLegal } = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nconst initialState: string = './shogun_logo.png';\n\nexport const slice = createSlice({\n  name: 'logoPath',\n  initialState,\n  reducers: {\n    setLogoPath: (state, action: PayloadAction<string>) => {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setLogoPath\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nconst initialState: string[] = ['nominatim'];\n\nexport const slice = createSlice({\n  name: 'searchEngines',\n  initialState,\n  reducers: {\n    setSearchEngines: (state, action: PayloadAction<string[]>) => {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setSearchEngines\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nconst initialState: string = 'SHOGun Client';\n\nexport const slice = createSlice({\n  name: 'title',\n  initialState,\n  reducers: {\n    setTitle: (state, action: PayloadAction<string>) => {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setTitle\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nimport User from '@terrestris/shogun-util/dist/model/User';\n\nconst initialState: User = { };\n\nexport const slice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setUser(state, action: PayloadAction<User>) {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setUser\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  Action,\n  combineReducers,\n  configureStore,\n  createDynamicMiddleware,\n  Reducer,\n  ThunkDispatch\n} from '@reduxjs/toolkit';\n\nimport addLayerModal from './addLayerModal';\nimport appInfo from './appInfo';\nimport description from './description';\nimport editFeature from './editFeature';\nimport editFeatureDrawerOpen from './editFeatureDrawerOpen';\nimport featureInfo from './featureInfo';\nimport layerDetailsModal from './layerDetailsModal';\nimport layerTree from './layerTree';\nimport legal from './legal';\nimport logoPath from './logoPath';\nimport print from './print';\nimport searchEngines from './searchEngines';\nimport selectedFeatures from './selectedFeatures';\nimport stylingDrawerVisibility from './stylingDrawerVisibility';\nimport title from './title';\nimport toolMenu from './toolMenu';\nimport uploadDataModal from './uploadDataModal';\nimport user from './user';\n\ntype AsyncReducer = {\n  [key: string]: Reducer;\n};\n\nexport const dynamicMiddleware = createDynamicMiddleware();\n\nexport const createReducer = (asyncReducers?: AsyncReducer) => {\n  return combineReducers({\n    addLayerModal,\n    appInfo,\n    description,\n    editFeature,\n    editFeatureDrawerOpen,\n    featureInfo,\n    layerDetailsModal,\n    layerTree,\n    legal,\n    logoPath,\n    print,\n    selectedFeatures,\n    title,\n    toolMenu,\n    uploadDataModal,\n    searchEngines,\n    user,\n    stylingDrawerVisibility,\n    ...asyncReducers\n  });\n};\n\nexport const store = configureStore({\n  reducer: createReducer(),\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().prepend(dynamicMiddleware.middleware)\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch & ThunkDispatch<RootState, undefined, Action>;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[2].use[2]!../node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[4].use[2]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\n\nimport {\n  loader\n} from '@monaco-editor/react';\n\nimport {\n  Alert,\n  AlertProps,\n  ConfigProvider,\n  notification\n} from 'antd';\n\nimport csCZ from 'antd/lib/locale/cs_CZ';\nimport deDE from 'antd/lib/locale/de_DE';\nimport enGB from 'antd/lib/locale/en_GB';\nimport plPl from 'antd/lib/locale/pl_PL';\n\nimport ClientConfiguration, {\n  FeatureEditConfiguration\n} from 'clientConfig';\n\nimport Color from 'color';\n\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\nimport Keycloak from 'keycloak-js';\n\nimport {\n  defaults as OlControlDefaults\n} from 'ol/control';\nimport OlLayerGroup from 'ol/layer/Group';\nimport OlLayerTile from 'ol/layer/Tile';\nimport OlMap from 'ol/Map';\nimport {\n  fromLonLat\n} from 'ol/proj';\nimport OlSourceOsm from 'ol/source/OSM';\nimport OlSourceTileWMS from 'ol/source/TileWMS';\nimport OlView from 'ol/View';\n\nimport {\n  render\n} from 'react-dom';\n\nimport {\n  Provider\n} from 'react-redux';\n\nimport Logger from '@terrestris/base-util/dist/Logger';\nimport UrlUtil from '@terrestris/base-util/dist/UrlUtil/UrlUtil';\n\nimport MapContext from '@terrestris/react-geo/dist/Context/MapContext/MapContext';\n\nimport {\n  AppInfo\n} from '@terrestris/shogun-util/dist/model/AppInfo';\nimport Application, {\n  DefaultApplicationTheme,\n  DefaultApplicationToolConfig\n} from '@terrestris/shogun-util/dist/model/Application';\nimport User from '@terrestris/shogun-util/dist/model/User';\nimport SHOGunApplicationUtil from '@terrestris/shogun-util/dist/parser/SHOGunApplicationUtil';\nimport SHOGunAPIClient from '@terrestris/shogun-util/dist/service/SHOGunAPIClient';\n\nconst App = React.lazy(() => import('./App'));\n\nimport {\n  PluginProvider\n} from './context/PluginContext';\nimport {\n  SHOGunAPIClientProvider\n} from './context/SHOGunAPIClientContext';\n\nimport i18n, {\n  initOpts\n} from './i18n';\n\nimport {\n  ClientPluginInternal\n} from './plugin';\n\nimport {\n  setAppInfo\n} from './store/appInfo';\nimport {\n  setDescription\n} from './store/description';\nimport {\n  setUserEditMode,\n  EditLevel\n} from './store/editFeature';\nimport { setFeatureInfoActiveCopyTools } from './store/featureInfo';\nimport {\n  setLayerTreeActiveUploadTools,\n  setLayerTreeShowLegends\n} from './store/layerTree';\nimport {\n  setLegal\n} from './store/legal';\nimport {\n  setLogoPath\n} from './store/logoPath';\nimport { setPrintApp } from './store/print';\nimport {\n  setSearchEngines\n} from './store/searchEngines';\nimport {\n  createReducer, dynamicMiddleware,\n  store\n} from './store/store';\nimport {\n  setTitle\n} from './store/title';\nimport {\n  setAvailableTools\n} from './store/toolMenu';\nimport {\n  setUser\n} from './store/user';\n\nimport './index.less';\n\n// TODO: extend antd properties too\nexport interface ThemeProperties extends React.CSSProperties {\n  '--primaryColor'?: string;\n  '--secondaryColor'?: string;\n  '--complementaryColor'?: string;\n}\n\n// eslint-disable-next-line no-shadow\nenum LoadingErrorCode {\n  APP_ID_NOT_SET = 'APP_ID_NOT_SET',\n  APP_CONFIG_NOT_FOUND = 'APP_CONFIG_NOT_FOUND',\n  APP_UNAUTHORIZED = 'APP_UNAUTHORIZED',\n  APP_CONFIG_STATIC_NOT_FOUND = 'APP_CONFIG_STATIC_NOT_FOUND'\n}\n\nconst client = ClientConfiguration.shogunBase !== false ? new SHOGunAPIClient({\n  url: ClientConfiguration.shogunBase || '/'\n}) : undefined;\n\nconst parser = new SHOGunApplicationUtil({\n  client\n});\n\nconst getConfigLang = (lang: string) => {\n  switch (lang) {\n    case 'en':\n      return enGB;\n    case 'de':\n      return deDE;\n    case 'pl':\n      return plPl;\n    case 'cz':\n      return csCZ;\n    default:\n      return enGB;\n  }\n};\n\nconst getApplicationConfiguration = async (shogunClient: SHOGunAPIClient, applicationId: number) => {\n  try {\n    Logger.info(`Loading application with ID ${applicationId}`);\n\n    const application = await shogunClient.application().findOne(applicationId);\n\n    Logger.info(`Successfully loaded application with ID ${applicationId}`);\n\n    return application;\n  } catch (error) {\n    if ((error as Error).message.indexOf('401') > -1) {\n      throw new Error(LoadingErrorCode.APP_UNAUTHORIZED);\n    }\n    Logger.error(`Error while loading application with ID ${applicationId}: ${error}`);\n  }\n};\n\nconst getStaticApplicationConfiguration = async (staticAppContextUrl: string) => {\n  try {\n    Logger.info('Loading static application');\n\n    const response = await fetch(staticAppContextUrl);\n\n    if (!response.ok) {\n      throw new Error(`HTTP error status: ${response.status}`);\n    }\n\n    const application = await response.json();\n\n    Logger.info('Successfully loaded static application');\n\n    return application;\n  } catch (error) {\n    if ((error as Error).message.indexOf('401') > -1) {\n      throw new Error(LoadingErrorCode.APP_UNAUTHORIZED);\n    }\n    Logger.error(`Error while loading static application: ${error}`);\n  }\n};\n\nconst getApplicationInfo = async (shogunClient: SHOGunAPIClient) => {\n  try {\n    Logger.info('Loading application info');\n\n    const appInfo = await shogunClient.info().getAppInfo();\n\n    Logger.info('Successfully loaded application info');\n\n    return appInfo;\n  } catch (error) {\n    Logger.error('Error while loading application info: ', error);\n  }\n};\n\nconst getUser = async (shogunClient: SHOGunAPIClient, userId?: number) => {\n  if (!userId) {\n    Logger.info('No user ID given, can\\'t load it\\'s details.');\n    return;\n  }\n\n  try {\n    Logger.info(`Loading user with ID ${userId}`);\n\n    const user = await shogunClient.user().findOne(userId);\n\n    Logger.info(`Successfully loaded user with ID ${userId}`);\n\n    return user;\n  } catch (error) {\n    Logger.error(`Error while loading user with ID ${userId}: `, error);\n  }\n};\n\nconst setApplicationToStore = async (application?: Application) => {\n  if (!application) {\n    Logger.info('No application configuration provided, the default store will be loaded');\n\n    return;\n  }\n\n  if (application.name) {\n    store.dispatch(setTitle(application.name));\n  }\n\n  if (application.clientConfig?.description) {\n    store.dispatch(setDescription(application.clientConfig?.description));\n  }\n\n  if (application.clientConfig?.legal) {\n    store.dispatch(setLegal(application.clientConfig.legal));\n  }\n\n  if (application?.clientConfig?.theme?.logoPath) {\n    store.dispatch(setLogoPath(application.clientConfig.theme.logoPath));\n  }\n\n  // nominatim search is active by default\n  store.dispatch(setSearchEngines(['nominatim']));\n\n  if (application.toolConfig && application.toolConfig.length > 0) {\n    const availableTools: string[] = [];\n    application.toolConfig\n      .forEach((tool: DefaultApplicationToolConfig) => {\n        if (tool.config.visible && tool.name !== 'search') {\n          availableTools.push(tool.name);\n        }\n        if (tool.name === 'search' && tool.config.engines.length > 0) {\n          store.dispatch(setSearchEngines(tool.config.engines));\n        }\n        if (tool.name === 'feature_info' && Array.isArray(tool.config.activeCopyTools)) {\n          store.dispatch(setFeatureInfoActiveCopyTools(tool.config.activeCopyTools));\n        }\n        if (tool.name === 'tree' && Array.isArray(tool.config.uploadTools)) {\n          store.dispatch(setLayerTreeActiveUploadTools(tool.config.uploadTools));\n        }\n        if (tool.name === 'tree' && tool.config.showLegends) {\n          store.dispatch(setLayerTreeShowLegends(tool.config.showLegends));\n        }\n      });\n    store.dispatch(setAvailableTools(availableTools));\n  }\n};\n\nconst setAppInfoToStore = async (appInfo?: AppInfo) => {\n  if (!appInfo) {\n    return;\n  }\n\n  store.dispatch(setAppInfo(appInfo));\n};\n\nconst setUserToStore = async (user?: User) => {\n  if (!user) {\n    return;\n  }\n\n  store.dispatch(setUser(user));\n};\n\nconst setLoadingImage = (id: number, path = './shogun_spinner.gif') => {\n  const loadingImageElement = document.getElementById('loadmask-image') as HTMLImageElement;\n  if (!loadingImageElement) {\n    return;\n  }\n  loadingImageElement.src = path;\n  localStorage.setItem(`SHOGun_Logo_Path_${id}`, path);\n};\n\nconst initKeycloak = async () => {\n  const keycloakEnabled = ClientConfiguration.keycloak?.enabled;\n  const keycloakOnLoad = ClientConfiguration.keycloak?.onLoadAction;\n  const keycloakHost = ClientConfiguration.keycloak?.host;\n  const keycloakRealm = ClientConfiguration.keycloak?.realm;\n  const keycloakClientId = ClientConfiguration.keycloak?.clientId;\n\n  if (!keycloakEnabled) {\n    return undefined;\n  }\n\n  if (!keycloakHost) {\n    throw new Error('Neither config key keycloak.host nor environment KEYCLOAK_HOST is set');\n  }\n\n  if (!keycloakRealm) {\n    throw new Error('Neither config key keycloak.realm nor environment KEYCLOAK_REALM is set');\n  }\n\n  if (!keycloakClientId) {\n    throw new Error('Neither config key keycloak.clientId nor environment KEYCLOAK_CLIENT_ID is set');\n  }\n\n  const keycloak = new Keycloak({\n    url: `${keycloakHost}`,\n    realm: keycloakRealm,\n    clientId: keycloakClientId\n  });\n\n  keycloak.onTokenExpired = async () => {\n    try {\n      await keycloak.updateToken(0);\n    } catch (error) {\n      Logger.error('Error while refreshing the access token: ', error);\n    }\n  };\n\n  await keycloak.init({\n    onLoad: keycloakOnLoad,\n    checkLoginIframe: false\n  });\n\n  return keycloak;\n};\n\nconst setApplicationTitle = () => {\n  store.subscribe(() => {\n    document.title = store.getState().title;\n  });\n};\n\nconst setupMap = async (application?: Application) => {\n  if (application) {\n    return await setupSHOGunMap(application);\n  }\n\n  Logger.info('No application configuration provided, the default map will be loaded');\n\n  return setupDefaultMap();\n};\n\nconst setupSHOGunMap = async (application: Application) => {\n  const view = await parser.parseMapView(application, {\n    constrainOnlyCenter: true\n  });\n\n  let extent;\n  const projection = application.clientConfig?.mapView.projection;\n  const mapView = application.clientConfig?.mapView;\n  if (projection && mapView?.extent && mapView.extent.length === 4) {\n    const ll = fromLonLat([mapView.extent[0], mapView.extent[1]], projection);\n    const ur = fromLonLat([mapView.extent[2], mapView.extent[3]], projection);\n    extent = [\n      ll[0],\n      ll[1],\n      ur[0],\n      ur[1]\n    ];\n  }\n  if (extent) {\n    view.set('extent', extent);\n  }\n\n  view.setConstrainResolution(true);\n\n  let layers;\n  if (!ClientConfiguration.layerConfigUrl) {\n    layers = await parser.parseLayerTree(application, projection);\n  } else {\n    const response = await fetch(ClientConfiguration.layerConfigUrl);\n    const layersConfig = await response.json();\n    layers = await parser.parseLayerTreeNodes(application, layersConfig, projection);\n  }\n\n  return new OlMap({\n    view,\n    layers,\n    controls: OlControlDefaults({\n      zoom: false\n    })\n  });\n};\n\n// TODO Make default/fallback app configurable?\nconst setupDefaultMap = () => {\n  const osmLayer = new OlLayerTile({\n    source: new OlSourceOsm()\n  });\n  osmLayer.set('name', 'OpenStreetMap');\n\n  const temperatureLayer = new OlLayerTile({\n    opacity: 0.5,\n    visible: true,\n    source: new OlSourceTileWMS({\n      url: 'https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi',\n      projection: 'EPSG:3857',\n      params: {\n        LAYERS: 'MERRA2_2m_Air_Temperature_Assimilated_Monthly'\n      }\n    })\n  });\n  temperatureLayer.setProperties({\n    name: '2-meter Air Temperature, Assimilated (Monthly, MERRA2)',\n    hoverable: true\n  });\n\n  const eoLayerGroup = new OlLayerGroup({\n    layers: [temperatureLayer]\n  });\n  eoLayerGroup.set('name', 'NASA Earth Observations');\n\n  const backgroundLayerGroup = new OlLayerGroup({\n    layers: [osmLayer]\n  });\n  backgroundLayerGroup.set('name', 'Background');\n\n  const center = fromLonLat([0, 40], 'EPSG:3857');\n\n  return new OlMap({\n    view: new OlView({\n      center: center,\n      zoom: 0\n    }),\n    layers: [backgroundLayerGroup, eoLayerGroup],\n    controls: OlControlDefaults({\n      zoom: false\n    })\n  });\n};\n\nconst parseTheme = (theme?: DefaultApplicationTheme): ThemeProperties => {\n  const style: ThemeProperties = {\n    '--primaryColor': '#59666C',\n    '--secondaryColor': '#70B3BE',\n    '--complementaryColor': '#FFFFFF'\n  };\n  if (!theme) {\n    return style;\n  }\n  if (theme.primaryColor) {\n    style['--primaryColor'] = theme.primaryColor;\n  }\n  if (theme.secondaryColor) {\n    style['--secondaryColor'] = theme.secondaryColor;\n  }\n  if (theme.secondaryColor) {\n    style['--complementaryColor'] = theme.complementaryColor;\n  }\n  if (theme.faviconPath) {\n    const favicon = document.querySelector('link[rel=\"shortcut icon\"]') as HTMLLinkElement;\n    if (favicon) {\n      favicon.href = theme.faviconPath;\n    } else {\n      // If no favicon is set, create a new one\n      const newLink = document.createElement('link');\n      newLink.rel = 'shortcut icon';\n      newLink.type = 'image/x-icon';\n      newLink.href = theme.faviconPath;\n      document.head.appendChild(newLink);\n    }\n  }\n\n  return style;\n};\n\n// ExamplePlugin: 'ExamplePlugin@/client-plugin/remoteEntry.js'\nconst loadPluginModules = async (moduleName: string, moduleUrl: string, remoteNames: string[]) => {\n  await __webpack_init_sharing__('default');\n\n  await new Promise<void>((resolve, reject) => {\n    const element = document.createElement('script');\n\n    element.src = moduleUrl;\n    element.type = 'text/javascript';\n    element.async = true;\n\n    element.onload = () => {\n      element.parentElement?.removeChild(element);\n      resolve();\n    };\n\n    element.onerror = (err) => {\n      element.parentElement?.removeChild(element);\n      reject(err);\n    };\n\n    document.head.appendChild(element);\n  });\n\n  // @ts-ignore\n  const container = window[moduleName];\n\n  // eslint-disable-next-line camelcase\n  await container.init(__webpack_share_scopes__.default);\n\n  const modules = [];\n  for (const remoteName of remoteNames) {\n    const factory = await container.get(remoteName);\n    const module = factory();\n    modules.push(module);\n  }\n\n  return modules;\n};\n\nconst loadPlugins = async (map: OlMap, toolConfig?: DefaultApplicationToolConfig[]) => {\n  if (!ClientConfiguration.plugins || ClientConfiguration.plugins.length === 0) {\n    Logger.info('No plugins found');\n    return [];\n  }\n\n  Logger.info('Loading plugins');\n\n  const clientPlugins: ClientPluginInternal[] = [];\n\n  for (const plugin of ClientConfiguration.plugins) {\n    const name = plugin.name;\n    const resourcePath = plugin.resourcePath;\n    const exposedPaths = plugin.exposedPaths;\n\n    if (!name) {\n      Logger.error('Required plugin configuration \\'name\\' is not set');\n      return clientPlugins;\n    }\n\n    if (!resourcePath) {\n      Logger.error('Required plugin configuration \\'resourcePath\\' is not set');\n      return clientPlugins;\n    }\n\n    if (!exposedPaths) {\n      Logger.error('Required plugin configuration \\'exposedPaths\\' is not set');\n      return clientPlugins;\n    }\n\n    Logger.info(`Loading plugin ${name} (with exposed paths ${exposedPaths.join(' and ')}) from ${resourcePath}`);\n\n    let clientPluginModules: any[];\n    try {\n      clientPluginModules = await loadPluginModules(name, resourcePath, exposedPaths);\n      Logger.info(`Successfully loaded plugin ${name}`);\n    } catch (error) {\n      Logger.error(`Could not load plugin ${name}:`, error);\n      return clientPlugins;\n    }\n\n    for (let module of clientPluginModules) {\n      const clientPluginDefault: ClientPluginInternal = module.default;\n      const PluginComponent = clientPluginDefault.component;\n\n      if (toolConfig) {\n        const pluginApplicationConfig = toolConfig.find((tc) => tc.name === clientPluginDefault.key);\n        if (pluginApplicationConfig?.config?.disabled) {\n          Logger.info(`\"${clientPluginDefault.key}\" is disabled by the application config`);\n          continue;\n        }\n      }\n\n      const WrappedPluginComponent = () => (\n        <PluginComponent\n          map={map}\n          client={client}\n        />\n      );\n\n      clientPluginDefault.wrappedComponent = WrappedPluginComponent;\n\n      if (clientPluginDefault.i18n) {\n        Object.entries(clientPluginDefault.i18n).forEach(locale => {\n          const lng = locale[0];\n          const resources = locale[1].translation;\n          i18n.addResourceBundle(lng, 'translation', resources, true, true);\n        });\n      }\n\n      if (clientPluginDefault.reducers) {\n        const reducers = createReducer(clientPluginDefault.reducers);\n        store.replaceReducer(reducers);\n      }\n\n      if (Array.isArray(clientPluginDefault.middlewares)) {\n        clientPluginDefault.middlewares?.forEach(mw => dynamicMiddleware.addMiddleware(mw));\n      }\n\n      clientPlugins.push(clientPluginDefault);\n    }\n  }\n\n  return clientPlugins;\n};\n\nconst checkRoles = (\n  list: string[],\n  featureEditRoles: FeatureEditConfiguration\n): EditLevel[] => {\n  const {\n    authorizedRolesForCreate,\n    authorizedRolesForUpdate,\n    authorizedRolesForDelete,\n    authorizedRolesForEditingGeometries\n  } = featureEditRoles;\n\n  const result: EditLevel[] = [];\n\n  for (const element of list) {\n    if (authorizedRolesForCreate?.some(role => matchRole(role, element))) {\n      result.push('CREATE');\n    }\n    if (authorizedRolesForUpdate?.some(role => matchRole(role, element))) {\n      result.push('UPDATE');\n    }\n    if (authorizedRolesForDelete?.some(role => matchRole(role, element))) {\n      result.push('DELETE');\n    }\n    if (authorizedRolesForEditingGeometries?.some(role => matchRole(role, element))) {\n      result.push('EDIT_GEOMETRY');\n    }\n  }\n  return result;\n};\n\nconst matchRole = (role: string | RegExp, element: string): boolean => {\n  if (typeof role === 'string') {\n    return element === role;\n  }\n  if (role instanceof RegExp) {\n    return role.test(element);\n  }\n  return false;\n};\n\nconst renderApp = async () => {\n  try {\n    loader.config({\n      paths: {\n        vs: './vs'\n      }\n    });\n\n    const keycloak = await initKeycloak();\n\n    if (keycloak && client) {\n      client.setKeycloak(keycloak);\n    }\n\n    const applicationIdString = UrlUtil.getQueryParam(window.location.href, 'applicationId');\n    const applicationId = applicationIdString ? parseInt(applicationIdString, 10) : undefined;\n\n    if (!applicationId && !ClientConfiguration.enableFallbackConfig && !ClientConfiguration.staticAppConfigUrl) {\n      throw new Error(LoadingErrorCode.APP_ID_NOT_SET);\n    }\n    let appConfig;\n    if (applicationId && client) {\n      appConfig = await getApplicationConfiguration(client, applicationId);\n      setLoadingImage(applicationId, appConfig?.clientConfig?.theme?.logoPath);\n    } else if (ClientConfiguration.staticAppConfigUrl) {\n      appConfig = await getStaticApplicationConfiguration(ClientConfiguration.staticAppConfigUrl);\n\n      if (!appConfig) {\n        throw new Error(LoadingErrorCode.APP_CONFIG_STATIC_NOT_FOUND);\n      }\n    }\n\n    if (!appConfig && !ClientConfiguration.enableFallbackConfig) {\n      throw new Error(LoadingErrorCode.APP_CONFIG_NOT_FOUND);\n    }\n\n    const defaultLanguage = appConfig?.clientConfig?.defaultLanguage;\n\n    if (!defaultLanguage) {\n      i18n.use(LanguageDetector);\n    }\n\n    await i18n.init(initOpts);\n\n    if (defaultLanguage) {\n      i18n.changeLanguage(defaultLanguage);\n    }\n\n    const printApp = appConfig?.clientConfig?.printApp;\n    if (printApp) {\n      store.dispatch(setPrintApp(printApp));\n    }\n\n    const style = parseTheme(appConfig?.clientConfig?.theme);\n\n    ConfigProvider.config({\n      theme: {\n        primaryColor: Color(style['--primaryColor']).isLight() ?\n          Color(style['--primaryColor']).darken(0.5).hexa() :\n          style['--primaryColor']\n      }\n    });\n\n    if (Color(style['--secondaryColor'])?.isLight() && Color(style['--primaryColor'])?.isLight()) {\n      style['--complementaryColor'] = (Color(style['--complementaryColor']).darken(0.5).hexa());\n    } else if (Color(style['--secondaryColor'])?.isDark() && Color(style['--primaryColor'])?.isDark()) {\n      style['--complementaryColor'] = (Color(style['--complementaryColor']).lighten(0.5).hexa());\n    }\n\n    Object.keys(style).forEach((key: any) => {\n      document.body.style.setProperty(key, style[key as keyof ThemeProperties] as string);\n    });\n\n    setApplicationToStore(appConfig);\n\n    setApplicationTitle();\n\n    if (client) {\n      const appInfo = await getApplicationInfo(client);\n\n      setAppInfoToStore(appInfo);\n\n      const user = await getUser(client, appInfo?.userId);\n\n      setUserToStore(user);\n    }\n\n    const userRoles: string[] | undefined =\n      client?.getKeycloak()?.tokenParsed?.realm_access?.roles;\n\n    let allowedEditMode: EditLevel[] = ['NONE'];\n\n    if (userRoles && ClientConfiguration.featureEditRoles) {\n      allowedEditMode = checkRoles(\n        userRoles,\n        ClientConfiguration.featureEditRoles\n      );\n    }\n\n    store.dispatch(setUserEditMode(allowedEditMode));\n\n    const map = await setupMap(appConfig);\n\n    const plugins = await loadPlugins(map, appConfig?.toolConfig);\n\n    if (!appConfig) {\n      notification.error({\n        message: i18n.t('Index.applicationLoadErrorMessage'),\n        description: i18n.t('Index.applicationLoadErrorDescription', {\n          applicationId: applicationId\n        }),\n        duration: 0\n      });\n    }\n\n    render(\n      <React.StrictMode>\n        <React.Suspense fallback={<span></span>}>\n          <SHOGunAPIClientProvider client={client}>\n            <PluginProvider plugins={plugins}>\n              <ConfigProvider locale={getConfigLang(i18n.language)}>\n                <Provider store={store}>\n                  <MapContext.Provider value={map}>\n                    <App />\n                  </MapContext.Provider>\n                </Provider>\n              </ConfigProvider>\n            </PluginProvider>\n          </SHOGunAPIClientProvider>\n        </React.Suspense>\n      </React.StrictMode>,\n      document.getElementById('app')\n    );\n  } catch (error) {\n    Logger.error(error);\n\n    const loadingMask = document.querySelectorAll('.loadmask')[0];\n\n    if (loadingMask) {\n      loadingMask.classList.add('loadmask-hidden');\n    }\n\n    if (!i18n.isInitialized) {\n      i18n.use(LanguageDetector);\n      await i18n.init(initOpts);\n    }\n\n    let type: AlertProps['type'] = 'warning';\n    let errorDescription = i18n.t('Index.errorDescription');\n\n    if ((error as Error)?.message === LoadingErrorCode.APP_ID_NOT_SET) {\n      errorDescription = i18n.t('Index.errorDescriptionAppIdNotSet');\n    }\n\n    if ((error as Error)?.message === LoadingErrorCode.APP_UNAUTHORIZED) {\n      errorDescription = i18n.t('Index.permissionDeniedUnauthorized');\n      type = 'error';\n    }\n\n    if ((error as Error)?.message === LoadingErrorCode.APP_CONFIG_NOT_FOUND) {\n      const appId = UrlUtil.getQueryParam(window.location.href, 'applicationId');\n\n      errorDescription = i18n.t('Index.errorDescriptionAppConfigNotFound', {\n        applicationId: appId\n      });\n    }\n\n    if ((error as Error)?.message === LoadingErrorCode.APP_CONFIG_STATIC_NOT_FOUND) {\n      errorDescription = i18n.t('Index.errorDescriptionAppConfigStaticNotFound');\n    }\n\n    render(\n      <React.StrictMode>\n        <Alert\n          className=\"error-boundary\"\n          message={i18n.t('Index.errorMessage')}\n          description={errorDescription}\n          type={type}\n          showIcon\n        />\n      </React.StrictMode>,\n      document.getElementById('app')\n    );\n  }\n};\n\nrenderApp();\n","import React from 'react';\n\nimport {\n  ClientPluginInternal\n} from '../plugin';\n\nexport type PluginProviderProps = {\n  plugins: ClientPluginInternal[];\n  children: JSX.Element;\n};\n\nexport const PluginContext = React.createContext<(ClientPluginInternal[])>([]);\n\nexport const PluginProvider: React.FC<PluginProviderProps> = ({\n  plugins,\n  children\n}): JSX.Element => {\n  return (\n    <PluginContext.Provider\n      value={plugins}\n    >\n      {children}\n    </PluginContext.Provider>\n  );\n};\n\nexport default PluginContext;\n","import React from 'react';\n\nimport SHOGunAPIClient from '@terrestris/shogun-util/dist/service/SHOGunAPIClient';\n\nexport type SHOGunAPIClientProviderProps = {\n  client?: SHOGunAPIClient;\n  children: JSX.Element;\n};\n\nexport const SHOGunAPIClientContext = React.createContext<(SHOGunAPIClient | null)>(null);\n\nexport const SHOGunAPIClientProvider: React.FC<SHOGunAPIClientProviderProps> = ({\n  client,\n  children\n}): JSX.Element => {\n  return (\n    <SHOGunAPIClientContext.Provider\n      value={client ?? null}\n    >\n      {children}\n    </SHOGunAPIClientContext.Provider>\n  );\n};\n\nexport default SHOGunAPIClientContext;\n","import i18n, {\n  InitOptions\n} from 'i18next';\nimport {\n  initReactI18next\n} from 'react-i18next';\n\nimport resources from './translations';\n\nexport const initOpts: InitOptions = {\n  resources,\n  fallbackLng: 'en',\n  debug: false,\n  interpolation: {\n    escapeValue: false\n  },\n  returnNull: false\n};\n\n// eslint-disable-next-line import/no-named-as-default-member\ni18n\n  .use(initReactI18next);\n\ni18n.options = initOpts;\n\nexport default i18n;\n","export default {\n  de: {\n    translation: {\n      ApplicationInfo: {\n        title: 'Über',\n        clientVersionTitle: 'Client Version',\n        backendVersionTitle: 'Backend Version'\n      },\n      AddLayerModal: {\n        addSelectedLayers: 'Auswahl hinzufügen',\n        addAllLayers: 'Alle hinzufügen',\n        inputPlaceholder: 'WMS GetCapabilities URL angeben…',\n        externalWmsFolder: 'Externe Themen',\n        title: 'WMS hinzufügen',\n        columnTitle: 'Name',\n        errorMessage: 'Fehler',\n        errorDescription: 'Das Capabilities Dokument konnte nicht geladen werden, bitte prüfen Sie die URL',\n        invalidUrlErrorMsg: 'Ungültige URL. Bitte geben Sie eine gültige URL wie z.B. ' +\n          'https://ows.terrestris.de/osm/service ein.',\n        version: 'Version',\n        requestWmsGetCapabilitiesInstruction: 'Bitte geben Sie eine gültige WMS GetCapabilities Adresse ein ' +\n          'und bestätigen Sie die Eingabe mit \\'Enter ↲\\' oder über den Button rechts vom Eingabefeld.'\n\n      },\n      BasicMapComponent: {\n        processedLayersFolder: 'Prozessierte Layer'\n      },\n      CookieBanner: {\n        info:\n          'Wir verwenden technisch notwendige Erstanbieter-Cookies, um Ihnen die bestmögliche Nutzung unserer ' +\n          'Website zu ermöglichen. Wenn Sie diese Website weiterhin nutzen, gehen wir davon aus, ' +\n          'dass Sie damit zufrieden sind.',\n        button: 'Akzeptieren'\n      },\n      Permalink: {\n        title: 'Teilen',\n        whatsAppTooltip: 'Link via WhatsApp teilen',\n        mailTooltip: 'Link via Mail teilen',\n        copyTooltip: 'Link in die Zwischenablage kopieren',\n        copiedToClipboard: 'Link wurde in Zwischenablage kopiert',\n        copyToClipboardFailed: 'Link konnte nicht kopiert werden'\n      },\n      Measure: {\n        title: 'Messen',\n        line: 'Entfernung',\n        area: 'Fläche',\n        clicktodrawline: 'Zum Zeichnen einer Linie klicken',\n        clicktodrawarea: 'Zum Zeichnen einer Fläche klicken'\n      },\n      Draw: {\n        point: 'Punkt',\n        line: 'Linie',\n        polygon: 'Polygon',\n        circle: 'Kreis',\n        rectangle: 'Rechteck',\n        text: 'Anmerkung',\n        modify: 'Bearbeitung',\n        upload: 'Hochladen',\n        uploadSuccess: 'Die Datei wurde erfolgreich importiert',\n        uploadError: 'Der Import ist fehlgeschlagen. Bitte beachten Sie, dass nur .geojson-Dateien unterstützt werden.',\n        delete: 'Löschen',\n        export: 'Exportieren'\n      },\n      DeleteAllButton:{\n        deleteAll: 'Alles Löschen',\n        confirmMessage: 'Bitte bestätigen Sie, dass Sie alle Zeichnungen löschen möchten.'\n      },\n      StylingDrawer: {\n        openColorPalette: 'Farbpalette öffnen',\n        closeColorPalette: 'Farbpalette schließen',\n        title: 'Farbschema bearbeiten'\n      },\n      FeatureInfo: {\n        usageHint:\n          'Klicken Sie in die Karte, um Detailinformationen zu erhalten.'\n      },\n      FileUpload: {\n        upload: 'Dateien hochladen'\n      },\n      ImageUpload: {\n        upload: 'Bilder hochladen'\n      },\n      LayerTree: {\n        transparency: 'Transparenz',\n        noLegendAvailable: 'Keine Legende verfügbar'\n      },\n      LayerTreeContextMenu: {\n        layerZoomToExtent: 'Auf Layerausdehnung zoomen',\n        extentError: 'Konnte nicht auf die Layerausdehnung zoomen',\n        removeLayer: 'Layer entfernen',\n        showLegend: 'Legende anzeigen',\n        hideLegend: 'Legende ausblenden',\n        downloadLayer: 'Layer exportieren ({{formatName}})',\n        editLayer: 'Layer bearbeiten',\n        layerDetails: 'Eigenschaften'\n      },\n      LayerDetailsModal: {\n        title: 'Eigenschaften des Layers {{layerName}}',\n        internalConfigurationButtonTooltip: 'Interne Konfiguration anzeigen',\n        internalConfigurationButtonTooltipPressed: 'Interne Konfiguration verbergen'\n      },\n      LayerDetails: {\n        noDataPlaceholder: '-',\n        layerNameLabel: 'Name',\n        layerTitleLabel: 'Titel',\n        serviceAbstractLabel: 'Service Beschreibung',\n        abstractLabel: 'Beschreibung',\n        accessConstraintsLabel: 'Nutzungseinschränkungen',\n        capabilitiesUrlLabel: 'GetCapabilities URL',\n        contactLabel: 'Kontakt',\n        minScaleLabel: 'Min. Maßstab',\n        maxScaleLabel: 'Max. Maßstab',\n        bboxLabel: 'Bounding Box',\n        errorMessage: 'Fehler beim Laden der Layer Capabilities'\n      },\n      LayerConfiguration: {\n        errorMessage: 'Fehler beim Laden der internen Konfiguration'\n      },\n      ToolMenu: {\n        expand: 'Menu ausklappen',\n        collapse: 'Menu einklappen',\n        measure: 'Messen',\n        draw: 'Zeichnen',\n        featureInfo: 'Karteninhalte abfragen',\n        addWms: 'WMS hinzufügen',\n        uploadData: 'Daten hochladen',\n        print: 'Export',\n        layertree: 'Karten',\n        languageSelect: 'Sprachauswahl'\n      },\n      PrintForm: {\n        title: 'Kartentitel',\n        initialTitle: 'Druckausgabe',\n        titlePlaceholder: 'Bitte geben Sie einen Titel ein',\n        comment: 'Bemerkung',\n        commentPlaceholder: 'Bitte geben Sie einen Kommentar ein',\n        layout: 'Vorlage',\n        dpi: 'Auflösung',\n        format: 'Format',\n        scale: 'Maßstab',\n        downloadBtnText: 'Ausdruck erzeugen',\n        printJobErrorMsg: 'Der Kartenausdruck konnte nicht erzeugt werden',\n        initErrorMsg:\n          'Der Kartendruck Generator konnte nicht initialisiert werden.',\n        outputFormatPlaceholder: 'Bitte wählen Sie ein Ausgabeformat aus',\n        resolutionPlaceholder: 'Bitte wählen Sie eine Ausgabequalität aus',\n        managerErrorMessage: 'Fehler bei der Initialisierung der Export-Engine'\n      },\n      Footer: {\n        refSystem: 'Bezugssystem',\n        scale: 'Maßstab',\n        mousePosition: 'Mausposition',\n        imprint: 'Impressum',\n        contact: 'Kontakt',\n        privacypolicy: 'Datenschutz'\n      },\n      Index: {\n        applicationLoadErrorMessage: 'Fehler beim Laden der Applikation',\n        applicationLoadErrorDescription:\n          'Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. ' +\n          'Die Standardkonfiguration wird stattdessen geladen.',\n        errorMessage: 'Fehler beim Laden der Applikation',\n        errorDescription: 'Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden.',\n        errorDescriptionAppIdNotSet: 'Keine Applikations-ID angegeben. Bitte geben Sie die ID als Abfrageparameter an, z.B. ?applicationId=1909',\n        errorDescriptionAppConfigNotFound: 'Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden.',\n        errorDescriptionAppConfigStaticNotFound: 'Die Konfiguration der Applikation konnte nicht geladen werden.',\n        permissionDeniedUnauthorized: 'Dies ist keine öffentliche Applikation. Anmeldung erforderlich.'\n      },\n      Nominatim: {\n        placeholder: 'Ortsname, Straßenname, Stadtteilname, POI usw.'\n      },\n      UserMenu: {\n        settingsMenuTitle: 'Profil bearbeiten',\n        infoMenuTitle: 'Über',\n        helpMenuTitle: 'Dokumentation',\n        logoutMenuTitle: 'Ausloggen',\n        loginMenuTitle: 'Anmelden'\n      },\n      WmsTimeSlider: {\n        title: 'Zeitlicher Bezug',\n        default: 'Keine Daten gefunden'\n      },\n      UploadDataModal: {\n        title: 'Daten hochladen',\n        uploadedDataFolder: 'Hochgeladene Daten',\n        description: 'Klicken Sie oder ziehen Sie die Datei zum Hochladen in diesen Bereich',\n        hint: 'Unterstützte Dateiformate sind Shapefile (gebündelt als *.zip) und GeoTIFF',\n        success: 'Datei {{fileName}} wurde erfolgreich geladen und der Layer {{layerName}} erstellt',\n        error: {\n          general: 'Fehler beim Hochladen der Datei {{fileName}}',\n          maxSize: 'Der Upload überschreitet das Limit von {{maxSize}} MB',\n          supportedFormats: 'Der Dateityp ist nicht unterstützt ({{supportedFormats}})',\n          zipContent: 'Mehrere Geodatensätze innerhalb eines Archivs sind nicht unterstützt'\n        }\n      },\n      MultiSearch: {\n        searchInViewBox: 'Im aktuellen Kartenausschnitt suchen',\n        searchData: 'Layerdaten durchsuchen',\n        searchNominatim: 'Ortssuche (Nominatim)',\n        nominatimTitle: 'Ortssuche',\n        searchPlaceholder: 'Orts- und Datensuche…'\n      },\n      EditFeatureDrawer: {\n        featureEditor: 'Objekteditor',\n        noLayerFoundError: 'Kein passender Layer gefunden - das Editieren ist nicht möglich.',\n        isFeatureLockedErrorMsg: 'Das ausgewählte Objekt wird bereits in einer anderen Sitzung bearbeitet.',\n        closeDrawerWarnTitle: 'Wollen Sie wirklich fortfahren?',\n        closeDrawerWarnContent: 'Dadurch werden alle nicht gespeicherten Änderungen an dem Objekt verworfen.'\n      },\n      EditFeatureSwitch: {\n        usageHint: 'Objekt zum Editieren auf der Karte auswählen oder…',\n        limitedUsageHint: 'Zum Editieren bitte eine Objekt auf der Karte auswählen',\n        createFeature: 'Neues Objekt erstellen'\n      },\n      EditFeatureFullForm: {\n        saveErrorMsg: 'Das Objekt konnte nicht gespeichert werden',\n        deleteErrorMsg: 'Das Objekt konnte nicht gelöscht werden'\n      },\n      EditFeatureGeometryToolbar: {\n        draw: 'Neue Geometrie zeichnen',\n        edit: 'Geometrie editieren',\n        delete: 'Geometrie löschen',\n        undo: 'Rückgängig',\n        redo: 'Wiederherstellen'\n      },\n      Attribution: {\n        title: 'Attribute',\n        add: 'Attribut hinzufügen',\n        select: 'Wählen Sie zunächst eine Geometrie aus.',\n        submit: 'Speichern'\n      },\n      AttributionRow: {\n        missingKey: 'Fehlender Name',\n        missingValue: 'Fehlender Wert',\n        keyPlaceholder: 'Name',\n        valuePlaceholder: 'Wert',\n        keyInUse: 'Dieser Name existiert bereits!'\n      },\n      AttributionPopConfirm:{\n        title: 'Attribut löschen?',\n        okText: 'Löschen',\n        cancelText: 'Abbrechen'\n      },\n      ResetButton: {\n        title: 'Zurücksetzen'\n      },\n      notificationDeleteText:{\n        title: 'Drücke \"Speichern\" um die Änderung zu bestätigen.',\n        info: 'Wenn \"Übernehmen\" nicht geklickt wird, werden alle an dieser Zeichnung vorgenommenen Änderungen verworfen.'\n      },\n      notificationApplyText:{\n        title: 'Änderungen wurden erfolgreich gespeichert!'\n      },\n      SaveButton: {\n        title: 'Speichern',\n        errorNoGeometry: 'Objekt kann ohne Geometrie nicht gespeichert werden.'\n      },\n      DeleteButton: {\n        title: 'Objekt löschen',\n        confirm: 'Das Objekt wird vollständig gelöscht. Fortfahren?'\n      },\n      EditFeatureButton: {\n        title: 'Objekt bearbeiten'\n      },\n      FeaturePropertyGrid: {\n        key: 'Name',\n        value: 'Wert'\n      },\n      PaginationToolbar: {\n        copyAsGeoJson: 'Als GeoJSON kopieren (inkl. Geometrie)',\n        copyAsObject: 'Als Objekt kopieren (nur angezeigte Werte)',\n        editDisabled: 'Layer ist nicht editierbar',\n        editFeature: 'Feature editieren'\n      },\n      JsonModal: {\n        buttonTitle: 'Öffne {{propertyName}}'\n      },\n      ReferenceTable: {\n        modalTitle: 'Details zu {{referenceValue}}',\n        defaultModalTitle: 'Details',\n        defaultRowPlaceholder: 'Klicken Sie auf den Button, um die Details anzuzeigen'\n      },\n      EditReferenceTable: {\n        modalTitle: 'Details zu {{referenceValue}}',\n        confirmDeleteTitle: 'Das referenzierte Objekt wird vollständig gelöscht. Fortfahren?'\n      }\n    }\n  },\n  en: {\n    translation: {\n      ApplicationInfo: {\n        title: 'About',\n        clientVersionTitle: 'Client version',\n        backendVersionTitle: 'Backend version'\n      },\n      AddLayerModal: {\n        addSelectedLayers: 'Add selected',\n        addAllLayers: 'Add all',\n        inputPlaceholder: 'Enter a WMS GetCapabilities URL…',\n        externalWmsFolder: 'External layers',\n        title: 'Add WMS',\n        columnTitle: 'Name',\n        errorMessage: 'Error',\n        errorDescription: 'Could not load the provided Capabilities document, please check the validity of the URL',\n        invalidUrlErrorMsg: 'Invalid URL specified. Please provide an URL like https://ows.terrestris.de/osm/service',\n        version: 'Version',\n        requestWmsGetCapabilitiesInstruction: 'Please provide a valid GetCapabilities URL and submit ' +\n          'your input by pressing the \\'Enter ↲\\' key or by clicking on the button right of the field.'\n      },\n      BasicMapComponent: {\n        processedLayersFolder: 'Processed layers'\n      },\n      CookieBanner: {\n        info:\n          'We use technically necessary first-party cookies to ensure that we give you the best experience ' +\n          'on our website. If you continue to use this site we will assume that you are happy with it.',\n        button: 'Accept'\n      },\n      Permalink: {\n        title: 'Share',\n        whatsAppTooltip: 'Share link via WhatsApp',\n        mailTooltip: 'Share link via Mail',\n        copyTooltip: 'Copy link to Clipboard',\n        copiedToClipboard: 'Copied to clipboard',\n        copyToClipboardFailed: 'Could not copy link to clipboard'\n      },\n      Measure: {\n        title: 'Measure',\n        line: 'Distance',\n        area: 'Area',\n        clicktodrawline: 'Click to draw line',\n        clicktodrawarea: 'Click to draw area'\n      },\n      Draw: {\n        point: 'Point',\n        line: 'Line',\n        polygon: 'Polygon',\n        circle: 'Circle',\n        rectangle: 'Rectangle',\n        text: 'Annotation',\n        modify: 'Edit',\n        upload: 'Upload',\n        uploadSuccess: 'The file was uploaded successfully',\n        uploadError: 'The import failed, please note that only .geojson files are supported',\n        delete: 'Delete',\n        export: 'Export'\n      },\n      DeleteAllButton:{\n        deleteAll: 'Delete all',\n        confirmMessage: 'Please confirm, that you wish to delete all drawings.'\n      },\n      StylingDrawer: {\n        openColorPalette: 'Open color palette',\n        closeColorPalette: 'Close color palette',\n        title: 'Modify color scheme'\n      },\n      FeatureInfo: {\n        usageHint:\n          'Click on the map to get details about the clicked coordinate.'\n      },\n      FileUpload: {\n        upload: 'Upload files'\n      },\n      ImageUpload: {\n        upload: 'Upload images'\n      },\n      LayerTree: {\n        transparency: 'Transparency',\n        noLegendAvailable: 'No legend available'\n      },\n      LayerTreeContextMenu: {\n        layerZoomToExtent: 'Zoom to layer extent',\n        extentError: 'Could not zoom to layer extent',\n        removeLayer: 'Remove layer',\n        showLegend: 'Show legend',\n        hideLegend: 'Hide legend',\n        downloadLayer: 'Export layer as {{formatName}}',\n        editLayer: 'Edit layer',\n        layerDetails: 'Properties'\n      },\n      LayerDetailsModal: {\n        title: 'Properties of layer {{layerName}}',\n        internalConfigurationButtonTooltip: 'Show internal configuration',\n        internalConfigurationButtonTooltipPressed: 'Hide internal configuration'\n      },\n      LayerDetails: {\n        noDataPlaceholder: '-',\n        layerNameLabel: 'Name',\n        layerTitleLabel: 'Title',\n        serviceAbstractLabel: 'Service abstract',\n        abstractLabel: 'Abstract',\n        accessConstraintsLabel: 'Access constraints',\n        capabilitiesUrlLabel: 'GetCapabilities URL',\n        contactLabel: 'Contact',\n        minScaleLabel: 'Min. scale',\n        maxScaleLabel: 'Max. scale',\n        bboxLabel: 'Bounding box',\n        errorMessage: 'Error while loading the layer capabilities'\n      },\n      LayerConfiguration: {\n        errorMessage: 'Error while loading the internal configuration'\n      },\n      ToolMenu: {\n        expand: 'Expand',\n        collapse: 'Collapse',\n        measure: 'Measure',\n        draw: 'Draw',\n        featureInfo: 'Query map features',\n        addWms: 'Add WMS',\n        uploadData: 'Upload data',\n        print: 'Export',\n        layertree: 'Maps',\n        languageSelect: 'Language selector'\n      },\n      PrintForm: {\n        title: 'Title',\n        initialTitle: 'Title',\n        titlePlaceholder: 'Please input a title…',\n        comment: 'Comment',\n        commentPlaceholder: 'Please enter a comment…',\n        layout: 'Layout',\n        dpi: 'Resolution',\n        format: 'Format',\n        scale: 'Scale',\n        downloadBtnText: 'Create print',\n        printJobErrorMsg: 'Could not generate PDF output',\n        initErrorMsg: 'PDF Generator could not be initialized',\n        outputFormatPlaceholder: 'Please select an output format',\n        resolutionPlaceholder: 'Please select an output quality',\n        managerErrorMessage: 'Error while initializing the export engine'\n      },\n      Footer: {\n        refSystem: 'Reference system',\n        scale: 'Scale',\n        mousePosition: 'Mouse position',\n        imprint: 'Imprint',\n        contact: 'Contact',\n        privacypolicy: 'Privacy'\n      },\n      Index: {\n        applicationLoadErrorMessage: 'Error while loading the application',\n        applicationLoadErrorDescription:\n          'The application with ID {{applicationId}} could not be loaded correctly. ' +\n          'You\\'re seeing the default application configuration.',\n        errorMessage: 'Error while loading the application',\n        errorDescription: 'An unexpected error occurred while loading the application.',\n        errorDescriptionAppIdNotSet: 'No application ID given. Please provide the ID as query parameter, e.g. ?applicationId=1909',\n        errorDescriptionAppConfigNotFound: 'The application with ID {{applicationId}} could not be loaded correctly.',\n        errorDescriptionAppConfigStaticNotFound: 'The configuration of the application could not be loaded correctly.',\n        permissionDeniedUnauthorized: 'This application is not public. Authentication required.'\n      },\n      Nominatim: {\n        placeholder: 'Place name, street name, district name, POI, etc.'\n      },\n      UserMenu: {\n        settingsMenuTitle: 'Edit profile',\n        infoMenuTitle: 'About',\n        helpMenuTitle: 'Documentation',\n        logoutMenuTitle: 'Logout',\n        loginMenuTitle: 'Login'\n      },\n      WmsTimeSlider: {\n        title: 'Time reference',\n        default: 'No data found'\n      },\n      UploadDataModal: {\n        title: 'Upload data',\n        uploadedDataFolder: 'Uploaded data',\n        description: 'Click or drag file to this area to upload',\n        hint: 'Supported file formats are Shapefile (bundled as *.zip) and GeoTIFF',\n        success: 'Successfully uploaded file {{fileName}} and created layer {{layerName}}',\n        error: {\n          general: 'Error while uploading file {{fileName}}',\n          maxSize: 'The file exceeds the upload limit of {{maxSize}} MB',\n          supportedFormats: 'The given file type does not match the supported ones ({{supportedFormats}})',\n          zipContent: 'Multiple geodatasets within one archive are not supported'\n        }\n      },\n      MultiSearch: {\n        searchInViewBox: 'Search in current extent',\n        searchData: 'Search layer data',\n        searchNominatim: 'Search nominatim',\n        nominatimTitle: 'Nominatim',\n        searchPlaceholder: 'Address and data search…'\n      },\n      EditFeatureDrawer: {\n        featureEditor: 'Feature editor',\n        noLayerFoundError: 'No layer found - the editing is not possible.',\n        isFeatureLockedErrorMsg: 'The selected feature is already being edited in another session.',\n        closeDrawerWarnTitle: 'Do you really want to quit?',\n        closeDrawerWarnContent: 'This will discard any unsaved changes to the feature.'\n      },\n      EditFeatureSwitch: {\n        usageHint: 'Select an existing feature for editing on the map or…',\n        limitedUsageHint: 'To edit please select an object on the map',\n        createFeature: 'Create new feature'\n      },\n      EditFeatureFullForm: {\n        saveErrorMsg: 'Error while saving the feature',\n        deleteErrorMsg: 'Error while deleting the feature'\n      },\n      EditFeatureGeometryToolbar: {\n        draw: 'Draw new geometry',\n        edit: 'Edit geometry',\n        delete: 'Delete geometry',\n        undo: 'Undo',\n        redo: 'Redo'\n      },\n      Attribution: {\n        title: 'Properties',\n        add: 'Add Property',\n        select: 'Please select a geometry first.',\n        submit: 'Apply'\n      },\n      AttributionRow: {\n        missingKey: 'Missing Key',\n        missingValue: 'Missing Value',\n        keyPlaceholder: 'Key',\n        valuePlaceholder: 'Value',\n        keyInUse: 'Key already exists!'\n      },\n      AttributionPopConfirm:{\n        title: 'Delete property?',\n        okText: 'Delete',\n        cancelText: 'Cancel'\n      },\n      ResetButton: {\n        title: 'Reset'\n      },\n      notificationDeleteText:{\n        title: 'Press \"Apply\" to confirm changes.',\n        info: 'Not pressing \"Apply\" will reverse all changes made to this drawing.'\n      },\n      notificationApplyText:{\n        title: 'Changes were applied successfully!'\n      },\n      SaveButton: {\n        title: 'Save',\n        errorNoGeometry: 'Cannot save feature without geometry.'\n      },\n      DeleteButton: {\n        title: 'Delete feature',\n        confirm: 'The feature will be deleted completely. Proceed?'\n      },\n      EditFeatureButton: {\n        title: 'Edit feature'\n      },\n      FeaturePropertyGrid: {\n        key: 'Name',\n        value: 'Value'\n      },\n      PaginationToolbar: {\n        copyAsGeoJson: 'Copy as GeoJSON (incl. geometry)',\n        copyAsObject: 'Copy as object (displayed values only)',\n        editDisabled: 'This layer is not editable',\n        editFeature: 'Edit feature'\n      },\n      JsonModal: {\n        buttonTitle: 'Show {{propertyName}}'\n      },\n      ReferenceTable: {\n        modalTitle: 'Details for {{referenceValue}}',\n        defaultModalTitle: 'Details',\n        defaultRowPlaceholder: 'Click the button to show the details'\n      },\n      EditReferenceTable: {\n        modalTitle: 'Details for {{referenceValue}}',\n        confirmDeleteTitle: 'The referenced feature will be deleted completely. Proceed?'\n      }\n    }\n  }\n};\n","import('./bootstrap');\n","import {\n  createSlice\n} from '@reduxjs/toolkit';\n\nexport interface AddLayerModalState {\n  visible: boolean;\n}\n\nconst initialState: AddLayerModalState = {\n  visible: false\n};\n\nconst addLayerModalSlice = createSlice({\n  name: 'addLayerModal',\n  initialState,\n  reducers: {\n    show(state) {\n      state.visible = true;\n    },\n    hide(state) {\n      state.visible = false;\n    },\n    toggle(state) {\n      state.visible = !state.visible;\n    }\n  }\n});\n\nexport const {\n  show,\n  hide,\n  toggle\n} = addLayerModalSlice.actions;\n\nexport default addLayerModalSlice.reducer;\n","import {\n  PayloadAction,\n  createSlice\n} from '@reduxjs/toolkit';\n\nimport {\n  Feature\n} from 'geojson';\n\nexport type EditLevel =\n  | 'CREATE'\n  | 'UPDATE'\n  | 'DELETE'\n  | 'EDIT_GEOMETRY'\n  | 'NONE';\nexport interface EditFeatureState {\n  layerId: string | null;\n  feature: Feature | null;\n  userEditMode: EditLevel[];\n  formDirty: boolean;\n}\n\nconst initialState: EditFeatureState = {\n  layerId: null,\n  feature: null,\n  userEditMode: ['NONE'],\n  formDirty: false\n};\n\nconst editFeatureSlice = createSlice({\n  name: 'editFeature',\n  initialState,\n  reducers: {\n    setLayerId(state, action: PayloadAction<string | null>) {\n      state.layerId = action.payload;\n    },\n    setFeature(state, action: PayloadAction<Feature | null>) {\n      state.feature = action.payload;\n    },\n    reset(state) {\n      state.layerId = null;\n      state.feature = null;\n    },\n    setUserEditMode(state, action: PayloadAction<EditLevel[]>) {\n      state.userEditMode = action.payload;\n    },\n    setFormDirty(state, action: PayloadAction<boolean>) {\n      state.formDirty = action.payload;\n    }\n  }\n});\n\nexport const {\n  setLayerId,\n  setFeature,\n  reset,\n  setUserEditMode,\n  setFormDirty\n} = editFeatureSlice.actions;\n\nexport default editFeatureSlice.reducer;\n","import {\n  createSlice\n} from '@reduxjs/toolkit';\n\nconst initialState: boolean = false;\n\nconst editFeatureDrawerOpenSlice = createSlice({\n  name: 'editFeatureDrawerOpen',\n  initialState,\n  reducers: {\n    show() {\n      return true;\n    },\n    hide() {\n      return false;\n    },\n    toggle(state) {\n      return !state;\n    }\n  }\n});\n\nexport const {\n  show,\n  hide,\n  toggle\n} = editFeatureDrawerOpenSlice.actions;\n\nexport default editFeatureDrawerOpenSlice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nimport { FeatureInfoConfig } from '../../components/ToolMenu/FeatureInfo';\n\n// eslint-disable-next-line no-shadow\nexport enum CopyTools {\n  COPY_AS_GEOJSON = 'COPY_AS_GEOJSON',\n  COPY_AS_OBJECT = 'COPY_AS_OBJECT'\n}\n\nconst initialState: FeatureInfoConfig = {\n  enabled: false,\n  activeCopyTools: [CopyTools.COPY_AS_GEOJSON, CopyTools.COPY_AS_OBJECT]\n};\n\nexport const slice = createSlice({\n  name: 'featureInfo',\n  initialState,\n  reducers: {\n    setFeatureInfoConfig(state, action: PayloadAction<FeatureInfoConfig>) {\n      state = action.payload;\n    },\n    setFeatureInfoEnabled(state, action: PayloadAction<boolean>) {\n      state.enabled = action.payload;\n    },\n    setFeatureInfoActiveCopyTools(state, action: PayloadAction<CopyTools[]>) {\n      state.activeCopyTools = action.payload;\n    }\n  }\n});\n\nexport const {\n  setFeatureInfoEnabled,\n  setFeatureInfoActiveCopyTools\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  PayloadAction,\n  createSlice\n} from '@reduxjs/toolkit';\n\nexport interface LayerDetailsModalState {\n  visible: boolean;\n  layerId?: string;\n}\n\nconst initialState: LayerDetailsModalState = {\n  visible: false\n};\n\nconst layerDetailsModalSlice = createSlice({\n  name: 'layerDetailsModal',\n  initialState,\n  reducers: {\n    setLayer(state, action: PayloadAction<string | undefined>) {\n      state.layerId = action.payload;\n    },\n    show(state) {\n      state.visible = true;\n    },\n    hide(state) {\n      state.visible = false;\n    },\n    toggle(state) {\n      state.visible = !state.visible;\n    }\n  }\n});\n\nexport const {\n  setLayer,\n  show,\n  hide,\n  toggle\n} = layerDetailsModalSlice.actions;\n\nexport default layerDetailsModalSlice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nexport type LayerTreeConfig = {\n  enabled?: boolean;\n  activeUploadTools?: UploadTools[];\n  showLegends?: boolean;\n};\n\n// eslint-disable-next-line no-shadow\nexport enum UploadTools {\n  addWMS = 'addWMS',\n  dataUpload = 'dataUpload'\n}\n\nconst initialState: LayerTreeConfig = {\n  enabled: false,\n  activeUploadTools: [UploadTools.addWMS, UploadTools.dataUpload],\n  showLegends: false\n};\n\nexport const slice = createSlice({\n  name: 'tree',\n  initialState,\n  reducers: {\n    setLayerTreeConfig(state, action: PayloadAction<LayerTreeConfig>) {\n      state = action.payload;\n    },\n    setLayerTreeEnabled(state, action: PayloadAction<boolean>) {\n      state.enabled = action.payload;\n    },\n    setLayerTreeActiveUploadTools(state, action: PayloadAction<UploadTools[]>) {\n      state.activeUploadTools = action.payload;\n    },\n    setLayerTreeShowLegends(state, action: PayloadAction<boolean>) {\n      state.showLegends = action.payload;\n    }\n  }\n});\n\nexport const {\n  setLayerTreeEnabled,\n  setLayerTreeActiveUploadTools,\n  setLayerTreeShowLegends\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nimport { V3CustomMapParams } from '@terrestris/mapfish-print-manager/dist/manager/MapFishPrintV3Manager';\n\nexport type PrintState = {\n  customMapParams?: V3CustomMapParams;\n  customParams?: any;\n  printApp?: string;\n};\n\nconst initialState: PrintState = {\n  printApp: 'default',\n  customMapParams: {},\n  customParams: {\n    printLegend: false\n  }\n};\n\nexport const printSlice = createSlice({\n  name: 'print',\n  initialState,\n  reducers: {\n    setCustomMapParams: (state, action: PayloadAction<V3CustomMapParams>) => {\n      state.customMapParams = action.payload;\n    },\n    setCustomParams: (state, action: PayloadAction<any>) => {\n      state.customParams = action.payload;\n    },\n    setPrintApp: (state, action: PayloadAction<string>) => {\n      state.printApp = action.payload;\n    },\n    addCustomMapParam: (state, action: PayloadAction<Partial<V3CustomMapParams>>) => {\n      state.customMapParams = {\n        ...state.customMapParams,\n        ...action.payload\n      };\n    },\n    addCustomParam: (state, action: PayloadAction<any>) => {\n      state.customParams = {\n        ...state.customParams,\n        ...action.payload\n      };\n    }\n  }\n});\n\nexport const {\n  setCustomMapParams,\n  setCustomParams,\n  addCustomMapParam,\n  addCustomParam,\n  setPrintApp\n} = printSlice.actions;\n\nexport default printSlice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nexport type SelectedFeatures = {\n  [layerName: string]: string;\n};\n\nconst initialState: SelectedFeatures = {};\n\nexport const slice = createSlice({\n  name: 'selectedFeatures',\n  initialState,\n  reducers: {\n    setSelectedFeatures(state, action: PayloadAction<SelectedFeatures>) {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setSelectedFeatures\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nconst initialState: boolean = false;\n\nexport const slice = createSlice({\n  name: 'stylingDrawerVisibility',\n  initialState,\n  reducers: {\n    setStylingDrawerVisibility: (state, action: PayloadAction<boolean>) => {\n      return action.payload;\n    }\n  }\n});\n\nexport const {\n  setStylingDrawerVisibility\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice,\n  PayloadAction\n} from '@reduxjs/toolkit';\n\nexport interface ToolMenuState {\n  activeKeys: string[];\n  availableTools: string[];\n}\n\nconst initialState: ToolMenuState = {\n  // This is the default state. If no config is given, then load all tools\n  activeKeys: [],\n  availableTools: ['default']\n};\n\nexport const slice = createSlice({\n  name: 'toolMenu',\n  initialState,\n  reducers: {\n    setActiveKeys(state, action: PayloadAction<string[]>) {\n      state.activeKeys = [...action.payload];\n    },\n    setAvailableTools(state, action: PayloadAction<string[]>) {\n      state.availableTools = [...action.payload];\n    }\n  }\n});\n\nexport const {\n  setActiveKeys,\n  setAvailableTools\n} = slice.actions;\n\nexport default slice.reducer;\n","import {\n  createSlice\n} from '@reduxjs/toolkit';\n\nexport interface UploadDataModalState {\n  visible: boolean;\n}\n\nconst initialState: UploadDataModalState = {\n  visible: false\n};\n\nconst uploadDataModalSlice = createSlice({\n  name: 'uploadDataModal',\n  initialState,\n  reducers: {\n    show(state) {\n      state.visible = true;\n    },\n    hide(state) {\n      state.visible = false;\n    },\n    toggle(state) {\n      state.visible = !state.visible;\n    }\n  }\n});\n\nexport const {\n  show,\n  hide,\n  toggle\n} = uploadDataModalSlice.actions;\n\nexport default uploadDataModalSlice.reducer;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","AddLayerModal","restProps","loading","setLoading","useState","layers","setLayers","selectedRowKeys","setSelectedRowKeys","validationStatus","setValidationStatus","url","setUrl","sanitizedUrl","setSanitizedUrl","version","setVersion","isModalVisible","state","addLayerModal","visible","dispatch","map","useMap","t","useTranslation","useEffect","UrlUtil","closeModal","hide","addLayers","layersToAdd","targetFolderName","targetGroup","MapUtil","OlLayerGroup","set","existingGroups","getLayerGroup","getLayers","insertAt","getLength","forEach","layerToAdd","getArray","includes","layerUrl","ImageLayer","getSource","getUrl","TileLayer","urls","getUrls","length","undefined","layerConfig","name","get","type","opacity","getOpacity","sourceConfig","layerNames","getParams","LAYERS","useBearerToken","push","React","Modal","_extends","className","title","open","onCancel","width","footer","SimpleButton","key","disabled","onClick","onAddAll","onAddSelected","filter","layer","getUid","Input","Search","placeholder","value","onChange","evt","target","trim","onSearch","async","capabilities","CapabilitiesUtil","externalLayers","error","notification","message","description","status","enterButton","addonBefore","Select","defaultValue","label","Typography","Table","columns","render","text","record","scroll","y","rowKey","rowSelection","pagination","dataSource","usePlugins","useContext","PluginContext","BasicMapComponent","plugins","i18n","targetGroups","oldName","changeEvent","OlObjectEvent","dispatchEvent","language","pluginComponents","plugin","pluginIntegration","integration","placement","wrappedComponent","WrappedPluginComponent","MapComponent","CookieBanner","getPlugin","cookiePlugin","CookieConsent","disableStyles","location","buttonText","cookieName","buttonClasses","containerClasses","contentClasses","expires","useSHOGunAPIClient","SHOGunAPIClientContext","useExecuteWfsTransaction","client","useCallback","source","opts","OlSourceImageWMS","OlSourceTileWMS","endsWith","slice","defaultHeaders","response","fetch","method","headers","getBearerTokenHeader","getKeycloak","body","XMLSerializer","serializeToString","transaction","ok","Error","responseText","xmlDoc","some","candidate","getElementsByTagName","isFailed","DOMParser","parseFromString","FileUpload","readOnly","fieldConfig","passThroughProps","Upload","multiple","action","withCredentials","getCsrfTokenHeader","onRemove","uuid","file","fileUuid","getBasePath","credentials","onPreview","fileName","fileUrl","_isNil","anchor","document","createElement","appendChild","result","blob","objectUrl","window","URL","createObjectURL","href","download","click","revokeObjectURL","fieldProps","Button","useConvertImageUrl","Promise","reject","onSuccess","onError","reader","FileReader","onload","this","readAsDataURL","e","ImageUpload","initialFileList","mediaPreviewVisible","setMediaPreviewVisible","previewImage","setPreviewImage","defaultFileListWithBlob","setDefaultFileListWithBlob","imageUrlToBase64","useAsyncEffect","fl","fileListPromises","fileList","val","thumbUrl","all","convertDefaultFileList","accept","listType","previewImageUrl","img","FontAwesomeIcon","icon","faPlus","style","marginTop","alt","src","FeatureInfoForm","feature","formConfig","form","useForm","resetFields","setFieldsValue","getProperties","Form","labelCol","span","labelAlign","labelWrap","fieldCfg","Item","propertyName","displayName","DisplayField","ReferenceTable","referenceConfig","isModalOpen","setIsModalOpen","selectedFeature","setSelectedFeature","defaultPropertyName","resolvePlaceholder","tablePropertyName","regex","match","resolved","exec","replace","onDetailsClick","faBoxOpen","OlFeature","setProperties","size","showHeader","getDataSource","parsedValue","JSON","parse","Array","isArray","Logger","maskClosable","destroyOnClose","getModalTitle","referenceValue","featureInfoFormConfig","dataType","valueMap","format","suffix","urlDisplayValue","displayValue","hasOwnProperty","toString","Checkbox","checked","Number","isFinite","Intl","NumberFormat","useGrouping","isMoment","moment","join","isString","lowerCandidate","toLowerCase","protocol","startsWith","isUrl","rel","uploadValue","v","stringify","isFileConfig","getUpload","fileType","defaultFileList","isJson","Text","EditReferenceTable","parentForm","defaultSortOrder","sorter","a","b","valA","valB","localeCompare","_","faEdit","Popconfirm","onConfirm","onConfirmDelete","danger","faTrash","parentFormValues","getFieldsValue","deleteCandidates","_cloneDeep","deleteIdx","findIndex","deleteCandidate","id","internalId","splice","onAddClick","valueCopy","Object","entries","isDate","cfg","component","isValid","isUpload","vMap","upload","every","el","onOk","validateFields","updateReferences","formValues","existingReferences","getFieldValue","targetIdx","existingReference","isFieldsTouched","EditFeatureForm","applyFormDirty","uid","_isObject","formDirty","editFeature","createReadOnlyComponent","createFieldComponent","DatePicker","InputNumber","allowClear","Switch","TextArea","referenceTableConfig","editFormConfig","onValuesChange","_debounce","changedValues","setFormDirty","field","formItemProps","rules","required","valuePropName","getValueFromEvent","isGeometryType","propertyType","useExecuteWfsDescribeFeatureType","params","SERVICE","REQUEST","VERSION","OUTPUTFORMAT","TYPENAMES","json","useWriteWfsTransaction","executeWfsDescribeFeatureType","allowedEditMode","userEditMode","cleanFormValues","cleanedValue","children","child","toISOString","filePath","fileInfoList","lastModified","created","inserts","updates","deletes","describeFeatureType","geomProperty","featureTypes","properties","find","property","overallUpdateMode","upsertFeatures","feat","geometry","getGeometry","clone","isEmpty","getExtent","setGeometryName","updateMode","getId","setId","deleteFeatures","transactionOpts","featureNS","targetNamespace","featurePrefix","targetPrefix","featureType","srsName","getView","getProjection","getCode","nativeElements","OlFormatWFS","writeTransaction","ClientConfiguration","rootNode","getRootNode","lockId","createElementNS","lockIdValue","createTextNode","MapDrawer","querySelectorAll","classList","toggle","Drawer","mask","getComputedStyle","documentElement","getPropertyValue","afterOpenChange","onAfterDrawerOpenChange","updateSize","useExecuteGetFeature","featureRequest","writeGetFeature","outputFormat","EditFeatureGeometryToolbar","historyLength","editHistory","useRef","past","future","editLayer","setEditLayer","setRevision","gjFormat","useMemo","OlFormatGeoJson","DigitizeUtil","getDigitizeLayer","removeLayer","current","clear","olFeat","readFeature","addFeature","r","isEmptyOlExtent","fit","padding","undoEdit","editSource","features","getFeatures","writeFeaturesObject","previousSource","_isEmpty","addFeatures","readFeatures","redoEdit","nextSource","onDrawEnd","toLocaleLowerCase","existingFeature","once","e2","removeFeature","setGeometry","updateRevision","btnTooltipProps","tooltipPlacement","tooltipProps","mouseEnterDelay","Toolbar","alignment","ToggleGroup","DrawButton","faPencil","pressedIcon","digitizeLayer","tooltip","drawType","ModifyButton","faDrawPolygon","onModifyStart","onModifyEnd","onTranslateEnd","DeleteButton","onFeatureRemove","faUndo","flip","EditFeatureTabs","tabConfig","initialValues","items","config","idx","forceRender","Tabs","writeWfsTransaction","executeWfsTransaction","isWmsLayer","olFeature","OlFormatGeoJSON","refresh","ResetButton","faRotateLeft","FeedbackIcon","loadComplete","SaveButton","saveCompleted","setSaveCompleted","warn","setTimeout","faFloppyDisk","EditFeatureToolbar","onSaveSuccess","onSaveError","onDeleteSuccess","onDeleteError","EditFeatureFullForm","executeGetFeature","setTabConfig","setInitialValues","errorMsg","setErrorMsg","reloadFeature","updatedFeatures","equalTo","setFeature","update","structuredClone","setPropertiesPromises","tabConfigs","tabCfg","formCfg","parsedDate","parsedJson","fileListWithBlob","isImageFile","isReference","Alert","showIcon","featureId","idString","item","getAttribute","split","formattedErrorMessage","collectedFieldErrors","errorFields","errors","line","index","formatErrorMessage","useExecuteWfsLockFeature","lockFeatureDoc","featureProperties","parseInt","idProperty","typeName","setAttribute","queryElement","filterElement","isEqualToElement","valueReferenceElement","valueReferenceValue","literalElement","literalValue","writeWfsLockFeature","useGetFeatureInfo","onFailure","onSingleClick","coords","coordinate","viewResolution","getResolution","getFeatureInfoUrl","INFO_FORMAT","BUFFER","getTargetElement","cursor","featureCollection","onPointerMove","dragging","data","getData","pixel","Uint8ClampedArray","hit","on","un","EditFeatureSwitch","onLockSuccess","onLockError","onCreate","executeWfsLockFeature","geomType","getGeometryType","coordinates","EditFeatureDrawer","setLayer","isFeatureLocked","setIsFeatureLocked","drawerTitle","setDrawerTitle","isDrawerOpen","editFeatureDrawerOpen","layerId","olLayer","closeDrawer","releaseLock","hideEditFeatureDrawer","reset","onClose","onDrawerClose","confirm","content","okType","Footer","legalInformation","legal","insertPlugins","itemPosition","placementOrientation","insertionIndex","getControls","control","OlControlScaleLine","addControl","OlControlMousePosition","coordinateFormat","createStringXY","projection","openContactModal","contact","openImprintModal","imprint","openPrivacyModal","privacy","getLeftItems","Divider","ScaleCombo","getRightItems","defaultClassName","DocumentationButton","finalClassName","faCircleQuestion","BasicNominatimSearch","viewBox","setViewBox","mapViewProjection","extent","transformedExtent","transformExtent","NominatimSearch","countryCodes","nominatimBaseUrl","generateSearchQuery","searchParts","part","generateSolrQuery","searchValue","parts","replaceAll","s","searchQueries","getAllLayers","l","groupedLayers","_groupBy","attributes","layerList","query","layerName","fieldList","isFulfilled","p","MultiSearch","useNominatim","clickAwayRef","searchNominatim","setSearchNominatim","searchData","setSearchData","useViewBox","setUseViewBox","defaultUseViewBox","setSearchValue","resultsVisible","setResultsVisible","settingsVisible","setSettingsVisible","dataSearchResults","setDataSearchResults","highlightingResults","setHighlightingResults","nominatimResults","setNominatimResults","searchResults","setSearchResults","addEventListener","handleClickAway","removeEventListener","parentNode","contains","settingsMenu","performSearch","minChars","resetSearch","calculateExtent","solrBasePath","searchUrl","origin","promises","q","solrQueryConfig","rows","rowsPerQuery","defType","queryParser","qf","coreName","bboxFilter","fq","useSolrHighlighting","hl","tagPre","tagPost","requireFieldMatch","successfulResults","allSettled","pr","dataResults","flatMap","sR","docs","hlResults","assign","sr","highlighting","logger","nominatimUrl","searchParams","getFeatureTitle","dsResult","highlightResult","searchConfig","blacklistedAttributes","displayTemplate","template","token","replaceTemplates","filteredHighlightKeys","keys","propKey","propValue","indexOf","updatedResults","geoJsonFormat","nFeats","f","geojson","dataProjection","featureProjection","display_name","nResults","wktFormat","OlFormatWKT","categories","groupByCategory","res","category","resultsWithLayerName","layerTitle","resultCategory","readGeometry","ftName","substring","lastIndexOf","delay","timeout","clearTimeout","actionsCreator","layerStyle","OlStyle","stroke","OlStyleStroke","color","fill","OlStyleFill","image","OlStyleCircle","radius","ref","event","addonAfter","Dropdown","menu","trigger","onOpenChange","SettingOutlined","onFocus","prefix","SearchOutlined","LoadingOutlined","resultRenderer","numTotal","Empty","PRESENTED_IMAGE_SIMPLE","activateLayer","getVisible","setVisible","PermalinkUtil","zoomOffsetOnClick","toolMenuElement","getElementsByClassName","clientWidth","getSize","SearchResultsPanel","accordion","searchTerms","activateLayerOnClick","SearchField","searchEngines","useSolr","getGravatarUrl","email","rating","defaultImage","force","lowerCaseEmail","md5","ApplicationInfo","opener","appInfo","logoPath","appDescription","isVisible","toggleVisibility","Opener","centered","Statistic","PROJECT_VERSION","buildTime","UserMenu","keycloak","user","onMenuClick","accountManagement","login","logout","redirectUri","createLoginUrl","UserChip","imageSrc","providerDetails","userName","faAngleDown","userMenu","getMenu","faSignIn","username","divider","settings","faUserCog","info","faInfo","faSignOut","enabled","accountRoles","tokenParsed","resource_access","account","roles","itemsForLoggedInUser","Header","getDocsButton","getCenterItems","LayerConfiguration","errorMessage","setErrorMessage","layerConfiguration","setLayerConfiguration","getLayerConfiguration","conf","findOne","closable","Spin","spinning","LayerDetails","setCapabilities","getCapabilities","capa","getLayerName","getCapabilitiesUrl","getCapabilitiesLayer","Capability","Layer","lay","Name","getBBox","EX_GeographicBoundingBox","westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude","getMinScale","MinScaleDenominator","getMaxScale","MaxScaleDenominator","getAbstract","Abstract","getServiceAbstract","Service","getContact","ContactInformation","ContactElectronicMailAddress","getLayerTitle","Title","getAccessConstraints","AccessConstraints","layout","flex","LayerDetailsModal","configurationVisible","setConfigurationVisible","layerDetailsModal","OlLayer","Tooltip","FileTextOutlined","onShowConfigurationClick","hideLayerDetailsModal","setDetailsLayer","hidden","StylingComponent","setStyle","symbolizers","kind","outlineOpacity","fillOpacity","outlineWidth","outlineColor","wellKnownName","strokeColor","strokeOpacity","font","offset","haloColor","haloWidth","olParser","OlParser","drawVectorLayer","olStylePolygon","olStyleLineString","olStylePoint","olStyleText","rule","newStyle","olStyle","writeStyle","output","drawLayerStyleFunction","resolution","geometryType","getType","parseStyles","CardStyle","onStyleChange","StylingDrawer","isStylingDrawerVisible","stylingDrawerVisibility","setStylingDrawerVisibility","Option","LanguageSelect","supportedLanguages","services","resourceStore","lang","changeLanguage","supportedLanguage","toUpperCase","Permalink","layerAttributes","initialPermalink","permalink","setPermalink","mailBody","eventKeys","identifierFunction","filterFunction","updatePermalink","updateLayerConfig","externalLayer","clientConfig","registerLayerCallback","layerGroup","layersInGroup","i","layerInGroup","LayerGroup","eventKeyVisibility","eventKeyOpacity","listenerKeyCenter","listenerKeyResolution","mapLayerGroup","unByKey","WhatsAppOutlined","whatsAppUrl","MailOutlined","mailToUrl","CopyOutlined","copy","SHOGunMapFishPrintV3WMSSerializer","MapFishPrintV3WMSSerializer","serialize","serialized","super","baseURL","optsToApply","tileSize","validateSource","MapFishPrintV3TiledWMSSerializer","CustomFieldInput","maxLength","inputText","setInputText","addCustomParam","showCount","LayoutSelect","printManager","onValueChange","setLayout","prevLayoutRef","getLayouts","OutputFormatSelect","outputFormats","setOutputFormat","toLocaleUpperCase","ResolutionSelect","setResolution","setDpi","getDpis","d","ScaleSelect","scale","setScale","updateScale","pmScale","getScale","transformInteraction","getInteractions","MapFishPrintV3Manager","TRANSFORM_INTERACTION_NAME","getScales","toLocaleString","Shared","customParams","FORMAT","LAYER","queryParams","encodeURIComponent","PrintForm","active","customPrintScales","layerBlackList","currentLanguageCode","customMapParams","print","printApp","setPrintManager","layerFilter","legendFilter","notBlacklisted","notHidden","printableLayer","SCALE","getPrintableLayers","printLayer","getAttributions","manager","extentLayer","getExtentLayer","allAttributions","currentLayerAttribution","LayerUtil","getLayerAttributionsText","initializeMapProvider","pManagerOpts","getResolutions","units","getUnits","reverse","transformOpts","rotate","serializers","MapFishPrintV3GeoJsonSerializer","MapFishPrintV3OSMSerializer","MapFishPrintV3WMTSSerializer","SHOGunMapFishPrintV3TiledWMSSerializer","toReversed","pManager","init","apps","getPrintApps","setPrintApp","getOutputFormats","attributions","shutdownManager","setCustomParams","setCustomMapParams","onAlertClose","isInitiated","initialValue","handleLayoutChange","setFieldValue","getClosestScaleToFitMap","faDownload","downloadUrl","AttributionRow","keyName","validator","fields","resolve","AutoComplete","o","AttributionDrawer","onCustomClose","isFormValid","setIsFormIsValid","availableFeatureCollectionAttributes","setAvailableFeatureCollectionAttributes","availableFeatureAttributes","setAvailableFeatureAttributes","contextHolder","useNotification","updateAvailableFeatureAttributes","currentKeys","filteredPropertyEntries","OlGeometry","filteredProperties","fromEntries","formProperties","digitizedFeatures","featureCollectionAttributes","Set","prop","add","from","selectInteraction","interaction","Row","onFinish","input","destroy","success","duration","unset","values","autoComplete","changedFields","List","remove","rmFn","getFormItems","okText","cancelText","removeAndMessage","faMinusSquare","htmlType","DeleteAllButton","ExclamationCircleOutlined","StylingButton","drawerVisibilty","toggleDrawer","faPaintBrush","Draw","showDrawPoint","showDrawLine","showDrawPolygon","showDrawCircle","showDrawRectangle","showDrawAnnotation","showModifyFeatures","showUploadFeatures","showDeleteFeatures","isAttributeDrawerOpen","setIsAttributeDrawerOpen","selectedButton","setSelectedButton","onGeoJSONUpload","geoJSONFile","fileReader","geoJSONFeatures","GeoJSON","mapProjection","transform","digitizeLayerSource","err","readAsText","selectedName","childProps","pressed","faCircle","faGripLines","faShapes","faCircleNotch","faSquare","faFont","onToggle","faPenToSquare","faEraser","UploadButton","uploadedFiles","files","validity","checkValidityOfUploadFile","faUpload","onGeoJSONDownload","clonedFeatures","clonedFeature","geoJSON","writeFeatures","fileToDownload","Blob","link","removeChild","initVectorLayer","OlSourceVector","featureStyle","OlLayerVector","addLayer","deinitVectorLayer","vectorLayer","PaginationToolbar","exportFilter","activeCopyTools","featureInfo","isEditButtonVisible","isLayerEditable","Pagination","simple","total","pageSize","onEditFeatureBtnClick","geojsonFeatureString","writeFeature","geojsonFeature","setLayerId","showEditFeatureDrawer","CopyTools","COPY_AS_GEOJSON","onCopyAsGeoJSONClick","selectedFeatureClone","propertyEntries","faClipboardCheck","COPY_AS_OBJECT","onCopyAsObjectClick","props","_clone","faClipboardList","FeatureInfoTabs","currentPage","setCurrentPage","activeKey","setActiveKey","vectorLayerName","useHighlightVectorLayer","page","defaultActiveKey","onTabClick","FeatureInfoPropertyGrid","setBlacklistedAttributes","geomAttributes","attributeFilter","getKeys","PropertyGrid","sticky","dataIndex","ellipsis","scrollToFirstRowOnChange","FeatureInfo","queryLayers","setQueryLayers","activeTabKey","setActiveTabKey","featureInfoEnabled","OlLayerImage","OlLayerTile","updateQueryLayers","layerCandidates","mapLayers","changeActiveKey","findMapLayerIndex","unqualifiedMapLayerName","getUnqualifiedLayerName","CoordinateInfo","featureCount","coordinateInfoState","pluginRendererAvailable","allLayers","mapLayerIndex","mapLayer","sort","destroyInactiveTabPane","fetchOpts","serializedFeatures","entry","selectedFeatures","setSelectedFeatures","WmsTimeSlider","setValue","TIME","min","setMin","max","setMax","marks","setMarks","dimension","timeValues","m","default","nearest","NaN","diff","faClock","TimeSlider","updateParams","step","LayerTreeContextMenu","visibleLegendsIds","setVisibleLegendsIds","extentLoading","setExtentLoading","downloadConfig","zoomToLayerExtent","getAllLayerGroups","layerGroups","parentGroups","getParentLayerGroups","parentGroup","removeExternalLayer","externalLayerGroup","uploadedLayerGroup","downloadLayer","reqOpts","dropdownMenuItems","legendVisible","downloadItems","dlConfig","formatName","encodeURI","decodeURI","legendId","newLegendIds","setLayerDetailsLayer","showLayerDetailsModal","faEllipsisV","LoadingIndicator","LayerTree","showLegendsState","layerTree","showLegends","initialLayersUid","layerTileLoadCounter","setLayerTileLoadCounter","registerTileLoadHandler","hasListener","tileLoadStartListener","tileLoadEndListener","checkListeners","activeLayers","counter","loaded","percent","isInteger","Math","round","RgLayerTree","nodeTitleRenderer","mapView","unit","LayerTransparencySlider","formatter","Legend","extraParams","LEGEND_OPTIONS","TRANSPARENT","forEachFeature","draggable","Measure","showMeasureDistance","showMeasureArea","MeasureButton","geodesic","measureType","continueLineMsg","faPenRuler","continuePolygonMsg","Panel","Collapse","ToolMenu","collapseWidth","minWidth","maxWidth","availableTools","toolMenu","activeKeys","collapsed","setCollapsed","menuTools","setMenuTools","isResizing","setIsResizing","setWidth","noCollapseWidth","setNoCollapseWidth","mobileQuery","matchMedia","mobileNavigatorRegEx","RegExp","matches","test","navigator","userAgent","exclusiveTools","tool","lastExclusiveTool","setActiveKeys","setFeatureInfoEnabled","setLayerTreeEnabled","activeUploadTools","getToolPanelConfig","faRuler","faPalette","showDownloadFeatures","showStyleFeatures","faCircleInfo","faFileDownload","faStream","UploadTools","addWMS","showAdd","authorizedRoles","role","hasResourceRole","clientId","dataUpload","showUpload","faShareNodes","faLanguage","onMouseDown","onMouseUp","onMouseMove","offsetLeft","clientX","expandIconPosition","destroyInactivePanel","_toArray","getToolPanels","panels","toolPanelConfig","panel","header","faChevronRight","faChevronLeft","Dragger","UploadDataModal","uploadError","setUploadError","uploadSuccess","setUploadSuccess","isUploading","setIsUploading","uploadDataModal","getAttributeType","dbfFieldType","customRequest","splittedFileName","geoServerBaseUrl","base","workspace","Date","now","uploadData","baseUrl","storeName","coverageStoreUrl","coverageUrl","coverage","nativeName","keywords","uploadGeoTiff","shp","Shapefile","load","featureTypeName","featureTypeAttributes","attribute","k","dbfContent","minOccurs","maxOccurs","nillable","binding","shxContent","featureTypeUrl","uploadShapeZip","maxCount","showUploadList","beforeUpload","maxSize","limit","fileSize","supportedFormats","hoverable","SHOGunApplicationUtil","parseTileLayer","search","URLSearchParams","useQueryParams","configString","addLayerGroup","parser","parseLayer","isExternalLayer","isUploadedLayer","groupName","App","useRestoreTransientLayers","loadingMask","createSlice","initialState","authorities","commitHash","userId","reducers","setAppInfo","payload","actions","setDescription","setLegal","setLogoPath","setSearchEngines","setTitle","setUser","dynamicMiddleware","createDynamicMiddleware","createReducer","asyncReducers","combineReducers","store","configureStore","reducer","middleware","getDefaultMiddleware","prepend","LoadingErrorCode","SHOGunAPIClient","getConfigLang","enGB","deDE","plPl","csCZ","setupSHOGunMap","view","parseMapView","application","constrainOnlyCenter","ll","fromLonLat","ur","setConstrainResolution","layersConfig","parseLayerTreeNodes","parseLayerTree","OlMap","controls","OlControlDefaults","zoom","setupDefaultMap","osmLayer","OlSourceOsm","temperatureLayer","eoLayerGroup","backgroundLayerGroup","center","OlView","loadPluginModules","moduleName","moduleUrl","remoteNames","__webpack_init_sharing__","element","parentElement","onerror","head","container","__webpack_share_scopes__","modules","remoteName","module","matchRole","loader","paths","vs","keycloakEnabled","keycloakOnLoad","onLoadAction","keycloakHost","host","keycloakRealm","realm","keycloakClientId","Keycloak","onTokenExpired","updateToken","onLoad","checkLoginIframe","initKeycloak","setKeycloak","applicationIdString","applicationId","APP_ID_NOT_SET","appConfig","shogunClient","APP_UNAUTHORIZED","getApplicationConfiguration","setLoadingImage","path","loadingImageElement","getElementById","localStorage","setItem","theme","staticAppContextUrl","getStaticApplicationConfiguration","APP_CONFIG_STATIC_NOT_FOUND","APP_CONFIG_NOT_FOUND","defaultLanguage","use","LanguageDetector","initOpts","primaryColor","secondaryColor","complementaryColor","faviconPath","favicon","querySelector","newLink","parseTheme","ConfigProvider","Color","isLight","darken","hexa","isDark","lighten","setProperty","toolConfig","engines","setFeatureInfoActiveCopyTools","uploadTools","setLayerTreeActiveUploadTools","setLayerTreeShowLegends","setAvailableTools","setApplicationToStore","subscribe","getState","getAppInfo","getApplicationInfo","setAppInfoToStore","setUserToStore","getUser","userRoles","realm_access","checkRoles","list","featureEditRoles","authorizedRolesForCreate","authorizedRolesForUpdate","authorizedRolesForDelete","authorizedRolesForEditingGeometries","setUserEditMode","setupMap","clientPlugins","resourcePath","exposedPaths","clientPluginModules","clientPluginDefault","PluginComponent","pluginApplicationConfig","tc","locale","lng","resources","translation","addResourceBundle","replaceReducer","middlewares","mw","addMiddleware","loadPlugins","fallback","SHOGunAPIClientProvider","PluginProvider","Provider","MapContext","isInitialized","errorDescription","appId","renderApp","de","clientVersionTitle","backendVersionTitle","addSelectedLayers","addAllLayers","inputPlaceholder","externalWmsFolder","columnTitle","invalidUrlErrorMsg","requestWmsGetCapabilitiesInstruction","processedLayersFolder","button","whatsAppTooltip","mailTooltip","copyTooltip","copiedToClipboard","copyToClipboardFailed","area","clicktodrawline","clicktodrawarea","point","polygon","circle","rectangle","modify","delete","export","deleteAll","confirmMessage","openColorPalette","closeColorPalette","usageHint","transparency","noLegendAvailable","layerZoomToExtent","extentError","showLegend","hideLegend","layerDetails","internalConfigurationButtonTooltip","internalConfigurationButtonTooltipPressed","noDataPlaceholder","layerNameLabel","layerTitleLabel","serviceAbstractLabel","abstractLabel","accessConstraintsLabel","capabilitiesUrlLabel","contactLabel","minScaleLabel","maxScaleLabel","bboxLabel","expand","collapse","measure","draw","addWms","layertree","languageSelect","initialTitle","titlePlaceholder","comment","commentPlaceholder","dpi","downloadBtnText","printJobErrorMsg","initErrorMsg","outputFormatPlaceholder","resolutionPlaceholder","managerErrorMessage","refSystem","mousePosition","privacypolicy","Index","applicationLoadErrorMessage","applicationLoadErrorDescription","errorDescriptionAppIdNotSet","errorDescriptionAppConfigNotFound","errorDescriptionAppConfigStaticNotFound","permissionDeniedUnauthorized","Nominatim","settingsMenuTitle","infoMenuTitle","helpMenuTitle","logoutMenuTitle","loginMenuTitle","uploadedDataFolder","hint","general","zipContent","searchInViewBox","nominatimTitle","searchPlaceholder","featureEditor","noLayerFoundError","isFeatureLockedErrorMsg","closeDrawerWarnTitle","closeDrawerWarnContent","limitedUsageHint","createFeature","saveErrorMsg","deleteErrorMsg","edit","undo","redo","Attribution","select","submit","missingKey","missingValue","keyPlaceholder","valuePlaceholder","keyInUse","AttributionPopConfirm","notificationDeleteText","notificationApplyText","errorNoGeometry","EditFeatureButton","FeaturePropertyGrid","copyAsGeoJson","copyAsObject","editDisabled","JsonModal","buttonTitle","modalTitle","defaultModalTitle","defaultRowPlaceholder","confirmDeleteTitle","en","fallbackLng","debug","interpolation","escapeValue","returnNull","initReactI18next","addLayerModalSlice","show","editFeatureSlice","editFeatureDrawerOpenSlice","setFeatureInfoConfig","layerDetailsModalSlice","setLayerTreeConfig","printSlice","printLegend","addCustomMapParam","uploadDataModalSlice","___CSS_LOADER_EXPORT___"],"sourceRoot":""}