"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["3759"],{68112:function(e,t,r){r.r(t),r.d(t,{Legend:function(){return o}});var n=r(84131),a=r(62163),l=r(12038),c=r(54388),s=r(91885),i=r(9948),g=r(35703);let A=(e,t)=>{let r;return e.get("legendUrl")?e.get("legendUrl"):c.Z.getLegendGraphicUrl(e,t)},o=({className:e,layer:t,extraParams:r,onError:c,errorMsg:o,headers:u,loadingMask:d=!0,...f})=>{let[h,m]=(0,i.useState)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),[E,C]=(0,i.useState)(A(t,r)),[b,w]=(0,i.useState)(!1),[U,k]=(0,i.useState)(!1),p=(0,i.useCallback)(e=>{l.Z.warn(`Image error for legend of "${t.get("name")}".`),w(!0),c&&c(e)},[t,c]),_=(0,i.useCallback)(async()=>{try{k(!0);let e=await fetch(E,{headers:u});if(!e.ok)throw Error("No successful response returned while getting the legend graphic");let t=await e.blob();m(e=>(URL.revokeObjectURL(e),URL.createObjectURL(t)))}catch(e){l.Z.error("Error while setting the img src: ",e),p(e)}finally{k(!1)}},[p,u,E]);(0,i.useEffect)(()=>{_()},[_]),(0,i.useEffect)(()=>{C(A(t,r))},[t,r,_]);let R=t.get("name")?t.get("name")+" legend":"layer legend";return i.createElement("div",{className:`${g.M}legend ${e||""}`,...f},i.createElement(s.Z,{spinning:!!d&&U,indicator:i.createElement(a.G,{icon:n.IJ7})},b?i.createElement("div",{className:"legend-load-error"},o):i.createElement("img",{src:h,alt:R,onError:p.bind(void 0)})))};t.default=o},35703:function(e,t,r){r.d(t,{M:function(){return n}});let n="react-geo-"}}]);
//# sourceMappingURL=3759.2130f6b9c19e9bed.js.map