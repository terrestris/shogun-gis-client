"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["7002"],{54647:function(e,t,r){r.r(t),r.d(t,{default:function(){return q},MeasureButton:function(){return j}});var n=r(9948),o=r.n(n),a=r(47387),l=r.n(a),i=r(22771),c=r.n(i),u=r(12162),s=r.n(u),f=r(91657),g=r.n(f),m=r(33782),d=r.n(m),p=r(2087),y=r.n(p),v=r(16333),w=r.n(v),C=r(35586),k=r.n(C),b=r(18428),$=r.n(b),h=r(41357),Z=r.n(h),M=r(99956),E=r.n(M),S=r(76823),P=r.n(S),A=r(23173),L=r.n(A),_=r(50268),N=r.n(_),O=r(76464);let D="react-util-";var I=r(39660),R=r(18429),G=r(49968),H=r(4667),T=({measureType:e,measureLayerName:t="react-util-measure",fillColor:r="rgba(255, 0, 0, 0.5)",strokeColor:o="rgba(255, 0, 0, 0.8)",showMeasureInfoOnClickedPoints:a=!1,showHelpTooltip:i=!0,decimalPlacesInTooltips:u=2,multipleDrawing:f=!1,continuePolygonMsg:m="Click to draw area",continueLineMsg:p="Click to draw line",continueAngleMsg:v="Click to draw angle",clickToDrawText:C="Click to measure",measureTooltipCssClasses:b={tooltip:`${D}measure-tooltip`,tooltipDynamic:`${D}measure-tooltip-dynamic`,tooltipStatic:`${D}measure-tooltip-static`},active:h=!1,geodesic:M=!0,measureRadius:S=!1})=>{let[A,_]=(0,n.useState)(),T=(0,n.useRef)(),B=(0,n.useRef)(),x=(0,n.useRef)([]),K=(0,I.Z)(),j=(0,G.Z)(()=>new(k())({properties:{name:t},source:new(Z())({features:new(l())}),style:new(N())({fill:new(P())({color:r}),stroke:new(L())({color:o,width:2}),image:new(E())({radius:7,fill:new(P())({color:r})})})}),[t,r,o,r],h),q=(0,R.$)(()=>new(w())({source:j?.getSource()||void 0,type:(e=>{switch(e){case"line":case"angle":default:return"MultiLineString";case"polygon":return"MultiPolygon";case"circle":return"Circle"}})(e),maxPoints:"angle"===e?2:void 0,style:new(N())({fill:new(P())({color:r}),stroke:new(L())({color:o,lineDash:[10,10],width:2}),image:new(E())({radius:5,stroke:new(L())({color:o}),fill:new(P())({color:r})})}),freehandCondition:()=>!1}),[e,j,r,o,r],h),z=(0,n.useCallback)(()=>{K&&T.current&&(K.removeOverlay(T.current),T.current=void 0)},[K]),F=(0,n.useCallback)(()=>{if(K&&x.current.length>0){for(let e of x.current)K.removeOverlay(e);x.current=[]}},[K]),J=(0,n.useCallback)(()=>{K&&B.current&&(K.removeOverlay(B.current),B.current=void 0)},[K]),Q=(0,n.useCallback)(()=>{z(),F(),J(),j?.getSource()?.clear()},[j,z,F,J]);(0,n.useEffect)(()=>{if(h)return()=>{Q()}},[h,Q]);let U=(0,n.useCallback)(()=>{K&&!B.current&&(B.current=new($())({element:document.createElement("div"),offset:[15,0],positioning:"center-left",className:b?.tooltip??""}),K.addOverlay(B.current))},[K,b?.tooltip]),V=(0,n.useCallback)(()=>{K&&!T.current&&(T.current=new($())({element:document.createElement("div"),offset:[0,-15],positioning:"bottom-center",className:b?`${b.tooltip} ${b.tooltipDynamic}`:""}),K.addOverlay(T.current))},[K,T,b]),W=(0,n.useCallback)(()=>{let t,r;if(!T.current||!A||!K)return;let n=A.getGeometry();if(n instanceof d()?n=n.getPolygons()[0]:n instanceof g()&&(n=n.getLineStrings()[0]),n instanceof c()){if(S){let e=O.Z.getAreaOfCircle(n,K),r=Math.pow(10,u),o=Math.round(n.getRadius()*r)/r;t=`${o.toString()} m`,e>1e6*Math.PI&&(t=Math.round(n.getRadius()/1e3*r)/r+" km")}else t=O.Z.formatArea(n,K,u,M);r=n.getCenter()}else if(n instanceof y())t=O.Z.formatArea(n,K,u,M),r=n.getInteriorPoint().getCoordinates();else{if(!(n instanceof s()))return;r=n.getLastCoordinate(),"line"===e?t=O.Z.formatLength(n,K,u,M):"angle"===e&&(t=O.Z.formatAngle(n,0))}let o=T.current.getElement();t&&o&&(o.innerHTML=t),T.current.setPosition(r)},[u,A,M,K,e,S]),X=(0,n.useCallback)(e=>{K&&(f||Q(),_(e.feature))},[Q,K,f]),Y=(0,n.useCallback)(t=>{if(!A||!K)return;let r=A.getGeometry();r instanceof d()&&(r=r.getPolygons()[0]),r instanceof g()&&(r=r.getLineStrings()[0]);let n="line"===e?O.Z.formatLength(r,K,u,M):O.Z.formatArea(r,K,u,M);if(parseInt(n,10)>0){let e=document.createElement("div");b&&(e.className=`${b.tooltip} ${b.tooltipStatic}`),e.innerHTML=n;let r=new($())({element:e,offset:[0,-15],positioning:"bottom-center"});K.addOverlay(r),r.setPosition(t),x.current.push(r)}},[u,A,M,K,b,e]),ee=(0,n.useCallback)(t=>{if(f&&Y(t.feature.getGeometry().getLastCoordinate()),(f||a)&&("line"===e||"polygon"===e))z();else{let e=T.current?.getElement();e&&b&&(e.className=`${b.tooltip} ${b.tooltipStatic}`),T.current?.setOffset([0,-7])}W(),_(void 0),(f||a)&&("line"===e||"polygon"===e)&&(T.current=void 0,V())},[Y,V,b,e,f,z,a,W]),et=(0,n.useCallback)(t=>{if(!B.current)return;let r=B.current?.getElement();if(!r)return;let n=C;"polygon"===e?n=m:"line"===e?n=p:"angle"===e&&(n=v),r.innerHTML=n??"",B.current.setPosition(t)},[C,v,p,m,B,e]),er=(0,n.useCallback)(e=>{!e.dragging&&h&&et(e.coordinate)},[et,h]),en=(0,n.useCallback)(t=>{a&&"line"===e&&Y(t.coordinate)},[Y,e,a]);return(0,H.Z)(q,e=>e.on("drawstart",e=>{X?.(e)}),[q,X]),(0,H.Z)(q,e=>e.on("drawend",e=>{ee?.(e)}),[q,ee]),(0,H.Z)(K,e=>e.on("pointermove",e=>{er?.(e)}),[K,er]),(0,H.Z)(K,e=>e.on("click",e=>{en?.(e)}),[K,en]),(0,n.useEffect)(()=>{V(),i&&U()},[U,V,i]),(0,H.Z)(A,e=>e.getGeometry()?.on("change",()=>{W?.()}),[A,W]),null},B=r(35703),x=r(32022);let K=`${B.M}measurebutton`,j=({measureType:e="line",measureLayerName:t="react-geo_measure",fillColor:r="rgba(255, 0, 0, 0.5)",strokeColor:n="rgba(255, 0, 0, 0.8)",showMeasureInfoOnClickedPoints:a=!1,showHelpTooltip:l=!0,decimalPlacesInTooltips:i=2,multipleDrawing:c=!1,continuePolygonMsg:u="Click to draw area",continueLineMsg:s="Click to draw line",continueAngleMsg:f="Click to draw angle",clickToDrawText:g="Click to measure",measureTooltipCssClasses:m={tooltip:`${B.M}measure-tooltip`,tooltipDynamic:`${B.M}measure-tooltip-dynamic`,tooltipStatic:`${B.M}measure-tooltip-static`},pressed:d=!1,geodesic:p=!0,measureRadius:y=!1,className:v,...w})=>{T({active:d,measureType:e,measureLayerName:t,fillColor:r,strokeColor:n,showMeasureInfoOnClickedPoints:a,showHelpTooltip:l,decimalPlacesInTooltips:i,multipleDrawing:c,continuePolygonMsg:u,continueLineMsg:s,continueAngleMsg:f,clickToDrawText:g,measureTooltipCssClasses:m,geodesic:p,measureRadius:y});let C=v?`${v} ${K}`:K;return o().createElement(x.Z,{pressed:d,className:C,...w})};var q=j},32022:function(e,t,r){var n=r(9948),o=r.n(n),a=r(40440),l=r(76534),i=r(35703);t.Z=({type:e="primary",pressed:t=!1,tooltipProps:r={mouseEnterDelay:1.5},className:n,tooltip:c,tooltipPlacement:u,pressedIcon:s,icon:f,children:g,value:m,onClick:d,onChange:p=()=>void 0,...y})=>{let v=`${i.M}togglebutton`,w=n?`${n} ${v}`:v,C="";return t&&(C=" btn-pressed"),o().createElement(a.Z,{title:c,placement:u,...r},o().createElement(l.ZP,{type:e,onClick:e=>{d&&(d(e),e.defaultPrevented)||p(e,m)},onChange:p,className:`${w}${C}`,"aria-pressed":t,icon:t?s:f,...y},g))}},35703:function(e,t,r){r.d(t,{M:function(){return n}});let n="react-geo-"},18429:function(e,t,r){r.d(t,{$:function(){return l}});var n=r(9948),o=r(96486),a=r(39660);let l=(e,t,r)=>{let l=(0,a.Z)(),[i,c]=(0,n.useState)();return(0,n.useEffect)(()=>{if(!l)return;let t=e();if(t)return c(t),l.addInteraction(t),()=>{l.removeInteraction(t),c(void 0)}},[...t,l]),(0,n.useEffect)(()=>{!i||(0,o.isNil)(r)||i.setActive(r)},[i,r]),i}},4667:function(e,t,r){r.d(t,{N:function(){return a}});var n=r(9948),o=r(42893);let a=(e,t,r,a)=>{(0,n.useEffect)(()=>{if(!e||!1===a)return;let r=(Array.isArray(e)?e:[e]).flatMap(e=>{let r=t(e);return Array.isArray(r)?r:[r]}).filter(e=>void 0!==e);return()=>{for(let e of r)(0,o.unByKey)(e)}},[e,a,t,...r])};t.Z=a}}]);
//# sourceMappingURL=7002.6a7b978153e94c2f.js.map