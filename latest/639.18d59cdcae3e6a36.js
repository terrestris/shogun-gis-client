(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["639"],{80903:function(e,t,n){"use strict";n.d(t,{Br:function(){return g},S0:function(){return d}});var r=n(2543),i=n.n(r),l=n(62193),o=n.n(l),a=n(85015),s=n.n(a),u=n(46624),c=n(37100),f=n.n(c);let g=[{crsCode:"EPSG:25832",definition:"+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"},{crsCode:"EPSG:31466",definition:"+proj=tmerc +lat_0=0 +lon_0=6 +k=1 +x_0=2500000 +y_0=0 +ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs"},{crsCode:"EPSG:31467",definition:"+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs"}],p=[{alias:"urn:ogc:def:crs:EPSG::3857",mappedCode:"EPSG:3857"},{alias:"urn:ogc:def:crs:EPSG::25832",mappedCode:"EPSG:25832"},{alias:"urn:ogc:def:crs:EPSG::31466",mappedCode:"EPSG:31466"},{alias:"urn:ogc:def:crs:EPSG::31467",mappedCode:"EPSG:31467"}];class d{static initProj4Definitions(e,t=!0){let n=[];if(t&&(n=g),!i()(e)||e){let t=Array.isArray(e)?e:[e];t?.forEach(e=>{n?.findIndex(t=>t.crsCode===e?.crsCode)===-1&&n.push(e)})}n?.length>0&&(n.forEach(e=>f().defs(e.crsCode,e.definition)),(0,u.register)(f()))}static initProj4DefinitionMappings(e,t=!0){let n=[];if(t&&(n=p),!o()(e)){let t=Array.isArray(e)?e:[e];t?.forEach(e=>{n?.findIndex(t=>t.alias===e?.alias)===-1&&n.push(e)})}n?.map(e=>{let t=f().defs(e.mappedCode);f().defs(e.alias,t)})}static toDms(e){let t=Math.floor(e),n=Math.floor((e-t)*60),r=(e-t-n/60)*3600;return`${t}\xb0 ${d.zerofill(n)}' ${d.zerofill(r.toFixed(2))}''`}static toDmm(e){let t=Math.floor(e);return`${t}\xb0 ${d.zerofill(((e-t)*60).toFixed(4))}'`}static zerofill(e){let t=s()(e)?parseFloat(e):e;return t<10?`0${t}`:`${t}`}}},38961:function(e,t,n){"use strict";n.r(t),n.d(t,{CoordinateInfo:function(){return C},default:function(){return b}});var r=n(76395),i=n.n(r),l=n(69843),o=n.n(l),a=n(2543),s=n(58980),u=n.n(s),c=n(71174),f=n.n(c),g=n(25738),p=n.n(g),d=n(15784),m=n.n(d),E=n(1576),h=n.n(E),v=n(50858),y=n(82804),S=n(23712),_=n(30126);let x=e=>{let t=e.getId()??e.get("id");return(0,a.isString)(t)?t.split(".")[0]:t?.toString()??(0,a.uniqueId)("UNKNOWN")},C=({resultRenderer:e=()=>i().createElement(i().Fragment,null),...t})=>{let n=(({active:e,clickEvent:t="click",drillDown:n=!1,featureCount:i=1,fetchOpts:l={},getInfoFormat:s=()=>"application/json",layerFilter:c=()=>!0,onError:g=()=>void 0,onSuccess:d=()=>void 0,registerOnClick:E=!0,registerOnPointerMove:C=!1,registerOnPointerRest:b=!1})=>{let P=(0,_.A)(),[w,A]=(0,r.useState)(null),[G,j]=(0,r.useState)(null),[k,F]=(0,r.useState)([]),[D,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(P&&D)return P.getTargetElement().style.cursor="wait",()=>{P.getTargetElement().style.cursor="auto"}},[D,P]);let I=(0,r.useCallback)(e=>{if(e.dragging||o()(P))return;let t=P.getEventPixel(e.originalEvent),n=P.getAllLayers().filter(e=>c(e)).filter(e=>{let n=e.getData(t);return n&&n[3]>0});P.getTargetElement().style.cursor=n?.length>0?"pointer":""},[c,P]),T=(0,r.useCallback)(async e=>{if(o()(P))return;"dblclick"===t&&e.stopPropagation();let r=P.getView(),E=r.getResolution(),_=r.getProjection(),C=P.getEventPixel(e.originalEvent),b=e.coordinate,w=[0,0];e.originalEvent instanceof PointerEvent&&(w=[e.originalEvent.x,e.originalEvent.y]);let G=P.getAllLayers().reverse().filter(c).filter(e=>e.getData&&e.getData(C)&&(0,S.lb)(e)),k=P.getAllLayers().reverse().filter(c).filter(e=>(0,S.G5)(e));O(!0);try{let e=[];for(let t of G)try{if(!n&&e.length>0)break;let r=t.getSource();if(!r)continue;let o=await s(t),a=r.getFeatureInfoUrl(b,E,_,{INFO_FORMAT:o,FEATURE_COUNT:i});if(a){let n;n=l instanceof Function?l(t):l[(0,v.getUid)(t)];let r=await fetch(a,n),i=null,s=!1;if("application/vnd.ogc.gml"===o)i=new(h());else if(o.indexOf("gml/2")>-1)i=new(f());else if("application/vnd.ogc.gml/3.1.1"===o||"text/xml; subtype=gml/3.1.1"===o)i=new(p());else if("application/vnd.ogc.gml/3.2"===o||"text/xml; subtype=gml/3.2"===o)i=new(m());else{if(!("application/json"===o||o.indexOf("json")>-1))continue;i=new(u()),s=!0}let c=s?await r.json():await r.text();e.push(...i.readFeatures(c).map(e=>({feature:e,layer:t,featureType:x(e)})))}}catch(e){y.A.error(e)}for(let t of k){if(!n&&e.length>0)break;let r=t.getSource();r&&e.push(...r.getFeaturesAtCoordinate(b).map(e=>({feature:e,layer:t,featureType:x(e)})))}let t=(0,a.cloneDeep)(e),r=(0,a.cloneDeep)(b),o=(0,a.cloneDeep)(w);F(t),A(r),j(o),d?.({clickCoordinate:r,pixelCoordinate:o,loading:!1,features:t})}catch(e){y.A.error(e),g?.(e)}O(!1)},[t,n,i,l,s,c,P,g,d]);return(0,r.useEffect)(()=>{let n,r,i;return e&&(E&&t&&(i=P?.on(t,T)),C&&(n=P?.on("pointermove",I)),b&&(r=P?.on("pointerrest",T))),()=>{i&&t&&P?.un(t,i.listener),n&&P?.un("pointermove",n.listener),r&&P?.un("pointerrest",r.listener)}},[e,P,I,T,E,C,b,t]),{clickCoordinate:w,features:k,loading:D,pixelCoordinate:G}})(t);return o()(n)?null:i().createElement(i().Fragment,null,e(n))};var b=C},73645:function(e,t,n){"use strict";var r=n(76395);t.A=n.n(r)().createContext(null)},82804:function(e,t,n){"use strict";var r=n(73065);let i=n.n(r)().getLogger("app-logger");i.setLevel("DEBUG"),t.A=i},62193:function(e,t,n){var r=n(88984),i=n(5861),l=n(72428),o=n(56449),a=n(64894),s=n(3656),u=n(55527),c=n(37167),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||c(e)||l(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},94092:function(e,t,n){"use strict";function r(){throw Error("Unimplemented abstract method.")}n.r(t),n.d(t,{VERSION:function(){return o},abstract:function(){return r},getUid:function(){return l}});let i=0;function l(e){return e.ol_uid||(e.ol_uid=String(++i))}let o="10.6.1"}}]);
//# sourceMappingURL=639.18d59cdcae3e6a36.js.map