"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([[592],{60697:function(e,t,n){n.r(t),n.d(t,{App:function(){return hn},default:function(){return wn}});var a=n(67294),r=n(38648),l=n(50146),o=n(71577),i=n(4107),s=n(44338),c=n(74187),u=n(68734),d=n(64478),m=n(83687),p=n(80815),g=n(95998);var f=()=>(0,g.I0)();const y=g.v9;var h=y,w=n(20908),E=n(76712),b=n(93379),v=n.n(b),k=n(7795),Z=n.n(k),L=n(90569),T=n.n(L),A=n(3565),P=n.n(A),M=n(19216),S=n.n(M),C=n(44589),F=n.n(C),I=n(40171),O={};O.styleTagTransform=F(),O.setAttributes=P(),O.insert=T().bind(null,"head"),O.domAPI=Z(),O.insertStyleElement=S();v()(I.Z,O),I.Z&&I.Z.locals&&I.Z.locals;function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},N.apply(this,arguments)}var x=({...e})=>{const[t,n]=(0,a.useState)(!1),[g,y]=(0,a.useState)([]),[b,v]=(0,a.useState)([]),[k,Z]=(0,a.useState)("https://sgx.geodatenzentrum.de/wms_topplus_open?request=GetCapabilities&service=wms"),L=h((e=>e.addLayerModal.visible)),T=f(),A=(0,p.useMap)(),{t:P}=(0,d.$)(),M=()=>{v([]),y([]),T((0,w.Cp)()),T((0,E.ui)("addLayer"))},S=e=>{if(!A)return;const t=P("AddLayerModal.externalWmsFolder");let n=m.Ci.getLayerByName(A,t);if(!n){n=new u.default,n.set("name",t);const e=A.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}e.forEach((e=>{n.getLayers().getArray().includes(e)||(e.set("isExternalLayer",!0),n.getLayers().push(e))})),n.set("hideInLayerTree",n.getLayers().getLength()<1),M()};return a.createElement(l.Z,N({className:"add-layer-modal",title:P("AddLayerModal.title"),visible:L,onCancel:M,footer:[a.createElement(o.Z,{key:"add-selected",disabled:b?.length<1,onClick:()=>{const e=g.filter((e=>b.includes((0,c.getUid)(e))));S(e)}},P("AddLayerModal.addSelectedLayers")),a.createElement(o.Z,{key:"add-all",disabled:g?.length<1,onClick:()=>{S(g)}},P("AddLayerModal.addAllLayers"))]},e),a.createElement(i.Z.Search,{placeholder:P("AddLayerModal.inputPlaceholder"),value:k,onChange:e=>{Z(e.target.value)},onSearch:async e=>{try{n(!0);const t=await m.X9.getWmsCapabilities(e),a=m.X9.getLayersFromWmsCapabilities(t,"Title");y(a)}catch(e){r.Z.error({message:P("AddLayerModal.errorMessage"),description:P("AddLayerModal.errorDescription")})}finally{n(!1)}},enterButton:!0}),a.createElement(s.Z,{loading:t,columns:[{title:P("AddLayerModal.columnTitle"),render:(e,t)=>t.get("title")}],rowKey:e=>(0,c.getUid)(e),rowSelection:{selectedRowKeys:b,onChange:v},pagination:!1,dataSource:g}))},D=n(7294);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}var R=({...e})=>{const t=(0,p.default)(),n=function(){const{search:e}=window.location;return a.useMemo((()=>new URLSearchParams(e)),[e])}();return(0,a.useEffect)((()=>{t&&m.kn.applyLink(t)}),[n.get("center"),n.get("zoom"),n.get("layers")]),t?a.createElement(D.default,j({map:t},e)):a.createElement(a.Fragment,null)},_=n(27049),U=n(4540),$=n(37494),z=n(91900),V=n(26954),K=n(78415),B={};B.styleTagTransform=F(),B.setAttributes=P(),B.insert=T().bind(null,"head"),B.domAPI=Z(),B.insertStyleElement=S();v()(K.Z,B),K.Z&&K.Z.locals&&K.Z.locals;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W.apply(this,arguments)}var G=({...e})=>{const{t:t}=(0,d.$)(),n=(0,p.default)();(0,a.useEffect)((()=>{if(!n)return;n.getControls().getArray().find((e=>e instanceof $.Z))||n.addControl(new $.Z({target:"scale-line-container"}))}),[n]),(0,a.useEffect)((()=>{if(!n)return;n.getControls().getArray().find((e=>e instanceof U.Z))||n.addControl(new U.Z({coordinateFormat:(0,z.createStringXY)(2),projection:"EPSG:25832",undefinedHTML:"&nbsp;",target:"mouse-position"}))}),[n]);return n?a.createElement("div",W({className:"footer"},e),a.createElement("div",{className:"item-container left-items"},a.createElement("div",{id:"scale-line-container"}),a.createElement(_.Z,{type:"vertical"}),a.createElement("div",{className:"scale-combo"},t("Footer.scale"),": ",a.createElement(V.default,{map:n}),a.createElement(_.Z,{type:"vertical"})),a.createElement("div",{className:"reference-system"},t("Footer.refSystem"),": ",n.getView().getProjection().getCode(),a.createElement(_.Z,{type:"vertical"})),a.createElement("div",{className:"mouse-position-wrapper"},t("Footer.mousePosition"),": ",a.createElement("div",{id:"mouse-position",className:"mouse-position"}))),a.createElement("div",{className:"item-container right-items"},a.createElement(o.Z,{onClick:()=>{window.open("https://www.terrestris.de/de/kontakt/","_blank")},type:"link"},t("Footer.contact")),a.createElement(o.Z,{onClick:()=>{window.open("https://www.terrestris.de/de/impressum/","_blank")},type:"link"},t("Footer.imprint")),a.createElement(o.Z,{onClick:()=>{window.open("https://www.terrestris.de/de/datenschutzerklaerung/","_blank")},type:"link"},t("Footer.privacypolicy")))):a.createElement(a.Fragment,null)},H=n(43985);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Y.apply(this,arguments)}var q=({...e})=>{const t=(0,p.default)(),{t:n}=(0,d.$)();return t?a.createElement(H.default,Y({map:t,countryCodes:"",allowClear:!0,nominatimBaseUrl:"https://nominatim.terrestris.de/search.php?",placeholder:n("Nominatim.placeholder")},e)):a.createElement(a.Fragment,null)},J=n(51436),Q=n(17625),X=n(28682),ee=n(41609),te=n.n(ee),ne=n(11659),ae=n(77257);var re=()=>(0,a.useContext)(ae.ZP),le=n(88495),oe=n.n(le);const ie=({email:e="",size:t=80,rating:n="g",defaultImage:a="identicon",force:r=!1})=>{const l=e.toLowerCase();let o=`https://www.gravatar.com/avatar/${oe()(l)}?s=${t}&r=${n}&d=${a}`;return r&&(o=`${o}&f=y`),o};var se=n(7277);var ce=n(88885),ue={};ue.styleTagTransform=F(),ue.setAttributes=P(),ue.insert=T().bind(null,"head"),ue.domAPI=Z(),ue.insertStyleElement=S();v()(ce.Z,ue),ce.Z&&ce.Z.locals&&ce.Z.locals;function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},de.apply(this,arguments)}var me=({opener:e,...t})=>{const{t:n}=(0,d.$)(),r=h((e=>e.appInfo)),o=h((e=>e.logoPath)),[i,s]=(0,a.useState)(!1),c=()=>{s(!i)};let u;return u=e?a.cloneElement(e,{onClick:c}):a.createElement("button",{onClick:c},"Open"),a.createElement(a.Fragment,null,u,a.createElement(l.Z,de({className:"application-info",title:n("ApplicationInfo.title"),centered:!0,visible:i,onOk:c,onCancel:c,footer:null},t),a.createElement("img",{className:"logo",src:o}),a.createElement(se.Z,{title:n("ApplicationInfo.clientVersionTitle"),value:"4.0.0"}),a.createElement(se.Z,{title:n("ApplicationInfo.backendVersionTitle"),value:`${r.version} (${r.buildTime})`})))},pe=n(72285),ge={};ge.styleTagTransform=F(),ge.setAttributes=P(),ge.insert=T().bind(null,"head"),ge.domAPI=Z(),ge.insertStyleElement=S();v()(pe.Z,ge),pe.Z&&pe.Z.locals&&pe.Z.locals;var fe=()=>{const{t:e}=(0,d.$)(),t=re()?.getKeycloak(),n=h((e=>e.user)),r=e=>{switch(e.key){case"settings":t&&t.accountManagement();break;case"info":default:break;case"login":t&&t.login();break;case"logout":t&&t.logout()}};return a.createElement(ne.default,{size:"small",imageSrc:ie({email:n.providerDetails?.email||"",size:28}),userName:a.createElement(Q.FontAwesomeIcon,{icon:J.gc2}),userMenu:(()=>{const t={key:"login",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.Yem}),label:e("UserMenu.loginMenuTitle")},l={key:"username",label:a.createElement("div",{className:"user-name"},a.createElement("span",null,n.providerDetails?.email))},o={type:"divider"},i={key:"settings",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.gNZ}),label:e("UserMenu.settingsMenuTitle")},s={key:"info",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.YHc}),label:a.createElement(me,{opener:a.createElement("span",{className:"info-opener"},e("UserMenu.infoMenuTitle"))})},c={key:"logout",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.HEx}),label:e("UserMenu.logoutMenuTitle")},u=te()(n)?[t,s]:[l,o,i,s,o,c];return a.createElement(X.Z,{onClick:r,className:"user-chip-menu",items:u})})()})},ye=n(62923),he={};he.styleTagTransform=F(),he.setAttributes=P(),he.insert=T().bind(null,"head"),he.domAPI=Z(),he.insertStyleElement=S();v()(ye.Z,he),ye.Z&&ye.Z.locals&&ye.Z.locals;function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},we.apply(this,arguments)}var Ee=({...e})=>{const t=y((e=>e.title)),n=y((e=>e.logoPath));return a.createElement("div",we({className:"header"},e),a.createElement("div",{className:"item-container left-items"},a.createElement("img",{className:"logo",src:n}),a.createElement("div",{className:"title"},t)),a.createElement("div",{className:"item-container center-items"},a.createElement(q,null)),a.createElement("div",{className:"item-container right-items"},a.createElement(fe,null)))},be=n(12038),ve=n.n(be),ke=n(73345),Ze=n(57795),Le=n(55002),Te=n(19867),Ae=n(54388),Pe=n(78459),Me=n(85677),Se={};Se.styleTagTransform=F(),Se.setAttributes=P(),Se.insert=T().bind(null,"head"),Se.domAPI=Z(),Se.insertStyleElement=S();v()(Me.Z,Se),Me.Z&&Me.Z.locals&&Me.Z.locals;var Ce=n(34041),Fe=n(35895);const{Option:Ie}=Ce.Z;var Oe=()=>{const e=Object.keys(Fe.Z.services.resourceStore.data);return a.createElement("div",{className:"language-select"},a.createElement(Ce.Z,{defaultValue:Fe.Z.language||"en",onChange:e=>{Fe.Z.changeLanguage(e)}},e.map((e=>a.createElement(Ie,{key:e,value:e},e.toUpperCase())))))},Ne=n(75013),xe=n(73254),De=n(64302),je=n(99165),Re=n(48086),_e=n(45777),Ue=n(20640),$e=n.n(Ue),ze=n(35674),Ve=n(10767),Ke={};Ke.styleTagTransform=F(),Ke.setAttributes=P(),Ke.insert=T().bind(null,"head"),Ke.domAPI=Z(),Ke.insertStyleElement=S();v()(Ve.Z,Ke),Ve.Z&&Ve.Z.locals&&Ve.Z.locals;var Be=()=>{const e=(0,p.useMap)(),{t:t}=(0,d.$)();if(!e)return a.createElement(a.Fragment,null);const n=ze.default.getLink(e),r=`Hey,\r\ncheck out the layer-composition I created:\r\n\r\n${n}`;return a.createElement("div",{className:"permalink"},a.createElement("div",{className:"icons"},a.createElement(_e.Z,{title:t("Permalink.twitterTooltip")},a.createElement(Ne.Z,{onClick:function(){const e=new URL("https://twitter.com/intent/tweet");e.searchParams.set("url",r),window.open(e)}})),a.createElement(_e.Z,{title:t("Permalink.whatsAppTooltip")},a.createElement(xe.Z,{onClick:function(){const e=new URL("https://wa.me");e.searchParams.set("text",r),window.open(e)}})),a.createElement(_e.Z,{title:t("Permalink.mailTooltip")},a.createElement(De.Z,{onClick:function(){const e=new URL("mailto:");e.searchParams.set("subject","SHOGun Web-GIS"),e.searchParams.set("body",r),window.open(e.toString().replace(/\+/g,"%20"),"_self")}}))),a.createElement("div",{className:"link"},a.createElement(i.Z,{value:n,readOnly:!0}),a.createElement(_e.Z,{title:t("Permalink.copyTooltip")},a.createElement(je.Z,{onClick:function(){$e()(n)?Re.ZP.info(t("Permalink.copiedToClipboard")):Re.ZP.info(t("Permalink.copyToClipboardFailed"))}}))))},We=n(71257),Ge=n(76772);function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},He.apply(this,arguments)}var Ye=({printManager:e,value:t,id:n,placeholder:r,maxLength:l,...o})=>{const[s,c]=(0,a.useState)(t);return(0,a.useEffect)((()=>{e&&n&&(e.customParams[n]=s)}),[e,s,n]),(0,a.useEffect)((()=>{c(t)}),[t]),a.createElement(i.Z,He({id:n,value:s,onChange:e=>c(e.target.value),placeholder:r,maxLength:l,showCount:!!(l&&l>1)},o))};function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qe.apply(this,arguments)}var Je=({printManager:e,placeholder:t="Bitte wählen Sie eine Vorlage aus",value:n,...r})=>{const[l,o]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setLayout(l)}),[e,l]),(0,a.useEffect)((()=>{o(n)}),[n]),a.createElement(Ce.Z,qe({placeholder:t,value:l,onChange:o},r),e?.getLayouts().map((e=>a.createElement(Ce.Z.Option,{key:e.name,value:e.name},e.name))))};function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qe.apply(this,arguments)}var Xe=({printManager:e,placeholder:t,value:n,outputFormats:r,...l})=>{const[o,i]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setOutputFormat(o)}),[e,o]),(0,a.useEffect)((()=>{i(n)}),[n]),a.createElement(Ce.Z,Qe({placeholder:t,value:o,onChange:i},l),r.map((e=>a.createElement(Ce.Z.Option,{key:e,value:e},e.toLocaleUpperCase()))))};function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},et.apply(this,arguments)}var tt=({printManager:e,placeholder:t,value:n,...r})=>{const[l,o]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setDpi(l)}),[e,l]),(0,a.useEffect)((()=>{o(n)}),[n]),a.createElement(Ce.Z,et({placeholder:t,value:l,onChange:o},r),e?.getDpis().map((e=>a.createElement(Ce.Z.Option,{key:e,value:e},`${e} DPI`))))},nt=n(87650),at={};at.styleTagTransform=F(),at.setAttributes=P(),at.insert=T().bind(null,"head"),at.domAPI=Z(),at.insertStyleElement=S();v()(nt.Z,at),nt.Z&&nt.Z.locals&&nt.Z.locals;function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rt.apply(this,arguments)}var lt=({layerBlackList:e=[],map:t,printManager:n,...r})=>{const[l]=We.Z.useForm(),{t:i}=(0,d.$)(),[s,c]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),g=n=>{const a=n.get("name"),r=!e.includes(a),l=!n.get("hideLegendInPrint"),o=n.getVisible()&&Ae.default.layerInResolutionRange(n,t),i=!(n instanceof u.default);if(r&&l&&o&&i){const e=t.getView().getResolution();return e&&n.set("customPrintLegendParams",{SCALE:Ae.default.getScaleForResolution(e,"m")}),!0}return!1},f=async()=>{n.legendFilter=g,n.customParams.printLegend=!1};if(!n?.isInitiated())return a.createElement(a.Fragment,null);return a.createElement("div",{className:"print"},m&&a.createElement(Ge.Z,{className:"print-alert",message:m,type:"error",closable:!0,showIcon:!0,onClose:()=>{p(null)}}),a.createElement(We.Z,rt({form:l,className:"print-form",layout:"horizontal"},{labelCol:{span:8},wrapperCol:{span:16}},r),a.createElement(We.Z.Item,{name:"title",label:i("PrintForm.title"),initialValue:i("PrintForm.initialTitle")},a.createElement(Ye,{maxLength:50,printManager:n,placeholder:i("PrintForm.titlePlaceholder")})),a.createElement(We.Z.Item,{name:"comment",label:i("PrintForm.comment")},a.createElement(Ye,{maxLength:200,printManager:n,placeholder:i("PrintForm.commentPlaceholder")})),a.createElement(We.Z.Item,{name:"layout",label:i("PrintForm.layout"),initialValue:n?.getLayouts()[0]?.name},a.createElement(Je,{printManager:n})),a.createElement(We.Z.Item,{name:"dpi",label:i("PrintForm.dpi"),initialValue:72},a.createElement(tt,{printManager:n,placeholder:i("PrintForm.resolutionPlaceholder")})),a.createElement(We.Z.Item,{name:"format",label:i("PrintForm.format"),initialValue:"pdf"},a.createElement(Xe,{printManager:n,outputFormats:["pdf","jpg","png"],placeholder:i("PrintForm.outputFormatPlaceholder")}))),a.createElement(o.Z,{className:"print-button tool-menu-button",disabled:!n?.isInitiated(),icon:a.createElement(Q.FontAwesomeIcon,{icon:J.q7m}),loading:s,onClick:async()=>{try{p(null),c(!0),await f();const e=await n.print(!1);if(!e)throw new Error("No download URL available, the job has failed.");window.open(e)}catch(e){p(i("PrintForm.printJobErrorMsg")),ve().error(e)}finally{c(!1)}}},i("PrintForm.downloadBtnText")))},ot=n(66913),it=n.n(ot),st=n(14409),ct=n(42833),ut=n(11032);class dt extends ut.default{static TYPE_WMS="wms";static sourceCls=[ct.default];constructor(){super()}serialize(e,t={},n){const a=super.serialize(e,t,n);return a.baseURL.startsWith("/geoserver/ows")&&(a.baseURL=`http://shogun-geoserver:8080${a.baseURL}`),a}}var mt=dt;class pt extends mt{static TYPE_WMS="tiledwms";static sourceCls=[st.default];constructor(){super()}serialize(e,t={},n){it()(t,{tileSize:[512,512]});const a=e.getSource();if(!a||!this.validateSource(a))return;return{...super.serialize(e,t,n),type:this.constructor.TYPE_WMS,...t}}}var gt=pt,ft=n(49466),yt=n(17818),ht=n(395),wt=n(40960),Et=n(18776),bt=n(56479),vt=n(4264),kt=n(66439),Zt=n(7871),Lt={};Lt.styleTagTransform=F(),Lt.setAttributes=P(),Lt.insert=T().bind(null,"head"),Lt.domAPI=Z(),Lt.insertStyleElement=S();v()(Zt.Z,Lt),Zt.Z&&Zt.Z.locals&&Zt.Z.locals;var Tt=({showDrawPoint:e,showDrawLine:t,showDrawPolygon:n,showDrawCircle:r,showDrawRectangle:l,showDrawAnnotation:o,showModifyFeatures:i,showUploadFeatures:s,showDownloadFeatures:c,showDeleteFeatures:u})=>{const{t:m}=(0,d.$)(),g=(0,p.useMap)(),f=e=>{const t=new FileReader;t.onload=()=>{const e=(new ft.default).readFeatures(t.result);if(g){const t=g.getView().getProjection().getCode();e.forEach((e=>{e.getGeometry()?.transform("EPSG:4326",t)}));kt.DigitizeUtil.getDigitizeLayer(g).getSource()?.addFeatures(e)}},t.readAsText(e)};return g?a.createElement(bt.default,null,e?a.createElement(ht.default,{name:"draw-point",drawType:"Point",type:"link",pressed:!1},a.createElement(Q.FontAwesomeIcon,{icon:J.diR}),a.createElement("span",{className:"draw-point"},m("Draw.point"))):a.createElement(a.Fragment,null),t?a.createElement(ht.default,{name:"draw-line",drawType:"LineString",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.hx$}),a.createElement("span",{className:"draw-line"},m("Draw.line"))):a.createElement(a.Fragment,null),n?a.createElement(ht.default,{name:"draw-polygon",drawType:"Polygon",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.ubJ}),a.createElement("span",{className:"draw-polygon"},m("Draw.polygon"))):a.createElement(a.Fragment,null),r?a.createElement(ht.default,{name:"draw-circle",drawType:"Circle",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.diR}),a.createElement("span",{className:"draw-circle"},m("Draw.circle"))):a.createElement(a.Fragment,null),l?a.createElement(ht.default,{name:"draw-rectangle",drawType:"Rectangle",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.pL1}),a.createElement("span",{className:"draw-rectangle"},m("Draw.rectangle"))):a.createElement(a.Fragment,null),o?a.createElement(ht.default,{name:"draw-text",drawType:"Text",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.yGG}),a.createElement("span",{className:"draw-text"},m("Draw.text"))):a.createElement(a.Fragment,null),i?a.createElement(wt.default,{name:"draw-modify",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.Yai}),a.createElement("span",{className:"draw-modify"},m("Draw.modify"))):a.createElement(a.Fragment,null),s?a.createElement(vt.default,{name:"draw-upload",onChange:e=>{const t=e.target.files;!t||1!==t.length||"application/geo+json"!==t[0].type&&"application/geojson"!==t[0].type||f(t[0])},type:"link"},a.createElement(Et.default,{type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.cf$}),a.createElement("span",{className:"draw-upload"},m("Draw.upload")))):a.createElement(a.Fragment,null),c?a.createElement(Et.default,{name:"draw-export",onClick:()=>{const e=[];if(g){const t=g.getView().getProjection().getCode(),n=kt.DigitizeUtil.getDigitizeLayer(g).getSource()?.getFeatures();if(n&&n.length>0){n.forEach((n=>{const a=n.clone();a.getGeometry()?.transform(t,"EPSG:4326"),e.push(a)}));const a=(new ft.default).writeFeatures(e),r=new Blob([a],{type:"application/geo+json"}),l=window.URL.createObjectURL(r),o=document.createElement("a");o.href=l,o.setAttribute("download","exportedFeatures.geojson"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}},type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.q7m}),a.createElement("span",{className:"draw-export"},m("Draw.export"))):a.createElement(a.Fragment,null),u?a.createElement(yt.default,{name:"draw-delete",type:"link"},a.createElement(Q.FontAwesomeIcon,{icon:J.$aW}),a.createElement("span",{className:"draw-delete"},m("Draw.delete"))):a.createElement(a.Fragment,null)):a.createElement(a.Fragment,null)},At=n(3028),Pt=n(41666),Mt=n(93893),St=n(55151),Ct=n(92371),Ft=n(22556),It=n(30283),Ot=n(51345),Nt=n(58958),xt=n(47539),Dt=n(55384),jt=n(21922),Rt=n(86092),_t={};_t.styleTagTransform=F(),_t.setAttributes=P(),_t.insert=T().bind(null,"head"),_t.domAPI=Z(),_t.insertStyleElement=S();v()(Rt.Z,_t),Rt.Z&&Rt.Z.locals&&Rt.Z.locals;function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ut.apply(this,arguments)}var $t=({features:e,layerName:t="Unknown layer",...n})=>{const[r,l]=(0,a.useState)(),[i,s]=(0,a.useState)(),c=(0,Dt.useMap)(),{t:u}=(0,d.$)(),m=`selection-layer-${t}`;return(0,a.useEffect)((()=>{if(!c)return;return(()=>{if(Ae.default.getLayerByName(c,m))return;const t=new Ft.default({features:e}),n=new Ot.default({color:"rgba(255, 255, 255, 0.15)"}),a=new Nt.default({color:"rgba(209, 70, 47, 1)",width:2}),r=new xt.default({fill:n,stroke:a,image:new It.default({radius:5,fill:n,stroke:a})}),l=new Ct.default({source:t,style:r});l.set("name",m),c.addLayer(l)})(),()=>(()=>{const e=Ae.default.getLayerByName(c,m);e&&c.removeLayer(e)})()}),[c]),(0,a.useEffect)((()=>{if(!c)return;const t=Ae.default.getLayerByName(c,m);t&&(t.getSource()?.clear(),l(1),e.length>0&&s(e[0]))}),[e,c]),(0,a.useEffect)((()=>{if(!i||!c)return;const e=Ae.default.getLayerByName(c,m);e&&(e.getSource()?.clear(),e.getSource()?.addFeature(i))}),[i,c]),i?a.createElement(a.Fragment,null,a.createElement("div",{className:"property-grid-header"},t&&a.createElement("span",null,t),a.createElement("div",{className:"right-elements"},a.createElement(St.Z,{simple:!0,total:e.length,size:"small",pageSize:1,current:r,onChange:t=>{l(t),s(e[t-1])}}),a.createElement(_e.Z,{title:"Copy to clipboard"},a.createElement(o.Z,{type:"primary",onClick:()=>{$e()((new ft.default).writeFeature(i))},icon:a.createElement(Q.FontAwesomeIcon,{icon:J.kZ_})})))),a.createElement(jt.default,Ut({feature:i,size:"small",sticky:!0,columns:[{title:"Key",dataIndex:"attributeName",key:"attributeName",width:"50%",ellipsis:!0,defaultSortOrder:"ascend",sorter:(e,t)=>e.key.localeCompare(t.key)},{title:"Value",dataIndex:"attributeValue",key:"attributeValue",width:"50%",ellipsis:!0}],scroll:{y:Object.keys(i.getProperties()).length>6?250:void 0}},n))):a.createElement(a.Fragment,null)},zt=n(16813),Vt={};Vt.styleTagTransform=F(),Vt.setAttributes=P(),Vt.insert=T().bind(null,"head"),Vt.domAPI=Z(),Vt.insertStyleElement=S();v()(zt.Z,Vt),zt.Z&&zt.Z.locals&&zt.Z.locals;function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kt.apply(this,arguments)}var Bt=({enabled:e,...t})=>{const{t:n}=(0,d.$)(),r=(0,p.useMap)(),l=re();if(!r)return a.createElement(a.Fragment,null);const o=Ae.default.getAllLayers(r).filter((e=>!!e.get("hoverable")&&(e instanceof At.default&&e.getSource()instanceof ct.default||e instanceof Pt.default&&e.getSource()instanceof st.default)));if(!e)return a.createElement(a.Fragment,null);return a.createElement("div",{className:"feature-info-panel"},a.createElement(Mt.default,Kt({featureCount:10,map:r,queryLayers:o,resultRenderer:e=>{const t=e.features,r=e.loading;return 0===Object.keys(t).length?a.createElement("span",{className:"usage-hint"},n("FeatureInfo.usageHint")):Object.entries(t).map((([e,t])=>a.createElement("div",{key:e},a.createElement($t,{features:t,layerName:e,loading:r}))))},fetchOpts:(()=>{const e={};return o.forEach((t=>{const n=(0,c.getUid)(t);e[n]={headers:{...t.get("useBearerToken")?{...(0,Pe.getBearerTokenHeader)(l?.getKeycloak())}:void 0}}})),e})()},t)))},Wt=n(64289),Gt=n(68112),Ht=n(97979),Yt=n(11382),qt=n(13013),Jt=n(26414),Qt=n(86954);function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xt.apply(this,arguments)}var en=({layer:e,visibleLegendsIds:t,setVisibleLegendsIds:n,...l})=>{const[o,i]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),m=(0,p.useMap)(),{t:g}=(0,d.$)(),f=async()=>{if(m){u(!0);try{let t=await Qt.default.getExtentForLayer(e);t=(0,Jt.transformExtent)(t,"EPSG:4326",m.getView().getProjection()),m.getView().fit(t)}catch(e){ve().error(e),r.Z.error({message:g("LayerTreeContextMenu.extentError")})}finally{u(!1)}}},y=()=>{if(!m)return;const t=g("AddLayerModal.externalWmsFolder"),n=Ae.default.getLayerByName(m,t);if(n){const t=n.getLayers();try{1===t.getLength()&&n.set("hideInLayerTree",!0),t.remove(e)}catch(e){ve().error("Could not remove external layer from map.")}}};let h=[{label:a.createElement(Yt.Z,{spinning:s},g("LayerTreeContextMenu.layerZoomToExtent")),key:"zoomToExtent"}];const w=t.includes((0,c.getUid)(e));e.getVisible()&&h.push({label:g(w?"LayerTreeContextMenu.hideLegend":"LayerTreeContextMenu.showLegend"),key:"toggleLegend"}),e.get("isExternalLayer")&&h.push({label:g("LayerTreeContextMenu.removeLayer"),key:"removeExternal"});const E=a.createElement(X.Z,{items:h,selectable:!1,onClick:a=>{switch(a?.key){case"zoomToExtent":f();break;case"removeExternal":y();break;case"toggleLegend":const a=(0,c.getUid)(e),r=[...t];r.includes(a)?r.splice(r.indexOf(a),1):r.push(a),n(r)}i(!1)}});return a.createElement(qt.Z,Xt({overlay:E,placement:"bottomLeft",onVisibleChange:i,visible:o,trigger:["click"]},l),a.createElement(Q.FontAwesomeIcon,{icon:J.iV1}))},tn=n(79770),nn={};nn.styleTagTransform=F(),nn.setAttributes=P(),nn.insert=T().bind(null,"head"),nn.domAPI=Z(),nn.insertStyleElement=S();v()(tn.Z,nn),tn.Z&&tn.Z.locals&&tn.Z.locals;function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},an.apply(this,arguments)}var rn=({...e})=>{const t=(0,p.useMap)(),{t:n}=(0,d.$)(),[r,l]=(0,a.useState)([]);return t?a.createElement(Wt.default,an({className:"layertree",map:t,nodeTitleRenderer:e=>{if(!t)return;const o=t.getView(),i=o.getProjection().getUnits()||"m",s=o.getResolution(),d=s?Ae.default.getScaleForResolution(s,i):void 0;return e instanceof u.default?a.createElement("div",null,e.get("name")):a.createElement(a.Fragment,null,a.createElement("div",{className:"tree-node-header"},a.createElement("span",null,e.get("name")),a.createElement(en,{layer:e,visibleLegendsIds:r,setVisibleLegendsIds:l})),e.get("visible")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"layer-transparency"},a.createElement(Ht.default,{tipFormatter:e=>`${n("LayerTree.transparency")}: ${e}%`,layer:e}))),e.get("visible")&&r.includes((0,c.getUid)(e))&&a.createElement(Gt.default,{layer:e,errorMsg:n("LayerTree.noLegendAvailable"),extraParams:{scale:d,LEGEND_OPTIONS:"fontAntiAliasing:true;forceLabels:on",TRANSPARENT:!0}}))},filterFunction:e=>e instanceof u.default?!e.get("hideInLayerTree"):!(e.get("isBackgroundLayer")||e.getSource&&e.getSource()instanceof Ft.default),draggable:!0},e)):a.createElement(a.Fragment,null)},ln=n(85214),on=n(85415),sn={};sn.styleTagTransform=F(),sn.setAttributes=P(),sn.insert=T().bind(null,"head"),sn.domAPI=Z(),sn.insertStyleElement=S();v()(on.Z,sn),on.Z&&on.Z.locals&&on.Z.locals;var cn=({showMeasureDistance:e,showMeasureArea:t})=>{const{t:n}=(0,d.$)(),r=(0,p.useMap)();return r?a.createElement(bt.default,null,e?a.createElement(ln.default,{geodesic:!0,name:"line",map:r,measureType:"line",type:"link",continueLineMsg:n("Measure.clicktodrawline")},a.createElement(Q.FontAwesomeIcon,{icon:J.SoD}),a.createElement("span",{className:"measure-text"},n("Measure.line"))):a.createElement(a.Fragment,null),t?a.createElement(ln.default,{geodesic:!0,name:"poly",map:r,measureType:"polygon",type:"link",continuePolygonMsg:n("Measure.clicktodrawarea")},a.createElement(Q.FontAwesomeIcon,{icon:J.ubJ}),a.createElement("span",{className:"measure-text"},n("Measure.area"))):a.createElement(a.Fragment,null)):a.createElement(a.Fragment,null)},un=n(35818),dn={};dn.styleTagTransform=F(),dn.setAttributes=P(),dn.insert=T().bind(null,"head"),dn.domAPI=Z(),dn.insertStyleElement=S();v()(un.Z,dn),un.Z&&un.Z.locals&&un.Z.locals;function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mn.apply(this,arguments)}n(26398).default.getLegendGraphicUrl=e=>{if(e.get("legendUrl"))return e.get("legendUrl");if(e.getSource()instanceof st.default||e.getSource()instanceof ct.default){const t=e.get("customPrintLegendParams"),n=e.getSource(),{LAYERS:a,VERSION:r,FORMAT:l}=n.getParams();let o=n instanceof ct.default?n.getUrl():n.getUrls()[0];o.startsWith("/geoserver/ows")&&(o=`http://shogun-geoserver:8080${o}`);const i={LAYER:a.split(",")[0],VERSION:r||"1.3.0",SERVICE:"WMS",REQUEST:"GetLegendGraphic",FORMAT:l||"image/png",...t},s=Object.keys(i).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`)).join("&");return o.endsWith("?")?`${o}${s}`:`${o}?${s}`}return""};var pn=({...e})=>{const{t:t}=(0,d.$)(),n=(0,p.useMap)(),r=re(),l=f(),i=h((e=>e.toolMenu.selectedKeys)),s=h((e=>e.toolMenu.availableTools)),[c,m]=(0,a.useState)(!1),[g,y]=(0,a.useState)([]),[b,v]=(0,a.useState)(null);(0,a.useEffect)((()=>(g.includes("print")&&!b&&Z(),()=>{b&&g.includes("print")&&(b.shutdownManager(),v(null))})),[g,b]);const k=e=>{if(!n)return;const t=e.get("name");return t&&!["react-geo_measure","hoverVectorLayer"].includes(t)&&e.getVisible()&&!(e instanceof u.default)&&Ae.default.layerInResolutionRange(e,n)},Z=(0,a.useCallback)((async()=>{const e=new ke.Cf({url:"/print",map:n,timeout:6e4,layerFilter:k,headers:{...(0,Pe.getBearerTokenHeader)(r?.getKeycloak())},transformOpts:{rotate:!1}});e.serializers=[new Ze.default,new Le.default,new Te.default,new mt,new gt],await e.init().then((()=>{e.setOutputFormat(e.getOutputFormats()[0]),e.setDpi(e.getDpis()[0]),e.setLayout(e.getLayouts()[0]?.name)})).catch((e=>{ve().error(e)})),v(e)}),[n,t]),L=e=>{m(!1),i.forEach((e=>l((0,E.ui)(e)))),y([e.key])},T=[];return(s.includes("default")||s.includes("measure_tools"))&&T.push({className:"measure",key:"measure_tools",popupClassName:"measure",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.KxN}),label:t("ToolMenu.measure"),children:[{key:"measure-panel",label:a.createElement(cn,{showMeasureDistance:s.includes("default")||s.includes("measure_tools_distance"),showMeasureArea:s.includes("default")||s.includes("measure_tools_area")})}]}),(s.includes("default")||s.includes("draw_tools"))&&T.push({className:"draw",key:"draw_tools",popupClassName:"draw",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.ubJ}),label:t("ToolMenu.draw"),children:[{key:"draw-panel",label:a.createElement(Tt,{showDrawPoint:s.includes("default")||s.includes("draw_tools_point"),showDrawLine:s.includes("default")||s.includes("draw_tools_line"),showDrawPolygon:s.includes("default")||s.includes("draw_tools_polygon"),showDrawCircle:s.includes("default")||s.includes("draw_tools_circle"),showDrawRectangle:s.includes("default")||s.includes("draw_tools_rectangle"),showDrawAnnotation:s.includes("default")||s.includes("draw_tools_annotation"),showModifyFeatures:s.includes("default")||s.includes("draw_tools_modify"),showUploadFeatures:s.includes("default")||s.includes("draw_tools_upload"),showDownloadFeatures:s.includes("default")||s.includes("draw_tools_download"),showDeleteFeatures:s.includes("default")||s.includes("draw_tools_delete")})}]}),(s.includes("default")||s.includes("feature_info"))&&T.push({key:"feature_info",onTitleClick:L,icon:a.createElement(Q.FontAwesomeIcon,{icon:J.kwz}),label:t("ToolMenu.featureInfo"),children:[{key:"feature-info-panel",label:a.createElement(Bt,{enabled:g.includes("feature_info")})}]}),(s.includes("default")||s.includes("print"))&&T.push({key:"print",onTitleClick:L,icon:a.createElement(Q.FontAwesomeIcon,{icon:J.kwI}),label:t("ToolMenu.print"),children:[{key:"print-panel",label:a.createElement(lt,{printManager:b,map:n})}]}),(s.includes("default")||s.includes("tree"))&&T.push({className:"tree",key:"tree",onTitleClick:L,icon:a.createElement(Q.FontAwesomeIcon,{icon:J.aC2}),label:t("ToolMenu.layertree"),children:[{key:"tree-panel",label:a.createElement("div",{className:"tree-wrapper"},a.createElement(rn,null),a.createElement(o.Z,{className:"add-wms-button tool-menu-button",icon:a.createElement(Q.FontAwesomeIcon,{icon:J.r8p}),onClick:()=>l((0,w.$Z)())},t("ToolMenu.addWms")))}]}),(s.includes("default")||s.includes("permalink"))&&T.push({key:"permalink",onTitleClick:L,icon:a.createElement(Q.FontAwesomeIcon,{icon:J.M6U}),label:t("Permalink.title"),children:[{key:"share-panel",label:a.createElement(Be,null)}]}),(s.includes("default")||s.includes("language_selector"))&&T.push({type:"divider"},{key:"language_selector",onTitleClick:L,icon:a.createElement(Q.FontAwesomeIcon,{icon:J.BCn}),label:t("ToolMenu.languageSelect"),children:[{key:"languages-select-panel",label:a.createElement(Oe,null)}]}),T.length>0&&T.push({key:"expand_collapse",label:t(c?"ToolMenu.expand":"ToolMenu.collapse"),icon:c?a.createElement(Q.FontAwesomeIcon,{icon:J._tD}):a.createElement(Q.FontAwesomeIcon,{icon:J.A35})}),a.createElement("div",{className:"tool-menu"},a.createElement(X.Z,mn({mode:"inline",inlineCollapsed:c,onSelect:e=>{if("expand_collapse"===e.key)m(!c)},onDeselect:e=>{if("expand_collapse"===e.key)m(!c)},openKeys:g,onOpenChange:e=>{c&&(e=e.filter((e=>"measure_tools"===e||"draw_tools"===e||"expand_collapse"===e))),y(e)},multiple:!0,selectedKeys:i,items:T},e)))},gn=n(65705),fn={};fn.styleTagTransform=F(),fn.setAttributes=P(),fn.insert=T().bind(null,"head"),fn.domAPI=Z(),fn.insertStyleElement=S();v()(gn.Z,fn),gn.Z&&gn.Z.locals&&gn.Z.locals;function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yn.apply(this,arguments)}const hn=({...e})=>((0,a.useEffect)((()=>{const e=document.querySelectorAll(".loadmask")[0];e&&e.classList.add("loadmask-hidden")}),[]),a.createElement("div",yn({className:"App"},e),a.createElement(Ee,null),a.createElement(R,null),a.createElement(pn,null),a.createElement(G,null),a.createElement(x,null)));var wn=hn},77257:function(e,t,n){n.d(t,{rA:function(){return l}});var a=n(67294);const r=a.createContext(null),l=({client:e,children:t})=>a.createElement(r.Provider,{value:e},t);t.ZP=r},35895:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(36609),r=n(26071),l=n(97031);a.ZP.use(r.Z).use(l.Db).init({resources:{de:{translation:{ApplicationInfo:{title:"Über",clientVersionTitle:"Client Version",backendVersionTitle:"Backend Version"},AddLayerModal:{addSelectedLayers:"Auswahl hinzufügen",addAllLayers:"Alle hinzufügen",inputPlaceholder:"WMS GetCapabilities URL angeben…",externalWmsFolder:"Externe Themen",title:"WMS hinzufügen",columnTitle:"Name",errorMessage:"Fehler",errorDescription:"Das Capabilities Dokument konnte nicht geladen werden, bitte prüfen Sie die URL"},Permalink:{title:"Teilen",twitterTooltip:"Link via Twitter teilen",whatsAppTooltip:"Link via WhatsApp teilen",mailTooltip:"Link via Mail teilen",copyTooltip:"Link in die Zwischenablage kopieren",copiedToClipboard:"Link wurde in Zwischenablage kopiert",copyToClipboardFailed:"Link konnte nicht kopiert werden"},Measure:{title:"Messen",line:"Entfernung",area:"Fläche",clicktodrawline:"Zum Zeichnen einer Linie klicken",clicktodrawarea:"Zum Zeichnen einer Fläche klicken"},Draw:{point:"Punkt",line:"Linie",polygon:"Polygon",circle:"Kreis",rectangle:"Rechteck",text:"Anmerkung",modify:"Bearbeitung",upload:"Hochladen",delete:"Löschen",export:"Exportieren"},FeatureInfo:{usageHint:"Klicken Sie in die Karte, um Detailinformationen zu erhalten."},LayerTree:{transparency:"Transparenz",noLegendAvailable:"Keine Legende verfügbar"},LayerTreeContextMenu:{layerZoomToExtent:"Auf Layerausdehnung zoomen",extentError:"Konnte nicht auf die Layerausdehnung zoomen",removeLayer:"Layer entfernen",showLegend:"Legende anzeigen",hideLegend:"Legende ausblenden"},ToolMenu:{expand:"Menu ausklappen",collapse:"Menu einklappen",measure:"Messen",draw:"Zeichnen",featureInfo:"Karteninhalte abfragen",addWms:"WMS hinzufügen",print:"Export",layertree:"Karten",languageSelect:"Sprachauswahl"},PrintForm:{title:"Kartentitel",initialTitle:"Druckausgabe",titlePlaceholder:"Bitte geben Sie einen Titel ein",comment:"Bemerkung",commentPlaceholder:"Bitte geben Sie einen Kommentar ein",layout:"Vorlage",dpi:"Auflösung",format:"Format",downloadBtnText:"Ausdruck erzeugen",printJobErrorMsg:"Der Kartenausdruck konnte nicht erzeugt werden",initErrorMsg:"Der Kartendruck Generator konnte nicht initialisiert werden.",outputFormatPlaceholder:"Bitte wählen Sie ein Ausgabeformat aus",resolutionPlaceholder:"Bitte wählen Sie eine Ausgabequalität aus"},Footer:{refSystem:"Bezugssystem",scale:"Maßstab",mousePosition:"Mausposition",imprint:"Impressum",contact:"Kontakt",privacypolicy:"Datenschutz"},Index:{applicationLoadErrorMessage:"Fehler beim Laden der Applikation",applicationLoadErrorDescription:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. Die Standardkonfiguration wird stattdessen geladen.",errorMessage:"Fehler beim Laden der Applikation",errorDescription:"Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden. Bitte laden Sie die Seite erneut."},Nominatim:{placeholder:"Ortsname, Straßenname, Stadtteilname, POI usw."},UserMenu:{settingsMenuTitle:"Profil bearbeiten",infoMenuTitle:"Über",logoutMenuTitle:"Ausloggen",loginMenuTitle:"Anmelden"}}},en:{translation:{ApplicationInfo:{title:"About",clientVersionTitle:"Client version",backendVersionTitle:"Backend version"},AddLayerModal:{addSelectedLayers:"Add selected",addAllLayers:"Add all",inputPlaceholder:"Enter a WMS GetCapabilities URL…",externalWmsFolder:"External layers",title:"Add WMS",columnTitle:"Name",errorMessage:"Error",errorDescription:"Could not load the provided Capabilities document, please check the validity of the URL"},Permalink:{title:"Share",twitterTooltip:"Share link via Twitter",whatsAppTooltip:"Share link via WhatsApp",mailTooltip:"Share link via Mail",copyTooltip:"Copy link to Clipboard",copiedToClipboard:"Copied to clipboard",copyToClipboardFailed:"Could not copy link to clipboard"},Measure:{title:"Measure",line:"Distance",area:"Area",clicktodrawline:"Click to draw line",clicktodrawarea:"Click to draw area"},Draw:{point:"Point",line:"Line",polygon:"Polygon",circle:"Circle",rectangle:"Rectangle",text:"Annotation",modify:"Edit",upload:"Upload",delete:"Delete",export:"Export"},FeatureInfo:{usageHint:"Click on the map to get details about the clicked coordinate."},LayerTree:{transparency:"Transparency",noLegendAvailable:"No legend available"},LayerTreeContextMenu:{layerZoomToExtent:"Zoom to layer extent",extentError:"Could not zoom to layer extent",removeLayer:"Remove layer",showLegend:"Show legend",hideLegend:"Hide legend"},ToolMenu:{expand:"Expand",collapse:"Collapse",measure:"Measure",draw:"Draw",featureInfo:"Query map features",addWms:"Add WMS",print:"Export",layertree:"Maps",languageSelect:"Language selector"},PrintForm:{title:"Title",initialTitle:"Title",titlePlaceholder:"Please input a title…",comment:"Comment",commentPlaceholder:"Please enter a comment…",layout:"Layout",dpi:"Resolution",format:"Format",downloadBtnText:"Create print",printJobErrorMsg:"Could not generate PDF output",initErrorMsg:"PDF Generator could not be initialized",outputFormatPlaceholder:"Please select an output format",resolutionPlaceholder:"Please select an output quality"},Footer:{refSystem:"Reference system",scale:"Scale",mousePosition:"Mouse position",imprint:"Imprint",contact:"Contact",privacypolicy:"Privacy"},Index:{applicationLoadErrorMessage:"Error while loading the application",applicationLoadErrorDescription:"The application with ID {{applicationId}} could not be loaded correctly. You're seeing the default application configuration.",errorMessage:"Error while loading the application",errorDescription:"An unexpected error occured while loading the application. Please try to reload the page."},Nominatim:{placeholder:"Place name, street name, district name, POI, etc."},UserMenu:{settingsMenuTitle:"Edit profile",infoMenuTitle:"About",logoutMenuTitle:"Logout",loginMenuTitle:"Login"}}}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},supportedLngs:["de","en"]});var o=a.ZP},18581:function(e,t,n){var a=n(67294),r=n(38648),l=n(88182),o=n(76772),i=n(17699),s=n(67502),c=n(87617),u=n.n(c),d=n(94671),m=n(65920),p=n(68734),g=n(41666),f=n(32663),y=n(26414),h=n(98266),w=n(14409),E=n(59220),b=n(73935),v=n(95998),k=n(12038),Z=n.n(k),L=n(92212),T=n.n(L),A=n(67624),P=n(73161),M=n.n(P),S=n(12665),C=n.n(S),F=n(77257),I=n(35895),O=n(35304);const N=(0,O.oM)({name:"appInfo",initialState:{authorities:[],buildTime:"",commitHash:"",userId:-1,version:""},reducers:{setAppInfo(e,t){return t.payload}}}),{setAppInfo:x}=N.actions;var D=N.reducer;const j=(0,O.oM)({name:"logoPath",initialState:"./shogun_logo.png",reducers:{setLogoPath:(e,t)=>t.payload}}),{setLogoPath:R}=j.actions;var _=j.reducer,U=n(20908);const $=(0,O.oM)({name:"title",initialState:"SHOGun Client",reducers:{setTitle:(e,t)=>t.payload}}),{setTitle:z}=$.actions;var V=$.reducer,K=n(76712);const B=(0,O.oM)({name:"user",initialState:{},reducers:{setUser(e,t){return t.payload}}}),{setUser:W}=B.actions;var G=B.reducer;const H=(0,O.xC)({reducer:{appInfo:D,title:V,logoPath:_,toolMenu:K.ZP,addLayerModal:U.ZP,user:G}});var Y=n(93379),q=n.n(Y),J=n(7795),Q=n.n(J),X=n(90569),ee=n.n(X),te=n(3565),ne=n.n(te),ae=n(19216),re=n.n(ae),le=n(44589),oe=n.n(le),ie=n(90978),se={};se.styleTagTransform=oe(),se.setAttributes=ne(),se.insert=ee().bind(null,"head"),se.domAPI=Q(),se.insertStyleElement=re();q()(ie.Z,se),ie.Z&&ie.Z.locals&&ie.Z.locals;const ce=a.lazy((()=>Promise.all([n.e(987),n.e(592),n.e(520)]).then(n.bind(n,60697)))),ue=new(C())({url:u().shogunBase||"/"}),de=new(M())({client:ue}),me=e=>{switch(e){case"en":default:return s.Z;case"de":return i.Z}},pe=async e=>{const t=await de.parseMapView(e),n=await de.parseLayerTree(e);return new f.default({view:t,layers:n,controls:(0,m.ce)({zoom:!1})})},ge=()=>{const e=new g.default({source:new h.default});e.set("name","OpenStreetMap");const t=new g.default({opacity:.5,visible:!0,source:new w.default({url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",projection:"EPSG:3857",params:{LAYERS:"MERRA2_2m_Air_Temperature_Assimilated_Monthly"}})});t.setProperties({name:"2-meter Air Temperature, Assimilated (Monthly, MERRA2)",hoverable:!0});const n=new p.default({layers:[t]});n.set("name","NASA Earth Observations");const a=new p.default({layers:[e]});a.set("name","Background");const r=(0,y.fromLonLat)([0,40],"EPSG:3857");return new f.default({view:new E.default({center:r,zoom:0}),layers:[a,n],controls:(0,m.ce)({zoom:!1})})};(async()=>{try{const e=await(async()=>{const e=u().keycloak?.enabled,t=u().keycloak?.onLoadAction,n=u().keycloak?.host||void 0,a=u().keycloak?.realm||void 0,r=u().keycloak?.clientId||void 0;if(!e)return;if(!n)throw new Error("Neither config key keycloak.host nor environment KEYCLOAK_HOST is set");if(!a)throw new Error("Neither config key keycloak.realm nor environment KEYCLOAK_REALM is set");if(!r)throw new Error("Neither config key keycloak.clientId nor environment KEYCLOAK_CLIENT_ID is set");const l=new d.Z({url:`${n}`,realm:a,clientId:r});return l.onTokenExpired=async()=>{try{await l.updateToken(0)}catch(e){Z().error("Error while refreshing the access token: ",e)}},await l.init({onLoad:t}),l})();e&&ue.setKeycloak(e);const t=await(async()=>{const e=T().getQueryParam(window.location.href,"applicationId");if(e)try{Z().info(`Loading application with ID ${e}`);const t=await ue.application().findOne(e);return Z().info(`Successfully loaded application with ID ${e}`),t}catch(t){Z().error(`Error while loading application with ID ${e}: ${t}`),r.Z.error({message:I.Z.t("Index.applicationLoadErrorMessage"),description:I.Z.t("Index.applicationLoadErrorDescription",{applicationId:e}),duration:0})}else Z().info("No application ID given, can't load any configuration.")})(),n=(e=>{const t={"--primaryColor":"#59666C","--secondaryColor":"#70B3BE","--complementaryColor":"#FFFFFF"};return e?(e.primaryColor&&(t["--primaryColor"]=e.primaryColor),e.secondaryColor&&(t["--secondaryColor"]=e.secondaryColor),e.secondaryColor&&(t["--complementaryColor"]=e.complementaryColor),t):t})(t?.clientConfig?.theme);l.ZP.config({theme:{primaryColor:n["--primaryColor"]}}),H.subscribe((()=>{document.title=H.getState().title})),(async e=>{if(e){if(e.name&&H.dispatch(z(e.name)),e?.clientConfig?.theme?.logoPath&&H.dispatch(R(e.clientConfig.theme.logoPath)),e.toolConfig){const t=[];e.toolConfig.map((e=>{e.config.visible&&t.push(e.name)})),H.dispatch((0,K.nn)(t))}}else Z().info("No application configuration provided, the default store will be loaded")})(t);const o=await(async()=>{try{Z().info("Loading application info");const e=await ue.info().getAppInfo();return Z().info("Successfully loaded application info"),e}catch(e){Z().error("Error while loading application info: ",e)}})();(async e=>{e&&H.dispatch(x(e))})(o);(async e=>{e&&H.dispatch(W(e))})(await(async e=>{if(e)try{Z().info(`Loading user with ID ${e}`);const t=await ue.user().findOne(e);return Z().info(`Successfully loaded user with ID ${e}`),t}catch(t){Z().error(`Error while loading user with ID ${e}: `,t)}else Z().info("No user ID given, can't load it's details.")})(o?.userId));const i=await(async e=>e?await pe(e):(Z().info("No application configuration provided, the default map will be loaded"),ge()))(t);(0,b.render)(a.createElement(a.StrictMode,null,a.createElement(a.Suspense,{fallback:a.createElement("span",null)},a.createElement(F.rA,{client:ue},a.createElement(l.ZP,{locale:me(I.Z.language)},a.createElement(v.zt,{store:H},a.createElement(A.default.Provider,{value:i},a.createElement(ce,{style:n}))))))),document.getElementById("app"))}catch(e){const t=document.querySelectorAll(".loadmask")[0];t&&t.classList.add("loadmask-hidden"),Z().error(e),(0,b.render)(a.createElement(a.StrictMode,null,a.createElement(o.Z,{className:"error-boundary",message:I.Z.t("Index.errorMessage"),description:I.Z.t("Index.errorDescription"),type:"error",showIcon:!0})),document.getElementById("app"))}})()},20908:function(e,t,n){n.d(t,{$Z:function(){return r},Cp:function(){return l}});const a=(0,n(35304).oM)({name:"addLayerModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:r,hide:l,toggle:o}=a.actions;t.ZP=a.reducer},76712:function(e,t,n){n.d(t,{nn:function(){return o},ui:function(){return l}});const a=(0,n(35304).oM)({name:"toolMenu",initialState:{selectedKeys:[],availableTools:["default"]},reducers:{setSelectedKey(e,t){e.selectedKeys.push(t.payload)},unsetSelectedKey(e,t){e.selectedKeys=e.selectedKeys.filter((e=>e!==t.payload))},setAvailableTools(e,t){e.availableTools=[...t.payload]}}}),{setSelectedKey:r,unsetSelectedKey:l,setAvailableTools:o}=a.actions;t.ZP=a.reducer},65705:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},40171:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},88885:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},78415:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},62923:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},85677:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},10767:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},87650:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},7871:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},86092:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},16813:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},79770:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},85415:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},35818:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},72285:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o},90978:function(e,t,n){var a=n(87537),r=n.n(a),l=n(23645),o=n.n(l)()(r());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=o}}]);
//# sourceMappingURL=common.5c4cf607fa38d18e5725.js.map