(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([[76],{16060:function(e,t,n){"use strict";n.r(t),n.d(t,{App:function(){return nl},default:function(){return rl}});var r=n(24002),a=n.n(r),o=n(65885),i=n(68275),l=n(36255),s=n(36492),c=n(9735),u=n(43304),d=n(4087),m=n(50090),p=n.n(m),g=n(43826),f=n.n(g),y=n(50308),h=n.n(y),E=n(8392),b=n(69941),A=n.n(b),w=n(6273),v=n.n(w),T=n(18635),S=n.n(T),L=n(69395),k=n(13555),C=n.n(k),P=n(32421);var F=()=>(0,P.useDispatch)();const N=P.useSelector;var D=N,O=n(6259),I=n(85072),M=n.n(I),x=n(97825),U=n.n(x),R=n(77659),j=n.n(R),B=n(55056),_=n.n(B),z=n(10540),V=n.n(z),$=n(41113),G=n.n($),W=n(11317),K={};K.styleTagTransform=G(),K.setAttributes=_(),K.insert=j().bind(null,"head"),K.domAPI=U(),K.insertStyleElement=V();M()(W.A,K),W.A&&W.A.locals&&W.A.locals;function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(null,arguments)}var J=({...e})=>{const[t,n]=(0,r.useState)(!1),[m,g]=(0,r.useState)([]),[y,b]=(0,r.useState)([]),[w,T]=(0,r.useState)(""),[C,P]=(0,r.useState)("https://sgx.geodatenzentrum.de/wms_topplus_open"),[N,I]=(0,r.useState)(),[M,x]=(0,r.useState)("1.3.0"),U=D((e=>e.addLayerModal.visible)),R=F(),j=(0,k.useMap)(),{t:B}=(0,E.useTranslation)();(0,r.useEffect)((()=>{U&&I(A().createValidGetCapabilitiesRequest(C,"WMS",M))}),[M,U,C]);const _=()=>{b([]),g([]),R((0,O.jD)())},z=e=>{if(!j)return;const t=B("AddLayerModal.externalWmsFolder");let n=S().getLayerByName(j,t);if(!n){n=new(p())({layers:[]}),n.set("name",t);const e=j.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}e.forEach((e=>{if(!n.getLayers().getArray().includes(e)){let t;if(e.set("isExternalLayer",!0),e instanceof f()&&(t=e.getSource()?.getUrl()),e instanceof h()){const n=e.getSource()?.getUrls();t=1===n?.length?n[0]:void 0}const r={name:e.get("name"),type:e instanceof h()?"TILEWMS":"WMS",opacity:e.getOpacity(),sourceConfig:{layerNames:e.getSource()?.getParams().LAYERS,url:t,useBearerToken:!1}};e.set("layerConfig",r),n.getLayers().push(e)}})),_()};return a().createElement(i.A,H({className:"add-layer-modal",title:B("AddLayerModal.title"),open:U,onCancel:_,width:600,footer:[a().createElement(L.SimpleButton,{"aria-label":"add-all",key:"add-all",disabled:m?.length<1,onClick:()=>{z(m)}},B("AddLayerModal.addAllLayers")),a().createElement(L.SimpleButton,{"aria-label":"add-selected",key:"add-selected",disabled:y?.length<1,onClick:()=>{const e=m.filter((e=>y.includes((0,d.getUid)(e))));z(e)}},B("AddLayerModal.addSelectedLayers"))]},e),a().createElement("span",null,B("AddLayerModal.requestWmsGetCapabilitiesInstruction")),a().createElement(l.A.Search,{"aria-label":"input-search",className:"url-input",placeholder:B("AddLayerModal.inputPlaceholder"),value:C,onChange:e=>{const t=e.target.value;T(A().isValid(t.trim())?"":"error"),P(e.target.value)},onSearch:async()=>{if(N)try{n(!0);const e=await v().getWmsCapabilities(N),t=v().getLayersFromWmsCapabilities(e,"Title");g(t)}catch(e){o.A.error({message:B("AddLayerModal.errorMessage"),description:B("AddLayerModal.errorDescription")})}finally{n(!1)}},status:w,enterButton:!0,addonBefore:a().createElement(s.A,{"aria-label":"select-version",defaultValue:"1.3.0",onChange:x,options:[{value:"1.3.0",label:`${B("AddLayerModal.version")} 1.3.0`},{value:"1.1.1",label:`${B("AddLayerModal.version")} 1.1.1`}]})}),""!==w&&a().createElement(c.A,{className:"error"},B("AddLayerModal.invalidUrlErrorMsg")),a().createElement(u.A,{"aria-label":"wms-table",loading:t,columns:[{title:B("AddLayerModal.columnTitle"),render:(e,t)=>t.get("title")}],scroll:{y:250},rowKey:e=>(0,d.getUid)(e),rowSelection:{selectedRowKeys:y,onChange:b},pagination:!1,dataSource:m}))},Z=n(85740),Y=n(74747),q=n.n(Y),Q=n(34231);const X=()=>(0,r.useContext)(Q.Ay);var ee=X;function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(null,arguments)}var ne=({...e})=>{const t=C()(),n=ee(),{t:o,i18n:i}=(0,E.useTranslation)();(0,r.useEffect)((()=>{if(!t)return;const e=S().getLayersByProperty(t,"isExternalLayerGroup",!0);if(1!==e?.length)return;const n=e[0],r=e[0].get("name");n.set("name",o("AddLayerModal.externalWmsFolder"));const a=new Z.ObjectEvent("change:layers","name",r);n.dispatchEvent(a)}),[i.language,t,o]);const l=[];return n&&n.forEach((e=>{if((t=e.integration)&&"map"===t.placement){const{key:t,wrappedComponent:n}=e;l.push(a().createElement(n,{key:t}))}var t})),t?a().createElement(q(),te({map:t},e),l):a().createElement(a().Fragment,null)},re=n(24009),ae=n(26612),oe={};oe.styleTagTransform=G(),oe.setAttributes=_(),oe.insert=j().bind(null,"head"),oe.domAPI=U(),oe.insertStyleElement=V();M()(ae.A,oe),ae.A&&ae.A.locals&&ae.A.locals;var ie=()=>{const e=ee(),{t:t}=(0,E.useTranslation)(),n=()=>{let t=null;return e.forEach((e=>{if((n=e.integration)&&"cookie-banner"===n.placement){const{key:n,wrappedComponent:r}=e;t=a().createElement(r,{key:n})}var n})),t};return a().createElement(re.Zd,{disableStyles:!0,key:"default-cookie-consent",location:"bottom",buttonText:t("CookieBanner.button"),cookieName:"SHOGun-Session-Cookie",buttonClasses:"cookie-button",containerClasses:"cookie-container",contentClasses:"cookie-content",expires:150},n()?n():t("CookieBanner.info"))},le=n(461),se=n(98318),ce=n.n(se),ue=n(9396),de=n.n(ue),me=n(97082),pe=n(11683),ge=n(80532),fe=n.n(ge),ye=n(16180),he=n.n(ye),Ee=n(2129),be=n(20573);var Ae=()=>(0,r.useContext)(be.Ay);var we=()=>{const e=Ae();return(0,r.useCallback)((async t=>{let n;const r=t.layer.getSource();if(r instanceof fe()&&(n=r.getUrl()),r instanceof he()){const e=r.getUrls();n=e?e[0]:void 0}if(!n)return;n.endsWith("?")&&(n=n.slice(0,-1));const a={"Content-Type":"application/xml"},o=await fetch(n,{method:"POST",headers:t.layer?.get("useBearerToken")?{...a,...(0,Ee.getBearerTokenHeader)(e?.getKeycloak())}:a,body:(new XMLSerializer).serializeToString(t.transaction)});if(!o.ok)throw new Error("No successful response while executing a WFS-Transaction");const i=await o.text();if((e=>["wfs:FAILED","ows:ExceptionReport"].some((t=>e.getElementsByTagName(t).length>0)))((new DOMParser).parseFromString(i,"text/xml")))throw new Error(`Something failed: ${i}`);return i}),[e])},ve=n(88055),Te=n.n(ve),Se=n(95093),Le=n.n(Se),ke=n(99476),Ce=n(43372),Pe=n.n(Ce),Fe=n(89785),Ne=n(940),De=n(36798),Oe=n(55677),Ie=n(1631),Me=n(38221),xe=n.n(Me),Ue=n(69843),Re=n.n(Ue),je=n(23805),Be=n.n(je),_e=n(59648),ze=n.n(_e),Ve=n(70372),$e=n(85015),Ge=n.n($e),We=n(59150),Ke=n(50400),He=n(5624);function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je.apply(null,arguments)}var Ze=({readOnly:e=!1,fieldConfig:t,...n})=>{const r=Ae(),{t:o}=(0,E.useTranslation)();return r?a().createElement(We.A,Je({multiple:!0,name:"file",action:"/files/uploadToFileSystem",withCredentials:!0,headers:{...(0,He.getCsrfTokenHeader)(),...(0,Ee.getBearerTokenHeader)(r.getKeycloak())},onRemove:async e=>{const t=e?.response?.fileUuid;if(t){const e=`${r?.getBasePath()}files/${t}`;return await fetch(e,{method:"DELETE",credentials:"same-origin",headers:{...(0,He.getCsrfTokenHeader)(),...(0,Ee.getBearerTokenHeader)(r?.getKeycloak())}})}},onPreview:async e=>{if(!r)return;const{response:t}=e,n=t?.fileName,a=`/files/${t?.fileUuid}`;if(Re()(n)||Re()(t?.fileUuid))return;const o=document.createElement("a");document.body.appendChild(o);const i={headers:{...(0,Ee.getBearerTokenHeader)(r.getKeycloak())}},l=await fetch(a,i),s=await l.blob();let c=window.URL.createObjectURL(s);o.href=c,o.download=n,o.click(),window.URL.revokeObjectURL(c)}},t?.fieldProps,n),!e&&a().createElement(Ke.A,null,o("FileUpload.upload"))):a().createElement(a().Fragment,null)},Ye=n(66188),qe=n(20982),Qe=n(44288);var Xe=()=>{const e=Ae();return(0,r.useCallback)((async t=>{if(Re()(t))return Promise.reject();const n=await fetch(t,{credentials:"include",headers:{...(0,Ee.getBearerTokenHeader)(e?.getKeycloak())}}),r=await n.blob();return new Promise(((e,t)=>{try{const t=new FileReader;t.onload=function(){e(this.result)},t.readAsDataURL(r)}catch(e){t(e)}}))}),[e])};function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(null,arguments)}var tt=({fieldConfig:e,readOnly:t=!1,initialFileList:n,...o})=>{const[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(),p=Ae(),g=Xe(),{t:f}=(0,E.useTranslation)();(0,Qe.Z)((async()=>{if(!n||0===n.length)return;const e=await(async e=>{const t=e.map((async e=>({...e,thumbUrl:await g(`${p?.getBasePath()}imagefiles/${e?.response?.fileUuid}/thumbnail`),url:void 0})));return await Promise.all(t)})(n);m(e)}),[n?.length]);return p?a().createElement(a().Fragment,null,a().createElement(We.A,et({accept:"image/*",multiple:!0,name:"file",action:`${p.getBasePath()}imagefiles/uploadToFileSystem`,withCredentials:!0,listType:"picture-card",headers:{...(0,He.getCsrfTokenHeader)(),...(0,Ee.getBearerTokenHeader)(p.getKeycloak())},onRemove:async e=>{const t=e?.response?.fileUuid;if(t){const e=`${p?.getBasePath()}imagefiles/${t}`;return await fetch(e,{method:"DELETE",credentials:"same-origin",headers:{...(0,He.getCsrfTokenHeader)(),...(0,Ee.getBearerTokenHeader)(p?.getKeycloak())}})}},onPreview:async e=>{const{response:t}=e;if(Re()(t)||Re()(t?.fileUuid))return;const n=`${p?.getBasePath()}imagefiles/${t.fileUuid}`,r=await g(n);u(r),s(!0)},fileList:t?d:void 0},e?.fieldProps,o),!t&&a().createElement("div",null,a().createElement(qe.FontAwesomeIcon,{icon:Ye.QLR}),a().createElement("div",{style:{marginTop:8}},f("ImageUpload.upload")))),a().createElement(i.A,{open:l,footer:null,onCancel:()=>s(!1)},a().createElement("img",{alt:"example",style:{width:"100%"},src:c}))):a().createElement(a().Fragment,null)},nt=n(45631),rt=n(45107),at={};at.styleTagTransform=G(),at.setAttributes=_(),at.insert=j().bind(null,"head"),at.domAPI=U(),at.insertStyleElement=V();M()(rt.A,at),rt.A&&rt.A.locals&&rt.A.locals;function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(null,arguments)}var it=({feature:e,formConfig:t,...n})=>{const[o]=(0,nt.mN)();(0,r.useEffect)((()=>{o.resetFields(),o.setFieldsValue(e.getProperties())}),[e,o]);return a().createElement(Fe.A,ot({className:"feature-info-form",form:o,labelCol:{span:8},labelAlign:"left",labelWrap:!0},n),t?.map((e=>a().createElement(Fe.A.Item,{key:e.propertyName,name:e.propertyName,label:e.displayName||e.propertyName},a().createElement(mt,ot({label:e.displayName||e.propertyName},e.fieldProps))))))},lt=n(40679),st={};st.styleTagTransform=G(),st.setAttributes=_(),st.insert=j().bind(null,"head"),st.domAPI=U(),st.insertStyleElement=V();M()(lt.A,st),lt.A&&lt.A.locals&&lt.A.locals;function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ct.apply(null,arguments)}var ut=({value:e,referenceConfig:t,...n})=>{const[o,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(),{t:d}=(0,E.useTranslation)(),m="id",p=e=>{if(t?.tablePropertyName){const n=/{{(.*?)}}/g;if(t?.tablePropertyName.match(n)){let r,a=t?.tablePropertyName;for(;r=n.exec(t?.tablePropertyName);)a=a.replace(r[0],e[r[1]]);return a}return e[t?.tablePropertyName]}if(e[m])return e[m]},g=[{width:"100%",render:(e,t)=>p(t)?p(t):d("ReferenceTable.defaultRowPlaceholder")},{render:(e,t)=>a().createElement(Ke.A,{onClick:()=>f(e,t),icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.LJS})})}],f=(e,t)=>{const n=new(de());n.setProperties(t),c(n),l(!0)};return a().createElement(a().Fragment,null,a().createElement(u.A,ct({size:"small",showHeader:!1,pagination:!1,columns:g,rowKey:m,dataSource:(()=>{if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t;if(null==t||"number"==typeof t||"boolean"==typeof t||"string"==typeof t)return ze().warn("Unsupported value given"),[];if("object"==typeof t)return[t]}catch(e){return ze().warn("Error while parsing the table data ",e),[]}})()},n)),a().createElement(i.A,{className:"reference-table-modal",open:o,maskClosable:!1,footer:null,width:600,destroyOnClose:!0,title:(()=>{if(!s)return d("ReferenceTable.defaultModalTitle");const e=p(s.getProperties());return e?`${d("ReferenceTable.modalTitle",{referenceValue:e})}`:d("ReferenceTable.defaultModalTitle")})(),onCancel:async()=>{l(!1),c(void 0)}},s&&a().createElement(it,{feature:s,formConfig:t?.featureInfoFormConfig})))};function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(null,arguments)}var mt=({dataType:e="auto",valueMap:t,format:n="DD.MM.YYYY",suffix:r,value:o,label:i,referenceConfig:l,urlDisplayValue:s,...u})=>{const{i18n:d}=(0,E.useTranslation)();let m="";if(o&&"string"==typeof o&&t?.hasOwnProperty(o)&&(o=t[o]),("string"===e||"auto"===e&&"string"==typeof o)&&o&&(m=o?.toString()),"boolean"===e||"auto"===e&&"boolean"==typeof o||"false"===o||"true"===o)return a().createElement(Ne.A,{checked:"false"!==o&&!1!==o,disabled:!0});("number"===e||"auto"===e&&Number.isFinite(o))&&o&&(m=new Intl.NumberFormat(d.language,{useGrouping:!1}).format(Number(o))),("date"===e||"auto"===e&&(0,Se.isMoment)(o))&&o&&(m=Le()(o).format(n)),"auto"===e&&Array.isArray(o)&&(m=o.join(", "));("url"===e||"auto"===e&&Ge()(o)&&(e=>{const t=e.toLowerCase();return["http://","https://","ftp://","mailto:"].some((e=>t.startsWith(e)))})(o))&&o&&(m=a().createElement("a",{href:o?.toString(),target:"_blank",rel:"noreferrer"},s||o?.toString()));const p=o&&(e=>{if(!o)return null;let t="string"!=typeof e?JSON.stringify(e):e;try{t=JSON.parse(t)}catch(e){return null}return"object"==typeof t&&null!==t&&vt(t[0])?t:null})(o);if("auto"===e&&p)return p[0].response?.fileType?.startsWith("image/")?a().createElement(tt,{initialFileList:p,disabled:!0,readOnly:!0}):a().createElement(Ze,{defaultFileList:p,disabled:!0,readOnly:!0});return"json"===e||"auto"===e&&o&&(e=>{let t="string"!=typeof e?JSON.stringify(e):e;try{t=JSON.parse(t)}catch(e){return!1}return"object"==typeof t&&null!==t})(o)?a().createElement(ut,{value:"string"==typeof o?o:JSON.stringify(o),referenceConfig:l}):(r&&(m=a().createElement(a().Fragment,null,m," ",r)),a().createElement(c.A.Text,dt({className:"displayfield"},u),m))},pt=n(21086),gt=n(55848),ft=n(22239),yt={};yt.styleTagTransform=G(),yt.setAttributes=_(),yt.insert=j().bind(null,"head"),yt.domAPI=U(),yt.insertStyleElement=V();M()(ft.A,yt),ft.A&&ft.A.locals&&ft.A.locals;function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(null,arguments)}var Et=({parentForm:e,propertyName:t,value:n,tablePropertyName:o,formConfig:l,onChange:s=(()=>{}),...c})=>{const[d,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(),[f]=(0,nt.mN)(),{t:y}=(0,E.useTranslation)(),h=Xe(),b=Ae(),A=e=>{if(!o)return e.id||"";const t=/{{(.*?)}}/g;if(!o.match(t))return e[o];let n,r=o;for(;n=t.exec(o);)r=r.replace(n[0],e[n[1]]);return r},w=[{width:"100%",defaultSortOrder:"ascend",sorter:(e,t)=>{const n=A(e),r=A(t);return Number.isFinite(n)&&Number.isFinite(r)?n-r:"string"==typeof n&&"string"==typeof r?n.localeCompare(r):0},render:(e,t)=>A(t)},{render:(e,t)=>a().createElement(Ke.A,{onClick:()=>T(t),icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.MT7})})},{render:(e,t)=>a().createElement(pt.A,{title:y("EditReferenceTable.confirmDeleteTitle"),onConfirm:()=>v(t),placement:"bottomRight"},a().createElement(Ke.A,{danger:!0,icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.yLS})}))}],v=n=>{const r=e.getFieldsValue();if(!r[t])return void ze().warn(`Could not find the property ${t} in the form values`);const a=Te()(r[t]);if(!Array.isArray(a))return void ze().warn("The delete candidate is not of required type array");const o=a.findIndex((e=>!(!Number.isFinite(e.id)||e.id!==n.id)||!(!e.internalId||e.internalId!==n.internalId)));-1!==o?(a.splice(o,1),s(a)):ze().warn(`Could not find the index (${n.id}) to delete`)},T=e=>{const t=new(de());t.setProperties(e),f.setFieldsValue(t.getProperties()),g(t),m(!0)},S=()=>{f.resetFields(),m(!1),g(void 0)};return a().createElement(a().Fragment,null,a().createElement(Ke.A,{className:"add-reference-button",onClick:()=>{const e=new(de());e.set("internalId",(0,gt.getUid)(e)),f.setFieldsValue(e.getProperties()),g(e),m(!0)},icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.QLR})}),a().createElement(u.A,ht({size:"small",showHeader:!1,pagination:!1,columns:w,rowKey:"id",dataSource:(()=>{if(!n)return;if(!Array.isArray(n))return void ze().warn("Reference value must be of of type array.");const e=Te()(n);e.forEach((e=>{Object.entries(e).forEach((async([t,r])=>{const a=l?.some((e=>e.propertyName===t&&"DATE"===e.component));if(a&&r){Le()(n).isValid()?e[t]=Le()(r):(ze().warn("Could not parse date"),e[t]=null)}const o=l?.some((e=>e.propertyName===t&&"UPLOAD"===e.component));if(o)if(Array.isArray(e[t])){const n=e[t]?.map((async e=>({...e,thumbUrl:e.type.startsWith("image")?await h(`${b?.getBasePath()}imagefiles/${e?.response?.fileUuid}/thumbnail`):void 0,url:e.type.startsWith("image")?void 0:e.url}))),r=await Promise.all(n);e[t]=r}else e[t]=[]}))}));return e.every((e=>!!Number.isFinite(e.id)||"string"==typeof e.id&&e.id.length>0))||ze().warn("Not all elements in the referenced array contain an id value. This might result in unexpected behaviour"),e})()},c)),a().createElement(i.A,{className:"edit-reference-table-modal",open:d,maskClosable:!1,width:600,destroyOnClose:!0,title:`${y("EditReferenceTable.modalTitle",{referenceValue:p?A(p.getProperties()):void 0})}`,onCancel:()=>{S()},onOk:async()=>{try{await f.validateFields()}catch(e){return void ze().warn("Form validation failed: ",e)}(()=>{const n=Te()(f.getFieldsValue(!0));let r=[];Array.isArray(e.getFieldValue(t))&&(r=Te()(e.getFieldValue(t)));const a=r.findIndex((e=>!(!Number.isFinite(e.id)||e.id!==n.id)||!(!e.internalId||e.internalId!==n.internalId)));a>-1?r[a]=n:r.push(n),f.isFieldsTouched()&&s(r)})(),S()}},p&&a().createElement(Tt,{form:f,formConfig:l,applyFormDirty:!1})))},bt=n(49648),At={};At.styleTagTransform=G(),At.setAttributes=_(),At.insert=j().bind(null,"head"),At.domAPI=U(),At.insertStyleElement=V();M()(bt.A,At),bt.A&&bt.A.locals&&bt.A.locals;function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(null,arguments)}function vt(e){return!Re()(e)&&(e.uid&&!Re()(e.name)&&!Re()(e.type)&&!Re()(e.uid)&&Be()(e.response)&&!Re()(e.response.id)&&!Re()(e.response.fileUuid)&&!Re()(e.response.fileName)&&!Re()(e.response.fileType))}var Tt=({form:e,formConfig:t,applyFormDirty:n=!0,...r})=>{const o=Ae(),i=F(),c=D((e=>e.editFeature.formDirty)),u=e=>a().createElement(mt,e.fieldProps),d=t=>{if(o)switch(t.component){case"CHECKBOX":return a().createElement(Ne.A,t?.fieldProps);case"DATE":return a().createElement(De.A,t?.fieldProps);case"DISPLAY":return a().createElement("span",t?.fieldProps);case"INPUT":return a().createElement(l.A,t?.fieldProps);case"NUMBER":return a().createElement(Oe.A,t?.fieldProps);case"SELECT":return a().createElement(s.A,wt({allowClear:!0},t?.fieldProps));case"SWITCH":return a().createElement(Ie.A,t?.fieldProps);case"TEXTAREA":return a().createElement(l.A.TextArea,t?.fieldProps);case"UPLOAD":return"IMAGE"===t?.fieldProps?.type?a().createElement(tt,t?.fieldProps):a().createElement(Ze,t?.fieldProps);case"REFERENCE_TABLE":const n=t;return a().createElement(Et,wt({key:n.propertyName,tablePropertyName:n.tablePropertyName,propertyName:n.propertyName,formConfig:n.editFormConfig,parentForm:e},n.fieldProps));default:return ze().error(`Component type "${t?.component}" is not supported`),a().createElement(a().Fragment,null)}};return a().createElement(Fe.A,wt({className:"edit-feature-form",form:e,labelCol:{span:8},labelAlign:"left",labelWrap:!0,onValuesChange:xe()((async e=>{n&&e&&!c&&i((0,Ve.RB)(!0))}),250)},r),t?.map((e=>{let t;e.readOnly?t=u(e):e.component?t=d(e):(ze().warn("FieldConfig is missing `readOnly`, `component` or `dataType` property."),t=a().createElement(l.A,{key:e.propertyName,placeholder:""}));const n={rules:[]};return n.rules=[{required:e.required}],"SWITCH"!==e.component&&"CHECKBOX"!==e.component||e.readOnly||(n.valuePropName="checked"),"UPLOAD"!==e.component||e.readOnly||(n.valuePropName="fileList",n.getValueFromEvent=e=>Array.isArray(e)?e:e&&e.fileList),a().createElement(Fe.A.Item,wt({key:e.propertyName,name:e.propertyName,label:e.displayName||e.propertyName},n),t)})))};const St=e=>["gml:MultiPoint","gml:Point","gml:MultiLineString","gml:LineString","gml:MultiPolygon","gml:Polygon"].includes(e);var Lt=()=>{const e=Ae();return(0,r.useCallback)((async t=>{let n;const r=t.getSource();if(r instanceof fe()&&(n=r.getUrl()),r instanceof he()){const e=r.getUrls();n=e?e[0]:void 0}if(!n)return;n.endsWith("?")&&(n=n.slice(0,-1));const a={SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",OUTPUTFORMAT:"application/json",TYPENAMES:t.getSource()?.getParams().LAYERS},o={"Content-Type":"application/json"},i=await fetch(`${n}?${A().objectToRequestString(a)}`,{method:"GET",headers:t.get("useBearerToken")?{...o,...(0,Ee.getBearerTokenHeader)(e?.getKeycloak())}:o});if(!i.ok)throw new Error("No successful response while executing a WFS-Transaction");return await i.json()}),[e])};var kt=()=>{const e=C()(),t=Lt(),n=Ae(),a=D((e=>e.editFeature.userEditMode)),o=(0,r.useCallback)(((e,t,r)=>{for(const[a,i]of Object.entries(e)){if(Array.isArray(i)){const n=i.map((e=>o(e,t)));e[a]=r?JSON.stringify(n):n}void 0===i&&(e[a]=null);if(t.some((e=>e.children?.some((e=>e.propertyName===a&&e.readOnly))))&&delete e[a],(0,Se.isMoment)(i)&&(e[a]=i.toISOString()),Array.isArray(i)&&i.length>0&&vt(i[0])){const t=i[0].response?.fileType?.startsWith("image/")?"imagefiles/":"files/",r=i.map((e=>({uid:e.uid,lastModified:e.lastModified,name:e.name,type:e.type,url:`${n?.getBasePath()}${t}${e.response.fileUuid}`,response:{id:e.response?.id,created:e.response?.created,fileName:e.response?.fileName,fileType:e.response?.fileType,fileUuid:e.response?.fileUuid}})));e[a]=JSON.stringify(r)}}return e}),[n]);return(0,r.useCallback)((async n=>{if(!e)return;const r=[],i=[],l=[],s=await t(n.layer);if(!s)return;const c=n.layer.get("editFormConfig"),u=s.featureTypes[0]?.properties?.find((e=>St(e.type)));let d=!1;if(n.upsertFeatures)for(const e of n.upsertFeatures){const t=new(de()),l=e.getGeometry()?.clone();l&&!(0,ke.isEmpty)(l.getExtent())&&a?.includes("EDIT_GEOMETRY")&&(t.set(u?.name||"geom",l),t.setGeometryName(u?.name||"geom")),n.form&&t.setProperties(o(Te()(n.form?.getFieldsValue()),c,!0));const s=!!e.getId();s&&!d&&(d=!0),s&&t.setId(e.getId()),s?i.push(t):r.push(t)}n.deleteFeatures&&l.push(...n.deleteFeatures);const m={featureNS:s.targetNamespace,featurePrefix:s.targetPrefix,featureType:n.layer.getSource()?.getParams().LAYERS,srsName:e.getView().getProjection().getCode(),version:"1.1.0",nativeElements:[]},p=(new(Pe())).writeTransaction(r,i,l,m);if(d&&ce().wfsLockFeatureEnabled){const e=p.getRootNode(),t=document.createElementNS("http://www.opengis.net/wfs","LockId"),n=document.createTextNode("GeoServer");t.appendChild(n),e.appendChild(t)}return p}),[e,a,t,o])},Ct=n(55349),Pt=n(25626),Ft=n(83847),Nt={};Nt.styleTagTransform=G(),Nt.setAttributes=_(),Nt.insert=j().bind(null,"head"),Nt.domAPI=U(),Nt.insertStyleElement=V();M()(Ft.A,Nt),Ft.A&&Ft.A.locals&&Ft.A.locals;function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dt.apply(null,arguments)}var Ot=({open:e,children:t,...n})=>{const o=C()();(0,r.useEffect)((()=>{document.querySelectorAll("#map")[0]?.classList.toggle("bisected",!!e)}),[e]);return a().createElement(Pt.A,Dt({className:"map-drawer",mask:!1,open:e,placement:"right",width:getComputedStyle(document.documentElement).getPropertyValue("--editDrawerWidth"),afterOpenChange:()=>{o?.updateSize()}},n),t)},It=n(69868);var Mt=()=>{const e=Ae(),t=C()(),n=Lt();return(0,r.useCallback)((async r=>{if(!t)return;const a=await n(r.layer);if(!a)return;let o;const i=r.layer.getSource();if(i instanceof fe()&&(o=i.getUrl()),i instanceof he()){const e=i.getUrls();o=e?e[0]:void 0}if(!o)return;o.endsWith("?")&&(o=o.slice(0,-1));const l=(new(Pe())).writeGetFeature({srsName:t.getView().getProjection().getCode(),featureNS:a.targetNamespace,featurePrefix:a.targetPrefix,featureTypes:[i?.getParams().LAYERS],outputFormat:"application/json",filter:r.filter}),s={"Content-Type":"application/json"},c=await fetch(o,{method:"POST",headers:r.layer?.get("useBearerToken")?{...s,...(0,Ee.getBearerTokenHeader)(e?.getKeycloak())}:s,body:(new XMLSerializer).serializeToString(l)});if(!c.ok)throw new Error("No successful response");return await c.json()}),[e,n,t])},xt=n(72635),Ut=n(62193),Rt=n.n(Ut),jt=n(93428),Bt=n.n(jt),_t=n(25839),zt=n.n(_t),Vt=n(87923),$t=n.n(Vt),Gt=n(46355),Wt=n.n(Gt),Kt=n(16275),Ht=n.n(Kt),Jt=n(71895),Zt=n.n(Jt),Yt=n(95647),qt=n.n(Yt),Qt=n(24643),Xt=n(40897),en={};en.styleTagTransform=G(),en.setAttributes=_(),en.insert=j().bind(null,"head"),en.domAPI=U(),en.insertStyleElement=V();M()(Xt.A,en),Xt.A&&Xt.A.locals&&Xt.A.locals;function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tn.apply(null,arguments)}var nn=({feature:e,historyLength:t=10})=>{const n=(0,r.useRef)({past:[],future:[]}),o=(0,k.useMap)(),i=F(),[l,s]=(0,r.useState)(),[,c]=(0,r.useState)(0),u=(0,r.useMemo)((()=>new(Bt())),[]),d=D((e=>e.editFeature.userEditMode)),m=D((e=>e.editFeature.formDirty));(0,r.useEffect)((()=>{if(o)return l||s(Qt.DigitizeUtil.getDigitizeLayer(o)),()=>{l&&o?.removeLayer(l)}}),[l,o]),(0,r.useEffect)((()=>{n.current.past.length>0&&!m&&i((0,Ve.RB)(!0))}),[i,n.current.past]),(0,r.useEffect)((()=>{if(l&&e?.id){l.getSource()?.clear();const t=u.readFeature(e),n=l.getSource();n.addFeature(t),c((e=>e+1)),(0,ke.isEmpty)(n.getExtent())||o?.getView().fit(n.getExtent(),{padding:[50,50,50,50]})}}),[e,l,u,o]);const p=()=>{const e=l?.getSource(),r=e?.getFeatures();if(!r)return;const a=u.writeFeaturesObject(r),o=n.current.past[n.current.past.length-1];Rt()(o)||(e?.clear(),e?.addFeatures(u.readFeatures(o)),n.current={past:n.current.past.slice(0,-1),future:[...n.current.future,a].slice(-t)},c((e=>e+1)))},g=()=>{const e=l?.getSource(),r=e?.getFeatures();if(!r)return;const a=u.writeFeaturesObject(r),o=n.current.future[n.current.future.length-1];Rt()(o)||(e?.clear(),e?.addFeatures(u.readFeatures(o)),n.current={future:n.current.future.slice(0,-1),past:[...n.current.past,a].slice(-t)},c((e=>e+1)))},f=t=>{if(!e.geometry.type.toLocaleLowerCase().startsWith("multi")){const e=l?.getSource(),n=e?.getFeatures()[0];n&&(e?.once("addfeature",(t=>e.removeFeature(t.feature))),n.setGeometry(t.feature.getGeometry()))}y()},y=()=>{const e=l?.getSource()?.getFeatures();if(!e)return;const t=u.writeFeaturesObject(e);n.current={...n.current,past:[...n.current.past,t].slice(-10)},c((e=>e+1))},h={tooltipPlacement:"left",tooltipProps:{mouseEnterDelay:.5}};return l&&d.includes("EDIT_GEOMETRY")?a().createElement(qt(),{className:"geometry-edit-tb",alignment:"vertical"},a().createElement(Zt(),null,d.includes("CREATE")?a().createElement($t(),tn({icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.zLW}),pressedIcon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.zLW}),name:"draw",digitizeLayer:l,tooltip:(0,xt.t)("EditFeatureGeometryToolbar.draw"),drawType:e.geometry.type,onDrawEnd:f},h)):a().createElement(a().Fragment,null),d.includes("UPDATE")?a().createElement(Wt(),tn({icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.mSI}),pressedIcon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.mSI}),name:"edit",digitizeLayer:l,tooltip:(0,xt.t)("EditFeatureGeometryToolbar.edit"),onModifyStart:y,onModifyEnd:y,onTranslateEnd:y},h)):a().createElement(a().Fragment,null),d.includes("DELETE")?a().createElement(zt(),tn({icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.yLS}),pressedIcon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.yLS}),name:"delete",digitizeLayer:l,tooltip:(0,xt.t)("EditFeatureGeometryToolbar.delete"),onFeatureRemove:y},h)):a().createElement(a().Fragment,null)),a().createElement(Ht(),tn({icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.U23}),tooltip:(0,xt.t)("EditFeatureGeometryToolbar.undo"),onClick:p,disabled:0===n.current.past?.length},h)),a().createElement(Ht(),tn({icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.U23,flip:"horizontal"}),tooltip:(0,xt.t)("EditFeatureGeometryToolbar.redo"),onClick:g,disabled:0===n.current.future?.length},h))):a().createElement(a().Fragment,null)},rn=n(57598);function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},an.apply(null,arguments)}var on=({tabConfig:e,form:t,initialValues:n,...r})=>{const o=e?.map(((e,r)=>({label:e.title,key:`${r}`,forceRender:!0,children:a().createElement(Tt,{name:e.title,form:t,initialValues:n,formConfig:e.children})})));return a().createElement(rn.A,an({items:o},r))};function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ln.apply(null,arguments)}var sn=({feature:e,layer:t,onError:n=(()=>{}),onSuccess:o=(()=>{}),...i})=>{const[l,s]=(0,r.useState)(!1),{t:c}=(0,E.useTranslation)(),u=(0,k.useMap)(),d=kt(),m=we();return a().createElement(pt.A,{title:c("DeleteButton.confirm"),onConfirm:async()=>{if(u&&t&&(0,pe.isWmsLayer)(t))try{s(!0);const n=(new(Bt())).readFeature(e),r=await d({deleteFeatures:[n],layer:t});if(!r)return;await m({layer:t,transaction:r}),t.getSource()?.refresh(),o()}catch(e){me.Logger.error(e),n(e)}finally{s(!1)}},placement:"bottomRight"},a().createElement(Ke.A,ln({type:"primary",loading:l,disabled:!e.id,danger:!0,icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.yLS})},i),c("DeleteButton.title")))};function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cn.apply(null,arguments)}var un=({feature:e,form:t,...n})=>{const{t:r}=(0,E.useTranslation)(),o=(0,k.useMap)(),i=F();return a().createElement(Ke.A,cn({type:"primary",onClick:()=>{if(t.resetFields(),i((0,Ve.RB)(!1)),o){const t=Qt.DigitizeUtil.getDigitizeLayer(o);if(t){t.getSource()?.clear();const n=(new(Bt())).readFeature(e);t.getSource()?.addFeature(n)}}},icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.ub2})},n),r("ResetButton.title"))},dn=n(42253),mn={};mn.styleTagTransform=G(),mn.setAttributes=_(),mn.insert=j().bind(null,"head"),mn.domAPI=U(),mn.insertStyleElement=V();M()(dn.A,mn),dn.A&&dn.A.locals&&dn.A.locals;var pn=n(53206),gn={};gn.styleTagTransform=G(),gn.setAttributes=_(),gn.insert=j().bind(null,"head"),gn.domAPI=U(),gn.insertStyleElement=V();M()(pn.A,gn),pn.A&&pn.A.locals&&pn.A.locals;var fn=({loadComplete:e=!1})=>a().createElement("div",{className:e?"feedback-icon":"feedback-icon hidden"},a().createElement("div",{className:e?"checkmark":"checkmark-hidden"}));function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yn.apply(null,arguments)}var hn=({form:e,layer:t,onError:n=(()=>{}),onSuccess:o=(()=>{}),...i})=>{const[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),d=(0,k.useMap)(),m=kt(),p=we(),g=F(),f=D((e=>e.editFeature.formDirty)),{t:y}=(0,E.useTranslation)();return a().createElement(Ke.A,yn({className:"save-button",type:"primary",onClick:async()=>{if(!d)return;if(!t||!(0,pe.isWmsLayer)(t))return;const r=Qt.DigitizeUtil.getDigitizeLayer(d);if(!r)return me.Logger.error("Cannot find the digitize layer"),void n();const a=r.getSource()?.getFeatures();if(!a||0===a.length)return me.Logger.error("Cannot save feature without geometry"),void n(y("SaveButton.errorNoGeometry"));try{await e.validateFields()}catch(e){return n(e),void me.Logger.warn("Validation has failed: ",e)}try{s(!0);const n=await m({upsertFeatures:a,form:e,layer:t});if(!n)return;const r=await p({layer:t,transaction:n});t.getSource()?.refresh(),u(!0),setTimeout((()=>{u(!1)}),3e3),g((0,Ve.RB)(!1)),o(r)}catch(e){me.Logger.error(e),n(e)}finally{s(!1)}},loading:l,disabled:!f,icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.jkA})},i),y("SaveButton.title"),a().createElement(fn,{loadComplete:c}))},En=n(8177),bn={};bn.styleTagTransform=G(),bn.setAttributes=_(),bn.insert=j().bind(null,"head"),bn.domAPI=U(),bn.insertStyleElement=V();M()(En.A,bn),En.A&&En.A.locals&&En.A.locals;var An=({feature:e,layer:t,form:n,onSaveSuccess:r=(()=>{}),onSaveError:o=(()=>{}),onDeleteSuccess:i=(()=>{}),onDeleteError:l=(()=>{})})=>{const s=D((e=>e.editFeature.userEditMode));return a().createElement("div",{className:"edit-feature-toolbar"},s.includes("CREATE")||s.includes("UPDATE")?a().createElement(a().Fragment,null,a().createElement(un,{feature:e,form:n}),a().createElement(hn,{form:n,layer:t,onSuccess:r,onError:o})):a().createElement(a().Fragment,null),s.includes("DELETE")&&a().createElement(sn,{feature:e,layer:t,onSuccess:i,onError:l}))};var wn=({feature:e,layer:t})=>{const{t:n}=(0,E.useTranslation)(),o=Mt(),i=Xe(),[l,s]=(0,r.useState)(),[c,u]=(0,r.useState)(),[d,m]=(0,r.useState)(),[p]=(0,nt.mN)(),g=C()(),f=F(),y=Ae(),h=(0,r.useCallback)((async e=>{if(!t||!(0,pe.isWmsLayer)(t))return;const n=await o({layer:t,filter:(0,It.equalTo)("id",e)});n?.features[0]&&f((0,Ve.J7)(n?.features[0]))}),[f,o,t]),b=(0,r.useCallback)((async()=>{if(!g||!y)return;let n=t.get("editFormConfig");if(0===n?.length)return void me.Logger.warn(`Layer ${t.get("name")} has no 'editFormConfig' set`);const r=structuredClone(e?.properties)||{},a=Object.entries(r).map((async([e,t])=>{const a=n?.filter((t=>t.children?.find((t=>t.propertyName===e))));if(a.length>1&&me.Logger.warn(`Property ${e} is configured in multiple tabs. Is this intended?`),a&&a[0]){const n=a[0].children?.some((t=>t.propertyName===e&&"DATE"===t.component));if(n){const n=Le()(t);n.isValid()?r[e]=n:(me.Logger.warn("Could not parse date"),r[e]=null)}const o=a[0].children?.some((t=>t.propertyName===e&&"UPLOAD"===t.component));if(o)if(t)try{const n=JSON.parse(t);if(!vt(n[0]))throw new Error("File config is no valid SHOGun file.");const a=n;r[e]=a;const o=a.map((async e=>{const t=a[0].response?.fileType?.startsWith("image/"),n=t?await i(`${y.getBasePath()}imagefiles/${e?.response?.fileUuid}/thumbnail`):void 0;return{...e,thumbUrl:n,url:t?void 0:e.url}})),l=await Promise.all(o);r[e]=l}catch(t){me.Logger.error("Could not parse file list from JSON config: ",t),r[e]=[]}else r[e]=[];const l=a[0].children?.some((t=>t.propertyName===e&&"REFERENCE_TABLE"===t.component));if(l)try{r[e]=JSON.parse(r[e])}catch(e){me.Logger.warn("Could not parse the input for the REFERENCE_TABLE",e)}}}));await Promise.all(a),u(r),p.resetFields(),p.setFieldsValue(r),s(n)}),[g,y,t,e?.properties,p,i]);(0,r.useEffect)((()=>{b()}),[b]);return a().createElement(a().Fragment,null,a().createElement(nn,{feature:e}),d&&a().createElement(le.A,{className:"error-alert",message:d,type:"error",showIcon:!0}),a().createElement(An,{feature:e,layer:t,form:p,onSaveSuccess:e=>{if(!e)return;m(void 0);const t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("ogc:FeatureId"),n=t.item(0)?.getAttribute("fid"),r=n?.split(".")[1];r&&h(r)},onSaveError:e=>{if("object"==typeof e&&null!==e&&"errorFields"in e){const t=(e=>{const t=[];return(e.errorFields||[]).forEach((e=>{Array.isArray(e.errors)&&t.push(...e.errors)})),t.map(((e,n)=>a().createElement(a().Fragment,{key:n},e,n!==t.length-1&&a().createElement("br",null))))})(e);m(t)}else m("string"==typeof e?e:n("EditFeatureFullForm.saveErrorMsg"))},onDeleteSuccess:()=>{m(void 0),f((0,Ve.J7)(null))},onDeleteError:()=>{m(n("EditFeatureFullForm.deleteErrorMsg"))}}),a().createElement(on,{tabConfig:l,initialValues:c,form:p}))};var vn=()=>{const e=Ae();return(0,r.useCallback)((async t=>{let n;const r=t.layer.getSource();if(r instanceof fe()&&(n=r.getUrl()),r instanceof he()){const e=r.getUrls();n=e?e[0]:void 0}if(!n)return;n.endsWith("?")&&(n=n.slice(0,-1));const a=(e=>{const t=e.feature.id,n=e.feature.properties;if(!t||!n)return void ze().warn("Either the id of the feature or its properties (or even both) aren't available");let r;r="number"==typeof t?t:parseInt(t.split(".")[1],10);const a=Object.entries(n).find((([,e])=>e===r||e===r.toString()));if(!a)return void ze().warn("Count not detect the id property");const o=a[0],i=e.layer.getSource()?.getParams().LAYERS,l=document.createElementNS("http://www.opengis.net/wfs/2.0","LockFeature");l.setAttribute("service","WFS"),l.setAttribute("version","2.0.0"),l.setAttribute("expiry","300"),l.setAttribute("lockAction","SOME");const s=document.createElementNS("http://www.opengis.net/wfs/2.0","Query");s.setAttribute("typeNames",i);const c=document.createElementNS("http://www.opengis.net/fes/2.0","Filter"),u=document.createElementNS("http://www.opengis.net/fes/2.0","PropertyIsEqualTo"),d=document.createElementNS("http://www.opengis.net/fes/2.0","ValueReference"),m=document.createTextNode(o);d.appendChild(m);const p=document.createElementNS("http://www.opengis.net/fes/2.0","Literal"),g=document.createTextNode(r.toString());return p.appendChild(g),u.appendChild(d),u.appendChild(p),c.appendChild(u),s.appendChild(c),l.appendChild(s),l})({layer:t.layer,feature:t.feature});if(!a)return;const o={"Content-Type":"application/xml"},i=await fetch(n,{method:"POST",headers:t.layer?.get("useBearerToken")?{...o,...(0,Ee.getBearerTokenHeader)(e?.getKeycloak())}:o,body:(new XMLSerializer).serializeToString(a)});if(!i.ok)throw new Error("No successful response while executing a WFS-LockFeature");const l=await i.text();if((new DOMParser).parseFromString(l,"text/xml").getElementsByTagName("wfs:FeaturesNotLocked").length>0)throw new Error(`Error while locking a feature: ${l}`);return l}),[e])};var Tn=(e,t,n)=>{const a=(0,k.useMap)(),o=Ae(),i=(0,r.useCallback)((async r=>{if(!a||!e)return;const i=r.coordinate,l=a.getView().getResolution();if(!l)return;const s=e.getSource(),c=s?.getFeatureInfoUrl(i,l,a.getView().getProjection(),{INFO_FORMAT:"application/json",BUFFER:10}),u={"Content-Type":"application/json"};if(c)try{a.getTargetElement().style.cursor="wait";const n=await fetch(c,{method:"GET",headers:e.get("useBearerToken")?{...u,...(0,Ee.getBearerTokenHeader)(o?.getKeycloak())}:u});if(!n.ok)throw new Error("No successful response");const r=await n.json();t&&t(r)}catch(e){me.Logger.error("Error: ",e),n&&n()}finally{a.getTargetElement().style.cursor=""}}),[o,e,a,t,n]),l=(0,r.useCallback)((t=>{if(!a||!e)return;if(t.dragging)return;const n=e.getData(t.pixel);if(!(n instanceof Uint8ClampedArray))return;const r=n&&n[3]>0;a.getTargetElement().style.cursor=r?"pointer":""}),[e,a]);(0,r.useEffect)((()=>{if(a)return a.on("pointermove",l),a.on("singleclick",i),()=>{a.un("pointermove",l),a.un("singleclick",i)}}),[a,l,i])},Sn=n(54402),Ln={};Ln.styleTagTransform=G(),Ln.setAttributes=_(),Ln.insert=j().bind(null,"head"),Ln.domAPI=U(),Ln.insertStyleElement=V();M()(Sn.A,Ln),Sn.A&&Sn.A.locals&&Sn.A.locals;var kn=({layer:e,onLockSuccess:t=(()=>{}),onLockError:n=(()=>{}),onCreate:o=(()=>{})})=>{const[i,l]=(0,r.useState)(!1),s=Lt(),c=vn(),u=F(),d=C()(),{t:m}=(0,E.useTranslation)(),p=D((e=>e.editFeature.userEditMode));Tn(e,(async r=>{if(r.features.length&&(p.includes("UPDATE")||p.includes("DELETE"))){const a=r.features[0];if(!e||!a)return;if(ce().wfsLockFeatureEnabled)try{const n=await c({layer:e,feature:a});if(!n)return;u((0,Ve.J7)(a)),t(n)}catch(e){n(e)}else u((0,Ve.J7)(a))}}));return a().createElement("div",{className:"edit-feature-switch"},p.includes("CREATE")&&a().createElement(a().Fragment,null,p.includes("UPDATE")&&a().createElement("div",null,m("EditFeatureSwitch.usageHint")),a().createElement(Ke.A,{loading:i,onClick:async()=>{const t=await(async()=>{if(d&&e)try{l(!0);const t=await s(e);if(!t)return;const n=t.featureTypes[0]?.properties?.find((e=>St(e.type)));switch(n?.type){case"gml:MultiPoint":return"MultiPoint";case"gml:Point":return"Point";case"gml:MultiLineString":return"MultiLineString";case"gml:LineString":return"LineString";case"gml:MultiPolygon":return"MultiPolygon";case"gml:Polygon":return"Polygon"}}catch(e){ze().error(e)}finally{l(!1)}})();t&&(u((0,Ve.J7)({type:"Feature",properties:{},geometry:{type:t,coordinates:[]}})),o())}},m("EditFeatureSwitch.createFeature"))),!p.includes("CREATE")&&(p.includes("UPDATE")||p.includes("DELETE"))&&a().createElement("div",null,m("EditFeatureSwitch.limitedUsageHint")))},Cn=n(90771),Pn={};Pn.styleTagTransform=G(),Pn.setAttributes=_(),Pn.insert=j().bind(null,"head"),Pn.domAPI=U(),Pn.insertStyleElement=V();M()(Cn.A,Pn),Cn.A&&Cn.A.locals&&Cn.A.locals;function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(null,arguments)}var Nn=({...e})=>{const{t:t}=(0,E.useTranslation)(),[n,o]=(0,r.useState)(),[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(t("EditFeatureDrawer.featureEditor")),d=D((e=>e.editFeatureDrawerOpen)),m=D((e=>e.editFeature.layerId)),p=D((e=>e.editFeature.feature)),g=D((e=>e.editFeature.formDirty)),f=C()(),y=F(),h=kt(),b=we();(0,r.useEffect)((()=>{if(!f||!m)return;const e=S().getLayerByOlUid(f,m);e&&(0,pe.isWmsLayer)(e)?(u(`${t("EditFeatureDrawer.featureEditor")} - ${e.get("name")}`),o(e)):me.Logger.warn(`Could not find layer with id ${m}`)}),[f,m,t]);const A=async()=>{await(async()=>{if(n&&p&&p.id&&ce().wfsLockFeatureEnabled)try{const e=new(de());e.setId(p.id);const t=await h({layer:n,deleteFeatures:[],upsertFeatures:[e]});if(!t)return;await b({layer:n,transaction:t})}catch(e){me.Logger.error("Error while releasing the lock on the feature")}})(),y((0,Ct.jD)()),y((0,Ve.RB)(!1)),y((0,Ve.cL)()),s(!1)};return a().createElement(Ot,Fn({className:"map-drawer edit-feature-drawer",onClose:()=>{n&&p&&g?i.A.confirm({maskClosable:!1,title:t("EditFeatureDrawer.closeDrawerWarnTitle"),content:t("EditFeatureDrawer.closeDrawerWarnContent"),okType:"danger",onOk:A}):A()},open:d,title:c},e),!n&&a().createElement(le.A,{message:t("EditFeatureDrawer.noLayerFoundError"),type:"error",showIcon:!0}),l&&a().createElement(le.A,{message:t("EditFeatureDrawer.isFeatureLockedErrorMsg"),type:"error",showIcon:!0}),n&&m&&!p&&a().createElement(kn,{layer:n,onLockSuccess:()=>{s(!1)},onLockError:()=>{s(!0)},onCreate:()=>{s(!1)}}),n&&p&&a().createElement(wn,{feature:p,layer:n}))},Dn=n(52741),On=n(96860),In=n.n(On),Mn=n(9728),xn=n.n(Mn),Un=n(5180),Rn=n(7299),jn=n.n(Rn),Bn=n(39803),_n={};_n.styleTagTransform=G(),_n.setAttributes=_(),_n.insert=j().bind(null,"head"),_n.domAPI=U(),_n.insertStyleElement=V();M()(Bn.A,_n),Bn.A&&Bn.A.locals&&Bn.A.locals;function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zn.apply(null,arguments)}var Vn=({...e})=>{const t=X(),{t:n}=(0,E.useTranslation)(),o=D((e=>e.legal)),i=C()(),l=(e,n)=>{t.forEach((t=>{if((r=t.integration)&&"footer"===r.placement&&t.integration?.placementOrientation===e){const{key:e,wrappedComponent:r}=t;n.splice(t.integration?.insertionIndex||0,0,a().createElement(r,{key:e}))}var r}))};if((0,r.useEffect)((()=>{if(!i)return;i.getControls().getArray().find((e=>e instanceof xn()))||i.addControl(new(xn())({target:"scale-line-container"}))}),[i]),(0,r.useEffect)((()=>{if(!i)return;i.getControls().getArray().find((e=>e instanceof In()))||i.addControl(new(In())({coordinateFormat:(0,Un.createStringXY)(2),projection:i.getView().getProjection(),target:"mouse-position"}))}),[i]),!i)return a().createElement(a().Fragment,null);const s=()=>{window.open(o.contact,"_blank")},c=()=>{window.open(o.imprint,"_blank")},u=()=>{window.open(o.privacy,"_blank")};return a().createElement("div",zn({className:"footer"},e),a().createElement("div",{className:"item-container left-items"},(()=>{const e=[a().createElement("div",{key:"scale-line-container",id:"scale-line-container","aria-label":"scale-line"}),a().createElement(Dn.A,{key:"scale-line-divider",type:"vertical"}),a().createElement("div",{key:"scale-combo-container",className:"scale-combo","aria-label":"scale-combo"},n("Footer.scale"),": ",a().createElement(jn(),{"aria-label":"scalecombo-dropdown",map:i}),a().createElement(Dn.A,{type:"vertical"})),a().createElement("div",{key:"reference-system-container",className:"reference-system","aria-label":"reference-system"},n("Footer.refSystem"),": ",i.getView().getProjection().getCode(),a().createElement(Dn.A,{type:"vertical"})),a().createElement("div",{key:"mouse-position-container",className:"mouse-position-wrapper"},n("Footer.mousePosition"),": ",a().createElement("div",{id:"mouse-position",className:"mouse-position","aria-label":"mouse-position"}))];return l("left",e),e})()),a().createElement("div",{className:"item-container right-items"},(()=>{const e=[a().createElement(Ke.A,{key:"open-contact",onClick:s,type:"link"},n("Footer.contact")),a().createElement(Ke.A,{key:"open-imprint",onClick:c,type:"link"},n("Footer.imprint")),a().createElement(Ke.A,{key:"open-privacy",onClick:u,type:"link"},n("Footer.privacypolicy"))];return t.length>0&&l("right",e),e})()))};const $n="documentationbutton";var Gn=({className:e})=>{const t=e?`${$n} ${e}`:$n;return a().createElement(Ht(),{onClick:()=>window.open("/gis-docs","_blank"),className:t,icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.APe})})},Wn=n(87804),Kn=n(53107),Hn=n.n(Kn);function Jn(){return Jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jn.apply(null,arguments)}var Zn=({...e})=>{const t=C()(),{t:n}=(0,E.useTranslation)(),[o,i]=(0,r.useState)();return(0,r.useEffect)((()=>{const e=t?.getView().getProjection(),n=t?.getView()?.get("extent");if(n){const t=(0,Wn.transformExtent)(n,e,"EPSG:4326");i(t.toString())}}),[t]),t?a().createElement(Hn(),Jn({countryCodes:"",allowClear:!0,nominatimBaseUrl:"https://nominatim.terrestris.de/search.php?",placeholder:n("Nominatim.placeholder"),viewBox:o||""},e)):a().createElement(a().Fragment,null)},Yn=n(78602),qn=n(20736),Qn=n(36962),Xn=n(16951),er=n(11721),tr=n(94394),nr=n.n(tr),rr=n(37516),ar=n.n(rr),or=n(91468),ir=n.n(or),lr=n(59952),sr=n.n(lr),cr=n(85292),ur=n.n(cr),dr=n(9910),mr=n.n(dr),pr=n(81851),gr=n.n(pr),fr=n(46307),yr=n.n(fr),hr=n(8285),Er={};Er.styleTagTransform=G(),Er.setAttributes=_(),Er.insert=j().bind(null,"head"),Er.domAPI=U(),Er.insertStyleElement=V();M()(hr.A,Er),hr.A&&hr.A.locals&&hr.A.locals;const br=e=>e.map((e=>`(${e.trim()}^4 OR *${e.trim()}*^2 OR ${e.trim()}~1)`)).join(" AND ");var Ar=({searchValue:e,map:t})=>{let n=e.trim().replaceAll(/[()\\\-_./\/]/g," ").split(" ").map((e=>e.trim())).filter((e=>""!==e));const r=[],a=t.getAllLayers().filter((e=>e.get("searchable"))),o=nr()(a,(e=>e.get("searchConfig")?.attributes));return Object.entries(o).forEach((([e,t])=>{const a=`(${t.filter((e=>(0,pe.isWmsLayer)(e))).map((e=>e.getSource()?.getParams()?.LAYERS)).map((e=>`featureType:"${e}"`)).join(" OR ")}) AND (${br(n)})`;r.push({query:a,fieldList:"undefined"!==e?e.split(",").join(" "):void 0})})),r};const wr=e=>"fulfilled"===e.status;var vr=({useNominatim:e})=>{const t=Ae(),n=C()(),{t:o}=(0,E.useTranslation)(),i=(0,r.useRef)(null),[s,c]=(0,r.useState)(e),[u,m]=(0,r.useState)(!0),[p,g]=(0,r.useState)(ce().search?.defaultUseViewBox??!0),[f,y]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[A,w]=(0,r.useState)(!1),[v,T]=(0,r.useState)(!1),[L,k]=(0,r.useState)([]),[P,F]=(0,r.useState)({}),[N,D]=(0,r.useState)([]),[O,I]=(0,r.useState)([]);(0,r.useEffect)((()=>(window.addEventListener("mousedown",M),()=>{window.removeEventListener("mousedown",M)})),[]);const M=e=>{let t=e.target;for(;t;)t=t.parentNode;i.current&&i.current.contains(e.target)||w(!1)},x=(0,r.useMemo)((()=>({items:[{label:a().createElement(Ne.A,{checked:p,onChange:e=>g(e.target.checked)},o("MultiSearch.searchInViewBox")),key:"viewbox"},{label:a().createElement(Ne.A,{checked:u,onChange:e=>m(e.target.checked)},o("MultiSearch.searchData")),key:"data"},{label:a().createElement(Ne.A,{checked:s,onChange:e=>c(e.target.checked)},o("MultiSearch.searchNominatim")),key:"nominatim"}]})),[u,s,p,o]),U=(0,r.useCallback)((async()=>{const e=ce().search?.minChars??3;if(f.length<e)return void j();if(!u&&!s)return;let r;b(!0),D([]),k([]),F({});let a=null;if(p){const e=n?.getView().getProjection(),t=n?.getView()?.calculateExtent();t&&(a=(0,Wn.transformExtent)(t,e,"EPSG:4326"))}if(u&&n)try{const e=ce().search?.solrBasePath??"/search/query",r=new URL(`${window.location.origin}${e}`),o=Ar({searchValue:f,map:n}).map((e=>{const n={q:e.query,rows:ce().search?.solrQueryConfig?.rowsPerQuery??100,defType:ce().search?.solrQueryConfig?.queryParser??"edismax"};if(e.fieldList?n.qf=e.fieldList:n.qf=ce().search?.coreName??"search",p&&a){const e=`geometry:[${a[1]},${a[0]} TO ${a[3]},${a[2]}]`;n.fq=e}ce().search?.useSolrHighlighting&&(n.hl=!0,n["hl.fl"]="*",n["hl.tag.pre"]=ce().search?.solrQueryConfig?.tagPre??"<b>",n["hl.tag.post"]=ce().search?.solrQueryConfig?.tagPost??"</b>",n["hl.requireFieldMatch"]=ce().search?.solrQueryConfig?.requireFieldMatch??!0);return fetch(r.href,{method:"POST",headers:{"Content-Type":"application/json",...(0,Ee.getBearerTokenHeader)(t?.getKeycloak())},body:JSON.stringify(n)})})),i=(await Promise.allSettled(o.map((async e=>(await e).json())))).filter(wr),l=i.flatMap((e=>e.value?.response?.docs)).filter((e=>e)),s=Object.assign({},...i.map((e=>e.value?.highlighting)));k(l),F(s)}catch(e){k([]),F({}),ze().error("Error while fetching the layer search results: ",e)}finally{s||b(!1)}if(s)try{const e=new URL("https://nominatim.terrestris.de/search");e.searchParams.set("q",f),e.searchParams.set("format","json"),e.searchParams.set("polygon_geojson","1"),p&&a&&(e.searchParams.set("viewbox",a.toString()),e.searchParams.set("bounded","1")),r=await fetch(e.href),D(await r.json())}catch(e){D([]),ze().error("Error while fetching the nominatim results: ",e)}finally{b(!1)}}),[f,u,s,p,n,t]),R=(0,r.useCallback)(((e,t)=>{if(!n)return"";const r=S().getLayerByNameParam(n,e.featureType[0]),a=r?.get("searchConfig"),o=["category","id","featureType","geometry","search"];let i="";if(a?.displayTemplate)return l=a.displayTemplate,s=e,l.replace(/{\s*(\w+?)\s*}/g,((e,t)=>s[t]?.toString()||""));var l,s;if(t){const e=Object.keys(t).filter((e=>!o.includes(e)));if(e.length>0){return`${t[e[0]]} [${e[0]}]`}}return Object.keys(e).filter((e=>!o.includes(e))).forEach((t=>{let n=e[t]?.toString();!i&&n.toLowerCase().indexOf(f?.toLowerCase())>-1&&(i=`${n} [${t}]`)})),i||(i=e.id),i}),[f,n]);(0,r.useEffect)((()=>{if(!n)return;let e=[];if(N.length>0){const t=new(Bt()),r=N.filter((e=>!Re()(e?.geojson))).map((e=>{const r=t.readFeature(e.geojson,{dataProjection:"EPSG:4326",featureProjection:n.getView().getProjection()});return r.set("title",e.display_name),r})),a={title:o("MultiSearch.nominatimTitle"),features:r};e.push(a)}if(L?.length>0){const t=new(ar());let r;if(ce().search?.groupByCategory)r=nr()(L,(e=>e?.category[0]));else{const e=n.getAllLayers().filter((e=>e.get("searchable"))),t=L.map((t=>{const n=e.filter((e=>(0,pe.isWmsLayer)(e))).find((e=>e.getSource()?.getParams()?.LAYERS===t.featureType[0]))?.get("name");return{layerTitle:n,...t}}));r=nr()(t,(e=>e?.layerTitle))}Object.keys(r).forEach((a=>{const o={title:a,features:r[a].map((e=>{if(!e?.geometry?.[0])return;const r=e.id,a=t.readGeometry(e.geometry[0],{dataProjection:"EPSG:4326",featureProjection:n.getView().getProjection()}),o=new(de())({geometry:a});let i;if(o.set("title",R(e,P?.[r])),e.featureType?.[0]){const t=S().getLayerByNameParam(n,e.featureType?.[0]);t&&(o.set("layer",t),i=t.get("name"))}else i=r.substring(0,r.lastIndexOf("_"));return o.set("ftName",i),o})).filter((e=>e))};e.push(o)}))}w(!0),I(e)}),[L,P,N,n,R,o]),(0,r.useEffect)((()=>{const e=ce().search?.delay??1e3,t=setTimeout((()=>{U()}),e);return()=>clearTimeout(t)}),[U]);const j=()=>{k([]),D([])},B=e=>{const t=e.feature.get("layer");if(t?.get("editable"))return[a().createElement(a().Fragment,null)]},_=(0,r.useMemo)((()=>new(mr())({stroke:new(ur())({color:"rgb(255,0,0)",width:2}),fill:new(sr())({color:"rgba(255,255,255, 0.5)"}),image:new(ir())({radius:10,fill:new(sr())({color:"rgba(255,255,255, 0.5)"}),stroke:new(ur())({color:"rgb(255,0,0)",width:3})})})),[]);return n?a().createElement("div",{ref:i},a().createElement(l.A,{value:f,disabled:!u&&!s,onChange:e=>{b(""!==e.target.value),y(e.target.value)},allowClear:!0,addonAfter:a().createElement(er.A,{placement:"bottomRight",menu:x,trigger:["click"],onOpenChange:T,open:v},a().createElement(Yn.A,null)),onFocus:()=>w(!0),placeholder:o("MultiSearch.searchPlaceholder"),prefix:a().createElement(qn.A,null),suffix:h?a().createElement(Qn.A,null):null}),(()=>{if(f.length<2||!A||h||!L)return null;const e=N.length+L.length;if(0===e)return a().createElement("div",{className:"no-search-result-div"},a().createElement(Xn.A,{image:Xn.A.PRESENTED_IMAGE_SIMPLE}));const t=e=>{const t=e?.feature?.get("layer");t&&n&&!t.getVisible()&&(t.setVisible(!0),gr().setParentsVisible(n,n.getLayerGroup().getLayers(),(0,d.getUid)(t)))},r=e=>{const t=e.feature.getGeometry()?.getExtent(),r=document.getElementsByClassName("tool-menu");let a=[0,0,0,r[0]?.clientWidth??0];t&&n?.getView().fit(t,{size:n.getSize(),padding:a})};return a().createElement(yr(),{searchResults:O,numTotal:e,accordion:!0,searchTerms:f.split(" "),actionsCreator:B,layerStyle:_,onClick:e=>{w(!1),r(e),ce().search?.activateLayerOnClick&&t(e)}})})()):a().createElement(a().Fragment,null)},Tr=n(46948),Sr={};Sr.styleTagTransform=G(),Sr.setAttributes=_(),Sr.insert=j().bind(null,"head"),Sr.domAPI=U(),Sr.insertStyleElement=V();M()(Tr.A,Sr),Tr.A&&Tr.A.locals&&Tr.A.locals;var Lr=()=>{const e=D((e=>e.searchEngines.includes("nominatim"))),t=D((e=>e.searchEngines.includes("solr")));return e||t?a().createElement("div",{className:"search","aria-label":"search-field"},t?a().createElement(vr,{"aria-label":"search",useNominatim:e}):a().createElement(Zn,{"aria-label":"search"})):(ze().warn("Neither nominatim nor solr search is configured."),a().createElement(a().Fragment,null))},kr=n(29695),Cr=n.n(kr),Pr=n(83386),Fr=n.n(Pr);const Nr=({email:e="",size:t=80,rating:n="g",defaultImage:r="identicon",force:a=!1})=>{const o=e.toLowerCase();let i=`https://www.gravatar.com/avatar/${Fr()(o)}?s=${t}&r=${n}&d=${r}`;return a&&(i=`${i}&f=y`),i};var Dr=n(47724);var Or=n(13918),Ir={};Ir.styleTagTransform=G(),Ir.setAttributes=_(),Ir.insert=j().bind(null,"head"),Ir.domAPI=U(),Ir.insertStyleElement=V();M()(Or.A,Ir),Or.A&&Or.A.locals&&Or.A.locals;function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mr.apply(null,arguments)}var xr=({opener:e,...t})=>{const{t:n}=(0,E.useTranslation)(),o=D((e=>e.appInfo)),l=D((e=>e.logoPath)),s=D((e=>e.description)),[c,u]=(0,r.useState)(!1),d=()=>{u(!c)};let m;return m=e?a().cloneElement(e,{onClick:d}):a().createElement("button",{onClick:d},"Open"),a().createElement(a().Fragment,null,m,a().createElement(i.A,Mr({className:"application-info",title:n("ApplicationInfo.title"),centered:!0,open:c,onOk:d,onCancel:d,footer:null},t),a().createElement("img",{className:"logo",src:l}),a().createElement("div",{className:"description"},s),a().createElement(Dr.A,{title:n("ApplicationInfo.clientVersionTitle"),value:"8.11.0"}),o.version&&o.buildTime&&a().createElement(Dr.A,{title:n("ApplicationInfo.backendVersionTitle"),value:`${o.version} (${o.buildTime})`})))},Ur=n(84760),Rr={};Rr.styleTagTransform=G(),Rr.setAttributes=_(),Rr.insert=j().bind(null,"head"),Rr.domAPI=U(),Rr.insertStyleElement=V();M()(Ur.A,Rr),Ur.A&&Ur.A.locals&&Ur.A.locals;var jr=()=>{const{t:e}=(0,E.useTranslation)(),t=Ae(),n=t?.getKeycloak(),r=D((e=>e.user)),o=e=>{switch(e.key){case"settings":n&&n.accountManagement();break;case"info":default:break;case"login":n&&n.login();break;case"logout":n&&n.logout({redirectUri:n.createLoginUrl()})}};return Rt()(r)?a().createElement(a().Fragment,null):a().createElement(Cr(),{size:"small",imageSrc:Nr({email:r.providerDetails?.email||"",size:28}),userName:a().createElement(qe.FontAwesomeIcon,{icon:Ye.tdl}),userMenu:(()=>{const t={key:"login",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.Kh_}),label:e("UserMenu.loginMenuTitle")},i={key:"username",label:a().createElement("div",{className:"user-name","aria-label":"user-name"},a().createElement("span",null,r.providerDetails?.email))},l={type:"divider"},s={key:"settings",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.McB}),label:e("UserMenu.settingsMenuTitle")},c={key:"info",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.ktq}),label:a().createElement(xr,{opener:a().createElement("span",{className:"info-opener","aria-label":"info-opener"},e("UserMenu.infoMenuTitle"))})},u=(qe.FontAwesomeIcon,Ye.APe,Ke.A,e("UserMenu.helpMenuTitle"),{key:"logout",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.dbg}),label:a().createElement("div",{"aria-label":"login"},e("UserMenu.logoutMenuTitle"))}),d=[];if(Rt()(r))ce().keycloak?.enabled&&d.push(t),d.push(c);else{const e=n?.tokenParsed?.resource_access?.account?.roles,t=Array.isArray(e)&&e.indexOf("manage-account")>-1?[i,l,s,c,l,u]:[i,l,c,l,u];d.push(...t)}return{items:d,onClick:o}})()})},Br=n(40581),_r={};_r.styleTagTransform=G(),_r.setAttributes=_(),_r.insert=j().bind(null,"head"),_r.domAPI=U(),_r.insertStyleElement=V();M()(Br.A,_r),Br.A&&Br.A.locals&&Br.A.locals;function zr(){return zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zr.apply(null,arguments)}var Vr=({...e})=>{const t=N((e=>e.title)),n=N((e=>e.logoPath)),r=X(),o=(e,t)=>{r.forEach((n=>{if((r=n.integration)&&"header"===r.placement&&n.integration?.placementOrientation===e){const{key:e,wrappedComponent:r}=n;t.splice(n.integration?.insertionIndex||0,0,a().createElement(r,{key:e}))}var r}))},i=()=>{if(ce().documentationButtonVisible)return a().createElement("div",{key:"documentation-button","aria-label":"documentation-button"},a().createElement(Gn,{key:"documentation-button",type:"link"}))};return a().createElement("div",zr({className:"header"},e),a().createElement("div",{className:"item-container left-items"},(()=>{const e=[a().createElement("img",{key:"logo",className:"logo","aria-label":"logo",src:n}),a().createElement("div",{key:"title",className:"title","aria-label":"title"},t)];return o("left",e),e})()),a().createElement("div",{className:"item-container center-items"},(()=>{const e=[a().createElement(Lr,{key:"search","aria-label":"search-input",name:"search-input",className:"search-input"})];return o("center",e),e})()),a().createElement("div",{className:"item-container right-items"},(()=>{const e=[i(),a().createElement("div",{key:"user-menu","aria-label":"user-menu"},a().createElement(jr,{key:"user-menu"}))].filter((e=>void 0!==e));return o("right",e),e})()))},$r=n(65710),Gr=n(4548),Wr=n(43974),Kr=n.n(Wr),Hr=n(18992),Jr=n(428),Zr=n(50590),Yr={};Yr.styleTagTransform=G(),Yr.setAttributes=_(),Yr.insert=j().bind(null,"head"),Yr.domAPI=U(),Yr.insertStyleElement=V();M()(Zr.A,Yr),Zr.A&&Zr.A.locals&&Zr.A.locals;function qr(){return qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qr.apply(null,arguments)}var Qr=({layer:e,...t})=>{const[n,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),u=Ae(),{t:d}=(0,E.useTranslation)(),m=(0,r.useCallback)((async()=>{try{if(o(!0),l(""),!e||!e.get("shogunId"))throw new Error("No layer provided or the layer has no shogunId set");const t=await(u?.layer().findOne(e.get("shogunId")));c(t)}catch(e){ze().error(e),l(d("LayerConfiguration.errorMessage"))}finally{o(!1)}}),[d,u,e]);return(0,r.useEffect)((()=>{m()}),[m]),i?a().createElement(le.A,{type:"error",closable:!0,message:i}):a().createElement(Jr.A,{spinning:n},a().createElement("pre",qr({className:"layer-configuration"},t),a().createElement("code",null,JSON.stringify(s,null,"  "))))},Xr=n(75742),ea={};ea.styleTagTransform=G(),ea.setAttributes=_(),ea.insert=j().bind(null,"head"),ea.domAPI=U(),ea.insertStyleElement=V();M()(Xr.A,ea),Xr.A&&Xr.A.locals&&Xr.A.locals;function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ta.apply(null,arguments)}var na=({layer:e,...t})=>{const[n,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),u=Ae(),{t:d}=(0,E.useTranslation)(),m=(0,r.useCallback)((async()=>{if(e&&(0,pe.isWmsLayer)(e))try{o(!0),c(""),l(void 0);const t=await v().getWmsCapabilitiesByLayer(e,{headers:{...e.get("useBearerToken")?{...(0,Ee.getBearerTokenHeader)(u?.getKeycloak())}:void 0}});l(t)}catch(e){ze().error(e),c(d("LayerDetails.errorMessage"))}finally{o(!1)}}),[d,u,e]);(0,r.useEffect)((()=>{m()}),[m]);const p=()=>{if(e&&(0,pe.isWmsLayer)(e))return e.getSource()?.getParams().LAYERS},g=()=>{if(!e||!(0,pe.isWmsLayer)(e))return;let t;if(e.getSource()instanceof fe()&&(t=e.getSource().getUrl()),e.getSource()instanceof he()){const n=e.getSource().getUrls();t=n?n[0]:void 0}return t?A().createValidGetCapabilitiesRequest(t,"WMS","1.3.0"):void 0},f=()=>{const e=i?.Capability?.Layer?.Layer,t=p();let n;return Array.isArray(e)?(n=e?.find((e=>e?.Name===t)),n):e},y=()=>{const e=f();if(e&&e.EX_GeographicBoundingBox)return[e.EX_GeographicBoundingBox.westBoundLongitude,e.EX_GeographicBoundingBox.southBoundLatitude,e.EX_GeographicBoundingBox.eastBoundLongitude,e.EX_GeographicBoundingBox.northBoundLatitude].join(", ")},h=()=>{const e=f();if(e)return e.MinScaleDenominator},b=()=>{const e=f();if(e)return e.MaxScaleDenominator},w=()=>{const e=f();if(e)return e.Abstract},T=()=>i?.Service?.Abstract,S=()=>i?.Service?.ContactInformation?.ContactElectronicMailAddress,L=()=>{const e=f();if(e)return e.Title},k=()=>i?.Service?.AccessConstraints;return s?a().createElement(le.A,{type:"error",closable:!0,message:s}):a().createElement(Jr.A,{spinning:n},a().createElement(Fe.A,ta({className:"layer-details",layout:"horizontal",size:"small",labelAlign:"left",labelWrap:!0,labelCol:{flex:"150px"}},t),a().createElement(Fe.A.Item,{name:"layerName",label:d("LayerDetails.layerNameLabel")},a().createElement("span",null,p()?p():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"layerTitle",label:d("LayerDetails.layerTitleLabel")},a().createElement("span",null,L()?L():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"service-abstract",label:d("LayerDetails.serviceAbstractLabel")},a().createElement("span",null,T()?T():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"abstract",label:d("LayerDetails.abstractLabel")},a().createElement("span",null,w()?w():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"accessConstraints",label:d("LayerDetails.accessConstraintsLabel")},a().createElement("span",null,k()?k():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"CapabilitiesUrl",label:d("LayerDetails.capabilitiesUrlLabel")},a().createElement("a",{href:g()},g())),a().createElement(Fe.A.Item,{name:"contact",label:d("LayerDetails.contactLabel")},S()?a().createElement("a",{href:`mailto:${S()}`},S()):a().createElement("span",null,d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"minScale",label:d("LayerDetails.minScaleLabel")},a().createElement("span",null,h()?h():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"maxScale",label:d("LayerDetails.maxScaleLabel")},a().createElement("span",null,b()?b():d("LayerDetails.noDataPlaceholder"))),a().createElement(Fe.A.Item,{name:"bbox",label:d("LayerDetails.bboxLabel")},a().createElement("span",null,y()?y():d("LayerDetails.noDataPlaceholder")))))},ra=n(57378),aa={};aa.styleTagTransform=G(),aa.setAttributes=_(),aa.insert=j().bind(null,"head"),aa.domAPI=U(),aa.insertStyleElement=V();M()(ra.A,aa),ra.A&&ra.A.locals&&ra.A.locals;function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oa.apply(null,arguments)}var ia=({...e})=>{const[t,n]=(0,r.useState)(),[o,l]=(0,r.useState)(!1),s=D((e=>e.layerDetailsModal.visible)),c=D((e=>e.layerDetailsModal.layerId)),u=F(),d=(0,k.useMap)(),{t:m}=(0,E.useTranslation)();(0,r.useEffect)((()=>{if(!d)return;if(!c)return void n(void 0);const e=S().getLayerByOlUid(d,c);e instanceof Kr()&&n(e)}),[d,c]);return a().createElement(i.A,oa({className:"layer-details-modal",title:a().createElement("div",{className:"title-group"},a().createElement("span",null,m("LayerDetailsModal.title",{layerName:t?.get("name")})),t?.get("shogunId")&&a().createElement(Gr.A,{title:m(o?"LayerDetailsModal.internalConfigurationButtonTooltipPressed":"LayerDetailsModal.internalConfigurationButtonTooltip")},a().createElement(Ke.A,{type:"link",className:o?"pressed":"",icon:a().createElement($r.A,null),onClick:()=>{l(!o)}}))),open:s,onCancel:()=>{u((0,Hr.jD)()),u((0,Hr.wT)(void 0))},width:800,footer:!1},e),a().createElement(na,{layer:t,hidden:o}),t?.get("shogunId")&&a().createElement(Qr,{layer:t,hidden:!o}))},la=n(23907),sa={};sa.styleTagTransform=G(),sa.setAttributes=_(),sa.insert=j().bind(null,"head"),sa.domAPI=U(),sa.insertStyleElement=V();M()(la.A,sa),la.A&&la.A.locals&&la.A.locals;var ca=n(50019),ua=n(93863),da=n.n(ua),ma=n(33591),pa=n.n(ma);function ga(){return ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ga.apply(null,arguments)}var fa=({...e})=>{const[t,n]=(0,r.useState)({name:"Default Style",rules:[{name:"Area",symbolizers:[{kind:"Fill",color:"#00b72b",outlineOpacity:.8,opacity:.5,fillOpacity:.8,outlineWidth:2,outlineColor:"#00b72b"}]},{name:"Line",symbolizers:[{kind:"Line",color:"#00b72b",width:2,opacity:.8}]},{name:"Point",symbolizers:[{kind:"Mark",wellKnownName:"circle",color:"#00b72b",strokeColor:"#00b72b",strokeOpacity:.8,opacity:.5,radius:7}],filter:["==","label","undefined"]},{name:"Text",symbolizers:[{kind:"Text",label:"{{label}}",size:12,font:["sans-serif"],opacity:.8,color:"#00b72b",offset:[5,5],haloColor:"#00b72b",haloWidth:1}],filter:["!=","label","undefined"]}]}),a=(0,k.useMap)();return(0,r.useEffect)((()=>{if(!t||!a)return;const e=new(pa());let n=S().getLayerByName(a,"react-geo_digitize");(async()=>{let r,a,o,i;for(const n of t.rules){const t={name:"",rules:[n]},l=await e.writeStyle(t);if(!l.output)return;"Fill"===n.symbolizers[0].kind&&(r=l.output),"Text"===n.symbolizers[0].kind&&(i=l.output),"Line"===n.symbolizers[0].kind&&(a=l.output),"Mark"===n.symbolizers[0].kind&&(o=l.output)}n.setStyle(((e,t)=>{const n=e.getGeometry()?.getType();if(n)return["MultiPolygon","Polygon","Circle"].includes(n)?"function"==typeof r?r(e,t):r:["MultiLineString","LineString"].includes(n)?"function"==typeof a?a(e,t):a:["MultiPoint","Point"].includes(n)?e.get("label")?"function"==typeof i?i(e,t):i:"function"==typeof o?o(e,t):o:void 0}))})()}),[t,a]),r.createElement(da(),ga({style:t,onStyleChange:n},e))};function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ya.apply(null,arguments)}var ha=({...e})=>{const t=F(),n=D((e=>e.stylingDrawerVisibility)),{t:r}=(0,E.useTranslation)();return a().createElement(Pt.A,ya({title:r("StylingDrawer.title"),placement:"right",onClose:()=>{t((0,ca.en)(!1))},open:n,className:"color-pick-drawer",maskClosable:!1,mask:!1},e),a().createElement(fa,null))},Ea=n(77839),ba=n(82306),Aa=n.n(ba),wa=n(72320),va=n(6107),Ta=n(25555),Sa=n(55860),La=n(67179),ka={};ka.styleTagTransform=G(),ka.setAttributes=_(),ka.insert=j().bind(null,"head"),ka.domAPI=U(),ka.insertStyleElement=V();M()(La.A,ka),La.A&&La.A.locals&&La.A.locals;var Ca=n(6047);const{Option:Pa}=s.A;var Fa=()=>{const e=Object.keys(Ca.A.services.resourceStore.data);return a().createElement("div",{className:"language-select","aria-label":"language-selector"},a().createElement(s.A,{defaultValue:Ca.A.language||"en",onChange:e=>{Ca.A.changeLanguage(e)}},e.map((e=>a().createElement(Pa,{key:e,value:e},e.toUpperCase())))))},Na=n(46556),Da=n(65619),Oa=n(30513),Ia=n(79478),Ma=n(17965),xa=n.n(Ma),Ua=n(41100),Ra=n(69837),ja={};ja.styleTagTransform=G(),ja.setAttributes=_(),ja.insert=j().bind(null,"head"),ja.domAPI=U(),ja.insertStyleElement=V();M()(Ra.A,ja),Ra.A&&Ra.A.locals&&Ra.A.locals;var Ba=()=>{const e=(0,k.useMap)(),t=(0,r.useMemo)((()=>["layerConfig","isExternalLayer","isUploadedLayer","groupName"]),[]),{t:n}=(0,E.useTranslation)(),o=e?gr().getLink(e,";",(e=>e.get("name")),(e=>(e instanceof h()||e instanceof f())&&e.getVisible()),t):"",[i,s]=(0,r.useState)(o),c=`Hey,\r\ncheck out the layer-composition I created:\r\n\r\n${i}`;return(0,r.useEffect)((()=>{if(!e)return;let n=[];const r=e=>e.get("name"),a=e=>(e instanceof h()||e instanceof f())&&e.getVisible(),o=()=>{s(gr().getLink(e,";",r,a,t))},i=()=>{e.getAllLayers().filter((e=>e.get("isExternalLayer")||e.get("isUploadedLayer"))).forEach((e=>{const t=e.get("layerConfig");t&&(t.clientConfig?t.clientConfig.opacity=e.getOpacity():t.clientConfig={opacity:e.getOpacity()},e.set("layerConfig",t))})),o()},l=e=>{const t=e.getLayers().getArray();for(let e=0;e<t.length;e++){const r=t[e];if(r instanceof p())l(r);else{let e=r.on("change:visible",o),t=r.on("change:opacity",i);n.push(e,t)}}},c=e.getView().on("change:center",o),u=e.getView().on("change:resolution",o);let d=e.getLayerGroup();return l(d),i(),()=>{(0,Ua.unByKey)(c),(0,Ua.unByKey)(u),(0,Ua.unByKey)(n)}}),[t,e,n]),a().createElement("div",{className:"permalink-wrapper"},a().createElement("div",{className:"icons"},a().createElement(Gr.A,{title:n("Permalink.whatsAppTooltip")},a().createElement(Na.A,{onClick:function(){const e=new URL("https://wa.me");e.searchParams.set("text",c),window.open(e)}})),a().createElement(Gr.A,{title:n("Permalink.mailTooltip")},a().createElement(Da.A,{onClick:function(){const e=new URL("mailto:");e.searchParams.set("subject","SHOGun Web-GIS"),e.searchParams.set("body",c),window.open(e.toString().replace(/\+/g,"%20"),"_self")}}))),a().createElement("div",{className:"link","aria-label":"permalink-url"},a().createElement(l.A,{value:i,readOnly:!0}),a().createElement(Gr.A,{title:n("Permalink.copyTooltip")},a().createElement(Oa.A,{onClick:function(){xa()(i)?Ia.Ay.info(n("Permalink.copiedToClipboard")):Ia.Ay.info(n("Permalink.copyToClipboardFailed"))}}))))},_a=n(76542),za=n(96752),Va=n.n(za),$a=n(4998),Ga=n.n($a),Wa=n(33094),Ka=n.n(Wa),Ha=n(82968),Ja=n(24341),Za=n(54450),Ya=n.n(Za),qa=n(48594),Qa=n.n(qa);class Xa extends(Qa()){serialize(e,t){const n=super.serialize(e,t);return n.baseURL.startsWith("/geoserver/ows")&&(n.baseURL=`http://shogun-geoserver:8080${n.baseURL}`),n.baseURL.startsWith("/geoserver/SHOGUN")&&(n.baseURL=`http://shogun-geoserver:8080${n.baseURL}`),n}}var eo=Xa;var to=class extends eo{serialize(e,t){const n={tileSize:[512,512],...t},r=e.getSource();if(!r||!this.validateSource(r))return;return{...super.serialize(e,n),type:Ya().TYPE_WMS,...t}}};function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},no.apply(null,arguments)}var ro=({value:e,id:t,placeholder:n,maxLength:o,...i})=>{const[s,c]=(0,r.useState)(e),u=F();return(0,r.useEffect)((()=>{Re()(t)||u((0,Ja.ik)({[t]:s}))}),[s,t,u]),(0,r.useEffect)((()=>{c(e)}),[e]),a().createElement(l.A,no({id:t,value:s,onChange:e=>c(e.target.value),placeholder:n,maxLength:o,showCount:!!(o&&o>1)},i))};function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ao.apply(null,arguments)}var oo=({printManager:e,onValueChange:t,placeholder:n="Bitte wählen Sie eine Vorlage aus",value:o,...i})=>{const[l,c]=(0,r.useState)(o),u=(0,r.useRef)(l);return(0,r.useEffect)((()=>{u.current=o}),[o]),(0,r.useEffect)((()=>{e&&(e.setLayout(l),u.current!==l&&t())}),[e,l,t,o]),(0,r.useEffect)((()=>{c(o)}),[o]),a().createElement(s.A,ao({placeholder:n,value:l,onChange:c},i),e?.getLayouts().map((e=>a().createElement(s.A.Option,{key:e.name,value:e.name},e.name))))};function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},io.apply(null,arguments)}var lo=({printManager:e,placeholder:t,value:n,outputFormats:o,...i})=>{const[l,c]=(0,r.useState)(n);return(0,r.useEffect)((()=>{e&&e.setOutputFormat(l)}),[e,l]),(0,r.useEffect)((()=>{c(n)}),[n]),a().createElement(s.A,io({placeholder:t,value:l,onChange:c},i),o.map((e=>a().createElement(s.A.Option,{key:e,value:e},e.toLocaleUpperCase()))))};function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},so.apply(null,arguments)}var co=({printManager:e,placeholder:t,value:n,...o})=>{const[i,l]=(0,r.useState)(n);return(0,r.useEffect)((()=>{e&&e.setDpi(i)}),[e,i]),(0,r.useEffect)((()=>{l(n)}),[n]),a().createElement(s.A,so({placeholder:t,value:i,onChange:l},o),e?.getDpis().map((e=>a().createElement(s.A.Option,{key:e,value:e},`${e} DPI`))))};function uo(){return uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uo.apply(null,arguments)}var mo=({printManager:e,placeholder:t,value:n,...o})=>{const i=C()(),[l,c]=(0,r.useState)(0);return(0,r.useEffect)((()=>{e&&l&&e.setScale(l)}),[e,l]),(0,r.useEffect)((()=>{const t=()=>{const t=e.getScale();t&&c(t)},n=i?.getInteractions().getArray().find((e=>e.get("name")===_a.MapFishPrintV3Manager.TRANSFORM_INTERACTION_NAME));if(e&&n)return n.on("scaling",t),()=>{n.un("scaling",t)}}),[e,i]),(0,r.useEffect)((()=>{n&&c(n)}),[n]),a().createElement(s.A,uo({placeholder:t,value:l,onChange:c},o),e?.getScales().map((e=>a().createElement(s.A.Option,{key:e,value:e},`1 : ${e.toLocaleString()}`))))},po=n(42482);function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},go.apply(null,arguments)}n.n(po)().getLegendGraphicUrl=e=>{if(e.get("legendUrl"))return e.get("legendUrl");if(e.getSource()instanceof he()||e.getSource()instanceof fe()){const t=e.get("customPrintLegendParams"),n=e.getSource(),{LAYERS:r,VERSION:a,FORMAT:o}=n.getParams();let i=n instanceof fe()?n.getUrl():n.getUrls()[0];i.startsWith("/geoserver/ows")&&(i=`http://shogun-geoserver:8080${i}`);const l={LAYER:r.split(",")[0],VERSION:a||"1.3.0",SERVICE:"WMS",REQUEST:"GetLegendGraphic",FORMAT:o||"image/png",...t},s=Object.keys(l).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(l[e])}`)).join("&");return i.startsWith("/geoserver/SHOGUN")?(i=`http://shogun-geoserver:8080${i}/service?`,`${i}${s}`):i.endsWith("?")?`${i}${s}`:`${i}?${s}`}return""};var fo=({active:e,customPrintScales:t=[],layerBlackList:n=[],outputFormats:o=["pdf","png"],...i})=>{const[l]=Fe.A.useForm(),{t:s,i18n:c}=(0,E.useTranslation)(),u=(0,k.useMap)(),d=F(),m=c.language,g=Ae(),f=D((e=>e.print.customMapParams)),y=D((e=>e.print.customParams)),h=D((e=>e.print.printApp)),[b,A]=(0,r.useState)(null),[w,v]=(0,r.useState)(!1),[T,L]=(0,r.useState)(null),C=(0,r.useCallback)((e=>{if(!u)return;const t=e.get("name");return t&&!n.includes(t)&&e.getVisible()&&!(e instanceof p())&&S().layerInResolutionRange(e,u)}),[u,n]),P=(0,r.useCallback)((e=>{if(Re()(u))return!1;const t=e.get("name"),r=!n.includes(t),a=!e.get("hideLegendInPrint"),o=e.getVisible()&&S().layerInResolutionRange(e,u),i=!(e instanceof p());if(r&&a&&o&&i){const t=u?.getView().getResolution();return t&&e.set("customPrintLegendParams",{SCALE:S().getScaleForResolution(t,"m")}),!0}return!1}),[u,n]),N=(0,r.useCallback)((e=>u?S().getAllLayers(u).filter((t=>{const n=t.get("name");return n&&!n.includes("react-geo")&&t.getVisible()&&!(t instanceof p())&&t!==e})):[]),[u]),O=(0,r.useCallback)((e=>{const t=e.getExtentLayer();if(!t)return"";const n=N(t);let r=[];return n.filter((e=>e.getSource&&e.getSource()?.getAttributions&&e.getSource()?.getAttributions())).forEach((e=>{const t=Ha.LayerUtil.getLayerAttributionsText(e,",",!0);r.includes(t)||r.push(t)})),r.join(", ").trim()}),[N]),I=(0,r.useCallback)((async()=>{if(Re()(u))return;let e={url:ce().print?.url||"/print",map:u,customPrintScales:u?.getView()?.getResolutions()?.map((e=>{const t=u?.getView()?.getProjection()?.getUnits();if(void 0!==e){const n=S().getScaleForResolution(e,t);if(void 0!==n)return S().roundScale(n)}})).filter((e=>void 0!==e))?.reverse(),timeout:6e4,layerFilter:C,headers:{...(0,Ee.getBearerTokenHeader)(g?.getKeycloak())},transformOpts:{rotate:!1},serializers:[new(Va()),new(Ga()),new(Ka()),new eo,new to],legendFilter:P};t.length>0&&(e={...e,customPrintScales:t.toReversed()});const n=new _a.MapFishPrintV3Manager(e);try{await n.init();const e=n.getPrintApps();h?await n.setPrintApp(h):e&&m&&e.includes(m)&&await n.setPrintApp(m),n.setOutputFormat(n.getOutputFormats()[0]),n.setDpi(n.getDpis()[0]),n.setLayout(n.getLayouts()[0]?.name),A(n)}catch(e){L((()=>s("PrintForm.managerErrorMessage"))),ze().error("Could not initialize print manager: ",e)}}),[u,C,g,P,t,h,m,s]);(0,r.useEffect)((()=>{b&&d((0,Ja.ik)({attributions:O(b)}))}),[d,O,b]),(0,r.useEffect)((()=>{e?b||(l.resetFields(),I()):(b?.shutdownManager(),A(null))}),[b,e,I,l]),(0,r.useEffect)((()=>{b&&(y&&b.setCustomParams(y),f&&b.setCustomMapParams(f))}),[b,y,f]);return a().createElement("div",{className:"print","aria-label":"print-form"},T&&a().createElement(le.A,{className:"print-alert",message:T,type:"error",closable:!0,showIcon:!0,onClose:()=>{L(null)}}),b?.isInitiated()&&a().createElement(a().Fragment,null,a().createElement(Fe.A,go({form:l,className:"print-form",labelAlign:"left",labelCol:{flex:"90px"}},i),a().createElement(Fe.A.Item,{"aria-label":"print-title",name:"title",label:s("PrintForm.title"),initialValue:s("PrintForm.initialTitle")},a().createElement(ro,{"aria-label":"print-title-input",maxLength:50,placeholder:s("PrintForm.titlePlaceholder")})),a().createElement(Fe.A.Item,{"aria-label":"print-comment",name:"comment",label:s("PrintForm.comment")},a().createElement(ro,{"aria-label":"print-comment-input",maxLength:200,placeholder:s("PrintForm.commentPlaceholder")})),a().createElement(Fe.A.Item,{"aria-label":"print-layout",name:"layout",label:s("PrintForm.layout"),initialValue:b?.getLayouts()[0]?.name},a().createElement(oo,{"aria-label":"print-layout-input",printManager:b,onValueChange:()=>{l.setFieldValue("dpi",b?.getDpis()[0])}})),a().createElement(Fe.A.Item,{"aria-label":"print-scale",name:"scale",label:s("PrintForm.scale"),initialValue:b?.getClosestScaleToFitMap()},a().createElement(mo,{"aria-label":"print-scale-input",printManager:b})),a().createElement(Fe.A.Item,{"aria-label":"print-dpi",name:"dpi",label:s("PrintForm.dpi"),initialValue:b.getDpis()[0]},a().createElement(co,{"aria-label":"print-dpi-input",printManager:b,placeholder:s("PrintForm.resolutionPlaceholder")})),a().createElement(Fe.A.Item,{"aria-label":"print-format",name:"format",label:s("PrintForm.format"),initialValue:"pdf"},a().createElement(lo,{"aria-label":"print-format-input",printManager:b,outputFormats:o,placeholder:s("PrintForm.outputFormatPlaceholder")}))),a().createElement(Ke.A,{"aria-label":"create-print",className:"print-button tool-menu-button",disabled:!b?.isInitiated(),icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.cbP}),loading:w,onClick:async()=>{try{if(L(null),v(!0),!b)return;const e=await b.print(!1);if(!e)throw new Error("No download URL available, the job has failed.");window.open(e)}catch(e){L(s("PrintForm.printJobErrorMsg")||null),ze().error(e)}finally{v(!1)}}},s("PrintForm.downloadBtnText"))))},yo=n(6815),ho=n.n(yo),Eo=n(99756),bo={};bo.styleTagTransform=G(),bo.setAttributes=_(),bo.insert=j().bind(null,"head"),bo.domAPI=U(),bo.insertStyleElement=V();M()(Eo.A,bo),Eo.A&&Eo.A.locals&&Eo.A.locals;var Ao=n(7897),wo=n(47152),vo=n(19090),To=n.n(vo),So=n(37457);var Lo=({keyName:e,onChange:t=(()=>{}),options:n})=>{const{t:r}=(0,E.useTranslation)();return a().createElement(a().Fragment,null,a().createElement(Fe.A.Item,{name:[e,"name"],rules:[{required:!0,message:r("AttributionRow.missingKey")},({getFieldsValue:e})=>({validator(t,n){const a=e(!0);if(a.fields){if(Object.entries(a.fields).filter((([,e])=>e?.name===n)).length>1)return Promise.reject(new Error(r("AttributionRow.keyInUse")))}return Promise.resolve()}})]},a().createElement(So.A,{placeholder:r("AttributionRow.keyPlaceholder"),onChange:e=>{t(e)},options:n?.map((e=>({value:e})))})),a().createElement(Fe.A.Item,{name:[e,"value"],rules:[{required:!0,message:r("AttributionRow.missingValue")}]},a().createElement(l.A,{placeholder:r("AttributionRow.valuePlaceholder"),onChange:e=>{t(e.target.value)}})))},ko=n(20319),Co={};Co.styleTagTransform=G(),Co.setAttributes=_(),Co.insert=j().bind(null,"head"),Co.domAPI=U(),Co.insertStyleElement=V();M()(ko.A,Co),ko.A&&ko.A.locals&&ko.A.locals;function Po(){return Po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Po.apply(null,arguments)}var Fo=({onCustomClose:e,open:t,onClose:n,...i})=>{const[l,s]=(0,r.useState)(),[c,u]=(0,r.useState)(!0),[d,m]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[,f]=o.A.useNotification(),[y]=Fe.A.useForm(),h=(0,k.useMap)(),{t:b}=(0,E.useTranslation)(),A=(0,r.useCallback)((e=>{const t=e.fields?.map((e=>e?.name?.toLowerCase())).filter((e=>void 0!==e));g(d.filter((e=>!t?.includes(e.toLowerCase()))))}),[d]);(0,r.useEffect)((()=>{if(!h)return;const e=l?.getProperties();if(y.setFieldValue("fields",[]),e){const t=Object.entries(e).filter((([,e])=>!(e instanceof To()))).map((([e,t])=>[e,t])),n=Object.fromEntries(t),r=Object.entries(n).map((([e,t])=>({name:e,value:t})));y.setFieldValue("fields",r)}const t=Qt.DigitizeUtil.getDigitizeLayer(h),n=t.getSource()?.getFeatures(),r=new Set;n?.forEach((e=>{Object.keys(e.getProperties()).forEach((t=>{e.get(t)instanceof To()||r.add(t)}))})),m(Array.from(r))}),[l,y,h]),(0,r.useEffect)((()=>{s(void 0)}),[t]);const w=h?.getInteractions().getArray().filter((e=>!0===e.get("active")&&"react-geo-select-interaction"===e.get("name")))[0];w&&w.on("select",(()=>{s(w.getFeatures().getArray()[0])}));const v=async()=>{try{await y.validateFields(),u(!0)}catch(e){u(!1)}};return a().createElement(Pt.A,Po({title:b("Attribution.title"),className:"attribution-drawer",placement:"right",mask:!1,maskClosable:!1,closable:!1,open:t},i),!l&&a().createElement(a().Fragment,null,b("Attribution.select")),a().createElement(wo.A,null,a().createElement(Fe.A,{onFinish:e=>{if(l){o.A.destroy(),o.A.success({message:b("notificationApplyText.title"),placement:"top",duration:3.5});for(const e in l.getProperties())l.get(e)instanceof To()||l.unset(e);e.fields&&Object.values(e.fields).forEach((e=>{e?.name&&l.set(e.name,e.value)}))}},autoComplete:"off",form:y,onValuesChange:(e,t)=>{A(t)}},a().createElement(Fe.A.List,{name:"fields"},((e,{add:t,remove:n})=>a().createElement(a().Fragment,null,((e,t)=>e.map((e=>a().createElement("div",{key:e.key,className:"attribute-row"},a().createElement(Lo,{keyName:e.name,key:e.key,onChange:v,options:p}),a().createElement(pt.A,{title:b("AttributionPopConfirm.title"),okText:b("AttributionPopConfirm.okText"),cancelText:b("AttributionPopConfirm.cancelText"),placement:"topRight",onConfirm:()=>{o.A.destroy(),o.A.info({message:b("notificationDeleteText.title"),description:b("notificationDeleteText.info"),placement:"top",duration:6}),((e,t)=>{e(t)})(t,e.name)}},f,a().createElement(Ke.A,{className:"remove-attribute-button",type:"primary",danger:!0,icon:a().createElement(qe.FontAwesomeIcon,{icon:Ao.xbI})}))))))(e,n),a().createElement(Fe.A.Item,null,l?a().createElement(Ke.A,{type:"dashed",onClick:()=>{t()},className:"add-attribute-button",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.QLR})},b("Attribution.add")):a().createElement(a().Fragment,null))))),a().createElement(Fe.A.Item,null,a().createElement(Ke.A,{className:"submit-attributes-button",type:"primary",htmlType:"submit",disabled:!c,hidden:!l},b("Attribution.submit"))))))},No=n(14319),Do=n(63322);function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oo.apply(null,arguments)}const{confirm:Io}=i.A,Mo="deleteallbutton";var xo=({className:e,digitizeLayer:t,...n})=>{const[a,o]=(0,r.useState)(null),i=(0,L.useMap)(),{t:l}=(0,E.useTranslation)();if((0,r.useEffect)((()=>{i&&o(t?[t]:[Do.DigitizeUtil.getDigitizeLayer(i)])}),[i,t]),!a)return null;const s=e?`${Mo} ${e}`:Mo;return r.createElement(L.SimpleButton,Oo({onClick:()=>{Io({title:l("DeleteAllButton.deleteAll"),content:l("DeleteAllButton.confirmMessage"),icon:r.createElement(No.A,null),onOk(){a[0].getSource()?.clear()}})},className:s},n))};var Uo=()=>{const e=F(),{t:t}=(0,E.useTranslation)(),n=D((e=>e.stylingDrawerVisibility));return a().createElement(Ke.A,{type:"link",onClick:()=>{e((0,ca.en)(!n))},icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye._eQ})},t(n?"StylingDrawer.closeColorPalette":"StylingDrawer.openColorPalette"))};var Ro=({showDrawPoint:e,showDrawLine:t,showDrawPolygon:n,showDrawCircle:o,showDrawRectangle:i,showDrawAnnotation:l,showModifyFeatures:s,showUploadFeatures:c,showDeleteFeatures:u})=>{const[d,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(),{t:f}=(0,E.useTranslation)(),y=(0,k.useMap)(),h=e=>{const t=new FileReader;t.onload=()=>{try{const e=(new(Bt())).readFeatures(t.result);if(y){const t=y.getView().getProjection().getCode();e.forEach((e=>{e.getGeometry()?.transform("EPSG:4326",t)}));const n=Qt.DigitizeUtil.getDigitizeLayer(y).getSource();n?.addFeatures(e)}Ia.Ay.success(f("Draw.uploadSuccess"))}catch(e){Ia.Ay.error(f("Draw.uploadError"))}},t.readAsText(e)};if(!y)return a().createElement(a().Fragment,null);return a().createElement(a().Fragment,null,a().createElement(Zt(),{selectedName:p,onChange:e=>{e&&g(e.name)}},e?a().createElement($t(),{name:"draw-point",drawType:"Point",type:"link",pressed:!1},a().createElement(qe.FontAwesomeIcon,{icon:Ye.GEE}),a().createElement("span",{className:"draw-point"},f("Draw.point"))):a().createElement(a().Fragment,null),t?a().createElement($t(),{name:"draw-line",drawType:"LineString",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.Nby}),a().createElement("span",{className:"draw-line"},f("Draw.line"))):a().createElement(a().Fragment,null),n?a().createElement($t(),{name:"draw-polygon",drawType:"Polygon",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.qTS}),a().createElement("span",{className:"draw-polygon"},f("Draw.polygon"))):a().createElement(a().Fragment,null),o?a().createElement($t(),{name:"draw-circle",drawType:"Circle",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.s4k}),a().createElement("span",{className:"draw-circle"},f("Draw.circle"))):a().createElement(a().Fragment,null),i?a().createElement($t(),{name:"draw-rectangle",drawType:"Rectangle",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.Nfw}),a().createElement("span",{className:"draw-rectangle"},f("Draw.rectangle"))):a().createElement(a().Fragment,null),l?a().createElement($t(),{name:"draw-text",drawType:"Text",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.jrc}),a().createElement("span",{className:"draw-text"},f("Draw.text"))):a().createElement(a().Fragment,null),a().createElement(Uo,null),s?a().createElement(Wt(),{name:"draw-modify",type:"link",onToggle:e=>{m(e)}},a().createElement(qe.FontAwesomeIcon,{icon:Ye.LFz}),a().createElement("span",{className:"draw-modify"},f("Draw.modify"))):a().createElement(a().Fragment,null),u?a().createElement(zt(),{name:"draw-delete",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.IP$}),a().createElement("span",{className:"draw-delete"},f("Draw.delete"))):a().createElement(a().Fragment,null),u?a().createElement(xo,{name:"draw-delete-all",type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.yLS}),a().createElement("span",{className:"draw-delete-all"},f("DeleteAllButton.deleteAll"))):a().createElement(a().Fragment,null),c?a().createElement(ho(),{name:"draw-upload",onChange:e=>{const t=e.target.files;(e=>{const t=e.target.files;let n=!1;return t&&1===t.length&&("application/geo+json"===t[0].type||"application/geojson"===t[0].type||t[0].name.includes(".geojson")||t[0].name.includes(".json"))&&(n=!0),n})(e)?h(t[0]):Ia.Ay.error(f("Draw.uploadError"))},type:"link","aria-label":"draw-upload"},a().createElement(Ht(),{type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.JmV}),a().createElement("span",{className:"draw-upload"},f("Draw.upload")))):a().createElement(a().Fragment,null),c?a().createElement(Ht(),{name:"draw-export",onClick:()=>{const e=[];if(y){const t=y.getView().getProjection().getCode(),n=Qt.DigitizeUtil.getDigitizeLayer(y),r=n.getSource()?.getFeatures();if(r&&r.length>0){r.forEach((n=>{const r=n.clone();r.getGeometry()?.transform(t,"EPSG:4326"),e.push(r)}));const n=(new(Bt())).writeFeatures(e),a=new Blob([n],{type:"application/geo+json"}),o=window.URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.setAttribute("download","exportedFeatures.geojson"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}}},type:"link"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.cbP}),a().createElement("span",{className:"draw-export"},f("Draw.export"))):a().createElement(a().Fragment,null)),a().createElement(Fo,{open:d,onCustomClose:()=>m(!1)}))},jo=n(89791),Bo=n.n(jo),_o=n(456),zo=n(25512),Vo=n.n(zo),$o=n(20854),Go=n.n($o);var Wo=e=>{const t=C()(),n=(0,r.useCallback)((async()=>{if(!t)return;if(S().getLayerByName(t,e.layerName))return;const n=new(Go()),r=new(sr())({color:"rgba(255, 255, 255, 0.15)"}),a=new(ur())({color:"rgba(209, 70, 47, 1)",width:2}),o=new(mr())({fill:r,stroke:a,image:new(ir())({radius:5,fill:r,stroke:a})}),i=new(Vo())({source:n,style:o});i.set("name",e.layerName),t.addLayer(i)}),[t,e.layerName]),a=(0,r.useCallback)((()=>{if(!t)return;const n=S().getLayerByName(t,e.layerName);n&&t.removeLayer(n)}),[t,e.layerName]);(0,r.useEffect)((()=>(n(),()=>a())),[a,n])},Ko=n(72029),Ho=n(32629),Jo=n.n(Ho),Zo=n(29120),Yo={};Yo.styleTagTransform=G(),Yo.setAttributes=_(),Yo.insert=j().bind(null,"head"),Yo.domAPI=U(),Yo.insertStyleElement=V();M()(Zo.A,Yo),Zo.A&&Zo.A.locals&&Zo.A.locals;function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qo.apply(null,arguments)}var Qo=({exportFilter:e,features:t,layer:n,selectedFeature:r,...o})=>{const{t:i}=(0,E.useTranslation)(),l=F(),s=(0,k.useMap)(),c=D((e=>e.featureInfo.activeCopyTools)),u=D((e=>e.editFeature.userEditMode)),m=u.includes("CREATE")||u.includes("DELETE")||u.includes("UPDATE"),p=n?.get("editable");return a().createElement("div",{className:"pagination-toolbar"},a().createElement(Ko.A,qo({simple:!0,total:t.length,size:"small",pageSize:1},o)),a().createElement("div",{className:"copy-buttons"},m&&a().createElement(Gr.A,{key:"edit",title:i(p?"PaginationToolbar.editFeature":"PaginationToolbar.editDisabled")},a().createElement(Ke.A,{type:"text",size:"small",onClick:()=>{if(!n||!s)return;const e=(new(Bt())).writeFeature(r);try{const t=JSON.parse(e),a=Qt.DigitizeUtil.getDigitizeLayer(s);if(!a)return;const o=a.getSource();if(!o)return;if(o.clear(),o.addFeature(r),(0,ke.isEmpty)(o.getExtent()))return;s.getView().fit(o.getExtent(),{padding:[150,150,150,150]}),l((0,Ve.Ht)((0,d.getUid)(n))),l((0,Ve.J7)(t)),l((0,Ct.WU)())}catch(e){ze().error("Could not parse GeoJSON: ",e)}},icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.MT7}),disabled:!p})),c?.includes(wa.D8.COPY_AS_GEOJSON)&&a().createElement(Gr.A,{title:i("PaginationToolbar.copyAsGeoJson")},a().createElement(Ke.A,{type:"text",size:"small",onClick:()=>{if(!r)return;const t=r.clone();if(e){const n=Object.entries(t.getProperties()),r=n.filter((([t,n])=>e(t,n)));for(const[e,r]of n)r instanceof To()||t.unset(e);t.setProperties(Object.fromEntries(r))}xa()((new(Bt())).writeFeature(t))},icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.Iae})})),c?.includes(wa.D8.COPY_AS_OBJECT)&&a().createElement(Gr.A,{title:i("PaginationToolbar.copyAsObject")},a().createElement(Ke.A,{type:"text",size:"small",onClick:()=>{if(!r)return;let t=Object.entries(Jo()(r.getProperties())).filter((([,e])=>!(e instanceof To())));e&&(t=t.filter((([t,n])=>e(t,n)))),xa()(JSON.stringify(Object.fromEntries(t)))},icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.YEm})}))))};function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xo.apply(null,arguments)}var ei=({features:e,layerName:t,layer:n,tabConfig:o,...i})=>{const[l,s]=(0,r.useState)(1),[c,u]=(0,r.useState)(),[d,m]=(0,r.useState)("0"),p=C()(),g=`selection-layer-${t}`;Wo({layerName:g}),(0,r.useEffect)((()=>{if(!p)return;const t=S().getLayerByName(p,g);t&&(t.getSource()?.clear(),s(1),e.length>0&&(m("0"),u(e[0])))}),[e,p,g]),(0,r.useEffect)((()=>{if(!c||!p)return;const e=S().getLayerByName(p,g);e&&(e.getSource()?.clear(),e.getSource()?.addFeature(c))}),[c,p,g]);if(!o||!c)return a().createElement(a().Fragment,null);const f=o.filter((e=>!Re()(e))).map(((e,t)=>({label:e.title,key:`${t}`,forceRender:!0,children:a().createElement(it,{name:e.title,feature:c,formConfig:e.children})})));return a().createElement("div",{className:"feature-info-tabs"},a().createElement(Qo,{current:l,exportFilter:e=>{let t=!1;for(const n of o)if(n.children)for(const r of n.children)if(r.propertyName===e){t=!0;break}return t},features:e,layer:n,onChange:t=>{t<1||(s(t),u(e[t-1]))},selectedFeature:c}),a().createElement(rn.A,Xo({items:f,activeKey:d,defaultActiveKey:"0",onTabClick:e=>{m(e)}},i)))},ti=n(41091),ni=n.n(ti),ri=n(30224),ai={};ai.styleTagTransform=G(),ai.setAttributes=_(),ai.insert=j().bind(null,"head"),ai.domAPI=U(),ai.insertStyleElement=V();M()(ri.A,ai),ri.A&&ri.A.locals&&ri.A.locals;function oi(){return oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oi.apply(null,arguments)}var ii=({features:e,layerName:t,...n})=>{const[o,i]=(0,r.useState)(),[l,s]=(0,r.useState)(),[c,u]=(0,r.useState)([]),d=C()(),{t:m}=(0,E.useTranslation)(),p=`selection-layer-${t}`;Wo({layerName:p}),(0,r.useEffect)((()=>{if(!d)return;const t=S().getLayerByName(d,p);t&&(t.getSource()?.clear(),i(1),e.length>0&&s(e[0]))}),[e,d,p]),(0,r.useEffect)((()=>{if(!l||!d)return;const e=S().getLayerByName(d,p);if(!e)return;const t=Object.entries(l.getProperties()).filter((([,e])=>e instanceof To())).map((([e])=>e));u(t),e.getSource()?.clear(),e.getSource()?.addFeature(l)}),[l,d,p]);const g=t=>{i(t),s(e[t-1])};if(!l)return a().createElement(a().Fragment,null);const f=l.getKeys().filter((e=>!c.includes(e.toLocaleLowerCase())));return a().createElement(ni(),oi({className:"property-grid",feature:l,attributeFilter:f,size:"small",sticky:!0,title:()=>a().createElement(Qo,{features:e,selectedFeature:l,current:o,onChange:g}),columns:[{title:m("FeaturePropertyGrid.key"),dataIndex:"attributeName",key:"attributeName",width:"50%",ellipsis:!0,defaultSortOrder:"ascend",sorter:(e,t)=>e.key.localeCompare(t.key)},{title:m("FeaturePropertyGrid.value"),dataIndex:"attributeValue",key:"attributeValue",width:"50%",ellipsis:!0}],scroll:{scrollToFirstRowOnChange:!0,y:"calc(100% - 90px)"}},n))},li=n(99136),si={};si.styleTagTransform=G(),si.setAttributes=_(),si.insert=j().bind(null,"head"),si.domAPI=U(),si.insertStyleElement=V();M()(li.A,si),li.A&&li.A.locals&&li.A.locals;function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ci.apply(null,arguments)}var ui=({...e})=>{const{t:t}=(0,E.useTranslation)(),n=(0,k.useMap)(),o=Ae(),i=ee(),l=F(),[s,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(void 0),m=D((e=>e.featureInfo.enabled)),p=e=>!!e.get("hoverable")&&(e instanceof f()&&e.getSource()instanceof fe()||e instanceof h()&&e.getSource()instanceof he()),g=(0,r.useCallback)((()=>{if(!n)return;const e=S().getAllLayers(n,p);c(e.filter((e=>e.getVisible())))}),[n]);if((0,r.useEffect)((()=>{if(!n)return;g();const e=S().getAllLayers(n,p);return e.forEach((e=>e.on("change:visible",g))),()=>{e.forEach((e=>e.un("change:visible",g)))}}),[n,g]),!n)return a().createElement(a().Fragment,null);const y=e=>{d(e)},b=e=>n.getAllLayers().findIndex((t=>{if((0,pe.isWmsLayer)(t)){const n=t.getSource(),r=A(n?.getParams().LAYERS);return A(e)===r}return!1})),A=e=>e.split(":").length>1?e.split(":")[1]:e.split(":")[0];if(!m)return a().createElement(a().Fragment,null);return a().createElement("div",{className:"feature-info-panel"},a().createElement(Bo(),ci({featureCount:10,map:n,queryLayers:s,resultRenderer:e=>{const r=e.features,o=e.loading;if(0===Object.keys(r).length)return a().createElement("span",{className:"usage-hint"},t("FeatureInfo.usageHint"));const l=[];return Object.keys(r).forEach((e=>{let t=!1;const o=n.getAllLayers(),s=b(e),c=o[s];i.forEach((n=>{if((r=n.integration)&&"feature-info"===r.placement&&(Array.isArray(n.integration.layers)&&n.integration.layers.includes(e)||!n.integration.layers)){const{key:r,wrappedComponent:o}=n;l.push({label:e,index:s,key:e,children:a().createElement(o,{key:r})}),t=!0}var r})),t||l.push({label:c?.get("name")||e,index:s,key:e,children:a().createElement("div",{key:e},c?.get("featureInfoFormConfig")?a().createElement(ei,{tabConfig:c?.get("featureInfoFormConfig"),features:r[e],layerName:e,layer:c}):a().createElement(ii,{features:r[e],layerName:e}))})})),l.sort(((e,t)=>t.index-e.index)),a().createElement(Jr.A,{spinning:o},a().createElement(rn.A,{destroyInactiveTabPane:!0,items:l,activeKey:u,defaultActiveKey:l[0].key,onTabClick:y}))},fetchOpts:e=>({headers:{...e.get("useBearerToken")?{...(0,Ee.getBearerTokenHeader)(o?.getKeycloak())}:void 0}}),onSuccess:e=>{const t=e.features,n={};Object.entries(t).forEach((e=>{const t=e[0],r=e[1];n[t]=(new(Bt())).writeFeatures(r)}));const r=Object.keys(t).map((e=>({layerName:e,index:b(e)}))).sort(((e,t)=>t.index-e.index));r.length>0&&d(r[0].layerName),l((0,_o.nR)(n))}},e)))},di=n(60671),mi=n.n(di),pi=n(4339),gi=n.n(pi),fi=n(80553),yi=n.n(fi),hi=n(10169),Ei=n.n(hi),bi=n(66957),Ai={};Ai.styleTagTransform=G(),Ai.setAttributes=_(),Ai.insert=j().bind(null,"head"),Ai.domAPI=U(),Ai.insertStyleElement=V();M()(bi.A,Ai),bi.A&&bi.A.locals&&bi.A.locals;function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wi.apply(null,arguments)}var vi=({layer:e,...t})=>{const[n,o]=(0,r.useState)(e.getSource()?.getParams().TIME),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),[u,d]=(0,r.useState)(),{t:m}=(0,E.useTranslation)();(0,r.useEffect)((()=>{const t=e.get("dimension");if(!t)return;let n;if(t.values&&(n=t.values.split(",")),!n||0===n.length)return;l(n[0]),c(n[n.length-1]),o(n[n.length-1]);const r={};if(n.forEach(((e,t)=>{r[e]=Le()(e).format("YYYY-MM-DD")})),d(r),"current"===n.default){let e=[NaN,""];Object.values(r).forEach((t=>{let n=Le()().diff(Le()(t));n<e[0]&&(e=[n,t])})),o(e[1])}}),[e]);return a().createElement("div",{className:"wms-time-slider"},a().createElement(Dn.A,null,a().createElement(qe.FontAwesomeIcon,{icon:Ye.a$}),m("WmsTimeSlider.title")),u?a().createElement(Ei(),wi({min:i,max:s,marks:u,value:n,onChange:t=>{o(t),e.getSource()?.updateParams({TIME:t})},step:null},t)):a().createElement("span",null,m("WmsTimeSlider.default")))},Ti=n(62659),Si=n.n(Ti);function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Li.apply(null,arguments)}var ki=({layer:e,visibleLegendsIds:t,setVisibleLegendsIds:n,...i})=>{const[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),m=F(),g=Ae(),f=(0,k.useMap)(),{t:y}=(0,E.useTranslation)(),h=e.get("downloadConfig")??null,b=D((e=>e.editFeature.userEditMode)),A=async()=>{if(f){u(!0);try{let t=await Si().getExtentForLayer(e,{headers:e.get("useBearerToken")?{...(0,Ee.getBearerTokenHeader)(g?.getKeycloak())}:{}});t=(0,Wn.transformExtent)(t,"EPSG:4326",f.getView().getProjection()),f.getView().fit(t)}catch(e){ze().error(e),o.A.error({message:y("LayerTreeContextMenu.extentError")})}finally{u(!1)}}},w=e=>{const t=[e];for(const n of e.getLayers().getArray())n instanceof p()&&t.push(...w(n));return t},v=e=>{const t=(e=>f?w(f.getLayerGroup()).filter((t=>t.getLayers().getArray().includes(e))):[])(e);t.forEach((t=>t.getLayers().remove(e)))},T=()=>{if(!f)return;v(e);const t=S().getLayerByName(f,y("AddLayerModal.externalWmsFolder")),n=S().getLayerByName(f,y("UploadDataModal.uploadedDataFolder"));t&&0===t.getLayers().getLength()&&v(t),n&&0===n.getLayers().getLength()&&v(n)},L=async t=>{if(!e)return;const n={method:"GET",headers:{...e.get("useBearerToken")?{...(0,Ee.getBearerTokenHeader)(g?.getKeycloak())}:void 0}},r=await fetch(t,n),a=await r.blob(),o=document.createElement("a");o.href=URL.createObjectURL(a),o.setAttribute("download",e.get("name")),o.click()};let C=[];if((0,pe.isWmsLayer)(e)&&C.push({label:a().createElement(Jr.A,{spinning:c},y("LayerTreeContextMenu.layerZoomToExtent")),key:"zoomToExtent"}),(0,pe.isWmsLayer)(e)&&e.getVisible()){const n=t.includes((0,d.getUid)(e));C.push({label:y(n?"LayerTreeContextMenu.hideLegend":"LayerTreeContextMenu.showLegend"),key:"toggleLegend"})}if((e.get("isExternalLayer")||e.get("isUploadedLayer"))&&C.push({label:y("LayerTreeContextMenu.removeLayer"),key:"removeExternal"}),h){const e=h.map((e=>({label:y("LayerTreeContextMenu.downloadLayer",{formatName:e.formatName??"XML"}),key:`downloadLayer|${encodeURI(e.downloadUrl)}`})));C.push(...e)}return e.get("editable")&&(b.includes("CREATE")||b.includes("UPDATE")||b.includes("DELETE"))&&C.push({label:y("LayerTreeContextMenu.editLayer"),key:"editLayer"}),C.push({label:y("LayerTreeContextMenu.layerDetails"),key:"layerDetails"}),a().createElement("div",{"aria-label":"layer-context"},a().createElement(er.A,Li({menu:{items:C,onClick:r=>{if(r?.key.startsWith("downloadLayer")){const e=r.key.split("|")[1];L(decodeURI(e))}switch(r?.key){case"zoomToExtent":A();break;case"removeExternal":T();break;case"toggleLegend":const r=(0,d.getUid)(e),a=[...t];a.includes(r)?a.splice(a.indexOf(r),1):a.push(r),n(a);break;case"editLayer":m((0,Ve.J7)(null)),m((0,Ve.Ht)((0,d.getUid)(e))),m((0,Ct.WU)());break;case"layerDetails":m((0,Hr.wT)((0,d.getUid)(e))),m((0,Hr.WU)())}s(!1)}},placement:"bottomLeft",onOpenChange:s,open:l,trigger:["click"]},i),a().createElement(qe.FontAwesomeIcon,{icon:Ye.vaG})))},Ci=n(27711),Pi={};Pi.styleTagTransform=G(),Pi.setAttributes=_(),Pi.insert=j().bind(null,"head"),Pi.domAPI=U(),Pi.insertStyleElement=V();M()(Ci.A,Pi),Ci.A&&Ci.A.locals&&Ci.A.locals;var Fi=n(70253),Ni={};Ni.styleTagTransform=G(),Ni.setAttributes=_(),Ni.insert=j().bind(null,"head"),Ni.domAPI=U(),Ni.insertStyleElement=V();M()(Fi.A,Ni),Fi.A&&Fi.A.locals&&Fi.A.locals;var Di=()=>a().createElement("div",{className:"layer-node-title-loading-animation"},a().createElement("span",{className:"dot-one"},"."),a().createElement("span",{className:"dot-two"},"."),a().createElement("span",{className:"dot-three"},"."));function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oi.apply(null,arguments)}var Ii=({...e})=>{const t=(0,k.useMap)(),n=Ae(),{t:o}=(0,E.useTranslation)(),i=D((e=>e.layerTree.showLegends))??!1,l=t?.getAllLayers().map((e=>(0,d.getUid)(e))),[s,c]=(0,r.useState)(i?l??[]:[]),[u,m]=(0,r.useState)({}),g=(0,r.useCallback)((()=>{if(!t)return;S().getAllLayers(t).forEach((e=>{if(e instanceof Kr()){const t=e.getSource();t instanceof he()&&(t.hasListener("tileloadstart")||t.on("tileloadstart",b),t.hasListener("tileloadend")||t.hasListener("tileloaderror")||t.on(["tileloadend","tileloaderror"],A)),t instanceof fe()&&(t.hasListener("imageloadstart")||t.on("imageloadstart",b),t.hasListener("imageloadend")||t.hasListener("imageloaderror")||t.on(["imageloadend","imageloaderror"],A))}}))}),[t]),y=(0,r.useCallback)((()=>{const e=t?.getAllLayers().map((e=>(0,d.getUid)(e)));e?.length!==l?.length&&g()}),[t,l,g]);(0,r.useEffect)((()=>{if(t)return g(),t.getLayers().on("change",y),()=>{S().getAllLayers(t).forEach((e=>{if(e instanceof Kr()){const t=e.getSource();t.hasListener("tileloadstart")&&t.un("tileloadstart",b),t.hasListener("tileloadend")&&t.un("tileloadend",A),t.hasListener("tileloaderror")&&t.un("tileloaderror",A)}})),t.getLayers().un("change",y)}}),[t,g,y]);const b=e=>{m((t=>{const n=parseInt((0,d.getUid)(e.target),10),r={...t};return r[n]&&r[n].loaded>=r[n].loading?(r[n].loading=1,r[n].loaded=0,r[n].percent=0,r):(r[n]||(r[n]={loading:0,loaded:0,percent:0}),r[n].loading=Number.isInteger(r[n].loading)?r[n].loading+1:1,r)}))},A=e=>{m((t=>{const n=parseInt((0,d.getUid)(e.target),10),r={...t};r[n]||(r[n]={loading:0,loaded:0,percent:0}),r[n].loaded=Number.isInteger(r[n].loaded)?r[n].loaded+1:1;const a=Math.round(r[n].loaded/r[n].loading*100);return a>r[n].percent&&(r[n].percent=a),r}))};return t?a().createElement(mi(),Oi({"aria-label":"layertree",className:"layertree",map:t,nodeTitleRenderer:e=>{if(!t)return;const r=t.getView(),i=r.getProjection().getUnits()||"m",l=r.getResolution(),m=l?S().getScaleForResolution(l,i):void 0,g=e instanceof Kr()&&(0,d.getUid)(e.getSource())?u[(0,d.getUid)(e.getSource())]?.percent:100;return e instanceof p()?a().createElement("div",{"aria-label":"layer-group"},e.get("name")):a().createElement(a().Fragment,null,a().createElement("div",{className:"tree-node-header","aria-label":"tree-node-header"},a().createElement("span",{"aria-label":"layer-name",className:"layer-name"},e.get("name"),a().createElement("span",{className:"loading-dots"},g<100&&a().createElement(Di,null))),(e instanceof h()||e instanceof f())&&a().createElement("div",{"aria-label":"layer-context-menu"},a().createElement(ki,{layer:e,visibleLegendsIds:s,setVisibleLegendsIds:c}))),e.get("visible")&&a().createElement("div",{className:"layer-transparency","aria-label":"transparency-slider"},a().createElement(yi(),{tooltip:{formatter:e=>`${o("LayerTree.transparency")}: ${e}%`},layer:e})),e.get("visible")&&"WMSTIME"===e.get("type")&&a().createElement("div",{className:"layer-time-slider"},a().createElement(vi,{layer:e})),e.get("visible")&&s.includes((0,d.getUid)(e))&&a().createElement(gi(),{layer:e,errorMsg:o("LayerTree.noLegendAvailable"),extraParams:{scale:m,LEGEND_OPTIONS:"fontAntiAliasing:true;forceLabels:on",TRANSPARENT:!0},headers:e.get("useBearerToken")?{...(0,Ee.getBearerTokenHeader)(n?.getKeycloak())}:{}}))},filterFunction:e=>e.getLayers?!e.get("hideInLayerTree"):!(e.getSource&&e.getSource()?.forEachFeature),draggable:!0},e)):a().createElement(a().Fragment,null)},Mi=n(11767),xi=n.n(Mi),Ui=n(48086),Ri={};Ri.styleTagTransform=G(),Ri.setAttributes=_(),Ri.insert=j().bind(null,"head"),Ri.domAPI=U(),Ri.insertStyleElement=V();M()(Ui.A,Ri),Ui.A&&Ui.A.locals&&Ui.A.locals;var ji=({showMeasureDistance:e,showMeasureArea:t})=>{const{t:n}=(0,E.useTranslation)(),r=(0,k.useMap)();return r?a().createElement(Zt(),null,e?a().createElement(xi(),{geodesic:!0,name:"line",map:r,measureType:"line",type:"link",continueLineMsg:n("Measure.clicktodrawline")},a().createElement(qe.FontAwesomeIcon,{icon:Ye.$$g}),a().createElement("span",{className:"measure-text"},n("Measure.line"))):a().createElement(a().Fragment,null),t?a().createElement(xi(),{geodesic:!0,name:"poly",map:r,measureType:"polygon",type:"link",continuePolygonMsg:n("Measure.clicktodrawarea")},a().createElement(qe.FontAwesomeIcon,{icon:Ye.mSI}),a().createElement("span",{className:"measure-text"},n("Measure.area"))):a().createElement(a().Fragment,null)):a().createElement(a().Fragment,null)},Bi=n(52725),_i={};_i.styleTagTransform=G(),_i.setAttributes=_(),_i.insert=j().bind(null,"head"),_i.domAPI=U(),_i.insertStyleElement=V();M()(Bi.A,_i),Bi.A&&Bi.A.locals&&Bi.A.locals;function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(null,arguments)}const{Panel:Vi}=Ea.A;var $i=({collapseWidth:e=40,minWidth:t=240,maxWidth:n=600,...o})=>{const{t:i}=(0,E.useTranslation)(),l=(0,k.useMap)(),s=ee(),c=F(),u=D((e=>e.toolMenu.availableTools)),d=D((e=>e.toolMenu.activeKeys)),m=Ae(),p=m?.getKeycloak(),[g,f]=(0,r.useState)(!1),[y,h]=(0,r.useState)([]),[b,A]=(0,r.useState)(!1),[w,v]=(0,r.useState)(320),[T,S]=(0,r.useState)(w);(0,r.useEffect)((()=>{const t=window.matchMedia("only screen and (max-width: 450px) and (orientation: portrait),only screen and (max-width: 750px) and (orientation: landscape), only screen and (max-width: 580px)"),n=new RegExp("/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/");(t.matches||n.test(window.navigator.userAgent))&&(f(!0),v(e))}),[e]),(0,r.useEffect)((()=>{y.length<1&&(u.includes("default")?h(["measure_tools","draw_tools","feature_info","print","tree","permalink","language_selector"]):h(u))}),[y,u]),(0,r.useEffect)((()=>{const e=["print","measure_tools","draw_tools","feature_info","tree"];if(e.filter((e=>d.includes(e))).length>1){const t=d.slice(0,d.length-1).reverse().find((t=>e.includes(t)));t&&c((0,Ta.R_)(d.filter((e=>e!==t))))}c((0,wa.SY)(d.includes("feature_info"))),c((0,va.NG)(d.includes("tree")))}),[d,c]);const L=D((e=>e.layerTree.activeUploadTools)),C=e=>{switch(e){case"measure_tools":return{icon:Ye.W2$,title:i("ToolMenu.measure"),wrappedComponent:a().createElement(ji,{showMeasureDistance:u.includes("default")||u.includes("measure_tools_distance"),showMeasureArea:u.includes("default")||u.includes("measure_tools_area")})};case"draw_tools":return{icon:Ye.fyG,title:i("ToolMenu.draw"),wrappedComponent:a().createElement(Ro,{showDrawPoint:u.includes("default")||u.includes("draw_tools_point"),showDrawLine:u.includes("default")||u.includes("draw_tools_line"),showDrawPolygon:u.includes("default")||u.includes("draw_tools_polygon"),showDrawCircle:u.includes("default")||u.includes("draw_tools_circle"),showDrawRectangle:u.includes("default")||u.includes("draw_tools_rectangle"),showDrawAnnotation:u.includes("default")||u.includes("draw_tools_annotation"),showModifyFeatures:u.includes("default")||u.includes("draw_tools_modify"),showUploadFeatures:u.includes("default")||u.includes("draw_tools_upload"),showDownloadFeatures:u.includes("default")||u.includes("draw_tools_download"),showDeleteFeatures:u.includes("default")||u.includes("draw_tools_delete"),showStyleFeatures:u.includes("default")||u.includes("draw_tools_style")})};case"feature_info":return{icon:Ye.mEO,title:i("ToolMenu.featureInfo"),wrappedComponent:a().createElement(ui,null)};case"print":return{icon:Ye.mHA,title:i("ToolMenu.print"),wrappedComponent:l?a().createElement(fo,{active:d.includes("print"),layerBlackList:["react-geo_measure","hoverVectorLayer"]}):a().createElement(a().Fragment,null)};case"tree":return{icon:Ye.GKN,title:i("ToolMenu.layertree"),wrappedComponent:a().createElement("div",{className:"tree-wrapper"},a().createElement(Ii,null),L?.includes(va.Rt.addWMS)&&a().createElement(Ke.A,{className:"add-wms-button tool-menu-button",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.QLR}),onClick:()=>c((0,O.WU)())},i("ToolMenu.addWms")),p&&ce().geoserver?.upload?.authorizedRoles?.some((e=>p.hasResourceRole(e,p.clientId)))&&L?.includes(va.Rt.dataUpload)&&a().createElement(Ke.A,{className:"upload-data-button tool-menu-button",icon:a().createElement(qe.FontAwesomeIcon,{icon:Ye.JmV}),onClick:()=>c((0,Sa.WU)())},i("ToolMenu.uploadData")))};case"permalink":return{icon:Ye.ekB,title:i("Permalink.title"),wrappedComponent:a().createElement(Ba,null)};case"language_selector":return{icon:Ye.mh,title:i("ToolMenu.languageSelect"),wrappedComponent:a().createElement(Fa,null)}}},P=(0,r.useCallback)((()=>{A(!0)}),[]),N=(0,r.useCallback)((()=>{A(!1)}),[]),I=(0,r.useCallback)((e=>{if(b&&!g){let r=e.clientX-document.body.offsetLeft;r>t&&r<n&&(v(r),S(r))}}),[b,g,t,n]);return(0,r.useEffect)((()=>(document.addEventListener("mousemove",I),document.addEventListener("mouseup",N),()=>{document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",N)})),[I,N]),a().createElement("div",{"aria-label":"tool-menu",className:"tool-menu "+(g?"collapsed":""),style:{width:w}},a().createElement(Ea.A,zi({expandIconPosition:"end",activeKey:d,destroyInactivePanel:!0,onChange:e=>{f(!1),c((0,Ta.R_)(Aa()(e))),g&&v(T)}},o),(()=>{const e=[];return y.forEach((t=>{const n=C(t);if(!n)return;const{icon:r,title:o,wrappedComponent:i}=n,l=a().createElement(Vi,{className:t,header:a().createElement(a().Fragment,null,r?a().createElement(qe.FontAwesomeIcon,{icon:r}):void 0,a().createElement("span",null,o)),key:t},i);e.push(l)})),s&&s.forEach((t=>{if((n=t.integration)&&"tool-menu"===n.placement){const{key:n,wrappedComponent:r,integration:{placement:o,label:l="Plugin",insertionIndex:s,icon:c,...u}}=t;e.splice(s||0,0,a().createElement(Vi,zi({header:a().createElement(a().Fragment,null,c?a().createElement(qe.FontAwesomeIcon,{icon:c}):void 0,a().createElement("span",null,i(l))),key:n},u),a().createElement(r,null)))}var n})),e})()),a().createElement(Gr.A,{placement:"right",title:i(g?"ToolMenu.expand":"ToolMenu.collapse")},a().createElement(Ke.A,{className:"collapse-btn","aria-label":"collapse-button",icon:g?a().createElement(qe.FontAwesomeIcon,{icon:Ye.XkK}):a().createElement(qe.FontAwesomeIcon,{icon:Ye.Wzs}),onClick:()=>{c((0,Ta.R_)([])),f(!g),v(g?T:e)}})),g?a().createElement(a().Fragment,null):a().createElement("div",{className:"dynamicWidth",onMouseDown:P}))},Gi=n(24522),Wi=n(98097),Ki=n.n(Wi),Hi=n(7578),Ji={};Ji.styleTagTransform=G(),Ji.setAttributes=_(),Ji.insert=j().bind(null,"head"),Ji.domAPI=U(),Ji.insertStyleElement=V();M()(Hi.A,Ji),Hi.A&&Hi.A.locals&&Hi.A.locals;function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zi.apply(null,arguments)}const{Dragger:Yi}=We.A;var qi=({...e})=>{const[t,n]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[s,c]=(0,r.useState)(!1),u=D((e=>e.uploadDataModal.visible)),d=D((e=>e.user)),m=F(),g=(0,k.useMap)(),f=Ae(),{t:y}=(0,E.useTranslation)(),h=e=>({0:null,1:"org.locationtech.jts.geom.Point",3:"org.locationtech.jts.geom.LineString",5:"org.locationtech.jts.geom.Polygon",8:"org.locationtech.jts.geom.MultiPoint",11:"org.locationtech.jts.geom.Point",13:"org.locationtech.jts.geom.LineString",15:"org.locationtech.jts.geom.Polygon",18:"org.locationtech.jts.geom.MultiPoint",21:"org.locationtech.jts.geom.Point",23:"org.locationtech.jts.geom.LineString",25:"org.locationtech.jts.geom.Polygon",28:"org.locationtech.jts.geom.MultiPoint",31:null}[e]),b=e=>{switch(e){case"C":return"java.lang.String";case"D":return"java.util.Date";case"N":return"java.lang.Long";case"F":return"java.lang.Double";case"L":return"java.lang.Boolean";default:return null}};return a().createElement(i.A,Zi({className:"upload-data-modal",title:y("UploadDataModal.title"),open:u,onCancel:()=>{n(""),l(""),m((0,Sa.jD)())},width:600,footer:!1},e),o&&a().createElement(le.A,{message:o,closable:!0,type:"success"}),t&&a().createElement(le.A,{message:t,closable:!0,type:"error"}),a().createElement(Jr.A,{spinning:s},a().createElement(Yi,{customRequest:async e=>{const{onError:t,onSuccess:n,file:r}=e,a=r.name.split("."),o=r.type,i=ce().geoserver?.base||"/geoserver",l=ce().geoserver?.upload?.workspace||"SHOGUN",s=`${a[0]}_${Date.now()}`.toUpperCase(),c={file:r,baseUrl:i,workspace:l,storeName:s,layerName:s};try{"image/tiff"===o&&await(async e=>{const{baseUrl:t,workspace:n,storeName:r,layerName:a,file:o}=e,i=`${t}/rest/workspaces/${n}/coveragestores/${r}/file.geotiff?configure=none`;if(!(await fetch(i,{method:"PUT",headers:{...(0,Ee.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"image/tiff"},body:o})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}));const l=`${t}/rest/workspaces/${n}/coveragestores/${r}/coverages`;if(!(await fetch(l,{method:"POST",headers:{...(0,Ee.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/json"},body:JSON.stringify({coverage:{enabled:!0,name:a,nativeName:a,title:a,keywords:{string:["User upload",`Uploaded by ${d.providerDetails?.username}`]}}})})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}))})(c),"application/zip"===o&&await(async e=>{const{baseUrl:t,workspace:n,storeName:r,layerName:a,file:o}=e,i=await Gi.UZ.load(o);let l="",s={attribute:[]};if(1!==Object.entries(i).length)throw new Error(y("UploadDataModal.error.zipContent"));Object.entries(i).forEach((([e,t])=>{l=e;const n=t.parse("dbf",{properties:!1});s.attribute=n.fields.map((e=>({name:e.name,minOccurs:0,maxOccurs:1,nillable:!0,binding:b(e.type),length:e.length})));const r=t.parse("shx");s.attribute.push({name:"the_geom",minOccurs:0,maxOccurs:1,nillable:!0,binding:h(r.header.type)})}));const c=`${t}/rest/workspaces/${n}/datastores/${r}/file.shp?configure=none`;if(!(await fetch(c,{method:"PUT",headers:{...(0,Ee.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/zip"},body:o})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}));const u=`${t}/rest/workspaces/${n}/datastores/${r}/featuretypes`;if(!(await fetch(u,{method:"POST",headers:{...(0,Ee.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/json"},body:JSON.stringify({featureType:{enabled:!0,name:a,nativeName:l,title:a,attributes:s,keywords:{string:["User upload",`Uploaded by ${d.providerDetails?.username}`]}}})})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}))})(c),n&&n({baseUrl:i,workspace:l,layerName:s})}catch(e){t&&t({name:"UploadError",message:e instanceof Error?e.message:y("UploadDataModal.error.general",{fileName:r.name})})}},accept:"image/tiff,application/zip",maxCount:1,showUploadList:!1,beforeUpload:e=>{const t=ce().geoserver?.upload?.limit||2e8,r=e.type,a=e.size;if(n(""),l(""),a>t)return n(y("UploadDataModal.error.maxSize",{maxSize:t/1e6})),!1;const o=["application/zip","image/tiff"];return!!o.includes(r)||(n(y("UploadDataModal.error.supportedFormats",{supportedFormats:o.join(", ")})),!1)},onChange:async e=>{const t=e.file;if("uploading"===t.status&&c(!0),"done"===t.status){if(!f||!t.response)return;const e={name:t.response.layerName,type:"TILEWMS",clientConfig:{hoverable:!0},sourceConfig:{url:`${t.response.baseUrl}/ows?`,layerNames:`${t.response.workspace}:${t.response.layerName}`,useBearerToken:!0}},n=new(Ki())({client:f}).parseTileLayer(e);n.set("layerConfig",e),n.set("isUploadedLayer",!0),n.set("groupName",y("UploadDataModal.uploadedDataFolder")),(e=>{if(!g)return;const t=y("UploadDataModal.uploadedDataFolder");let n=S().getLayerByName(g,t);if(!n){n=new(p())({layers:[],properties:{name:t}});const e=g.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}n.getLayers().getArray().includes(e)||n.getLayers().push(e)})(n),l(y("UploadDataModal.success",{fileName:t.name,layerName:t.response.layerName})),c(!1)}else"error"===t.status&&(c(!1),ze().error(t.error),t.error&&t.error.message?n(t.error.message):n(y("UploadDataModal.error.general",{fileName:t.name})))}},a().createElement("p",{className:"ant-upload-drag-icon"},a().createElement(qe.FontAwesomeIcon,{icon:Ye.JmV})),a().createElement("p",{className:"ant-upload-text"},y("UploadDataModal.description")),a().createElement("p",{className:"ant-upload-hint"},y("UploadDataModal.hint")))))};var Qi=async()=>{const e=(0,k.useMap)(),t=Ae(),n=function(){const{search:e}=window.location;return a().useMemo((()=>new URLSearchParams(e)),[e])}(),{t:r}=(0,E.useTranslation)(),o=n.get("layers");if(!e)return;const i=gr().applyLink(e,";",(e=>e.get("name")),(e=>e instanceof h()||e instanceof f()));if(!i)return;const l=t=>{const n=new(p())({layers:[]});n.set("name",t);const r=e.getLayerGroup().getLayers();return r.insertAt(r?.getLength()||0,n),n};try{const n=JSON.parse(i);if(!t)throw new Error("Client is not available");const a=new(Ki())({client:t});for(let t=0;t<n.length;t++){const i=n[t];if(!Rt()(i?.layerConfig)){const t=i.layerConfig,n=await a.parseLayer(t);if(!n)continue;if(i.isExternalLayer&&n.set("isExternalLayer",i.isExternalLayer),i.isUploadedLayer&&n.set("isUploadedLayer",i.isUploadedLayer),n.set("groupName",i.groupName),n.set("layerConfig",i.layerConfig),n.setVisible(!!o?.split(";").some((e=>e===t.name))),!n.get("isExternalLayer")&&!n.get("isUploadedLayer"))continue;let s;n.get("groupName")?(s=S().getLayerByName(e,n.get("groupName")),s||(s=l(n.get("groupName")))):(s=S().getLayersByProperty(e,"isExternalLayerGroup",!0)?.[0],s||(s=l(r("AddLayerModal.externalWmsFolder")),s.set("isExternalLayerGroup",!0))),S().getLayerByName(e,n.get("name"))||s.getLayers().push(n)}}}catch(e){ze().error(e)}},Xi=n(12809),el={};el.styleTagTransform=G(),el.setAttributes=_(),el.insert=j().bind(null,"head"),el.domAPI=U(),el.insertStyleElement=V();M()(Xi.A,el),Xi.A&&Xi.A.locals&&Xi.A.locals;function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tl.apply(null,arguments)}const nl=({...e})=>(Qi(),(0,r.useEffect)((()=>{const e=document.querySelectorAll(".loadmask")[0];e&&e.classList.add("loadmask-hidden")}),[]),a().createElement("div",tl({className:"App"},e),a().createElement(Vr,null),a().createElement(ne,null),a().createElement($i,null),a().createElement(Vn,null),a().createElement(ie,null),a().createElement(J,null),a().createElement(qi,null),a().createElement(Nn,null),a().createElement(ia,null),a().createElement(ha,null)));var rl=nl},49476:function(e,t,n){"use strict";var r=n(24002),a=n.n(r),o=n(58807),i=n(99545),l=n(65885),s=n(461),c=n(33855),u=n(42106),d=n(71956),m=n(39804),p=n(98318),g=n.n(p),f=n(2520),y=n.n(f),h=n(94997),E=n(18766),b=n(27906),A=n(50090),w=n.n(A),v=n(50308),T=n.n(v),S=n(43044),L=n.n(S),k=n(87804),C=n(25040),P=n.n(C),F=n(16180),N=n.n(F),D=n(88684),O=n.n(D),I=n(18036),M=n(32421),x=n(59648),U=n.n(x),R=n(69941),j=n.n(R),B=n(51100),_=n.n(B),z=n(98097),V=n.n(z),$=n(38540),G=n.n($),W=n(34231),K=n(20573),H=n(6047),J=n(15452);const Z=(0,J.Z0)({name:"appInfo",initialState:{authorities:[],buildTime:"",commitHash:"",userId:-1,version:""},reducers:{setAppInfo(e,t){return t.payload}}}),{setAppInfo:Y}=Z.actions;var q=Z.reducer;const Q=(0,J.Z0)({name:"description",initialState:"",reducers:{setDescription:(e,t)=>t.payload}}),{setDescription:X}=Q.actions;var ee=Q.reducer,te=n(70372),ne=n(72320),re=n(6107);const ae={contact:"https://www.terrestris.de/de/kontakt/",imprint:"https://www.terrestris.de/de/impressum/",privacy:"https://www.terrestris.de/de/datenschutzerklaerung/"},oe=(0,J.Z0)({name:"legal",initialState:ae,reducers:{setLegal:(e,t)=>({contact:t.payload.contact||ae.contact,imprint:t.payload.imprint||ae.imprint,privacy:t.payload.privacy||ae.privacy})}}),{setLegal:ie}=oe.actions;var le=oe.reducer;const se=(0,J.Z0)({name:"logoPath",initialState:"./shogun_logo.png",reducers:{setLogoPath:(e,t)=>t.payload}}),{setLogoPath:ce}=se.actions;var ue=se.reducer,de=n(24341);const me=(0,J.Z0)({name:"searchEngines",initialState:["nominatim"],reducers:{setSearchEngines:(e,t)=>t.payload}}),{setSearchEngines:pe}=me.actions;var ge=me.reducer,fe=n(14644),ye=n(6259),he=n(55349),Ee=n(18992),be=n(456),Ae=n(50019);const we=(0,J.Z0)({name:"title",initialState:"SHOGun Client",reducers:{setTitle:(e,t)=>t.payload}}),{setTitle:ve}=we.actions;var Te=we.reducer,Se=n(25555),Le=n(55860);const ke=(0,J.Z0)({name:"user",initialState:{},reducers:{setUser(e,t){return t.payload}}}),{setUser:Ce}=ke.actions;var Pe=ke.reducer;const Fe=(0,J.iZ)(),Ne=e=>(0,fe.HY)({addLayerModal:ye.Ay,appInfo:q,description:ee,editFeature:te.Ay,editFeatureDrawerOpen:he.Ay,featureInfo:ne.Ay,layerDetailsModal:Ee.Ay,layerTree:re.Ay,legal:le,logoPath:ue,print:de.Ay,selectedFeatures:be.Ay,title:Te,toolMenu:Se.Ay,uploadDataModal:Le.Ay,searchEngines:ge,user:Pe,stylingDrawerVisibility:Ae.Ay,...e}),De=(0,J.U1)({reducer:Ne(),middleware:e=>e().prepend(Fe.middleware)});var Oe=n(85072),Ie=n.n(Oe),Me=n(97825),xe=n.n(Me),Ue=n(77659),Re=n.n(Ue),je=n(55056),Be=n.n(je),_e=n(10540),ze=n.n(_e),Ve=n(41113),$e=n.n(Ve),Ge=n(47002),We={};We.styleTagTransform=$e(),We.setAttributes=Be(),We.insert=Re().bind(null,"head"),We.domAPI=xe(),We.insertStyleElement=ze();Ie()(Ge.A,We),Ge.A&&Ge.A.locals&&Ge.A.locals;const Ke=a().lazy((()=>Promise.all([n.e(255),n.e(76),n.e(815)]).then(n.bind(n,16060))));var He=function(e){return e.APP_ID_NOT_SET="APP_ID_NOT_SET",e.APP_CONFIG_NOT_FOUND="APP_CONFIG_NOT_FOUND",e.APP_UNAUTHORIZED="APP_UNAUTHORIZED",e.APP_CONFIG_STATIC_NOT_FOUND="APP_CONFIG_STATIC_NOT_FOUND",e}(He||{});const Je=!1!==g().shogunBase?new(G())({url:g().shogunBase||"/"}):void 0,Ze=new(V())({client:Je}),Ye=e=>{switch(e){case"en":default:return d.A;case"de":return u.A;case"pl":return m.A;case"cz":return c.A}},qe=async e=>{const t=await Ze.parseMapView(e,{constrainOnlyCenter:!0});let n;const r=e.clientConfig?.mapView.projection,a=e.clientConfig?.mapView;if(r&&a?.extent&&4===a.extent.length){const e=(0,k.fromLonLat)([a.extent[0],a.extent[1]],r),t=(0,k.fromLonLat)([a.extent[2],a.extent[3]],r);n=[e[0],e[1],t[0],t[1]]}let o;if(n&&t.set("extent",n),t.setConstrainResolution(!0),g().layerConfigUrl){const t=await fetch(g().layerConfigUrl),n=await t.json();o=await Ze.parseLayerTreeNodes(e,n,r)}else o=await Ze.parseLayerTree(e,r);return new(L())({view:t,layers:o,controls:(0,b.defaults)({zoom:!1})})},Qe=()=>{const e=new(T())({source:new(P())});e.set("name","OpenStreetMap");const t=new(T())({opacity:.5,visible:!0,source:new(N())({url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",projection:"EPSG:3857",params:{LAYERS:"MERRA2_2m_Air_Temperature_Assimilated_Monthly"}})});t.setProperties({name:"2-meter Air Temperature, Assimilated (Monthly, MERRA2)",hoverable:!0});const n=new(w())({layers:[t]});n.set("name","NASA Earth Observations");const r=new(w())({layers:[e]});r.set("name","Background");const a=(0,k.fromLonLat)([0,40],"EPSG:3857");return new(L())({view:new(O())({center:a,zoom:0}),layers:[r,n],controls:(0,b.defaults)({zoom:!1})})},Xe=async(e,t,r)=>{await n.I("default"),await new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.type="text/javascript",r.async=!0,r.onload=()=>{r.parentElement?.removeChild(r),e()},r.onerror=e=>{r.parentElement?.removeChild(r),n(e)},document.head.appendChild(r)}));const a=window[e];await a.init(n.S.default);const o=[];for(const e of r){const t=(await a.get(e))();o.push(t)}return o},et=(e,t)=>"string"==typeof e?t===e:e instanceof RegExp&&e.test(t);(async()=>{try{o.wG.config({paths:{vs:"./vs"}});const e=await(async()=>{const e=g().keycloak?.enabled,t=g().keycloak?.onLoadAction,n=g().keycloak?.host,r=g().keycloak?.realm,a=g().keycloak?.clientId;if(!e)return;if(!n)throw new Error("Neither config key keycloak.host nor environment KEYCLOAK_HOST is set");if(!r)throw new Error("Neither config key keycloak.realm nor environment KEYCLOAK_REALM is set");if(!a)throw new Error("Neither config key keycloak.clientId nor environment KEYCLOAK_CLIENT_ID is set");const o=new E.A({url:`${n}`,realm:r,clientId:a});return o.onTokenExpired=async()=>{try{await o.updateToken(0)}catch(e){U().error("Error while refreshing the access token: ",e)}},await o.init({onLoad:t,checkLoginIframe:!1}),o})();e&&Je&&Je.setKeycloak(e);const t=j().getQueryParam(window.location.href,"applicationId"),n=t?parseInt(t,10):void 0;if(!n&&!g().enableFallbackConfig&&!g().staticAppConfigUrl)throw new Error(He.APP_ID_NOT_SET);let r;if(n&&Je)r=await(async(e,t)=>{try{U().info(`Loading application with ID ${t}`);const n=await e.application().findOne(t);return U().info(`Successfully loaded application with ID ${t}`),n}catch(e){if(e.message.indexOf("401")>-1)throw new Error(He.APP_UNAUTHORIZED);U().error(`Error while loading application with ID ${t}: ${e}`)}})(Je,n),((e,t="./shogun_spinner.gif")=>{const n=document.getElementById("loadmask-image");n&&(n.src=t,localStorage.setItem(`SHOGun_Logo_Path_${e}`,t))})(n,r?.clientConfig?.theme?.logoPath);else if(g().staticAppConfigUrl&&(r=await(async e=>{try{U().info("Loading static application");const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error status: ${t.status}`);const n=await t.json();return U().info("Successfully loaded static application"),n}catch(e){if(e.message.indexOf("401")>-1)throw new Error(He.APP_UNAUTHORIZED);U().error(`Error while loading static application: ${e}`)}})(g().staticAppConfigUrl),!r))throw new Error(He.APP_CONFIG_STATIC_NOT_FOUND);if(!r&&!g().enableFallbackConfig)throw new Error(He.APP_CONFIG_NOT_FOUND);const s=r?.clientConfig?.defaultLanguage;s||H.A.use(h.A),await H.A.init(H.p),s&&H.A.changeLanguage(s);const c=r?.clientConfig?.printApp;c&&De.dispatch((0,de.BC)(c));const u=(e=>{const t={"--primaryColor":"#59666C","--secondaryColor":"#70B3BE","--complementaryColor":"#FFFFFF"};if(!e)return t;if(e.primaryColor&&(t["--primaryColor"]=e.primaryColor),e.secondaryColor&&(t["--secondaryColor"]=e.secondaryColor),e.secondaryColor&&(t["--complementaryColor"]=e.complementaryColor),e.faviconPath){const t=document.querySelector('link[rel="shortcut icon"]');if(t)t.href=e.faviconPath;else{const t=document.createElement("link");t.rel="shortcut icon",t.type="image/x-icon",t.href=e.faviconPath,document.head.appendChild(t)}}return t})(r?.clientConfig?.theme);if(i.Ay.config({theme:{primaryColor:y()(u["--primaryColor"]).isLight()?y()(u["--primaryColor"]).darken(.5).hexa():u["--primaryColor"]}}),y()(u["--secondaryColor"])?.isLight()&&y()(u["--primaryColor"])?.isLight()?u["--complementaryColor"]=y()(u["--complementaryColor"]).darken(.5).hexa():y()(u["--secondaryColor"])?.isDark()&&y()(u["--primaryColor"])?.isDark()&&(u["--complementaryColor"]=y()(u["--complementaryColor"]).lighten(.5).hexa()),Object.keys(u).forEach((e=>{document.body.style.setProperty(e,u[e])})),(async e=>{if(e){if(e.name&&De.dispatch(ve(e.name)),e.clientConfig?.description&&De.dispatch(X(e.clientConfig?.description)),e.clientConfig?.legal&&De.dispatch(ie(e.clientConfig.legal)),e?.clientConfig?.theme?.logoPath&&De.dispatch(ce(e.clientConfig.theme.logoPath)),De.dispatch(pe(["nominatim"])),e.toolConfig&&e.toolConfig.length>0){const t=[];e.toolConfig.forEach((e=>{e.config.visible&&"search"!==e.name&&t.push(e.name),"search"===e.name&&e.config.engines.length>0&&De.dispatch(pe(e.config.engines)),"feature_info"===e.name&&Array.isArray(e.config.activeCopyTools)&&De.dispatch((0,ne.DG)(e.config.activeCopyTools)),"tree"===e.name&&Array.isArray(e.config.uploadTools)&&De.dispatch((0,re.Gn)(e.config.uploadTools)),"tree"===e.name&&e.config.showLegends&&De.dispatch((0,re.$x)(e.config.showLegends))})),De.dispatch((0,Se.pG)(t))}}else U().info("No application configuration provided, the default store will be loaded")})(r),De.subscribe((()=>{document.title=De.getState().title})),Je){const e=await(async e=>{try{U().info("Loading application info");const t=await e.info().getAppInfo();return U().info("Successfully loaded application info"),t}catch(e){U().error("Error while loading application info: ",e)}})(Je);(async e=>{e&&De.dispatch(Y(e))})(e);(async e=>{e&&De.dispatch(Ce(e))})(await(async(e,t)=>{if(t)try{U().info(`Loading user with ID ${t}`);const n=await e.user().findOne(t);return U().info(`Successfully loaded user with ID ${t}`),n}catch(e){U().error(`Error while loading user with ID ${t}: `,e)}else U().info("No user ID given, can't load it's details.")})(Je,e?.userId))}const d=Je?.getKeycloak()?.tokenParsed?.realm_access?.roles;let m=["NONE"];d&&g().featureEditRoles&&(m=((e,t)=>{const{authorizedRolesForCreate:n,authorizedRolesForUpdate:r,authorizedRolesForDelete:a,authorizedRolesForEditingGeometries:o}=t,i=[];for(const t of e)n?.some((e=>et(e,t)))&&i.push("CREATE"),r?.some((e=>et(e,t)))&&i.push("UPDATE"),a?.some((e=>et(e,t)))&&i.push("DELETE"),o?.some((e=>et(e,t)))&&i.push("EDIT_GEOMETRY");return i})(d,g().featureEditRoles)),De.dispatch((0,te.js)(m));const p=await(async e=>e?await qe(e):(U().info("No application configuration provided, the default map will be loaded"),Qe()))(r),f=await(async(e,t)=>{if(!g().plugins||0===g().plugins.length)return U().info("No plugins found"),[];U().info("Loading plugins");const n=[];for(const r of g().plugins){const o=r.name,i=r.resourcePath,l=r.exposedPaths;if(!o)return U().error("Required plugin configuration 'name' is not set"),n;if(!i)return U().error("Required plugin configuration 'resourcePath' is not set"),n;if(!l)return U().error("Required plugin configuration 'exposedPaths' is not set"),n;let s;U().info(`Loading plugin ${o} (with exposed paths ${l.join(" and ")}) from ${i}`);try{s=await Xe(o,i,l),U().info(`Successfully loaded plugin ${o}`)}catch(e){return U().error(`Could not load plugin ${o}:`,e),n}for(let r of s){const o=r.default,i=o.component;if(t){const e=t.find((e=>e.name===o.key));if(e?.config?.disabled){U().info(`"${o.key}" is disabled by the application config`);continue}}const l=()=>a().createElement(i,{map:e,client:Je});if(o.wrappedComponent=l,o.i18n&&Object.entries(o.i18n).forEach((e=>{const t=e[0],n=e[1].translation;H.A.addResourceBundle(t,"translation",n,!0,!0)})),o.reducers){const e=Ne(o.reducers);De.replaceReducer(e)}Array.isArray(o.middlewares)&&o.middlewares?.forEach((e=>Fe.addMiddleware(e))),n.push(o)}}return n})(p,r?.toolConfig);r||l.A.error({message:H.A.t("Index.applicationLoadErrorMessage"),description:H.A.t("Index.applicationLoadErrorDescription",{applicationId:n}),duration:0}),(0,I.render)(a().createElement(a().StrictMode,null,a().createElement(a().Suspense,{fallback:a().createElement("span",null)},a().createElement(K.DU,{client:Je},a().createElement(W.nu,{plugins:f},a().createElement(i.Ay,{locale:Ye(H.A.language)},a().createElement(M.Provider,{store:De},a().createElement(_().Provider,{value:p},a().createElement(Ke,null)))))))),document.getElementById("app"))}catch(e){U().error(e);const t=document.querySelectorAll(".loadmask")[0];t&&t.classList.add("loadmask-hidden"),H.A.isInitialized||(H.A.use(h.A),await H.A.init(H.p));let n="warning",r=H.A.t("Index.errorDescription");if(e?.message===He.APP_ID_NOT_SET&&(r=H.A.t("Index.errorDescriptionAppIdNotSet")),e?.message===He.APP_UNAUTHORIZED&&(r=H.A.t("Index.permissionDeniedUnauthorized"),n="error"),e?.message===He.APP_CONFIG_NOT_FOUND){const e=j().getQueryParam(window.location.href,"applicationId");r=H.A.t("Index.errorDescriptionAppConfigNotFound",{applicationId:e})}e?.message===He.APP_CONFIG_STATIC_NOT_FOUND&&(r=H.A.t("Index.errorDescriptionAppConfigStaticNotFound")),(0,I.render)(a().createElement(a().StrictMode,null,a().createElement(s.A,{className:"error-boundary",message:H.A.t("Index.errorMessage"),description:r,type:n,showIcon:!0})),document.getElementById("app"))}})()},34231:function(e,t,n){"use strict";n.d(t,{nu:function(){return i}});var r=n(24002),a=n.n(r);const o=a().createContext([]),i=({plugins:e,children:t})=>a().createElement(o.Provider,{value:e},t);t.Ay=o},20573:function(e,t,n){"use strict";n.d(t,{DU:function(){return i}});var r=n(24002),a=n.n(r);const o=a().createContext(null),i=({client:e,children:t})=>a().createElement(o.Provider,{value:e??null},t);t.Ay=o},6047:function(e,t,n){"use strict";n.d(t,{A:function(){return i},p:function(){return o}});var r=n(72635),a=n(8392);const o={resources:{de:{translation:{ApplicationInfo:{title:"Über",clientVersionTitle:"Client Version",backendVersionTitle:"Backend Version"},AddLayerModal:{addSelectedLayers:"Auswahl hinzufügen",addAllLayers:"Alle hinzufügen",inputPlaceholder:"WMS GetCapabilities URL angeben…",externalWmsFolder:"Externe Themen",title:"WMS hinzufügen",columnTitle:"Name",errorMessage:"Fehler",errorDescription:"Das Capabilities Dokument konnte nicht geladen werden, bitte prüfen Sie die URL",invalidUrlErrorMsg:"Ungültige URL. Bitte geben Sie eine gültige URL wie z.B. https://ows.terrestris.de/osm/service ein.",version:"Version",requestWmsGetCapabilitiesInstruction:"Bitte geben Sie eine gültige WMS GetCapabilities Adresse ein und bestätigen Sie die Eingabe mit 'Enter ↲' oder über den Button rechts vom Eingabefeld."},BasicMapComponent:{processedLayersFolder:"Prozessierte Layer"},CookieBanner:{info:"Wir verwenden technisch notwendige Erstanbieter-Cookies, um Ihnen die bestmögliche Nutzung unserer Website zu ermöglichen. Wenn Sie diese Website weiterhin nutzen, gehen wir davon aus, dass Sie damit zufrieden sind.",button:"Akzeptieren"},Permalink:{title:"Teilen",whatsAppTooltip:"Link via WhatsApp teilen",mailTooltip:"Link via Mail teilen",copyTooltip:"Link in die Zwischenablage kopieren",copiedToClipboard:"Link wurde in Zwischenablage kopiert",copyToClipboardFailed:"Link konnte nicht kopiert werden"},Measure:{title:"Messen",line:"Entfernung",area:"Fläche",clicktodrawline:"Zum Zeichnen einer Linie klicken",clicktodrawarea:"Zum Zeichnen einer Fläche klicken"},Draw:{point:"Punkt",line:"Linie",polygon:"Polygon",circle:"Kreis",rectangle:"Rechteck",text:"Anmerkung",modify:"Bearbeitung",upload:"Hochladen",uploadSuccess:"Die Datei wurde erfolgreich importiert",uploadError:"Der Import ist fehlgeschlagen. Bitte beachten Sie, dass nur .geojson-Dateien unterstützt werden.",delete:"Löschen",export:"Exportieren"},DeleteAllButton:{deleteAll:"Alles Löschen",confirmMessage:"Bitte bestätigen Sie, dass Sie alle Zeichnungen löschen möchten."},StylingDrawer:{openColorPalette:"Farbpalette öffnen",closeColorPalette:"Farbpalette schließen",title:"Farbschema bearbeiten"},FeatureInfo:{usageHint:"Klicken Sie in die Karte, um Detailinformationen zu erhalten."},FileUpload:{upload:"Dateien hochladen"},ImageUpload:{upload:"Bilder hochladen"},LayerTree:{transparency:"Transparenz",noLegendAvailable:"Keine Legende verfügbar"},LayerTreeContextMenu:{layerZoomToExtent:"Auf Layerausdehnung zoomen",extentError:"Konnte nicht auf die Layerausdehnung zoomen",removeLayer:"Layer entfernen",showLegend:"Legende anzeigen",hideLegend:"Legende ausblenden",downloadLayer:"Layer exportieren ({{formatName}})",editLayer:"Layer bearbeiten",layerDetails:"Eigenschaften"},LayerDetailsModal:{title:"Eigenschaften des Layers {{layerName}}",internalConfigurationButtonTooltip:"Interne Konfiguration anzeigen",internalConfigurationButtonTooltipPressed:"Interne Konfiguration verbergen"},LayerDetails:{noDataPlaceholder:"-",layerNameLabel:"Name",layerTitleLabel:"Titel",serviceAbstractLabel:"Service Beschreibung",abstractLabel:"Beschreibung",accessConstraintsLabel:"Nutzungseinschränkungen",capabilitiesUrlLabel:"GetCapabilities URL",contactLabel:"Kontakt",minScaleLabel:"Min. Maßstab",maxScaleLabel:"Max. Maßstab",bboxLabel:"Bounding Box",errorMessage:"Fehler beim Laden der Layer Capabilities"},LayerConfiguration:{errorMessage:"Fehler beim Laden der internen Konfiguration"},ToolMenu:{expand:"Menu ausklappen",collapse:"Menu einklappen",measure:"Messen",draw:"Zeichnen",featureInfo:"Karteninhalte abfragen",addWms:"WMS hinzufügen",uploadData:"Daten hochladen",print:"Export",layertree:"Karten",languageSelect:"Sprachauswahl"},PrintForm:{title:"Kartentitel",initialTitle:"Druckausgabe",titlePlaceholder:"Bitte geben Sie einen Titel ein",comment:"Bemerkung",commentPlaceholder:"Bitte geben Sie einen Kommentar ein",layout:"Vorlage",dpi:"Auflösung",format:"Format",scale:"Maßstab",downloadBtnText:"Ausdruck erzeugen",printJobErrorMsg:"Der Kartenausdruck konnte nicht erzeugt werden",initErrorMsg:"Der Kartendruck Generator konnte nicht initialisiert werden.",outputFormatPlaceholder:"Bitte wählen Sie ein Ausgabeformat aus",resolutionPlaceholder:"Bitte wählen Sie eine Ausgabequalität aus",managerErrorMessage:"Fehler bei der Initialisierung der Export-Engine"},Footer:{refSystem:"Bezugssystem",scale:"Maßstab",mousePosition:"Mausposition",imprint:"Impressum",contact:"Kontakt",privacypolicy:"Datenschutz"},Index:{applicationLoadErrorMessage:"Fehler beim Laden der Applikation",applicationLoadErrorDescription:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. Die Standardkonfiguration wird stattdessen geladen.",errorMessage:"Fehler beim Laden der Applikation",errorDescription:"Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden.",errorDescriptionAppIdNotSet:"Keine Applikations-ID angegeben. Bitte geben Sie die ID als Abfrageparameter an, z.B. ?applicationId=1909",errorDescriptionAppConfigNotFound:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden.",errorDescriptionAppConfigStaticNotFound:"Die Konfiguration der Applikation konnte nicht geladen werden.",permissionDeniedUnauthorized:"Dies ist keine öffentliche Applikation. Anmeldung erforderlich."},Nominatim:{placeholder:"Ortsname, Straßenname, Stadtteilname, POI usw."},UserMenu:{settingsMenuTitle:"Profil bearbeiten",infoMenuTitle:"Über",helpMenuTitle:"Dokumentation",logoutMenuTitle:"Ausloggen",loginMenuTitle:"Anmelden"},WmsTimeSlider:{title:"Zeitlicher Bezug",default:"Keine Daten gefunden"},UploadDataModal:{title:"Daten hochladen",uploadedDataFolder:"Hochgeladene Daten",description:"Klicken Sie oder ziehen Sie die Datei zum Hochladen in diesen Bereich",hint:"Unterstützte Dateiformate sind Shapefile (gebündelt als *.zip) und GeoTIFF",success:"Datei {{fileName}} wurde erfolgreich geladen und der Layer {{layerName}} erstellt",error:{general:"Fehler beim Hochladen der Datei {{fileName}}",maxSize:"Der Upload überschreitet das Limit von {{maxSize}} MB",supportedFormats:"Der Dateityp ist nicht unterstützt ({{supportedFormats}})",zipContent:"Mehrere Geodatensätze innerhalb eines Archivs sind nicht unterstützt"}},MultiSearch:{searchInViewBox:"Im aktuellen Kartenausschnitt suchen",searchData:"Layerdaten durchsuchen",searchNominatim:"Ortssuche (Nominatim)",nominatimTitle:"Ortssuche",searchPlaceholder:"Orts- und Datensuche…"},EditFeatureDrawer:{featureEditor:"Objekteditor",noLayerFoundError:"Kein passender Layer gefunden - das Editieren ist nicht möglich.",isFeatureLockedErrorMsg:"Das ausgewählte Objekt wird bereits in einer anderen Sitzung bearbeitet.",closeDrawerWarnTitle:"Wollen Sie wirklich fortfahren?",closeDrawerWarnContent:"Dadurch werden alle nicht gespeicherten Änderungen an dem Objekt verworfen."},EditFeatureSwitch:{usageHint:"Objekt zum Editieren auf der Karte auswählen oder…",limitedUsageHint:"Zum Editieren bitte eine Objekt auf der Karte auswählen",createFeature:"Neues Objekt erstellen"},EditFeatureFullForm:{saveErrorMsg:"Das Objekt konnte nicht gespeichert werden",deleteErrorMsg:"Das Objekt konnte nicht gelöscht werden"},EditFeatureGeometryToolbar:{draw:"Neue Geometrie zeichnen",edit:"Geometrie editieren",delete:"Geometrie löschen",undo:"Rückgängig",redo:"Wiederherstellen"},Attribution:{title:"Attribute",add:"Attribut hinzufügen",select:"Wählen Sie zunächst eine Geometrie aus.",submit:"Speichern"},AttributionRow:{missingKey:"Fehlender Name",missingValue:"Fehlender Wert",keyPlaceholder:"Name",valuePlaceholder:"Wert",keyInUse:"Dieser Name existiert bereits!"},AttributionPopConfirm:{title:"Attribut löschen?",okText:"Löschen",cancelText:"Abbrechen"},ResetButton:{title:"Zurücksetzen"},notificationDeleteText:{title:'Drücke "Speichern" um die Änderung zu bestätigen.',info:'Wenn "Übernehmen" nicht geklickt wird, werden alle an dieser Zeichnung vorgenommenen Änderungen verworfen.'},notificationApplyText:{title:"Änderungen wurden erfolgreich gespeichert!"},SaveButton:{title:"Speichern",errorNoGeometry:"Objekt kann ohne Geometrie nicht gespeichert werden."},DeleteButton:{title:"Objekt löschen",confirm:"Das Objekt wird vollständig gelöscht. Fortfahren?"},EditFeatureButton:{title:"Objekt bearbeiten"},FeaturePropertyGrid:{key:"Name",value:"Wert"},PaginationToolbar:{copyAsGeoJson:"Als GeoJSON kopieren (inkl. Geometrie)",copyAsObject:"Als Objekt kopieren (nur angezeigte Werte)",editDisabled:"Layer ist nicht editierbar",editFeature:"Feature editieren"},JsonModal:{buttonTitle:"Öffne {{propertyName}}"},ReferenceTable:{modalTitle:"Details zu {{referenceValue}}",defaultModalTitle:"Details",defaultRowPlaceholder:"Klicken Sie auf den Button, um die Details anzuzeigen"},EditReferenceTable:{modalTitle:"Details zu {{referenceValue}}",confirmDeleteTitle:"Das referenzierte Objekt wird vollständig gelöscht. Fortfahren?"}}},en:{translation:{ApplicationInfo:{title:"About",clientVersionTitle:"Client version",backendVersionTitle:"Backend version"},AddLayerModal:{addSelectedLayers:"Add selected",addAllLayers:"Add all",inputPlaceholder:"Enter a WMS GetCapabilities URL…",externalWmsFolder:"External layers",title:"Add WMS",columnTitle:"Name",errorMessage:"Error",errorDescription:"Could not load the provided Capabilities document, please check the validity of the URL",invalidUrlErrorMsg:"Invalid URL specified. Please provide an URL like https://ows.terrestris.de/osm/service",version:"Version",requestWmsGetCapabilitiesInstruction:"Please provide a valid GetCapabilities URL and submit your input by pressing the 'Enter ↲' key or by clicking on the button right of the field."},BasicMapComponent:{processedLayersFolder:"Processed layers"},CookieBanner:{info:"We use technically necessary first-party cookies to ensure that we give you the best experience on our website. If you continue to use this site we will assume that you are happy with it.",button:"Accept"},Permalink:{title:"Share",whatsAppTooltip:"Share link via WhatsApp",mailTooltip:"Share link via Mail",copyTooltip:"Copy link to Clipboard",copiedToClipboard:"Copied to clipboard",copyToClipboardFailed:"Could not copy link to clipboard"},Measure:{title:"Measure",line:"Distance",area:"Area",clicktodrawline:"Click to draw line",clicktodrawarea:"Click to draw area"},Draw:{point:"Point",line:"Line",polygon:"Polygon",circle:"Circle",rectangle:"Rectangle",text:"Annotation",modify:"Edit",upload:"Upload",uploadSuccess:"The file was uploaded successfully",uploadError:"The import failed, please note that only .geojson files are supported",delete:"Delete",export:"Export"},DeleteAllButton:{deleteAll:"Delete all",confirmMessage:"Please confirm, that you wish to delete all drawings."},StylingDrawer:{openColorPalette:"Open color palette",closeColorPalette:"Close color palette",title:"Modify color scheme"},FeatureInfo:{usageHint:"Click on the map to get details about the clicked coordinate."},FileUpload:{upload:"Upload files"},ImageUpload:{upload:"Upload images"},LayerTree:{transparency:"Transparency",noLegendAvailable:"No legend available"},LayerTreeContextMenu:{layerZoomToExtent:"Zoom to layer extent",extentError:"Could not zoom to layer extent",removeLayer:"Remove layer",showLegend:"Show legend",hideLegend:"Hide legend",downloadLayer:"Export layer as {{formatName}}",editLayer:"Edit layer",layerDetails:"Properties"},LayerDetailsModal:{title:"Properties of layer {{layerName}}",internalConfigurationButtonTooltip:"Show internal configuration",internalConfigurationButtonTooltipPressed:"Hide internal configuration"},LayerDetails:{noDataPlaceholder:"-",layerNameLabel:"Name",layerTitleLabel:"Title",serviceAbstractLabel:"Service abstract",abstractLabel:"Abstract",accessConstraintsLabel:"Access constraints",capabilitiesUrlLabel:"GetCapabilities URL",contactLabel:"Contact",minScaleLabel:"Min. scale",maxScaleLabel:"Max. scale",bboxLabel:"Bounding box",errorMessage:"Error while loading the layer capabilities"},LayerConfiguration:{errorMessage:"Error while loading the internal configuration"},ToolMenu:{expand:"Expand",collapse:"Collapse",measure:"Measure",draw:"Draw",featureInfo:"Query map features",addWms:"Add WMS",uploadData:"Upload data",print:"Export",layertree:"Maps",languageSelect:"Language selector"},PrintForm:{title:"Title",initialTitle:"Title",titlePlaceholder:"Please input a title…",comment:"Comment",commentPlaceholder:"Please enter a comment…",layout:"Layout",dpi:"Resolution",format:"Format",scale:"Scale",downloadBtnText:"Create print",printJobErrorMsg:"Could not generate PDF output",initErrorMsg:"PDF Generator could not be initialized",outputFormatPlaceholder:"Please select an output format",resolutionPlaceholder:"Please select an output quality",managerErrorMessage:"Error while initializing the export engine"},Footer:{refSystem:"Reference system",scale:"Scale",mousePosition:"Mouse position",imprint:"Imprint",contact:"Contact",privacypolicy:"Privacy"},Index:{applicationLoadErrorMessage:"Error while loading the application",applicationLoadErrorDescription:"The application with ID {{applicationId}} could not be loaded correctly. You're seeing the default application configuration.",errorMessage:"Error while loading the application",errorDescription:"An unexpected error occurred while loading the application.",errorDescriptionAppIdNotSet:"No application ID given. Please provide the ID as query parameter, e.g. ?applicationId=1909",errorDescriptionAppConfigNotFound:"The application with ID {{applicationId}} could not be loaded correctly.",errorDescriptionAppConfigStaticNotFound:"The configuration of the application could not be loaded correctly.",permissionDeniedUnauthorized:"This application is not public. Authentication required."},Nominatim:{placeholder:"Place name, street name, district name, POI, etc."},UserMenu:{settingsMenuTitle:"Edit profile",infoMenuTitle:"About",helpMenuTitle:"Documentation",logoutMenuTitle:"Logout",loginMenuTitle:"Login"},WmsTimeSlider:{title:"Time reference",default:"No data found"},UploadDataModal:{title:"Upload data",uploadedDataFolder:"Uploaded data",description:"Click or drag file to this area to upload",hint:"Supported file formats are Shapefile (bundled as *.zip) and GeoTIFF",success:"Successfully uploaded file {{fileName}} and created layer {{layerName}}",error:{general:"Error while uploading file {{fileName}}",maxSize:"The file exceeds the upload limit of {{maxSize}} MB",supportedFormats:"The given file type does not match the supported ones ({{supportedFormats}})",zipContent:"Multiple geodatasets within one archive are not supported"}},MultiSearch:{searchInViewBox:"Search in current extent",searchData:"Search layer data",searchNominatim:"Search nominatim",nominatimTitle:"Nominatim",searchPlaceholder:"Address and data search…"},EditFeatureDrawer:{featureEditor:"Feature editor",noLayerFoundError:"No layer found - the editing is not possible.",isFeatureLockedErrorMsg:"The selected feature is already being edited in another session.",closeDrawerWarnTitle:"Do you really want to quit?",closeDrawerWarnContent:"This will discard any unsaved changes to the feature."},EditFeatureSwitch:{usageHint:"Select an existing feature for editing on the map or…",limitedUsageHint:"To edit please select an object on the map",createFeature:"Create new feature"},EditFeatureFullForm:{saveErrorMsg:"Error while saving the feature",deleteErrorMsg:"Error while deleting the feature"},EditFeatureGeometryToolbar:{draw:"Draw new geometry",edit:"Edit geometry",delete:"Delete geometry",undo:"Undo",redo:"Redo"},Attribution:{title:"Properties",add:"Add Property",select:"Please select a geometry first.",submit:"Apply"},AttributionRow:{missingKey:"Missing Key",missingValue:"Missing Value",keyPlaceholder:"Key",valuePlaceholder:"Value",keyInUse:"Key already exists!"},AttributionPopConfirm:{title:"Delete property?",okText:"Delete",cancelText:"Cancel"},ResetButton:{title:"Reset"},notificationDeleteText:{title:'Press "Apply" to confirm changes.',info:'Not pressing "Apply" will reverse all changes made to this drawing.'},notificationApplyText:{title:"Changes were applied successfully!"},SaveButton:{title:"Save",errorNoGeometry:"Cannot save feature without geometry."},DeleteButton:{title:"Delete feature",confirm:"The feature will be deleted completely. Proceed?"},EditFeatureButton:{title:"Edit feature"},FeaturePropertyGrid:{key:"Name",value:"Value"},PaginationToolbar:{copyAsGeoJson:"Copy as GeoJSON (incl. geometry)",copyAsObject:"Copy as object (displayed values only)",editDisabled:"This layer is not editable",editFeature:"Edit feature"},JsonModal:{buttonTitle:"Show {{propertyName}}"},ReferenceTable:{modalTitle:"Details for {{referenceValue}}",defaultModalTitle:"Details",defaultRowPlaceholder:"Click the button to show the details"},EditReferenceTable:{modalTitle:"Details for {{referenceValue}}",confirmDeleteTitle:"The referenced feature will be deleted completely. Proceed?"}}}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},returnNull:!1};r.Ay.use(a.initReactI18next),r.Ay.options=o;var i=r.Ay},19513:function(e,t,n){Promise.all([n.e(255),n.e(76),n.e(195)]).then(n.bind(n,49476))},6259:function(e,t,n){"use strict";n.d(t,{WU:function(){return a},jD:function(){return o}});const r=(0,n(15452).Z0)({name:"addLayerModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:a,hide:o,toggle:i}=r.actions;t.Ay=r.reducer},70372:function(e,t,n){"use strict";n.d(t,{Ht:function(){return a},J7:function(){return o},RB:function(){return s},cL:function(){return i},js:function(){return l}});const r=(0,n(15452).Z0)({name:"editFeature",initialState:{layerId:null,feature:null,userEditMode:["NONE"],formDirty:!1},reducers:{setLayerId(e,t){e.layerId=t.payload},setFeature(e,t){e.feature=t.payload},reset(e){e.layerId=null,e.feature=null},setUserEditMode(e,t){e.userEditMode=t.payload},setFormDirty(e,t){e.formDirty=t.payload}}}),{setLayerId:a,setFeature:o,reset:i,setUserEditMode:l,setFormDirty:s}=r.actions;t.Ay=r.reducer},55349:function(e,t,n){"use strict";n.d(t,{WU:function(){return a},jD:function(){return o}});const r=(0,n(15452).Z0)({name:"editFeatureDrawerOpen",initialState:!1,reducers:{show(){return!0},hide(){return!1},toggle(e){return!e}}}),{show:a,hide:o,toggle:i}=r.actions;t.Ay=r.reducer},72320:function(e,t,n){"use strict";n.d(t,{D8:function(){return a},DG:function(){return s},SY:function(){return l}});var r=n(15452);let a=function(e){return e.COPY_AS_GEOJSON="COPY_AS_GEOJSON",e.COPY_AS_OBJECT="COPY_AS_OBJECT",e}({});const o={enabled:!1,activeCopyTools:[a.COPY_AS_GEOJSON,a.COPY_AS_OBJECT]},i=(0,r.Z0)({name:"featureInfo",initialState:o,reducers:{setFeatureInfoConfig(e,t){t.payload},setFeatureInfoEnabled(e,t){e.enabled=t.payload},setFeatureInfoActiveCopyTools(e,t){e.activeCopyTools=t.payload}}}),{setFeatureInfoEnabled:l,setFeatureInfoActiveCopyTools:s}=i.actions;t.Ay=i.reducer},18992:function(e,t,n){"use strict";n.d(t,{WU:function(){return o},jD:function(){return i},wT:function(){return a}});const r=(0,n(15452).Z0)({name:"layerDetailsModal",initialState:{visible:!1},reducers:{setLayer(e,t){e.layerId=t.payload},show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{setLayer:a,show:o,hide:i,toggle:l}=r.actions;t.Ay=r.reducer},6107:function(e,t,n){"use strict";n.d(t,{$x:function(){return c},Gn:function(){return s},NG:function(){return l},Rt:function(){return a}});var r=n(15452);let a=function(e){return e.addWMS="addWMS",e.dataUpload="dataUpload",e}({});const o={enabled:!1,activeUploadTools:[a.addWMS,a.dataUpload],showLegends:!1},i=(0,r.Z0)({name:"tree",initialState:o,reducers:{setLayerTreeConfig(e,t){t.payload},setLayerTreeEnabled(e,t){e.enabled=t.payload},setLayerTreeActiveUploadTools(e,t){e.activeUploadTools=t.payload},setLayerTreeShowLegends(e,t){e.showLegends=t.payload}}}),{setLayerTreeEnabled:l,setLayerTreeActiveUploadTools:s,setLayerTreeShowLegends:c}=i.actions;t.Ay=i.reducer},24341:function(e,t,n){"use strict";n.d(t,{BC:function(){return s},ik:function(){return l}});const r=(0,n(15452).Z0)({name:"print",initialState:{printApp:"default",customMapParams:{},customParams:{printLegend:!1}},reducers:{setCustomMapParams:(e,t)=>{e.customMapParams=t.payload},setCustomParams:(e,t)=>{e.customParams=t.payload},setPrintApp:(e,t)=>{e.printApp=t.payload},addCustomMapParam:(e,t)=>{e.customMapParams={...e.customMapParams,...t.payload}},addCustomParam:(e,t)=>{e.customParams={...e.customParams,...t.payload}}}}),{setCustomMapParams:a,setCustomParams:o,addCustomMapParam:i,addCustomParam:l,setPrintApp:s}=r.actions;t.Ay=r.reducer},456:function(e,t,n){"use strict";n.d(t,{nR:function(){return a}});const r=(0,n(15452).Z0)({name:"selectedFeatures",initialState:{},reducers:{setSelectedFeatures(e,t){return t.payload}}}),{setSelectedFeatures:a}=r.actions;t.Ay=r.reducer},50019:function(e,t,n){"use strict";n.d(t,{en:function(){return a}});const r=(0,n(15452).Z0)({name:"stylingDrawerVisibility",initialState:!1,reducers:{setStylingDrawerVisibility:(e,t)=>t.payload}}),{setStylingDrawerVisibility:a}=r.actions;t.Ay=r.reducer},25555:function(e,t,n){"use strict";n.d(t,{R_:function(){return a},pG:function(){return o}});const r=(0,n(15452).Z0)({name:"toolMenu",initialState:{activeKeys:[],availableTools:["default"]},reducers:{setActiveKeys(e,t){e.activeKeys=[...t.payload]},setAvailableTools(e,t){e.availableTools=[...t.payload]}}}),{setActiveKeys:a,setAvailableTools:o}=r.actions;t.Ay=r.reducer},55860:function(e,t,n){"use strict";n.d(t,{WU:function(){return a},jD:function(){return o}});const r=(0,n(15452).Z0)({name:"uploadDataModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:a,hide:o,toggle:i}=r.actions;t.Ay=r.reducer},12809:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},11317:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},13918:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},26612:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},49648:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},40897:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},54402:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},8177:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},22239:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},42253:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},90771:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},53206:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},39803:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},40581:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},67179:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},50590:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},75742:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},57378:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},83847:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},8285:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},69837:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},40679:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},46948:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},23907:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},20319:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},99756:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},45107:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},30224:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},29120:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},99136:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},70253:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},27711:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},48086:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},52725:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},7578:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},84760:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},66957:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i},47002:function(e,t,n){"use strict";var r=n(71354),a=n.n(r),o=n(76314),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.A=i}}]);
//# sourceMappingURL=common.a2c5f807c717338f4073.js.map