{"version":3,"file":"5798.e750e4181623b0b9.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/render/Event.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/render/canvas/ZIndexContext.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/renderer/Layer.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/renderer/canvas/Layer.js"],"sourcesContent":["/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nclass RenderEvent extends Event {\n  /**\n   * @param {import(\"./EventType.js\").default} type Type.\n   * @param {import(\"../transform.js\").Transform} [inversePixelTransform] Transform for\n   *     CSS pixels to rendered pixels.\n   * @param {import(\"../Map.js\").FrameState} [frameState] Frame state.\n   * @param {?(CanvasRenderingContext2D|WebGLRenderingContext)} [context] Context.\n   */\n  constructor(type, inversePixelTransform, frameState, context) {\n    super(type);\n\n    /**\n     * Transform from CSS pixels (relative to the top-left corner of the map viewport)\n     * to rendered pixels on this event's `context`. Only available when a Canvas renderer is used, null otherwise.\n     * @type {import(\"../transform.js\").Transform|undefined}\n     * @api\n     */\n    this.inversePixelTransform = inversePixelTransform;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {import(\"../Map.js\").FrameState|undefined}\n     * @api\n     */\n    this.frameState = frameState;\n\n    /**\n     * Canvas context. Not available when the event is dispatched by the map. For Canvas 2D layers,\n     * the context will be the 2D rendering context.  For WebGL layers, the context will be the WebGL\n     * context.\n     * @type {CanvasRenderingContext2D|WebGLRenderingContext|undefined}\n     * @api\n     */\n    this.context = context;\n  }\n}\n\nexport default RenderEvent;\n","/**\n * @module ol/render/canvas/ZIndexContext\n */\n\nimport {getSharedCanvasContext2D} from '../../dom.js';\n\n/** @typedef {CanvasRenderingContext2D & {globalAlpha: any}} ZIndexContextProxy */\n\n/**\n * @extends {CanvasRenderingContext2D}\n */\nclass ZIndexContext {\n  constructor() {\n    /**\n     * @private\n     * @type {Array<Array<*>>}\n     */\n    this.instructions_ = [];\n    /**\n     * @type {number}\n     */\n    this.zIndex = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n    this.offset_ = 0;\n\n    /**\n     * @private\n     * @type {ZIndexContextProxy}\n     */\n    this.context_ = /** @type {ZIndexContextProxy} */ (\n      new Proxy(getSharedCanvasContext2D(), {\n        get: (target, property) => {\n          if (\n            typeof (/** @type {*} */ (getSharedCanvasContext2D())[property]) !==\n            'function'\n          ) {\n            // we only accept calling functions on the proxy, not accessing properties\n            return undefined;\n          }\n          if (!this.instructions_[this.zIndex + this.offset_]) {\n            this.instructions_[this.zIndex + this.offset_] = [];\n          }\n          this.instructions_[this.zIndex + this.offset_].push(property);\n          return this.pushMethodArgs_;\n        },\n        set: (target, property, value) => {\n          if (!this.instructions_[this.zIndex + this.offset_]) {\n            this.instructions_[this.zIndex + this.offset_] = [];\n          }\n          this.instructions_[this.zIndex + this.offset_].push(property, value);\n          return true;\n        },\n      })\n    );\n  }\n\n  /**\n   * @private\n   * @param {...*} args Args.\n   * @return {ZIndexContext} This.\n   */\n  pushMethodArgs_ = (...args) => {\n    this.instructions_[this.zIndex + this.offset_].push(args);\n    return this;\n  };\n\n  /**\n   * Push a function that renders to the context directly.\n   * @param {function(CanvasRenderingContext2D): void} render Function.\n   */\n  pushFunction(render) {\n    this.instructions_[this.zIndex + this.offset_].push(render);\n  }\n\n  /**\n   * Get a proxy for CanvasRenderingContext2D which does not support getting state\n   * (e.g. `context.globalAlpha`, which will return `undefined`). To set state, if it relies on a\n   * previous state (e.g. `context.globalAlpha = context.globalAlpha / 2`), set a function,\n   * e.g. `context.globalAlpha = (context) => context.globalAlpha / 2`.\n   * @return {ZIndexContextProxy} Context.\n   */\n  getContext() {\n    return this.context_;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  draw(context) {\n    this.instructions_.forEach((instructionsAtIndex) => {\n      for (let i = 0, ii = instructionsAtIndex.length; i < ii; ++i) {\n        const property = instructionsAtIndex[i];\n        if (typeof property === 'function') {\n          property(context);\n          continue;\n        }\n        const instructionAtIndex = instructionsAtIndex[++i];\n        if (typeof (/** @type {*} */ (context)[property]) === 'function') {\n          /** @type {*} */ (context)[property](...instructionAtIndex);\n        } else {\n          if (typeof instructionAtIndex === 'function') {\n            /** @type {*} */ (context)[property] = instructionAtIndex(context);\n            continue;\n          }\n          /** @type {*} */ (context)[property] = instructionAtIndex;\n        }\n      }\n    });\n  }\n\n  clear() {\n    this.instructions_.length = 0;\n    this.zIndex = 0;\n    this.offset_ = 0;\n  }\n\n  /**\n   * Offsets the zIndex by the highest current zIndex. Useful for rendering multiple worlds or tiles, to\n   * avoid conflicting context.clip() or context.save()/restore() calls.\n   */\n  offset() {\n    this.offset_ = this.instructions_.length;\n    this.zIndex = 0;\n  }\n}\n\nexport default ZIndexContext;\n","/**\n * @module ol/renderer/Layer\n */\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport EventType from '../events/EventType.js';\nimport {abstract} from '../util.js';\n\nconst maxStaleKeys = 5;\n\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nclass LayerRenderer extends Observable {\n  /**\n   * @param {LayerType} layer Layer.\n   */\n  constructor(layer) {\n    super();\n\n    /**\n     * The renderer is initialized and ready to render.\n     * @type {boolean}\n     */\n    this.ready = true;\n\n    /** @private */\n    this.boundHandleImageChange_ = this.handleImageChange_.bind(this);\n\n    /**\n     * @private\n     * @type {LayerType}\n     */\n    this.layer_ = layer;\n\n    /**\n     * @type {Array<string>}\n     * @private\n     */\n    this.staleKeys_ = new Array();\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.maxStaleKeys = maxStaleKeys;\n  }\n\n  /**\n   * @return {Array<string>} Get the list of stale keys.\n   */\n  getStaleKeys() {\n    return this.staleKeys_;\n  }\n\n  /**\n   * @param {string} key The new stale key.\n   */\n  prependStaleKey(key) {\n    this.staleKeys_.unshift(key);\n    if (this.staleKeys_.length > this.maxStaleKeys) {\n      this.staleKeys_.length = this.maxStaleKeys;\n    }\n  }\n\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").FeatureLike>>} Promise that resolves with\n   * an array of features.\n   */\n  getFeatures(pixel) {\n    return abstract();\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   */\n  getData(pixel) {\n    return null;\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @abstract\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  prepareFrame(frameState) {\n    return abstract();\n  }\n\n  /**\n   * Render the layer.\n   * @abstract\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement|null} target Target that may be used to render content to.\n   * @return {HTMLElement|null} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {Array<import(\"./Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    matches,\n  ) {\n    return undefined;\n  }\n\n  /**\n   * @return {LayerType} Layer.\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   * @abstract\n   */\n  handleFontsChanged() {}\n\n  /**\n   * Handle changes in image state.\n   * @param {import(\"../events/Event.js\").default} event Image change event.\n   * @private\n   */\n  handleImageChange_(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    if (\n      image.getState() === ImageState.LOADED ||\n      image.getState() === ImageState.ERROR\n    ) {\n      this.renderIfReadyAndVisible();\n    }\n  }\n\n  /**\n   * Load the image if not already loaded, and register the image change\n   * listener if needed.\n   * @param {import(\"../Image.js\").default} image Image.\n   * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n   * @protected\n   */\n  loadImage(image) {\n    let imageState = image.getState();\n    if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n      image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n    }\n    if (imageState == ImageState.IDLE) {\n      image.load();\n      imageState = image.getState();\n    }\n    return imageState == ImageState.LOADED;\n  }\n\n  /**\n   * @protected\n   */\n  renderIfReadyAndVisible() {\n    const layer = this.getLayer();\n    if (layer && layer.getVisible() && layer.getSourceState() === 'ready') {\n      layer.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  renderDeferred(frameState) {}\n\n  /**\n   * Clean up.\n   * @override\n   */\n  disposeInternal() {\n    delete this.layer_;\n    super.disposeInternal();\n  }\n}\n\nexport default LayerRenderer;\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport {equals} from '../../array.js';\nimport {asArray} from '../../color.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {\n  getBottomLeft,\n  getBottomRight,\n  getHeight,\n  getTopLeft,\n  getTopRight,\n  getWidth,\n} from '../../extent.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport ZIndexContext from '../../render/canvas/ZIndexContext.js';\nimport {\n  apply as applyTransform,\n  compose as composeTransform,\n  create as createTransform,\n  makeInverse,\n  toString as toTransformString,\n} from '../../transform.js';\nimport LayerRenderer from '../Layer.js';\n\n/**\n * @type {Array<HTMLCanvasElement>}\n */\nexport const canvasPool = [];\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet pixelContext = null;\n\nfunction createPixelContext() {\n  pixelContext = createCanvasContext2D(1, 1, undefined, {\n    willReadFrequently: true,\n  });\n}\n\n/**\n * @abstract\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\nclass CanvasLayerRenderer extends LayerRenderer {\n  /**\n   * @param {LayerType} layer Layer.\n   */\n  constructor(layer) {\n    super(layer);\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.container = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedResolution;\n\n    /**\n     * A temporary transform.  The values in this transform should only be used in a\n     * function that sets the values.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tempTransform = createTransform();\n\n    /**\n     * The transform for rendered pixels to viewport CSS pixels.  This transform must\n     * be set when rendering a frame and may be used by other functions after rendering.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.pixelTransform = createTransform();\n\n    /**\n     * The transform for viewport CSS pixels to rendered pixels.  This transform must\n     * be set when rendering a frame and may be used by other functions after rendering.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.inversePixelTransform = createTransform();\n\n    /**\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = null;\n\n    /**\n     * @private\n     * @type {ZIndexContext}\n     */\n    this.deferredContext_ = null;\n\n    /**\n     * @type {boolean}\n     */\n    this.containerReused = false;\n\n    /**\n     * @protected\n     * @type {import(\"../../Map.js\").FrameState|null}\n     */\n    this.frameState = null;\n  }\n\n  /**\n   * @param {import('../../DataTile.js').ImageLike} image Image.\n   * @param {number} col The column index.\n   * @param {number} row The row index.\n   * @return {Uint8ClampedArray|null} The image data.\n   */\n  getImageData(image, col, row) {\n    if (!pixelContext) {\n      createPixelContext();\n    }\n    pixelContext.clearRect(0, 0, 1, 1);\n\n    let data;\n    try {\n      pixelContext.drawImage(image, col, row, 1, 1, 0, 0, 1, 1);\n      data = pixelContext.getImageData(0, 0, 1, 1).data;\n    } catch {\n      pixelContext = null;\n      return null;\n    }\n    return data;\n  }\n\n  /**\n   * @param {import('../../Map.js').FrameState} frameState Frame state.\n   * @return {string} Background color.\n   */\n  getBackground(frameState) {\n    const layer = this.getLayer();\n    let background = layer.getBackground();\n    if (typeof background === 'function') {\n      background = background(frameState.viewState.resolution);\n    }\n    return background || undefined;\n  }\n\n  /**\n   * Get a rendering container from an existing target, if compatible.\n   * @param {HTMLElement} target Potential render target.\n   * @param {string} transform CSS Transform.\n   * @param {string} [backgroundColor] Background color.\n   */\n  useContainer(target, transform, backgroundColor) {\n    const layerClassName = this.getLayer().getClassName();\n    let container, context;\n    if (\n      target &&\n      target.className === layerClassName &&\n      (!backgroundColor ||\n        (target &&\n          target.style.backgroundColor &&\n          equals(\n            asArray(target.style.backgroundColor),\n            asArray(backgroundColor),\n          )))\n    ) {\n      const canvas = target.firstElementChild;\n      if (canvas instanceof HTMLCanvasElement) {\n        context = canvas.getContext('2d');\n      }\n    }\n    if (context && context.canvas.style.transform === transform) {\n      // Container of the previous layer renderer can be used.\n      this.container = target;\n      this.context = context;\n      this.containerReused = true;\n    } else if (this.containerReused) {\n      // Previously reused container cannot be used any more.\n      this.container = null;\n      this.context = null;\n      this.containerReused = false;\n    } else if (this.container) {\n      this.container.style.backgroundColor = null;\n    }\n    if (!this.container) {\n      container = document.createElement('div');\n      container.className = layerClassName;\n      let style = container.style;\n      style.position = 'absolute';\n      style.width = '100%';\n      style.height = '100%';\n      context = createCanvasContext2D();\n      const canvas = context.canvas;\n      container.appendChild(canvas);\n      style = canvas.style;\n      style.position = 'absolute';\n      style.left = '0';\n      style.transformOrigin = 'top left';\n      this.container = container;\n      this.context = context;\n    }\n    if (\n      !this.containerReused &&\n      backgroundColor &&\n      !this.container.style.backgroundColor\n    ) {\n      this.container.style.backgroundColor = backgroundColor;\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n   * @protected\n   */\n  clipUnrotated(context, frameState, extent) {\n    const topLeft = getTopLeft(extent);\n    const topRight = getTopRight(extent);\n    const bottomRight = getBottomRight(extent);\n    const bottomLeft = getBottomLeft(extent);\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    const inverted = this.inversePixelTransform;\n    applyTransform(inverted, topLeft);\n    applyTransform(inverted, topRight);\n    applyTransform(inverted, bottomRight);\n    applyTransform(inverted, bottomLeft);\n\n    context.save();\n    context.beginPath();\n    context.moveTo(Math.round(topLeft[0]), Math.round(topLeft[1]));\n    context.lineTo(Math.round(topRight[0]), Math.round(topRight[1]));\n    context.lineTo(Math.round(bottomRight[0]), Math.round(bottomRight[1]));\n    context.lineTo(Math.round(bottomLeft[0]), Math.round(bottomLeft[1]));\n    context.clip();\n  }\n\n  /**\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @protected\n   */\n  prepareContainer(frameState, target) {\n    const extent = frameState.extent;\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    const pixelRatio = frameState.pixelRatio;\n    const width = Math.round((getWidth(extent) / resolution) * pixelRatio);\n    const height = Math.round((getHeight(extent) / resolution) * pixelRatio);\n    // set forward and inverse pixel transforms\n    composeTransform(\n      this.pixelTransform,\n      frameState.size[0] / 2,\n      frameState.size[1] / 2,\n      1 / pixelRatio,\n      1 / pixelRatio,\n      rotation,\n      -width / 2,\n      -height / 2,\n    );\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    const canvasTransform = toTransformString(this.pixelTransform);\n    this.useContainer(target, canvasTransform, this.getBackground(frameState));\n\n    if (!this.containerReused) {\n      const canvas = this.context.canvas;\n      if (canvas.width != width || canvas.height != height) {\n        canvas.width = width;\n        canvas.height = height;\n      } else {\n        this.context.clearRect(0, 0, width, height);\n      }\n      if (canvasTransform !== canvas.style.transform) {\n        canvas.style.transform = canvasTransform;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  dispatchRenderEvent_(type, context, frameState) {\n    const layer = this.getLayer();\n    if (layer.hasListener(type)) {\n      const event = new RenderEvent(\n        type,\n        this.inversePixelTransform,\n        frameState,\n        context,\n      );\n      layer.dispatchEvent(event);\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  preRender(context, frameState) {\n    this.frameState = frameState;\n    if (frameState.declutter) {\n      return;\n    }\n    this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  postRender(context, frameState) {\n    if (frameState.declutter) {\n      return;\n    }\n    this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n  }\n\n  /**\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   */\n  renderDeferredInternal(frameState) {}\n\n  /**\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @return {import('../../render/canvas/ZIndexContext.js').ZIndexContextProxy} Context.\n   */\n  getRenderContext(frameState) {\n    if (frameState.declutter && !this.deferredContext_) {\n      this.deferredContext_ = new ZIndexContext();\n    }\n    return frameState.declutter\n      ? this.deferredContext_.getContext()\n      : this.context;\n  }\n\n  /**\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @override\n   */\n  renderDeferred(frameState) {\n    if (!frameState.declutter) {\n      return;\n    }\n    this.dispatchRenderEvent_(\n      RenderEventType.PRERENDER,\n      this.context,\n      frameState,\n    );\n    if (frameState.declutter && this.deferredContext_) {\n      this.deferredContext_.draw(this.context);\n      this.deferredContext_.clear();\n    }\n    this.renderDeferredInternal(frameState);\n    this.dispatchRenderEvent_(\n      RenderEventType.POSTRENDER,\n      this.context,\n      frameState,\n    );\n  }\n\n  /**\n   * Creates a transform for rendering to an element that will be rotated after rendering.\n   * @param {import(\"../../coordinate.js\").Coordinate} center Center.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} width Width of the rendered element (in pixels).\n   * @param {number} height Height of the rendered element (in pixels).\n   * @param {number} offsetX Offset on the x-axis in view coordinates.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getRenderTransform(\n    center,\n    resolution,\n    rotation,\n    pixelRatio,\n    width,\n    height,\n    offsetX,\n  ) {\n    const dx1 = width / 2;\n    const dy1 = height / 2;\n    const sx = pixelRatio / resolution;\n    const sy = -sx;\n    const dx2 = -center[0] + offsetX;\n    const dy2 = -center[1];\n    return composeTransform(\n      this.tempTransform,\n      dx1,\n      dy1,\n      sx,\n      sy,\n      -rotation,\n      dx2,\n      dy2,\n    );\n  }\n\n  /**\n   * Clean up.\n   * @override\n   */\n  disposeInternal() {\n    delete this.frameState;\n    super.disposeInternal();\n  }\n}\n\nexport default CanvasLayerRenderer;\n"],"names":["RenderEvent","type","inversePixelTransform","frameState","context","Proxy","target","property","value","args","render","instructionsAtIndex","i","ii","instructionAtIndex","LayerRenderer","Observable","layer","key","pixel","coordinate","hitTolerance","callback","matches","event","image","ImageState","imageState","canvasPool","pixelContext","Layer","col","row","data","undefined","background","transform","backgroundColor","container","layerClassName","canvas","HTMLCanvasElement","document","style","extent","topLeft","topRight","bottomRight","bottomLeft","inverted","Math","resolution","rotation","pixelRatio","width","height","canvasTransform","ZIndexContext","center","offsetX","sx","dx2","dy2"],"mappings":"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"}