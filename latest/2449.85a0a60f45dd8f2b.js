"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["2449"],{63768:function(e,t,r){r.r(t),r.d(t,{Legend:function(){return o}});var n=r(76395),a=r(36693),l=r(46103),g=r(96604),s=r(92813),A=r(18635),c=r(70198);let i=(e,t)=>e.get("legendUrl")?e.get("legendUrl"):A.A.getLegendGraphicUrl(e,t),o=({className:e,layer:t,extraParams:r,onError:A,errorMsg:o,headers:u,loadingMask:d=!0,...f})=>{let[h,m]=(0,n.useState)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),[E,C]=(0,n.useState)(i(t,r)),[U,b]=(0,n.useState)(!1),[k,p]=(0,n.useState)(!1),w=(0,n.useCallback)(e=>{s.A.warn(`Image error for legend of "${t.get("name")}".`),b(!0),A&&A(e)},[t,A]),L=(0,n.useCallback)(async()=>{try{p(!0);let e=await fetch(E,{headers:u});if(!e.ok)throw Error("No successful response returned while getting the legend graphic");let t=await e.blob();m(e=>(URL.revokeObjectURL(e),URL.createObjectURL(t)))}catch(e){s.A.error("Error while setting the img src: ",e),w(e)}finally{p(!1)}},[w,u,E]);(0,n.useEffect)(()=>{L()},[L]),(0,n.useEffect)(()=>{C(i(t,r))},[t,r,L]);let _=t.get("name")?t.get("name")+" legend":"layer legend";return n.createElement("div",{className:`${c.$}legend ${e||""}`,...f},n.createElement(g.A,{spinning:!!d&&k,indicator:n.createElement(l.g,{icon:a.s4k})},U?n.createElement("div",{className:"legend-load-error"},o):n.createElement("img",{src:h,alt:_,onError:w.bind(void 0)})))};t.default=o},70198:function(e,t,r){r.d(t,{$:function(){return n}});let n="react-geo-"},92813:function(e,t,r){var n=r(73065);let a=r.n(n)().getLogger("app-logger");a.setLevel("DEBUG"),t.A=a}}]);
//# sourceMappingURL=2449.85a0a60f45dd8f2b.js.map