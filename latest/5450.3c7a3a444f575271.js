"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5450"],{7323:function(e,t,n){n.r(t),n.d(t,{default:function(){return D},GeoLocationButton:function(){return A}});var a=n(9948),r=n.n(a),o=n(14293),i=n.n(o),s=n(16120),c=n.n(s),u=n(92588),l=n.n(u),g=n(12162),d=n.n(g),f=n(99973),h=n.n(f),m=n(35586),M=n.n(m),p=n(42893),b=n(41357),w=n.n(b),y=n(53220),C=n.n(y),P=n(50268),k=n.n(P),v=class{static radToDeg=e=>360*e/(2*Math.PI);static degToRad=e=>e*Math.PI*2/360;static mod=e=>(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)},E=n(39660),_=n(49968),I=n.p+"6afbd13a3ce1b95d.png",$=n.p+"3380da3c8b677218.png",Z=n(35703),T=n(32022);let A=({className:e,enableTracking:t=!1,follow:n=!1,onError:o=()=>void 0,onGeoLocationChange:s=()=>void 0,pressed:u,showMarker:g=!0,trackingOptions:f,...m})=>{(({active:e,enableTracking:t=!1,follow:n=!1,onError:r,onGeoLocationChange:o,showMarker:s=!1,trackingOptions:u={enableHighAccuracy:!0,maximumAge:1e4,timeout:6e5}})=>{let g=(0,E.Z)(),[f,m]=(0,a.useState)(),b=(0,a.useMemo)(()=>new(d())([],"XYZM"),[]),y=(0,a.useMemo)(()=>new(c()),[]);(0,_.n)(()=>new(M())({properties:{name:"react-geo_geolocationlayer"},source:new(w())({features:[y]}),style:e=>{let t=e.get("heading"),n=Number.isFinite(t)&&0!==t?I:$,a=Number.isFinite(t)&&0!==t?t*Math.PI/180:0;return[new(k())({image:new(C())({rotation:a,src:n})})]}}),[],s&&e);let P=(0,a.useCallback)(e=>{let t=e.target,n=t.getPosition()??[0,0],a=t.getAccuracy(),r=t.getHeading()||0,i=t.getSpeed()||0,s=n[0],c=n[1],u=b.getCoordinates(),l=u[u.length-1],g=l&&l[2];if(g){let e=r-v.mod(g);Math.abs(e)>Math.PI&&(e=-(e>=0?1:-1)*(2*Math.PI-Math.abs(e))),r=g+e}b.appendCoordinate([s,c,r,Date.now()]),b.setCoordinates(b.getCoordinates().slice(-20));let d={position:n,accuracy:a,heading:r,speed:i};m(d),o?.(d)},[b,o]),Z=(0,a.useMemo)(()=>e?new(l())({projection:g?.getView().getProjection()}):void 0,[e,g]),T=(0,a.useCallback)((e,t,n)=>{let a=(g?.getSize()??[0,0])[1];return[e[0]-Math.sin(t)*a*n/4,e[1]+Math.cos(t)*a*n/4]},[g]);return(0,a.useEffect)(()=>{if(!r||!Z)return;let e=Z.on("error",r);return()=>{(0,p.unByKey)(e)}},[Z]),(0,a.useEffect)(()=>{if(!Z)return;let e=Z.on("change",P);return()=>{(0,p.unByKey)(e)}},[Z,P]),(0,a.useEffect)(()=>{Z?.setTracking(t)},[t,Z]),(0,a.useEffect)(()=>{Z?.setTrackingOptions(u)},[Z,u]),(0,a.useEffect)(()=>{let e=Date.now()-750;e=Math.max(e,0);let t=b.getCoordinateAtM(e,!0);if(!i()(t)&&(n&&(g?.getView().setCenter(T([t[0],t[1]],-t[2],g?.getView().getResolution()??0)),g?.getView().setRotation(-t[2])),s)){let e=new(h())([t[0],t[1]]);y.setGeometry(e)}},[f,s,n,g,b,T,y])})({active:!!u,enableTracking:u&&t,follow:n,onError:o,onGeoLocationChange:s,showMarker:g,trackingOptions:f});let b=e?`${e} ${Z.M}geolocationbutton`:`${Z.M}geolocationbutton`;return r().createElement(T.Z,{pressed:u,className:b,...m})};var D=A},32022:function(e,t,n){var a=n(9948),r=n.n(a),o=n(40440),i=n(76534),s=n(35703);t.Z=({type:e="primary",pressed:t=!1,tooltipProps:n={mouseEnterDelay:1.5},className:a,tooltip:c,tooltipPlacement:u,pressedIcon:l,icon:g,children:d,value:f,onClick:h,onChange:m=()=>void 0,...M})=>{let p=`${s.M}togglebutton`,b=a?`${a} ${p}`:p,w="";return t&&(w=" btn-pressed"),r().createElement(o.Z,{title:c,placement:u,...n},r().createElement(i.ZP,{type:e,onClick:e=>{h&&(h(e),e.defaultPrevented)||m(e,f)},onChange:m,className:`${b}${w}`,"aria-pressed":t,icon:t?l:g,...M},d))}},35703:function(e,t,n){n.d(t,{M:function(){return a}});let a="react-geo-"}}]);
//# sourceMappingURL=5450.3c7a3a444f575271.js.map