"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5798"],{41173:function(t,e,n){var s=n(9520);class r extends s.default{constructor(t,e,n,s){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=s}}e.Z=r},33162:function(t,e,n){var s=n(85386);e.Z=class t{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,s.W8)(),{get:(t,e)=>{if("function"==typeof(0,s.W8)()[e])return!this.instructions_[this.zIndex+this.offset_]&&(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(!this.instructions_[this.zIndex+this.offset_]&&(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushMethodArgs_=(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this);pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let n=0,s=e.length;n<s;++n){let s=e[n];if("function"==typeof s){s(t);continue}let r=e[++n];if("function"==typeof t[s])t[s](...r);else{if("function"==typeof r){t[s]=r(t);continue}t[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},4722:function(t,e,n){n.d(e,{Z:function(){return y},r:function(){return p}});var s=n("73381"),r=n("11256"),i=n("56834"),a=n("49179");class o extends i.default{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=[],this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return(0,a.abstract)()}getData(t){return null}prepareFrame(t){return(0,a.abstract)()}renderFrame(t,e){return(0,a.abstract)()}forEachFeatureAtCoordinate(t,e,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let e=t.target;(e.getState()===r.default.LOADED||e.getState()===r.default.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=r.default.LOADED&&e!=r.default.ERROR&&t.addEventListener(s.default.CHANGE,this.boundHandleImageChange_),e==r.default.IDLE&&(t.load(),e=t.getState()),e==r.default.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}var h=o,l=n("41173"),d=n("97208"),u=n("33162"),c=n("82359"),f=n("11820"),g=n("85386"),_=n("79682"),x=n("21915");let p=[],m=null;var y=class t extends h{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,c.Ue)(),this.pixelTransform=(0,c.Ue)(),this.inversePixelTransform=(0,c.Ue)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){let s;!m&&(m=(0,g.E4)(1,1,void 0,{willReadFrequently:!0})),m.clearRect(0,0,1,1);try{m.drawImage(t,e,n,1,1,0,0,1,1),s=m.getImageData(0,0,1,1).data}catch(t){return m=null,null}return s}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){let s,r;let i=this.getLayer().getClassName();if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&(0,_.fS)((0,f._2)(t.style.backgroundColor),(0,f._2)(n)))){let e=t.firstElementChild;e instanceof HTMLCanvasElement&&(r=e.getContext("2d"))}if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(s=document.createElement("div")).className=i;let t=s.style;t.position="absolute",t.width="100%",t.height="100%";let e=(r=(0,g.E4)()).canvas;s.appendChild(e),(t=e.style).position="absolute",t.left="0",t.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){let s=(0,x.getTopLeft)(n),r=(0,x.getTopRight)(n),i=(0,x.getBottomRight)(n),a=(0,x.getBottomLeft)(n);(0,c.nn)(e.coordinateToPixelTransform,s),(0,c.nn)(e.coordinateToPixelTransform,r),(0,c.nn)(e.coordinateToPixelTransform,i),(0,c.nn)(e.coordinateToPixelTransform,a);let o=this.inversePixelTransform;(0,c.nn)(o,s),(0,c.nn)(o,r),(0,c.nn)(o,i),(0,c.nn)(o,a),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,e){let n=t.extent,s=t.viewState.resolution,r=t.viewState.rotation,i=t.pixelRatio,a=Math.round((0,x.getWidth)(n)/s*i),o=Math.round((0,x.getHeight)(n)/s*i);(0,c.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/i,1/i,r,-a/2,-o/2),(0,c.nb)(this.inversePixelTransform,this.pixelTransform);let h=(0,c.BB)(this.pixelTransform);if(this.useContainer(e,h,this.getBackground(t)),!this.containerReused){let t=this.context.canvas;t.width!=a||t.height!=o?(t.width=a,t.height=o):this.context.clearRect(0,0,a,o),h!==t.style.transform&&(t.style.transform=h)}}dispatchRenderEvent_(t,e,n){let s=this.getLayer();if(s.hasListener(t)){let r=new l.Z(t,this.inversePixelTransform,n,e);s.dispatchEvent(r)}}preRender(t,e){if(this.frameState=e,!e.declutter)this.dispatchRenderEvent_(d.Z.PRERENDER,t,e)}postRender(t,e){if(!e.declutter)this.dispatchRenderEvent_(d.Z.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new u.Z),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){if(!!t.declutter)this.dispatchRenderEvent_(d.Z.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(d.Z.POSTRENDER,this.context,t)}getRenderTransform(t,e,n,s,r,i,a){let o=s/e,h=-t[0]+a,l=-t[1];return(0,c.qC)(this.tempTransform,r/2,i/2,o,-o,-n,h,l)}disposeInternal(){delete this.frameState,super.disposeInternal()}}}}]);
//# sourceMappingURL=5798.544f17ccc72714f7.js.map