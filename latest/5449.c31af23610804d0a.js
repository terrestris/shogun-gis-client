"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5449"],{93409:function(e,t,i){i.r(t);var s=i(40188),n=i(58493),a=i(67644),l=i(85386),r=i(13002),o=i(21915);let h="element",d="offset",c="position",u="positioning";class g extends n.default{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h,this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener(d,this.handleOffsetChanged),this.addChangeListener(c,this.handlePositionChanged),this.addChangeListener(u,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(h)}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get(d)}getPosition(){return this.get(c)}getPositioning(){return this.get(u)}handleElementChanged(){(0,l.ep)(this.element);let e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),(0,r.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,r.oL)(e,s.Z.POSTRENDER,this.render,this),this.updatePixelPosition();let t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(h,e)}setMap(e){this.set("map",e)}setOffset(e){this.set(d,e)}setPosition(e){this.set(c,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){let t=this.getMap();if(!t||!t.getTargetElement()||!this.get(c))return;let i=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),n=this.getRect(s,[(0,l.iO)(s),(0,l.Pb)(s)]),a=void 0===(e=e||{}).margin?20:e.margin;if(!(0,o.containsExtent)(i,n)){let s=n[0]-i[0],l=i[2]-n[2],r=n[1]-i[1],o=i[3]-n[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),r<0?h[1]=r-a:o<0&&(h[1]=Math.abs(o)+a),0!==h[0]||0!==h[1]){let i=t.getView().getCenterInternal(),s=t.getPixelFromCoordinateInternal(i);if(!s)return;let n=[s[0]+h[0],s[1]+h[1]],a=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(n),duration:a.duration,easing:a.easing})}}}getRect(e,t){let i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[s,n,s+t[0],n+t[1]]}setPositioning(e){this.set(u,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){let e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);let i=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(e,t){let i=this.element.style,s=this.getOffset(),n=this.getPositioning();this.setVisible(!0);let a=`${e[0]+s[0]}px`,l=`${e[1]+s[1]}px`,r="0%",o="0%";"bottom-right"==n||"center-right"==n||"top-right"==n?r="-100%":("bottom-center"==n||"center-center"==n||"top-center"==n)&&(r="-50%"),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?o="-100%":("center-left"==n||"center-center"==n||"center-right"==n)&&(o="-50%");let h=`translate(${r}, ${o}) translate(${a}, ${l})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}t.default=g},46410:function(e,t,i){i.r(t),i.d(t,{OverviewMap:function(){return R},Control:function(){return n.Z},ZoomToExtent:function(){return D},ScaleLine:function(){return N.default},defaults:function(){return H.c},MousePosition:function(){return m.default},ZoomSlider:function(){return Z},Rotate:function(){return y.Z},Zoom:function(){return T.Z},FullScreen:function(){return _},Attribution:function(){return s.Z}});var s=i(33224),n=i(19530),a=i(39850),l=i(67644),r=i(85386),o=i(73381),h=i(13002);let d=["fullscreenchange","webkitfullscreenchange"];class c extends n.Z{constructor(e){super({element:document.createElement("div"),target:(e=e||{}).target}),this.on,this.once,this.un,this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==e.activeClassName?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==e.inactiveClassName?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];let t=void 0!==e.label?e.label:"⤢";this.labelNode_="string"==typeof t?document.createTextNode(t):t;let i=void 0!==e.labelActive?e.labelActive:"\xd7";this.labelActiveNode_="string"==typeof i?document.createTextNode(i):i;let s=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(o.default.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${l.XV} ${l.hg}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){var e,t;let i=this.getMap();if(!i)return;let s=i.getOwnerDocument();if(u(s))if(g(s)){(e=s).exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}else{let e;e=this.source_?"string"==typeof this.source_?s.getElementById(this.source_):this.source_:i.getTargetElement(),this.keys_?(t=e).webkitRequestFullscreen?t.webkitRequestFullscreen():p(t):p(e)}}handleFullScreenChange_(){let e=this.getMap();if(!e)return;let t=this.isInFullscreen_;this.isInFullscreen_=g(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,r.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,r.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){let t=this.getMap();t&&t.removeChangeListener(a.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(a.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){let e=this.documentListeners_;for(let t=0,i=e.length;t<i;++t)(0,h.bN)(e[t]);e.length=0;let t=this.getMap();if(t){let i=t.getOwnerDocument();u(i)?this.element.classList.remove(l.Qi):this.element.classList.add(l.Qi);for(let t=0,s=d.length;t<s;++t)e.push((0,h.oL)(i,d[t],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function u(e){let t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function g(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function p(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}var _=c,m=i(4509),v=i(78426),f=i(73983),b=i(40188),C=i(13910),E=i(93409),w=i(21896),x=i(86340),P=i(21915),L=i(15265);class M extends n.Z{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==e.rotateWithView&&e.rotateWithView,this.viewExtent_=void 0;let t=void 0!==e.className?e.className:"ol-overviewmap",i=void 0!==e.tipLabel?e.tipLabel:"Overview map",s=void 0!==e.collapseLabel?e.collapseLabel:"‹";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;let n=void 0!==e.label?e.label:"›";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;let a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,r=document.createElement("button");r.setAttribute("type","button"),r.title=i,r.appendChild(a),r.addEventListener(o.default.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;let h=new f.default({view:e.view,controls:new v.default,interactions:new v.default});this.ovmap_=h,e.layers&&e.layers.forEach(function(e){h.addLayer(e)});let d=document.createElement("div");d.className="ol-overviewmap-box",d.style.boxSizing="border-box",this.boxOverlay_=new E.default({position:[0,0],positioning:"center-center",element:d}),this.ovmap_.addOverlay(this.boxOverlay_);let c=t+" "+l.XV+" "+l.hg+(this.collapsed_&&this.collapsible_?" "+l.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.ovmapDiv_),u.appendChild(r);let g=this.boxOverlay_,p=this.boxOverlay_.getElement(),_=function(e){let t={clientX:e.clientX,clientY:e.clientY},i=h.getEventCoordinate(t);g.setPosition(i)},m=e=>{let t=h.getEventCoordinateInternal(e),i=this.getMap();i.getView().setCenterInternal(t);let s=i.getOwnerDocument();s.removeEventListener("pointermove",_),s.removeEventListener("pointerup",m)};this.ovmapDiv_.addEventListener("pointerdown",e=>{let t=this.getMap().getOwnerDocument();e.target===p&&t.addEventListener("pointermove",_),t.addEventListener("pointerup",m)})}setMap(e){let t=this.getMap();if(e!==t){if(t){let e=t.getView();e&&this.unbindView_(e),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,h.oL)(e,C.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));let t=e.getView();t&&this.bindView_(t),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===a.Z.VIEW){let t=e.oldValue;t&&this.unbindView_(t);let i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||e.key!==a.Z.TARGET&&e.key!==a.Z.SIZE||this.ovmap_.updateSize()}bindView_(e){if(!this.view_){let t=new w.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(x.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(x.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){let e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;let i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&(0,P.equals)(s,this.viewExtent_))return;this.viewExtent_=s;let n=t.getSize(),a=t.getView().calculateExtentInternal(n),l=t.getPixelFromCoordinateInternal((0,P.getTopLeft)(s)),r=t.getPixelFromCoordinateInternal((0,P.getBottomRight)(s)),o=Math.abs(l[0]-r[0]),h=Math.abs(l[1]-r[1]),d=n[0],c=n[1];o<.1*d||h<.1*c||o>.75*d||h>.75*c?this.resetExtent_():(0,P.containsExtent)(a,s)||this.recenter_()}resetExtent_(){let e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),n=t.getView(),a=1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2));(0,P.scaleFromCenter)(s,a),n.fitInternal((0,L.fromExtent)(s))}recenter_(){let e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){let e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;let i=e.getSize(),s=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-s.getRotation(),l=this.boxOverlay_,r=this.boxOverlay_.getElement(),o=s.getCenter(),h=s.getResolution(),d=n.getResolution(),c=i[0]*h/d,u=i[1]*h/d;l.setPosition(o),r&&(r.style.width=c+"px",r.style.height=u+"px",r.style.transform="rotate("+a+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,h.Vx)(this.ovmap_,b.Z.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(l.hN),this.collapsed_?(0,r.$H)(this.collapseLabel_,this.label_):(0,r.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;let e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}var R=M,y=i(62078),N=i(25303),T=i(99937),F=i(86320),V=i(9520),S=i(21882),O=i(10669);class I extends n.Z{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=0,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;let t=void 0!==e.className?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=t+"-thumb "+l.XV;let s=this.element;s.className=t+" "+l.XV+" "+l.hg,s.appendChild(i),s.addEventListener(O.Z.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),s.addEventListener(O.Z.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),s.addEventListener(O.Z.POINTERUP,this.handleDraggerEnd_.bind(this),!1),s.addEventListener(o.default.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(o.default.CLICK,V.stopPropagation,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){let e=this.element,t=e.offsetWidth,i=e.offsetHeight;if(0===t&&0===i)return this.sliderInitialized_=!1;let s=getComputedStyle(e);t-=parseFloat(s.paddingRight)+parseFloat(s.paddingLeft),i-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom);let n=e.firstElementChild,a=getComputedStyle(n),l=n.offsetWidth+parseFloat(a.marginRight)+parseFloat(a.marginLeft),r=n.offsetHeight+parseFloat(a.marginTop)+parseFloat(a.marginBottom);return this.thumbSize_=[l,r],t>i?(this.direction_=1,this.widthLimit_=t-l):(this.direction_=0,this.heightLimit_=i-r),this.sliderInitialized_=!0}handleContainerClick_(e){let t=this.getMap().getView(),i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),s=this.getResolutionForPosition_(i),n=t.getConstrainedZoom(t.getZoomForResolution(s));t.animateInternal({zoom:n,duration:this.duration_,easing:F.easeOut})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){let t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){let e=this.handleDraggerDrag_,t=this.handleDraggerEnd_,i=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,h.oL)(i,O.Z.POINTERMOVE,e,this),(0,h.oL)(i,O.Z.POINTERUP,t,this))}}}handleDraggerDrag_(e){if(this.dragging_){let t=e.clientX-this.startX_,i=e.clientY-this.startY_,s=this.getRelativePosition_(t,i);this.currentResolution_=this.getResolutionForPosition_(s),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(h.bN),this.dragListenerKeys_.length=0)}setThumbPosition_(e){let t=this.getPositionForResolution_(e),i=this.element.firstElementChild;1==this.direction_?i.style.left=this.widthLimit_*t+"px":i.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let i;return i=1===this.direction_?e/this.widthLimit_:t/this.heightLimit_,(0,S.uZ)(i,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){let t=this.getMap().getView().getValueForResolutionFunction();return(0,S.uZ)(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;let t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}var Z=I,k=i(5374);class j extends n.Z{constructor(e){super({element:document.createElement("div"),target:(e=e||{}).target}),this.extent=e.extent?e.extent:null;let t=void 0!==e.className?e.className:"ol-zoom-extent",i=void 0!==e.label?e.label:"E",s=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",n=document.createElement("button");n.setAttribute("type","button"),n.title=s,n.appendChild("string"==typeof i?document.createTextNode(i):i),n.addEventListener(o.default.CLICK,this.handleClick_.bind(this),!1);let a=t+" "+l.XV+" "+l.hg,r=this.element;r.className=a,r.appendChild(n)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){let e=this.getMap().getView(),t=this.extent?(0,k.fromUserExtent)(this.extent,e.getProjection()):e.getProjection().getExtent();e.fitInternal((0,L.fromExtent)(t))}}var D=j,H=i(157)},4509:function(e,t,i){i.r(t);var s=i(90728),n=i(13002),a=i(10669),l=i(5374),r=i(19530);let o="projection",h="coordinateFormat";class d extends r.Z{constructor(e){e=e||{};let t=document.createElement("div");t.className=void 0!==e.className?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(o,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=void 0!==e.placeholder,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==e.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(h)}getProjection(){return this.get(o)}handleMouseMove(e){let t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){let t=e.getViewport();this.listenerKeys.push((0,n.oL)(t,a.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,n.oL)(t,a.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(h,e)}setProjection(e){this.set(o,(0,l.get)(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){let e=this.getProjection();e?this.transform_=(0,l.getTransformFromProjections)(this.mapProjection_,e):this.transform_=l.identityTransform}let i=this.getMap().getCoordinateFromPixelInternal(e);if(i){let e=(0,l.getUserProjection)();if(e&&(this.transform_=(0,l.getTransformFromProjections)(this.mapProjection_,e)),this.transform_(i,i),this.wrapX_){let t=e||this.getProjection()||this.mapProjection_;(0,s.wrapX)(i,t)}let n=this.getCoordinateFormat();t=n?n(i):i.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){let t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}t.default=d},25303:function(e,t,i){i.r(t);var s=i(67644),n=i(5374),a=i(19530);let l="units",r=[1,2,5],o=25.4/.28;class h extends a.Z{constructor(e){e=e||{};let t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;let i=void 0!==e.className?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+s.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(l,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(l)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(l,e)}setDpi(e){this.dpi_=e}updateElement_(){let e,t,i,s,a,l=this.viewState_;if(!l){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let h=l.center,d=l.projection,c=this.getUnits(),u=(0,n.getPointResolution)(d,l.resolution,h,"degrees"==c?"degrees":"m"),g=this.minWidth_*(this.dpi_||o)/o,p=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||o)/o:void 0,_=g*u,m="";if("degrees"==c){let e=n.METERS_PER_UNIT.degrees;(_*=e)<e/60?(m="″",u*=3600):_<e?(m="′",u*=60):m="\xb0"}else if("imperial"==c)_<.9144?(m="in",u/=.0254):_<1609.344?(m="ft",u/=.3048):(m="mi",u/=1609.344);else if("nautical"==c)u/=1852,m="NM";else if("metric"==c)_<1e-6?(m="nm",u*=1e9):_<.001?(m="μm",u*=1e6):_<1?(m="mm",u*=1e3):_<1e3?m="m":(m="km",u/=1e3);else if("us"==c)_<.9144?(m="in",u*=39.37):_<1609.344?(m="ft",u/=.30480061):(m="mi",u/=1609.3472);else throw Error("Invalid units");let v=3*Math.floor(Math.log(g*u)/Math.log(10)),f=0;for(;;){let n=Math.pow(10,i=Math.floor(v/3));if(isNaN(t=Math.round((e=r[(v%3+3)%3]*n)/u))){this.element.style.display="none",this.renderedVisible_=!1;return}if(void 0!==p&&t>=p){e=f,t=s,i=a;break}if(t>=g)break;f=e,s=t,a=i,++v}let b=this.scaleBar_?this.createScaleBar(t,e,m):e.toFixed(i<0?-i:0)+" "+m;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=t&&(this.innerElement_.style.width=t+"px",this.renderedWidth_=t),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){let s=this.getScaleForResolution(),n=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),a=this.scaleBarSteps_,l=e/a,r=[this.createMarker("absolute")];for(let s=0;s<a;++s){let n=s%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";r.push(`<div><div class="ol-scale-singlebar ${n}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(s%2==0||2===a?this.createStepText(s,e,!1,t,i):"")+"</div>")}return r.push(this.createStepText(a,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+n+"</div>":"")+r.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${"absolute"===e?3:-10}px;"></div>`}createStepText(e,t,i,s,n){let a=0===e?0:Math.round(s/this.scaleBarSteps_*e*100)/100,l=0===e?-3:-(t/this.scaleBarSteps_*1),r=0===e?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${0===e?"left":"center"};min-width: ${r}px;left: ${i?t+"px":"unset"};">`+a+(0===e?"":" "+n)+"</div>"}getScaleForResolution(){let e=(0,n.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m");return 1e3/25.4*e*(this.dpi_||o)}render(e){let t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}t.default=h}}]);
//# sourceMappingURL=5449.c31af23610804d0a.js.map