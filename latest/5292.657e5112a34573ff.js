"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5292"],{7323:function(e,t,n){n.r(t),n.d(t,{default:function(){return A},GeoLocationButton:function(){return V}});var a=n(9948),r=n.n(a),i=n(14293),o=n.n(i),s=n(42151),u=n.n(s),c=n(2422),l=n.n(c),g=n(99655),f=n.n(g),d=n(86341),m=n.n(d),h=n(80982),M=n.n(h),p=n(86977),b=n(93349),w=n.n(b),y=n(42354),v=n.n(y),C=n(83713),P=n.n(C),E=class{static radToDeg=e=>360*e/(2*Math.PI);static degToRad=e=>e*Math.PI*2/360;static mod=e=>(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)},k=n(39660),_=n(49968),I=n.p+"6afbd13a3ce1b95d.png",Z=n.p+"3380da3c8b677218.png";let $=({active:e,enableTracking:t=!1,follow:n=!1,onError:r,onGeoLocationChange:i,showMarker:s=!1,trackingOptions:c={enableHighAccuracy:!0,maximumAge:1e4,timeout:6e5}})=>{let g=(0,k.Z)(),[d,h]=(0,a.useState)(),b=(0,a.useMemo)(()=>new(f())([],"XYZM"),[]),y=(0,a.useMemo)(()=>new(u()),[]);(0,_.n)(()=>new(M())({properties:{name:"react-geo_geolocationlayer"},source:new(w())({features:[y]}),style:e=>{let t=e.get("heading"),n=Number.isFinite(t)&&0!==t?I:Z,a=Number.isFinite(t)&&0!==t?t*Math.PI/180:0;return[new(P())({image:new(v())({rotation:a,src:n})})]}}),[],s&&e);let C=(0,a.useCallback)(e=>{let t=e.target,n=t.getPosition()??[0,0],a=t.getAccuracy(),r=t.getHeading()||0,o=t.getSpeed()||0,s=n[0],u=n[1],c=b.getCoordinates(),l=c[c.length-1],g=l&&l[2];if(g){let e=r-E.mod(g);Math.abs(e)>Math.PI&&(e=-(e>=0?1:-1)*(2*Math.PI-Math.abs(e))),r=g+e}b.appendCoordinate([s,u,r,Date.now()]),b.setCoordinates(b.getCoordinates().slice(-20));let f={position:n,accuracy:a,heading:r,speed:o};h(f),i?.(f)},[b,i]),$=(0,a.useMemo)(()=>e?new(l())({projection:g?.getView().getProjection()}):void 0,[e,g]),N=(0,a.useCallback)((e,t,n)=>{let a=(g?.getSize()??[0,0])[1];return[e[0]-Math.sin(t)*a*n/4,e[1]+Math.cos(t)*a*n/4]},[g]);return(0,a.useEffect)(()=>{if(!r||!$)return;let e=$.on("error",r);return()=>{(0,p.unByKey)(e)}},[$]),(0,a.useEffect)(()=>{if(!$)return;let e=$.on("change",C);return()=>{(0,p.unByKey)(e)}},[$,C]),(0,a.useEffect)(()=>{$?.setTracking(t)},[t,$]),(0,a.useEffect)(()=>{$?.setTrackingOptions(c)},[$,c]),(0,a.useEffect)(()=>{let e=Date.now()-750;e=Math.max(e,0);let t=b.getCoordinateAtM(e,!0);if(!o()(t)&&(n&&(g?.getView().setCenter(N([t[0],t[1]],-t[2],g?.getView().getResolution()??0)),g?.getView().setRotation(-t[2])),s)){let e=new(m())([t[0],t[1]]);y.setGeometry(e)}},[d,s,n,g,b,N,y]),{actualPosition:d,trackedLine:b}};var N=n(35703),T=n(32022);let V=({className:e,follow:t=!1,enableTracking:n=!1,onGeoLocationChange:a=()=>void 0,onError:i=()=>void 0,showMarker:o=!0,trackingOptions:s,pressed:u,...c})=>{$({active:!!u,enableTracking:u,follow:t,onError:i,onGeoLocationChange:a,showMarker:o,trackingOptions:s});let l=e?`${e} ${N.M}geolocationbutton`:`${N.M}geolocationbutton`;return r().createElement(T.Z,{pressed:u,className:l,...c})};var A=V},32022:function(e,t,n){var a=n(40440),r=n(76534),i=n(9948),o=n.n(i),s=n(35703);t.Z=({type:e="primary",pressed:t=!1,tooltipProps:n={mouseEnterDelay:1.5},className:i,tooltip:u,tooltipPlacement:c,pressedIcon:l,icon:g,children:f,value:d,onClick:m,onChange:h=()=>{},...M})=>{let p=`${s.M}togglebutton`,b=i?`${i} ${p}`:p,w="";return t&&(w=" btn-pressed"),o().createElement(a.Z,{title:u,placement:c,...n},o().createElement(r.ZP,{type:e,onClick:e=>{m&&(m(e),e.defaultPrevented)||h(e,d)},onChange:h,className:`${b}${w}`,"aria-pressed":t,icon:t?l:g,...M},f))}},35703:function(e,t,n){n.d(t,{M:function(){return a}});let a="react-geo-"},49968:function(e,t,n){n.d(t,{n:function(){return o}});var a=n(9948),r=n(96486),i=n(39660);let o=(e,t,n)=>{let o=(0,i.Z)(),[s,u]=(0,a.useState)();return(0,a.useEffect)(()=>{if(!o)return;let t=e();if(t)return o.addLayer(t),u(t),()=>{o.removeLayer(t),u(void 0)}},[o,...t]),(0,a.useEffect)(()=>{!s||(0,r.isNil)(n)||s.setVisible(n)},[s,n]),s};t.Z=o}}]);
//# sourceMappingURL=5292.657e5112a34573ff.js.map