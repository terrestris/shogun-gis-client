"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["3087"],{91587:function(t,e,i){i.r(e);var r=i(21915),s=i(21882),o=i(5374),a=i(52209),n=i(79313),l=i(70701),h=i(78487),u=i(65952),g=i(49081);class _ extends u.Z{constructor(t){let e=Object.assign({},(t=t||{}).params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,s){let n=(0,o.get)(i),l=this.getProjection()||n,h=this.getTileGrid();h||(h=this.getTileGridForProjection(l));let u=(0,o.transform)(t,n,l),_=(0,a.aA)(l,n,t,e),p=h.getZForResolution(_,this.zDirection),c=h.getResolution(p),d=h.getTileCoordForCoordAndZ(u,p);if(h.getResolutions().length<=d[0])return;let m=h.getTileCoordExtent(d,this.tmpExtent_),f=this.gutter_;0!==f&&(m=(0,r.buffer)(m,c*f,m));let E={QUERY_LAYERS:this.params_.LAYERS};Object.assign(E,(0,g.jt)(this.params_,"GetFeatureInfo"),s);let R=Math.floor((u[0]-m[0])/c),v=Math.floor((m[3]-u[1])/c);return E[this.v13_?"I":"X"]=R,E[this.v13_?"J":"Y"]=v,this.getRequestUrl_(d,m,1,l||n,E)}getLegendUrl(t,e){if(void 0===this.urls[0])return;let i={SERVICE:"WMS",VERSION:g.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){let t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}return void 0!==t&&(i.SCALE=t*(this.getProjection()?this.getProjection().getMetersPerUnit():1)/28e-5),Object.assign(i,e),(0,h.B5)(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,o){let a,n=this.urls;if(n){if(1==n.length)a=n[0];else{let e=(0,s.$W)((0,l.vp)(t),n.length);a=n[e]}return(0,g.Q4)(e,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,a,o,this.serverType_)}}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0,e=[];for(let i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){let t=this.params_.VERSION||g.eQ;this.v13_=(0,n.n)(t,"1.3")>=0}tileUrlFunction(t,e,i){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),s.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);let o=s.getResolution(t[0]),a=s.getTileCoordExtent(t,this.tmpExtent_),n=this.gutter_;0!==n&&(a=(0,r.buffer)(a,o*n,a));let l=Object.assign({},(0,g.jt)(this.params_,"GetMap"));return this.getRequestUrl_(t,a,e,i,l)}}e.default=_}}]);
//# sourceMappingURL=3087.1004d81e7ff95630.js.map