"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["8573"],{38038:function(t,e,r){r.r(e),r.d(e,{default:function(){return w}});var i=r(23068),s=r(98090),n=r(44538),o=r(25642),a=r(52329),h=r(13987),u=r(52043),l=r(15265),T=r(18334),_=r(49179);class p extends T.ZP{constructor(){super()}getType(){return"text"}readFeature(t,e){return this.readFeatureFromText(c(t),this.adaptOptions(e))}readFeatureFromText(t,e){return(0,_.abstract)()}readFeatures(t,e){return this.readFeaturesFromText(c(t),this.adaptOptions(e))}readFeaturesFromText(t,e){return(0,_.abstract)()}readGeometry(t,e){return this.readGeometryFromText(c(t),this.adaptOptions(e))}readGeometryFromText(t,e){return(0,_.abstract)()}readProjection(t){return this.readProjectionFromText(c(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,e){return this.writeFeatureText(t,this.adaptOptions(e))}writeFeatureText(t,e){return(0,_.abstract)()}writeFeatures(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))}writeFeaturesText(t,e){return(0,_.abstract)()}writeGeometry(t,e){return this.writeGeometryText(t,this.adaptOptions(e))}writeGeometryText(t,e){return(0,_.abstract)()}}function c(t){return"string"==typeof t?t:""}var m=p;let f={POINT:u.default,LINESTRING:n.default,POLYGON:l.default,MULTIPOINT:a.default,MULTILINESTRING:o.default,MULTIPOLYGON:h.default},E="EMPTY",x={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},g={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class P{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return e=void 0!==e&&e,t>="0"&&t<="9"||"."==t&&!e}isWhiteSpace_(t){return" "==t||"	"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let t,e=this.nextChar_(),r=this.index_,i=e;if("("==e)t=x.LEFT_PAREN;else if(","==e)t=x.COMMA;else if(")"==e)t=x.RIGHT_PAREN;else if(this.isNumeric_(e)||"-"==e)t=x.NUMBER,i=this.readNumber_();else if(this.isAlpha_(e))t=x.TEXT,i=this.readText_();else if(this.isWhiteSpace_(e))return this.nextToken();else if(""===e)t=x.EOF;else throw Error("Unexpected character: "+e);return{position:r,value:i,type:t}}readNumber_(){let t,e=this.index_,r=!1,i=!1;do"."==t?r=!0:("e"==t||"E"==t)&&(i=!0),t=this.nextChar_();while(this.isNumeric_(t,r)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t,e=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class y{constructor(t){this.lexer_=t,this.token_={position:0,type:x.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){let e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY",e=this.token_;if(this.isTokenType(x.TEXT)){let r=e.value;"Z"===r?t="XYZ":"M"===r?t="XYM":"ZM"===r&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(x.LEFT_PAREN)){let t=[];do t.push(this.parseGeometry_());while(this.match(x.COMMA));if(this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(x.LEFT_PAREN)){let t=this.parsePoint_();if(this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(x.LEFT_PAREN)){let t=this.parsePointList_();if(this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(x.LEFT_PAREN)){let t=this.parseLineStringTextList_();if(this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(x.LEFT_PAREN)){let t;if(t=this.token_.type==x.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(x.LEFT_PAREN)){let t=this.parseLineStringTextList_();if(this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(x.LEFT_PAREN)){let t=this.parsePolygonTextList_();if(this.match(x.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parsePoint_(){let t=[],e=this.layout_.length;for(let r=0;r<e;++r){let e=this.token_;if(this.match(x.NUMBER))t.push(e.value);else break}if(t.length==e)return t;throw Error(this.formatErrorMessage_())}parsePointList_(){let t=[this.parsePoint_()];for(;this.match(x.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){let t=[this.parsePointText_()];for(;this.match(x.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){let t=[this.parseLineStringText_()];for(;this.match(x.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){let t=[this.parsePolygonText_()];for(;this.match(x.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){let t=this.isTokenType(x.TEXT)&&this.token_.value==E;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let t=this.token_;if(this.match(x.TEXT)){let e,r=t.value;this.layout_=this.parseGeometryLayout_();let i=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==r){if(i)return new s.default([]);let t=this.parseGeometryCollectionText_();return new s.default(t)}let n=f[r];if(!n)throw Error("Invalid geometry type: "+r);if(i)e="POINT"==r?[NaN,NaN]:[];else switch(r){case"POINT":e=this.parsePointText_();break;case"LINESTRING":e=this.parseLineStringText_();break;case"POLYGON":e=this.parsePolygonText_();break;case"MULTIPOINT":e=this.parseMultiPointText_();break;case"MULTILINESTRING":e=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":e=this.parseMultiPolygonText_()}return new n(e,this.layout_)}throw Error(this.formatErrorMessage_())}}function L(t){let e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function d(t){let e=t.getCoordinates(),r=[];for(let t=0,i=e.length;t<i;++t)r.push(e[t].join(" "));return r.join(",")}function M(t){let e=[],r=t.getLinearRings();for(let t=0,i=r.length;t<i;++t)e.push("("+d(r[t])+")");return e.join(",")}let N={Point:L,LineString:d,Polygon:M,MultiPoint:function(t){let e=[],r=t.getPoints();for(let t=0,i=r.length;t<i;++t)e.push("("+L(r[t])+")");return e.join(",")},MultiLineString:function(t){let e=[],r=t.getLineStrings();for(let t=0,i=r.length;t<i;++t)e.push("("+d(r[t])+")");return e.join(",")},MultiPolygon:function(t){let e=[],r=t.getPolygons();for(let t=0,i=r.length;t<i;++t)e.push("("+M(r[t])+")");return e.join(",")},GeometryCollection:function(t){let e=[],r=t.getGeometries();for(let t=0,i=r.length;t<i;++t)e.push(G(r[t]));return e.join(",")}};function G(t){let e=t.getType(),r=(0,N[e])(t),i=g[e];if("function"==typeof t.getFlatCoordinates){let e=function(t){let e=t.getLayout(),r="";return("XYZ"===e||"XYZM"===e)&&(r+="Z"),("XYM"===e||"XYZM"===e)&&(r+="M"),r}(t);e.length>0&&(i+=" "+e)}return 0===r.length?i+" "+E:i+"("+r+")"}var w=class extends m{constructor(t){super(),t=t||{},this.splitCollection_=void 0!==t.splitCollection&&t.splitCollection}parse_(t){return new y(new P(t)).parse()}readFeatureFromText(t,e){let r=this.readGeometryFromText(t,e),s=new i.default;return s.setGeometry(r),s}readFeaturesFromText(t,e){let r=[],s=this.readGeometryFromText(t,e);r=this.splitCollection_&&"GeometryCollection"==s.getType()?s.getGeometriesArray():[s];let n=[];for(let t=0,e=r.length;t<e;++t){let e=new i.default;e.setGeometry(r[t]),n.push(e)}return n}readGeometryFromText(t,e){let r=this.parse_(t);return(0,T.fI)(r,!1,e)}writeFeatureText(t,e){let r=t.getGeometry();return r?this.writeGeometryText(r,e):""}writeFeaturesText(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);let r=[];for(let e=0,i=t.length;e<i;++e)r.push(t[e].getGeometry());let i=new s.default(r);return this.writeGeometryText(i,e)}writeGeometryText(t,e){return G((0,T.fI)(t,!0,e))}}}}]);
//# sourceMappingURL=8573.8c19c74ac05f2048.js.map