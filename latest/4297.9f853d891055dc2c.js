"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["4297"],{22482:function(t,e,i){let r;i.d(e,{BV:function(){return h},KQ:function(){return c},XX:function(){return g},aY:function(){return d}});var n=i(84674),o=i(85752),s=i(94966),a=i(21128);let h=[];function l(t,e,i,r,n){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(r,n),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(i,n)),t.restore()}function u(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function c(t,e,i,r){let n=(0,a.transform)(i,e,t),s=(0,a.getPointResolution)(e,r,i),h=e.getMetersPerUnit();void 0!==h&&(s*=h);let l=t.getMetersPerUnit();void 0!==l&&(s/=l);let u=t.getExtent();if(!u||(0,o.containsCoordinate)(u,n)){let e=(0,a.getPointResolution)(t,s,n)/s;isFinite(e)&&e>0&&(s/=e)}return s}function d(t,e,i,r){let n=c(t,e,(0,o.getCenter)(i),r);return(!isFinite(n)||n<=0)&&(0,o.forEachCorner)(i,function(i){return isFinite(n=c(t,e,i,r))&&n>0}),n}function g(t,e,i,a,c,d,g,f,_,m,W,x,p,M){let E,v=(0,n.Y)(Math.round(i*t),Math.round(i*e),h);if(x||(v.imageSmoothingEnabled=!1),0===_.length)return v.canvas;function T(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";let P=(0,o.createEmpty)();_.forEach(function(t,e,i){(0,o.extend)(P,t.extent)});let F=i/a,b=(x?1:1.0000000596046448)/F;if(!p||1!==_.length||0!==m){if(E=(0,n.Y)(Math.round((0,o.getWidth)(P)*F),Math.round((0,o.getHeight)(P)*F),h),x||(E.imageSmoothingEnabled=!1),c&&M){let t=(c[0]-P[0])*F,e=-(c[3]-P[3])*F,i=(0,o.getWidth)(c)*F,r=(0,o.getHeight)(c)*F;E.rect(t,e,i,r),E.clip()}_.forEach(function(t,e,i){if(t.image.width>0&&t.image.height>0){if(t.clipExtent){E.save();let e=(t.clipExtent[0]-P[0])*F,i=-(t.clipExtent[3]-P[3])*F,r=(0,o.getWidth)(t.clipExtent)*F,n=(0,o.getHeight)(t.clipExtent)*F;E.rect(x?e:Math.round(e),x?i:Math.round(i),x?r:Math.round(e+r)-Math.round(e),x?n:Math.round(i+n)-Math.round(i)),E.clip()}let e=(t.extent[0]-P[0])*F,i=-(t.extent[3]-P[3])*F,r=(0,o.getWidth)(t.extent)*F,n=(0,o.getHeight)(t.extent)*F;E.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,x?e:Math.round(e),x?i:Math.round(i),x?r:Math.round(e+r)-Math.round(e),x?n:Math.round(i+n)-Math.round(i)),t.clipExtent&&E.restore()}})}let I=(0,o.getTopLeft)(g);return f.getTriangles().forEach(function(t,e,i){let a,c=t.source,g=t.target,f=c[0][0],m=c[0][1],W=c[1][0],p=c[1][1],M=c[2][0],F=c[2][1],j=T((g[0][0]-I[0])/d),S=T(-(g[0][1]-I[1])/d),C=T((g[1][0]-I[0])/d),w=T(-(g[1][1]-I[1])/d),X=T((g[2][0]-I[0])/d),k=T(-(g[2][1]-I[1])/d),Q=f,Y=m;f=0,m=0;let H=[[W-=Q,p-=Y,0,0,C-j],[M-=Q,F-=Y,0,0,X-j],[0,0,W,p,w-S],[0,0,M,F,k-S]],R=(0,s.KU)(H);if(R){if(v.save(),v.beginPath(),function(){if(void 0===r){let t=(0,n.Y)(6,6,h);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",l(t,4,5,4,0),l(t,4,5,0,5);let e=t.getImageData(0,0,3,3).data;r=u(e,0)||u(e,4)||u(e,8),(0,n.Yg)(t),h.push(t.canvas)}return r}()||!x){v.moveTo(C,w);let t=j-C,e=S-w;for(let i=0;i<4;i++)v.lineTo(C+T((i+1)*t/4),w+T(i*e/3)),3!=i&&v.lineTo(C+T((i+1)*t/4),w+T((i+1)*e/3));v.lineTo(X,k)}else v.moveTo(C,w),v.lineTo(j,S),v.lineTo(X,k);if(v.clip(),v.transform(R[0],R[2],R[1],R[3],j,S),v.translate(P[0]-Q,P[3]-Y),E)a=E.canvas,v.scale(b,-b);else{let t=_[0],e=t.extent;a=t.image,v.scale((0,o.getWidth)(e)/a.width,-(0,o.getHeight)(e)/a.height)}v.drawImage(a,0,0),v.restore()}}),E&&((0,n.Yg)(E),h.push(E.canvas)),W&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,f.getTriangles().forEach(function(t,e,i){let r=t.target,n=(r[0][0]-I[0])/d,o=-(r[0][1]-I[1])/d,s=(r[1][0]-I[0])/d,a=-(r[1][1]-I[1])/d,h=(r[2][0]-I[0])/d,l=-(r[2][1]-I[1])/d;v.beginPath(),v.moveTo(s,a),v.lineTo(n,o),v.lineTo(h,l),v.closePath(),v.stroke()}),v.restore()),v.canvas}},95826:function(t,e,i){var r=i(85752),n=i(94966),o=i(21128),s=i(21878);e.A=class{constructor(t,e,i,n,a,h,l){this.sourceProj_=t,this.targetProj_=e;let u={},c=l?(0,o.createTransformFromCoordinateTransform)(t=>(0,s.Bb)(l,(0,o.transform)(t,this.targetProj_,this.sourceProj_))):(0,o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){let e=t[0]+"/"+t[1];return u[e]||(u[e]=c(t)),u[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,r.getWidth)(n)>=(0,r.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,r.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,r.getWidth)(this.targetProj_.getExtent()):null;let d=(0,r.getTopLeft)(i),g=(0,r.getTopRight)(i),f=(0,r.getBottomRight)(i),_=(0,r.getBottomLeft)(i),m=this.transformInv_(d),W=this.transformInv_(g),x=this.transformInv_(f),p=this.transformInv_(_),M=10+(h?Math.max(0,Math.ceil(Math.log2((0,r.getArea)(i)/(h*h*65536)))):0);if(this.addQuad_(d,g,f,_,m,W,x,p,M),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(e,i,r){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach(e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){let i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);let r=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-r<this.sourceWorldWidth_/2&&(e.source=i)}})}u={}}addTriangle_(t,e,i,r,n,o){this.triangles_.push({source:[r,n,o],target:[t,e,i]})}addQuad_(t,e,i,o,s,a,h,l,u){let c=(0,r.boundingExtent)([s,a,h,l]),d=this.sourceWorldWidth_?(0,r.getWidth)(c)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,_=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let n=(0,r.boundingExtent)([t,e,i,o]);_=(0,r.getWidth)(n)/this.targetWorldWidth_>.25||_}!f&&this.sourceProj_.isGlobal()&&d&&(_=d>.25||_)}if(!_&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!(0,r.intersects)(c,this.maxSourceExtent_))return;let m=0;if(!_&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)_=!0;else if(1!=(m=8*!(isFinite(s[0])&&isFinite(s[1]))+4*!(isFinite(a[0])&&isFinite(a[1]))+2*!(isFinite(h[0])&&isFinite(h[1]))+ +!(isFinite(l[0])&&isFinite(l[1])))&&2!=m&&4!=m&&8!=m)return}if(u>0){if(!_){let e,r=[(t[0]+i[0])/2,(t[1]+i[1])/2],o=this.transformInv_(r);e=f?((0,n.xP)(s[0],g)+(0,n.xP)(h[0],g))/2-(0,n.xP)(o[0],g):(s[0]+h[0])/2-o[0];let a=(s[1]+h[1])/2-o[1];_=e*e+a*a>this.errorThresholdSquared_}if(_){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){let r=[(e[0]+i[0])/2,(e[1]+i[1])/2],n=this.transformInv_(r),c=[(o[0]+t[0])/2,(o[1]+t[1])/2],d=this.transformInv_(c);this.addQuad_(t,e,r,c,s,a,n,d,u-1),this.addQuad_(c,r,i,o,d,n,h,l,u-1)}else{let r=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=this.transformInv_(r),c=[(i[0]+o[0])/2,(i[1]+o[1])/2],d=this.transformInv_(c);this.addQuad_(t,r,c,o,s,n,d,l,u-1),this.addQuad_(r,e,i,c,n,a,h,d,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(11&m)==0&&this.addTriangle_(t,i,o,s,h,l),(14&m)==0&&this.addTriangle_(t,i,e,s,h,a),m&&((13&m)==0&&this.addTriangle_(e,o,t,a,l,s),(7&m)==0&&this.addTriangle_(e,o,i,a,l,h))}calculateSourceExtent(){let t=(0,r.createEmpty)();return this.triangles_.forEach(function(e,i,n){let o=e.source;(0,r.extendCoordinate)(t,o[0]),(0,r.extendCoordinate)(t,o[1]),(0,r.extendCoordinate)(t,o[2])}),t}getTriangles(){return this.triangles_}}},20776:function(t,e,i){i.d(e,{l:function(){return r}});let r=.5}}]);
//# sourceMappingURL=4297.9f853d891055dc2c.js.map