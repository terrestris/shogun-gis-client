"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5798"],{41173:function(t,e,n){var s=n(9520);class r extends s.default{constructor(t,e,n,s){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=s}}e.Z=r},33162:function(t,e,n){var s=n(85386);e.Z=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,s.W8)(),{get:(t,e)=>{if("function"==typeof(0,s.W8)()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}pushMethodArgs_=(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this);pushFunction(t){this.instructions_[this.zIndex+this.offset_].push(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let n=0,s=e.length;n<s;++n){let s=e[n];if("function"==typeof s){s(t);continue}let r=e[++n];if("function"==typeof t[s])t[s](...r);else{if("function"==typeof r){t[s]=r(t);continue}t[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},4722:function(t,e,n){n.d(e,{Z:function(){return y},r:function(){return p}});var s=n(79682),r=n(14419),i=n(85386),a=n(21915),o=n(41173),h=n(97208),l=n(33162),d=n(82359),u=n(11256),c=n(56834),f=n(73381),g=n(49179);class _ extends c.default{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=[],this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return(0,g.abstract)()}getData(t){return null}prepareFrame(t){return(0,g.abstract)()}renderFrame(t,e){return(0,g.abstract)()}forEachFeatureAtCoordinate(t,e,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let e=t.target;(e.getState()===u.default.LOADED||e.getState()===u.default.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=u.default.LOADED&&e!=u.default.ERROR&&t.addEventListener(f.default.CHANGE,this.boundHandleImageChange_),e==u.default.IDLE&&(t.load(),e=t.getState()),e==u.default.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}var x=_;let p=[],m=null;var y=class extends x{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,d.Ue)(),this.pixelTransform=(0,d.Ue)(),this.inversePixelTransform=(0,d.Ue)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){let s;m||(m=(0,i.E4)(1,1,void 0,{willReadFrequently:!0})),m.clearRect(0,0,1,1);try{m.drawImage(t,e,n,1,1,0,0,1,1),s=m.getImageData(0,0,1,1).data}catch{return m=null,null}return s}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){let a,o;let h=this.getLayer().getClassName();if(t&&t.className===h&&(!n||t&&t.style.backgroundColor&&(0,s.fS)((0,r._2)(t.style.backgroundColor),(0,r._2)(n)))){let e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(a=document.createElement("div")).className=h;let t=a.style;t.position="absolute",t.width="100%",t.height="100%";let e=(o=(0,i.E4)()).canvas;a.appendChild(e),(t=e.style).position="absolute",t.left="0",t.transformOrigin="top left",this.container=a,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){let s=(0,a.getTopLeft)(n),r=(0,a.getTopRight)(n),i=(0,a.getBottomRight)(n),o=(0,a.getBottomLeft)(n);(0,d.nn)(e.coordinateToPixelTransform,s),(0,d.nn)(e.coordinateToPixelTransform,r),(0,d.nn)(e.coordinateToPixelTransform,i),(0,d.nn)(e.coordinateToPixelTransform,o);let h=this.inversePixelTransform;(0,d.nn)(h,s),(0,d.nn)(h,r),(0,d.nn)(h,i),(0,d.nn)(h,o),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,e){let n=t.extent,s=t.viewState.resolution,r=t.viewState.rotation,i=t.pixelRatio,o=Math.round((0,a.getWidth)(n)/s*i),h=Math.round((0,a.getHeight)(n)/s*i);(0,d.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/i,1/i,r,-o/2,-h/2),(0,d.nb)(this.inversePixelTransform,this.pixelTransform);let l=(0,d.BB)(this.pixelTransform);if(this.useContainer(e,l,this.getBackground(t)),!this.containerReused){let t=this.context.canvas;t.width!=o||t.height!=h?(t.width=o,t.height=h):this.context.clearRect(0,0,o,h),l!==t.style.transform&&(t.style.transform=l)}}dispatchRenderEvent_(t,e,n){let s=this.getLayer();if(s.hasListener(t)){let r=new o.Z(t,this.inversePixelTransform,n,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(h.Z.PRERENDER,t,e)}postRender(t,e){!e.declutter&&this.dispatchRenderEvent_(h.Z.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new l.Z),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(h.Z.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(h.Z.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,s,r,i,a){let o=s/e,h=-t[0]+a,l=-t[1];return(0,d.qC)(this.tempTransform,r/2,i/2,o,-o,-n,h,l)}disposeInternal(){delete this.frameState,super.disposeInternal()}}}}]);
//# sourceMappingURL=5798.9dd51de4c50e1703.js.map