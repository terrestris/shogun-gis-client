"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["3100"],{80967:function(e,t){t.Z=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},79682:function(e,t,r){function n(e,t,r){let n,s;r=r||i;let o=0,a=e.length,l=!1;for(;o<a;)(s=+r(e[n=o+(a-o>>1)],t))<0?o=n+1:(a=n,l=!s);return l?o:~o}function i(e,t){return e>t?1:e<t?-1:0}function s(e,t){return e<t?1:e>t?-1:0}function o(e,t,r){if(e[0]<=t)return 0;let n=e.length;if(t<=e[n-1])return n-1;if("function"==typeof r){for(let i=1;i<n;++i){let n=e[i];if(n===t)return i;if(n<t){if(r(t,e[i-1],n)>0)return i-1;return i}}return n-1}if(r>0){for(let r=1;r<n;++r)if(e[r]<t)return r-1;return n-1}if(r<0){for(let r=1;r<n;++r)if(e[r]<=t)return r;return n-1}for(let r=1;r<n;++r){if(e[r]==t)return r;if(e[r]<t){if(e[r-1]-t<t-e[r])return r-1;return r}}return n-1}function a(e,t,r){for(;t<r;){let n=e[t];e[t]=e[r],e[r]=n,++t,--r}}function l(e,t){let r=Array.isArray(t)?t:[t],n=r.length;for(let t=0;t<n;t++)e[e.length]=r[t]}function u(e,t){let r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function h(e,t,r){let n=t||i;return e.every(function(t,i){if(0===i)return!0;let s=n(e[i-1],t);return!(s>0||r&&0===s)})}r.d(t,{$1:function(){return s},FZ:function(){return a},fS:function(){return u},h7:function(){return o},j2:function(){return i},l7:function(){return l},pT:function(){return h},ry:function(){return n}})},86320:function(e,t,r){function n(e){return Math.pow(e,3)}function i(e){return 1-n(1-e)}function s(e){return 3*e*e-2*e*e*e}function o(e){return e}function a(e){return e<.5?s(2*e):1-s(2*(e-.5))}r.r(t),r.d(t,{easeIn:function(){return n},easeOut:function(){return i},inAndOut:function(){return s},linear:function(){return o},upAndDown:function(){return a}})},9520:function(e,t,r){function n(e){e.stopPropagation()}function i(e){e.preventDefault()}r.r(t),r.d(t,{preventDefault:function(){return i},stopPropagation:function(){return n}}),t.default=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},73381:function(e,t,r){r.r(t),t.default={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},66575:function(e,t,r){var n=r(80967),i=r(64011),s=r(13580),o=r(9520);class a extends n.Z{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;let r=this.listeners_||(this.listeners_={}),n=r[e]||(r[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){let t,r="string"==typeof e,n=r?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;let a=r?new o.default(e):e;a.target||(a.target=this.eventTarget_||this);let l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});n in l||(l[n]=0,u[n]=0),++l[n];for(let e=0,r=s.length;e<r;++e)if(!1===(t="handleEvent"in s[e]?s[e].handleEvent(a):s[e].call(this,a))||a.propagationStopped){t=!1;break}if(0==--l[n]){let e=u[n];for(delete u[n];e--;)this.removeEventListener(n,i.VOID);delete l[n]}return t}disposeInternal(){this.listeners_&&(0,s.Z)(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){if(!this.listeners_)return;let r=this.listeners_[e];if(!r)return;let n=r.indexOf(t);-1!==n&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[n]=i.VOID,++this.pendingRemovals_[e]):(r.splice(n,1),0===r.length&&delete this.listeners_[e]))}}t.Z=a},64011:function(e,t,r){r.r(t),r.d(t,{FALSE:function(){return s},TRUE:function(){return i},VOID:function(){return o},memoizeOne:function(){return a},toPromise:function(){return l}});var n=r(79682);function i(){return!0}function s(){return!1}function o(){}function a(e){let t,r,i;return function(){let s=Array.prototype.slice.call(arguments);return r&&this===i&&(0,n.fS)(s,r)||(i=this,r=s,t=e.apply(this,arguments)),t}}function l(e){let t;try{t=e()}catch(e){return Promise.reject(e)}return t instanceof Promise?t:Promise.resolve(t)}},28799:function(e,t,r){r.r(t),r.d(t,{default:function(){return R}});var n=r(6908),i=r(79682),s=r(90728),o=r(85386),a=r(21915),l=r(5374),u=r(97208),h=r(82928),d=r(82777),c=r(17356),f=r(49179),p=r(43631),g=r(4722);class _ extends g.Z{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,a.createEmpty)(),this.wrappedRenderedExtent_=(0,a.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){let i=t.extent,s=t.viewState,o=s.center,l=s.resolution,u=s.projection,h=s.rotation,c=u.getExtent(),f=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),g=t.pixelRatio,_=t.viewHints,y=!(_[n.Z.ANIMATING]||_[n.Z.INTERACTING]),x=this.context,R=Math.round((0,a.getWidth)(i)/l*g),m=Math.round((0,a.getHeight)(i)/l*g),E=f.getWrapX()&&u.canWrapX(),v=E?(0,a.getWidth)(c):null,D=E?Math.ceil((i[2]-c[2])/v)+1:1,C=E?Math.floor((i[0]-c[0])/v):0;do{let n=this.getRenderTransform(o,l,0,g,R,m,C*v);t.declutter&&(n=n.slice(0)),e.execute(x,[x.canvas.width,x.canvas.height],n,h,y,void 0===r?d.QN:r?d.o5:d.eV,r?p&&t.declutter[p]:void 0)}while(++C<D)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,o.E4)(this.context.canvas.width,this.context.canvas.height,g.r))}resetDrawContext_(){if(1!==this.opacity_&&this.targetContext_){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,(0,o.jy)(this.context),g.r.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){let r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;let n=e.viewState;this.prepareContainer(e,t);let i=this.context,s=this.replayGroup_,o=s&&!s.isEmpty();if(!o&&!(this.getLayer().hasListener(u.Z.PRERENDER)||this.getLayer().hasListener(u.Z.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(i,e);let h=n.projection;if(this.clipped_=!1,o&&r.extent&&this.clipping){let t=(0,l.fromUserExtent)(r.extent,h);o=(0,a.intersects)(t,e.extent),this.clipped_=o&&!(0,a.containsExtent)(t,e.extent),this.clipped_&&this.clipUnrotated(i,e,t)}return o&&this.renderWorlds(s,e,!this.getLayer().getDeclutter()&&void 0),!e.declutter&&this.clipped_&&i.restore(),this.postRender(i,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let e=this.frameState.size.slice(),t=this.renderedCenter_,r=this.renderedResolution_,n=this.renderedRotation_,i=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),u=[],h=e[0]*c.UN,d=e[1]*c.UN;u.push(this.getRenderTransform(t,r,n,c.UN,h,d,0).slice());let f=o.getSource(),g=i.getExtent();if(f.getWrapX()&&i.canWrapX()&&!(0,a.containsExtent)(g,s)){let e,i=s[0],o=(0,a.getWidth)(g),l=0;for(;i<g[0];)e=o*--l,u.push(this.getRenderTransform(t,r,n,c.UN,h,d,e).slice()),i+=o;for(l=0,i=s[2];i>g[2];)e=o*++l,u.push(this.getRenderTransform(t,r,n,c.UN,h,d,e).slice()),i-=o}let _=(0,l.getUserProjection)();this.hitDetectionImageData_=(0,c.TU)(e,u,this.renderedFeatures_,o.getStyleFunction(),s,r,n,(0,p.se)(r,this.renderedPixelRatio_),_?i:null)}t((0,c.ix)(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,n,i){if(!this.replayGroup_)return;let s=t.viewState.resolution,o=t.viewState.rotation,a=this.getLayer(),l={},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,o,r,function(e,t,r){let s=(0,f.getUid)(e),o=l[s];if(o){if(!0!==o&&r<o.distanceSq){if(0===r)return l[s]=!0,i.splice(i.lastIndexOf(o),1),n(e,a,t);o.geometry=t,o.distanceSq=r}}else{if(0===r)return l[s]=!0,n(e,a,t);i.push(l[s]={feature:e,layer:a,geometry:t,distanceSq:r,callback:n})}},u?t.declutter?.[u]?.all().map(e=>e.value):null)}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let t,r=this.getLayer(),o=r.getSource();if(!o)return!1;let u=e.viewHints[n.Z.ANIMATING],c=e.viewHints[n.Z.INTERACTING],f=r.getUpdateWhileAnimating(),g=r.getUpdateWhileInteracting();if(this.ready&&!f&&u||!g&&c)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let _=e.extent,y=e.viewState,x=y.projection,R=y.resolution,m=e.pixelRatio,E=r.getRevision(),v=r.getRenderBuffer(),D=r.getRenderOrder();void 0===D&&(D=p.eR);let C=y.center.slice(),I=(0,a.buffer)(_,v*R),S=I.slice(),w=[I.slice()],O=x.getExtent();if(o.getWrapX()&&x.canWrapX()&&!(0,a.containsExtent)(O,e.extent)){let e=(0,a.getWidth)(O),t=Math.max((0,a.getWidth)(I)/2,e);I[0]=O[0]-t,I[2]=O[2]+t,(0,s.wrapX)(C,x);let r=(0,a.wrapX)(w[0],x);r[0]<O[0]&&r[2]<O[2]?w.push([r[0]+e,r[1],r[2]+e,r[3]]):r[0]>O[0]&&r[2]>O[2]&&w.push([r[0]-e,r[1],r[2]-e,r[3]])}if(this.ready&&this.renderedResolution_==R&&this.renderedRevision_==E&&this.renderedRenderOrder_==D&&!!e.declutter===this.renderedFrameDeclutter_&&(0,a.containsExtent)(this.wrappedRenderedExtent_,I))return(0,i.fS)(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let A=new h.Z((0,p.Qz)(R,m),I,R,m),L=(0,l.getUserProjection)();if(L){for(let e=0,t=w.length;e<t;++e){let t=w[e],r=(0,l.toUserExtent)(t,x);o.loadFeatures(r,(0,l.toUserResolution)(R,x),L)}t=(0,l.getTransformFromProjections)(L,x)}else for(let e=0,t=w.length;e<t;++e)o.loadFeatures(w[e],R,x);let P=(0,p.se)(R,m),F=!0,N=(e,n)=>{let i,s=e.getStyleFunction()||r.getStyleFunction();if(s&&(i=s(e,R)),i){let r=this.renderFeature(e,P,i,A,t,this.getLayer().getDeclutter(),n);F=F&&!r}},U=(0,l.toUserExtent)(I,x),G=o.getFeaturesInExtent(U);D&&G.sort(D);for(let e=0,t=G.length;e<t;++e)N(G[e],e);this.renderedFeatures_=G,this.ready=F;let T=A.finish(),b=new d.ZP(I,R,m,o.getOverlaps(),T,r.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=R,this.renderedRevision_=E,this.renderedRenderOrder_=D,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=S,this.wrappedRenderedExtent_=I,this.renderedCenter_=C,this.renderedProjection_=x,this.renderedPixelRatio_=m,this.replayGroup_=b,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,n,i,s,o){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,u=r.length;l<u;++l)a=(0,p.Pn)(n,e,r[l],t,this.boundHandleStyleImageChange_,i,s,o)||a;else a=(0,p.Pn)(n,e,r,t,this.boundHandleStyleImageChange_,i,s,o);return a}}var y=r(93564);class x extends y.Z{constructor(e){super(e)}createRenderer(){return new _(this)}}var R=x},13580:function(e,t,r){function n(e){for(let t in e)delete e[t]}function i(e){let t;for(t in e)return!1;return!t}r.d(t,{Z:function(){return n},x:function(){return i}})},49179:function(e,t,r){function n(){throw Error("Unimplemented abstract method.")}r.r(t),r.d(t,{VERSION:function(){return o},abstract:function(){return n},getUid:function(){return s}});let i=0;function s(e){return e.ol_uid||(e.ol_uid=String(++i))}let o="10.6.1"}}]);
//# sourceMappingURL=3100.159a66d35ff3f345.js.map