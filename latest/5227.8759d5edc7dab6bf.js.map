{"version":3,"file":"5227.8759d5edc7dab6bf.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-geo/dist/Button/DeleteButton/DeleteButton.js","webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-geo/dist/Button/ToggleButton/ToggleButton.js","webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-geo/dist/constants.js","webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-util/dist/Hooks/useOlInteraction/useOlInteraction.js","webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-util/dist/Hooks/useOlListener/useOlListener.js","webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-util/dist/Hooks/usePropOrDefault/usePropOrDefault.js","webpack://@terrestris/shogun-gis-client/./node_modules/@terrestris/react-util/dist/Hooks/useSelectFeatures/useSelectFeatures.js"],"sourcesContent":["import * as React from 'react';\nimport { useCallback, useMemo } from 'react';\nimport useMap from '@terrestris/react-util/dist/Hooks/useMap/useMap';\nimport { usePropOrDefault } from '@terrestris/react-util/dist/Hooks/usePropOrDefault/usePropOrDefault';\nimport { useSelectFeatures } from '@terrestris/react-util/dist/Hooks/useSelectFeatures/useSelectFeatures';\nimport { DigitizeUtil } from '@terrestris/react-util/dist/Util/DigitizeUtil';\nimport { CSS_PREFIX } from '../../constants';\nimport ToggleButton from '../ToggleButton/ToggleButton';\n/**\n * The className added to this component.\n */\nconst defaultClassName = `${CSS_PREFIX}deletebutton`;\nexport const DeleteButton = ({ className, digitizeLayer, onFeatureRemove, selectStyle, selectInteractionConfig, hitTolerance, pressed, ...passThroughProps }) => {\n    const map = useMap();\n    const layer = usePropOrDefault(digitizeLayer, () => map ? DigitizeUtil.getDigitizeLayer(map) : undefined, [map]);\n    const layers = useMemo(() => layer ? [layer] : [], [layer]);\n    const onFeatureSelect = useCallback((event) => {\n        if (!layer) {\n            return;\n        }\n        const feat = event.selected[0];\n        layer.getSource()?.removeFeature(feat);\n        onFeatureRemove?.(event);\n    }, [layer, onFeatureRemove]);\n    useSelectFeatures({\n        selectStyle,\n        selectInteractionConfig,\n        layers,\n        active: !!pressed,\n        hitTolerance,\n        onFeatureSelect,\n        clearAfterSelect: true\n    });\n    const finalClassName = className\n        ? `${defaultClassName} ${className}`\n        : defaultClassName;\n    return (React.createElement(ToggleButton, { pressed: pressed, className: finalClassName, ...passThroughProps }));\n};\nexport default DeleteButton;\n//# sourceMappingURL=DeleteButton.js.map","import './ToggleButton.less';\nimport React from 'react';\nimport { Button, Tooltip } from 'antd';\nimport { CSS_PREFIX } from '../../constants';\nexport const ToggleButton = ({ type = 'primary', pressed = false, tooltipProps = {\n    mouseEnterDelay: 1.5\n}, className, tooltip, tooltipPlacement, pressedIcon, icon, children, value, onClick, onChange = () => undefined, ...passThroughProps }) => {\n    const handleChange = (evt) => {\n        if (onClick) {\n            onClick(evt);\n            if (evt.defaultPrevented) {\n                return;\n            }\n        }\n        onChange(evt, value);\n    };\n    const internalClassName = `${CSS_PREFIX}togglebutton`;\n    const finalClassName = className\n        ? `${className} ${internalClassName}`\n        : internalClassName;\n    let pressedClass = '';\n    if (pressed) {\n        pressedClass = ' btn-pressed';\n    }\n    return (React.createElement(Tooltip, { title: tooltip, placement: tooltipPlacement, ...tooltipProps },\n        React.createElement(Button, { type: type, onClick: handleChange, onChange: onChange, className: `${finalClassName}${pressedClass}`, \"aria-pressed\": pressed, icon: pressed ?\n                pressedIcon :\n                icon, ...passThroughProps }, children)));\n};\nexport default ToggleButton;\n//# sourceMappingURL=ToggleButton.js.map","const CSS_PREFIX = 'react-geo-';\nexport { CSS_PREFIX };\n//# sourceMappingURL=constants.js.map","import { useEffect, useState } from 'react';\nimport { isNil } from 'lodash';\nimport useMap from '../useMap/useMap';\n/**\n * This hook adds an interaction to the map and removes/updates it if the dependency array changes.\n * It accepts an optional active parameter that toggles the active state of the interaction. If it is undefined the\n * active state will not get changed.\n * @param constructor returns an interaction to be added to the map, will be called again, if the interaction needs\n * to be updated\n * @param dependencies\n * @param active\n */\nexport const useOlInteraction = (constructor, dependencies, active) => {\n    const map = useMap();\n    const [interaction, setInteraction] = useState();\n    useEffect(() => {\n        if (!map) {\n            return undefined;\n        }\n        const newInteraction = constructor();\n        if (!newInteraction) {\n            return undefined;\n        }\n        setInteraction(newInteraction);\n        map.addInteraction(newInteraction);\n        return () => {\n            map.removeInteraction(newInteraction);\n            setInteraction(undefined);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [...dependencies, map]);\n    useEffect(() => {\n        if (!interaction || isNil(active)) {\n            return;\n        }\n        interaction.setActive(active);\n    }, [interaction, active]);\n    return interaction;\n};\nexport default useOlInteraction;\n//# sourceMappingURL=useOlInteraction.js.map","import { useEffect } from 'react';\nimport { unByKey } from 'ol/Observable';\n/**\n * This hook unregisters listeners if the dependency array changes\n */\nexport const useOlListener = (observable, observe, dependencies, active) => {\n    useEffect(() => {\n        if (!observable || active === false) {\n            return undefined;\n        }\n        const observables = Array.isArray(observable) ? observable : [observable];\n        const keys = observables\n            .flatMap(o => {\n            const k = observe(o);\n            return Array.isArray(k) ? k : [k];\n        })\n            .filter(k => k !== undefined);\n        return () => {\n            for (const key of keys) {\n                unByKey(key);\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [observable, active, observe, ...dependencies]);\n};\nexport default useOlListener;\n//# sourceMappingURL=useOlListener.js.map","import { useEffect, useState } from 'react';\nexport const usePropOrDefault = (prop, defaultFunc, dependencies) => {\n    const [value, setValue] = useState();\n    useEffect(() => {\n        if (prop) {\n            setValue(prop);\n        }\n        else {\n            setValue(defaultFunc());\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [prop, ...dependencies]);\n    return value;\n};\nexport default usePropOrDefault;\n//# sourceMappingURL=usePropOrDefault.js.map","import { useEffect } from 'react';\nimport OlCollection from 'ol/Collection';\nimport * as OlEventConditions from 'ol/events/condition';\nimport OlInteractionSelect from 'ol/interaction/Select';\nimport { DigitizeUtil } from '../../Util/DigitizeUtil';\nimport { useOlInteraction } from '../useOlInteraction/useOlInteraction';\nimport { useOlListener } from '../useOlListener/useOlListener';\nimport { usePropOrDefault } from '../usePropOrDefault/usePropOrDefault';\nexport const useSelectFeatures = ({ active, selectStyle, selectInteractionConfig, onFeatureSelect, hitTolerance = 5, layers, clearAfterSelect = false, featuresCollection }) => {\n    const features = usePropOrDefault(featuresCollection, () => new OlCollection(), []);\n    const selectInteraction = useOlInteraction(() => {\n        if (!features) {\n            return undefined;\n        }\n        const newInteraction = new OlInteractionSelect({\n            condition: OlEventConditions.singleClick,\n            features,\n            hitTolerance: hitTolerance,\n            style: selectStyle ?? DigitizeUtil.DEFAULT_SELECT_STYLE,\n            layers: layers,\n            ...(selectInteractionConfig ?? {})\n        });\n        newInteraction.set('name', 'react-util-select-interaction');\n        return newInteraction;\n    }, [features, hitTolerance, selectStyle, layers, selectInteractionConfig], active);\n    useOlListener(selectInteraction, i => i.on('select', e => {\n        if (features && clearAfterSelect) {\n            features.clear();\n        }\n        onFeatureSelect?.(e);\n    }), [features, clearAfterSelect, onFeatureSelect]);\n    useEffect(() => {\n        if (!active && features) {\n            features.clear();\n        }\n    }, [active, features]);\n};\nexport default useSelectFeatures;\n//# sourceMappingURL=useSelectFeatures.js.map"],"names":["u","e","v","Array"],"mappings":"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"}