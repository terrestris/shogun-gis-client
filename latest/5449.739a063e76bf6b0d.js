"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["5449"],{93409:function(e,t,i){i.r(t);var s=i(58493),n=i(40188),a=i(67644),l=i(21915),r=i(13002),o=i(85386);let h={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class d extends s.default{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h.ELEMENT,this.handleElementChanged),this.addChangeListener(h.MAP,this.handleMapChanged),this.addChangeListener(h.OFFSET,this.handleOffsetChanged),this.addChangeListener(h.POSITION,this.handlePositionChanged),this.addChangeListener(h.POSITIONING,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(h.ELEMENT)}getId(){return this.id}getMap(){return this.get(h.MAP)||null}getOffset(){return this.get(h.OFFSET)}getPosition(){return this.get(h.POSITION)}getPositioning(){return this.get(h.POSITIONING)}handleElementChanged(){(0,o.ep)(this.element);let e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),(0,r.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,r.oL)(e,n.Z.POSTRENDER,this.render,this),this.updatePixelPosition();let t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(h.ELEMENT,e)}setMap(e){this.set(h.MAP,e)}setOffset(e){this.set(h.OFFSET,e)}setPosition(e){this.set(h.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){let t=this.getMap();if(!t||!t.getTargetElement()||!this.get(h.POSITION))return;let i=this.getRect(t.getTargetElement(),t.getSize()),s=this.getElement(),n=this.getRect(s,[(0,o.iO)(s),(0,o.Pb)(s)]),a=void 0===(e=e||{}).margin?20:e.margin;if(!(0,l.containsExtent)(i,n)){let s=n[0]-i[0],l=i[2]-n[2],r=n[1]-i[1],o=i[3]-n[3],h=[0,0];if(s<0?h[0]=s-a:l<0&&(h[0]=Math.abs(l)+a),r<0?h[1]=r-a:o<0&&(h[1]=Math.abs(o)+a),0!==h[0]||0!==h[1]){let i=t.getView().getCenterInternal(),s=t.getPixelFromCoordinateInternal(i);if(!s)return;let n=[s[0]+h[0],s[1]+h[1]],a=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(n),duration:a.duration,easing:a.easing})}}}getRect(e,t){let i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[s,n,s+t[0],n+t[1]]}setPositioning(e){this.set(h.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){let e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}let i=e.getPixelFromCoordinate(t),s=e.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(e,t){let i=this.element.style,s=this.getOffset(),n=this.getPositioning();this.setVisible(!0);let a=Math.round(e[0]+s[0])+"px",l=Math.round(e[1]+s[1])+"px",r="0%",o="0%";"bottom-right"==n||"center-right"==n||"top-right"==n?r="-100%":("bottom-center"==n||"center-center"==n||"top-center"==n)&&(r="-50%"),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?o="-100%":("center-left"==n||"center-center"==n||"center-right"==n)&&(o="-50%");let h=`translate(${r}, ${o}) translate(${a}, ${l})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}t.default=d},46410:function(e,t,i){i.r(t),i.d(t,{MousePosition:function(){return v.default},Control:function(){return n.Z},ZoomToExtent:function(){return D},ZoomSlider:function(){return k},FullScreen:function(){return m},OverviewMap:function(){return T},ScaleLine:function(){return O.default},defaults:function(){return W.c},Zoom:function(){return I.Z},Attribution:function(){return s.Z},Rotate:function(){return R.Z}});var s=i("33224"),n=i("19530"),a=i("73381"),l=i("39850"),r=i("67644"),o=i("13002"),h=i("85386");let d=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],u={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class c extends n.Z{constructor(e){super({element:document.createElement("div"),target:(e=e||{}).target}),this.on,this.once,this.un,this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==e.activeClassName?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==e.inactiveClassName?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];let t=void 0!==e.label?e.label:"⤢";this.labelNode_="string"==typeof t?document.createTextNode(t):t;let i=void 0!==e.labelActive?e.labelActive:"\xd7";this.labelActiveNode_="string"==typeof i?document.createTextNode(i):i;let s=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(a.default.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${r.XV} ${r.hg}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){let e=this.getMap();if(!e)return;let t=e.getOwnerDocument();if(!!g(t))if(p(t))(function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()})(t);else{let i;i=this.source_?"string"==typeof this.source_?t.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():_(e)}(i):_(i)}}handleFullScreenChange_(){let e=this.getMap();if(!e)return;let t=this.isInFullscreen_;this.isInFullscreen_=p(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,h.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(u.ENTERFULLSCREEN)):((0,h.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(u.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){let t=this.getMap();t&&t.removeChangeListener(l.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(l.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){let e=this.documentListeners_;for(let t=0,i=e.length;t<i;++t)(0,o.bN)(e[t]);e.length=0;let t=this.getMap();if(t){let i=t.getOwnerDocument();g(i)?this.element.classList.remove(r.Qi):this.element.classList.add(r.Qi);for(let t=0,s=d.length;t<s;++t)e.push((0,o.oL)(i,d[t],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function g(e){let t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function p(e){return!!(e.webkitIsFullScreen||e.fullscreenElement)}function _(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}var m=c,v=i("4509"),f=i("78426"),E=i("73983"),b=i("40188"),C=i("13910"),w=i("93409"),L=i("21896"),P=i("86340"),M=i("21915"),x=i("15265");class N extends n.Z{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,!this.collapsible_&&(this.collapsed_=!1),this.rotateWithView_=void 0!==e.rotateWithView&&e.rotateWithView,this.viewExtent_=void 0;let t=void 0!==e.className?e.className:"ol-overviewmap",i=void 0!==e.tipLabel?e.tipLabel:"Overview map",s=void 0!==e.collapseLabel?e.collapseLabel:"‹";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;let n=void 0!==e.label?e.label:"›";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,o=document.createElement("button");o.setAttribute("type","button"),o.title=i,o.appendChild(l),o.addEventListener(a.default.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;let h=new E.default({view:e.view,controls:new f.default,interactions:new f.default});this.ovmap_=h,e.layers&&e.layers.forEach(function(e){h.addLayer(e)});let d=document.createElement("div");d.className="ol-overviewmap-box",d.style.boxSizing="border-box",this.boxOverlay_=new w.default({position:[0,0],positioning:"center-center",element:d}),this.ovmap_.addOverlay(this.boxOverlay_);let u=t+" "+r.XV+" "+r.hg+(this.collapsed_&&this.collapsible_?" "+r.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.ovmapDiv_),c.appendChild(o);let g=this,p=this.boxOverlay_,_=this.boxOverlay_.getElement(),m=function(e){var t;let i={clientX:(t=e).clientX,clientY:t.clientY},s=h.getEventCoordinate(i);p.setPosition(s)},v=function(e){let t=h.getEventCoordinateInternal(e);g.getMap().getView().setCenterInternal(t),window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v)};this.ovmapDiv_.addEventListener("pointerdown",function(){event.target===_&&window.addEventListener("pointermove",m),window.addEventListener("pointerup",v)})}setMap(e){let t=this.getMap();if(e!==t){if(t){let e=t.getView();e&&this.unbindView_(e),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,o.oL)(e,C.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));let t=e.getView();t&&this.bindView_(t),!this.ovmap_.isRendered()&&this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===l.Z.VIEW){let t=e.oldValue;t&&this.unbindView_(t);let i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===l.Z.TARGET||e.key===l.Z.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){let t=new L.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(P.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(P.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){let e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;let i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&(0,M.equals)(s,this.viewExtent_))return;this.viewExtent_=s;let n=t.getSize(),a=t.getView().calculateExtentInternal(n),l=t.getPixelFromCoordinateInternal((0,M.getTopLeft)(s)),r=t.getPixelFromCoordinateInternal((0,M.getBottomRight)(s)),o=Math.abs(l[0]-r[0]),h=Math.abs(l[1]-r[1]),d=n[0],u=n[1];o<.1*d||h<.1*u||o>.75*d||h>.75*u?this.resetExtent_():!(0,M.containsExtent)(a,s)&&this.recenter_()}resetExtent_(){let e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),n=t.getView(),a=1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2));(0,M.scaleFromCenter)(s,a),n.fitInternal((0,x.fromExtent)(s))}recenter_(){let e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){let e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;let i=e.getSize(),s=e.getView(),n=t.getView(),a=this.rotateWithView_?0:-s.getRotation(),l=this.boxOverlay_,r=this.boxOverlay_.getElement(),o=s.getCenter(),h=s.getResolution(),d=n.getResolution(),u=i[0]*h/d,c=i[1]*h/d;if(l.setPosition(o),r){r.style.width=u+"px",r.style.height=c+"px";r.style.transform="rotate("+a+"rad)"}}updateBoxAfterOvmapIsRendered_(){if(!this.ovmapPostrenderKey_)this.ovmapPostrenderKey_=(0,o.Vx)(this.ovmap_,b.Z.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()})}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(r.hN),this.collapsed_?(0,h.$H)(this.collapseLabel_,this.label_):(0,h.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;let e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){if(this.collapsible_!==e)this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_()}setCollapsed(e){if(!!this.collapsible_&&this.collapsed_!==e)this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){if(this.rotateWithView_!==e)this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_())}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}var T=N,R=i("62078"),O=i("25303"),I=i("99937"),F=i("10669"),S=i("21882"),y=i("86320"),V=i("9520");let Z={VERTICAL:0,HORIZONTAL:1};class A extends n.Z{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=Z.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;let t=void 0!==e.className?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=t+"-thumb "+r.XV;let s=this.element;s.className=t+" "+r.XV+" "+r.hg,s.appendChild(i),s.addEventListener(F.Z.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),s.addEventListener(F.Z.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),s.addEventListener(F.Z.POINTERUP,this.handleDraggerEnd_.bind(this),!1),s.addEventListener(a.default.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(a.default.CLICK,V.stopPropagation,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){let e=this.element,t=e.offsetWidth,i=e.offsetHeight;if(0===t&&0===i)return this.sliderInitialized_=!1;let s=getComputedStyle(e);t-=parseFloat(s.paddingRight)+parseFloat(s.paddingLeft),i-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom);let n=e.firstElementChild,a=getComputedStyle(n),l=n.offsetWidth+parseFloat(a.marginRight)+parseFloat(a.marginLeft),r=n.offsetHeight+parseFloat(a.marginTop)+parseFloat(a.marginBottom);return this.thumbSize_=[l,r],t>i?(this.direction_=Z.HORIZONTAL,this.widthLimit_=t-l):(this.direction_=Z.VERTICAL,this.heightLimit_=i-r),this.sliderInitialized_=!0}handleContainerClick_(e){let t=this.getMap().getView(),i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),s=this.getResolutionForPosition_(i),n=t.getConstrainedZoom(t.getZoomForResolution(s));t.animateInternal({zoom:n,duration:this.duration_,easing:y.easeOut})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){let t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){let e=this.handleDraggerDrag_,t=this.handleDraggerEnd_,i=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,o.oL)(i,F.Z.POINTERMOVE,e,this),(0,o.oL)(i,F.Z.POINTERUP,t,this))}}}handleDraggerDrag_(e){if(this.dragging_){let t=e.clientX-this.startX_,i=e.clientY-this.startY_,s=this.getRelativePosition_(t,i);this.currentResolution_=this.getResolutionForPosition_(s),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(o.bN),this.dragListenerKeys_.length=0)}setThumbPosition_(e){let t=this.getPositionForResolution_(e),i=this.element.firstElementChild;this.direction_==Z.HORIZONTAL?i.style.left=this.widthLimit_*t+"px":i.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let i;return i=this.direction_===Z.HORIZONTAL?e/this.widthLimit_:t/this.heightLimit_,(0,S.uZ)(i,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){let t=this.getMap().getView().getValueForResolutionFunction();return(0,S.uZ)(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;let t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}var k=A,H=i("5374");class j extends n.Z{constructor(e){super({element:document.createElement("div"),target:(e=e||{}).target}),this.extent=e.extent?e.extent:null;let t=void 0!==e.className?e.className:"ol-zoom-extent",i=void 0!==e.label?e.label:"E",s=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",n=document.createElement("button");n.setAttribute("type","button"),n.title=s,n.appendChild("string"==typeof i?document.createTextNode(i):i),n.addEventListener(a.default.CLICK,this.handleClick_.bind(this),!1);let l=t+" "+r.XV+" "+r.hg,o=this.element;o.className=l,o.appendChild(n)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){let e=this.getMap().getView(),t=this.extent?(0,H.fromUserExtent)(this.extent,e.getProjection()):e.getProjection().getExtent();e.fitInternal((0,x.fromExtent)(t))}}var D=j,W=i("157")},4509:function(e,t,i){i.r(t);var s=i(19530),n=i(10669),a=i(5374),l=i(13002),r=i(90728);let o="projection",h="coordinateFormat";class d extends s.Z{constructor(e){e=e||{};let t=document.createElement("div");t.className=void 0!==e.className?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(o,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=void 0!==e.placeholder,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==e.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(h)}getProjection(){return this.get(o)}handleMouseMove(e){let t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){let t=e.getViewport();this.listenerKeys.push((0,l.oL)(t,n.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,l.oL)(t,n.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(h,e)}setProjection(e){this.set(o,(0,a.get)(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){let e=this.getProjection();e?this.transform_=(0,a.getTransformFromProjections)(this.mapProjection_,e):this.transform_=a.identityTransform}let i=this.getMap().getCoordinateFromPixelInternal(e);if(i){let e=(0,a.getUserProjection)();if(e&&(this.transform_=(0,a.getTransformFromProjections)(this.mapProjection_,e)),this.transform_(i,i),this.wrapX_){let t=e||this.getProjection()||this.mapProjection_;(0,r.wrapX)(i,t)}let s=this.getCoordinateFormat();t=s?s(i):i.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){let t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}t.default=d},25303:function(e,t,i){i.r(t);var s=i(19530),n=i(67644),a=i(5374);let l="units",r=[1,2,5],o=25.4/.28;class h extends s.Z{constructor(e){e=e||{};let t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;let i=void 0!==e.className?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+n.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(l,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(l)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(l,e)}setDpi(e){this.dpi_=e}updateElement_(){let e,t,i,s,n,l;let h=this.viewState_;if(!h){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let d=h.center,u=h.projection,c=this.getUnits(),g=(0,a.getPointResolution)(u,h.resolution,d,"degrees"==c?"degrees":"m"),p=this.minWidth_*(this.dpi_||o)/o,_=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||o)/o:void 0,m=p*g,v="";if("degrees"==c){let e=a.METERS_PER_UNIT.degrees;(m*=e)<e/60?(v="″",g*=3600):m<e?(v="′",g*=60):v="\xb0"}else if("imperial"==c)m<.9144?(v="in",g/=.0254):m<1609.344?(v="ft",g/=.3048):(v="mi",g/=1609.344);else if("nautical"==c)g/=1852,v="NM";else if("metric"==c)m<1e-6?(v="nm",g*=1e9):m<.001?(v="μm",g*=1e6):m<1?(v="mm",g*=1e3):m<1e3?v="m":(v="km",g/=1e3);else if("us"==c)m<.9144?(v="in",g*=39.37):m<1609.344?(v="ft",g/=.30480061):(v="mi",g/=1609.3472);else throw Error("Invalid units");let f=3*Math.floor(Math.log(p*g)/Math.log(10));for(;;){let a=Math.pow(10,i=Math.floor(f/3));if(isNaN(t=Math.round((e=r[(f%3+3)%3]*a)/g))){this.element.style.display="none",this.renderedVisible_=!1;return}if(void 0!==_&&t>=_){e=s,t=n,i=l;break}if(t>=p)break;s=e,n=t,l=i,++f}let E=this.scaleBar_?this.createScaleBar(t,e,v):e.toFixed(i<0?-i:0)+" "+v;this.renderedHTML_!=E&&(this.innerElement_.innerHTML=E,this.renderedHTML_=E),this.renderedWidth_!=t&&(this.innerElement_.style.width=t+"px",this.renderedWidth_=t),!this.renderedVisible_&&(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){let s=this.getScaleForResolution(),n=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),a=this.scaleBarSteps_,l=e/a,r=[this.createMarker("absolute")];for(let s=0;s<a;++s){let n=s%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";r.push(`<div><div class="ol-scale-singlebar ${n}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(s%2==0||2===a?this.createStepText(s,e,!1,t,i):"")+"</div>")}return r.push(this.createStepText(a,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+n+"</div>":"")+r.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${"absolute"===e?3:-10}px;"></div>`}createStepText(e,t,i,s,n){let a=0===e?0:Math.round(s/this.scaleBarSteps_*e*100)/100,l=0===e?-3:-(t/this.scaleBarSteps_*1),r=0===e?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${0===e?"left":"center"};min-width: ${r}px;left: ${i?t+"px":"unset"};">`+a+(0===e?"":" "+n)+"</div>"}getScaleForResolution(){let e=(0,a.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||o;return 1e3/25.4*e*t}render(e){let t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}t.default=h}}]);
//# sourceMappingURL=5449.739a063e76bf6b0d.js.map