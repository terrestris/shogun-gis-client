{"version":3,"file":"3480.8abeca682b6c176d.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/MapEventType.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/Object.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/ObjectEventType.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/Observable.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/control/Control.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/control/ScaleLine.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/css.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/events.js"],"sourcesContent":["/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend',\n\n  /**\n   * Triggered when loading of additional map data (tiles, images, features) starts.\n   * @event module:ol/MapEvent~MapEvent#loadstart\n   * @api\n   */\n  LOADSTART: 'loadstart',\n\n  /**\n   * Triggered when loading of additional map data has completed.\n   * @event module:ol/MapEvent~MapEvent#loadend\n   * @api\n   */\n  LOADEND: 'loadend',\n};\n\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n","/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport {getUid} from './util.js';\nimport {isEmpty} from './obj.js';\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n  /**\n   * @param {Object<string, *>} [values] An object with key-value pairs.\n   */\n  constructor(values) {\n    super();\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ObjectOnSignature<void>}\n     */\n    this.un;\n\n    // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {Object<string, *>|null}\n     */\n    this.values_ = null;\n\n    if (values !== undefined) {\n      this.setProperties(values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_ && this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return (this.values_ && Object.keys(this.values_)) || [];\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return (this.values_ && Object.assign({}, this.values_)) || {};\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>?} Object.\n   */\n  getPropertiesInternal() {\n    return this.values_;\n  }\n\n  /**\n   * @return {boolean} The object has properties.\n   */\n  hasProperties() {\n    return !!this.values_;\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = `change:${key}`;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  addChangeListener(key, listener) {\n    this.addEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  removeChangeListener(key, listener) {\n    this.removeEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  set(key, value, silent) {\n    const values = this.values_ || (this.values_ = {});\n    if (silent) {\n      values[key] = value;\n    } else {\n      const oldValue = values[key];\n      values[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  setProperties(values, silent) {\n    for (const key in values) {\n      this.set(key, values[key], silent);\n    }\n  }\n\n  /**\n   * Apply any properties from another object without triggering events.\n   * @param {BaseObject} source The source object.\n   * @protected\n   */\n  applyProperties(source) {\n    if (!source.values_) {\n      return;\n    }\n    Object.assign(this.values_ || (this.values_ = {}), source.values_);\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean} [silent] Unset without triggering an event.\n   * @api\n   */\n  unset(key, silent) {\n    if (this.values_ && key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (isEmpty(this.values_)) {\n        this.values_ = null;\n      }\n      if (!silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\nexport default BaseObject;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange',\n};\n\n/**\n * @typedef {'propertychange'} Types\n */\n","/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {listen, listenOnce, unlistenByKey} from './events.js';\n\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n    super();\n\n    this.on =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onInternal\n      );\n\n    this.once =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onceInternal\n      );\n\n    this.un = /** @type {ObservableOnSignature<void>} */ (this.unInternal);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onInternal(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    }\n    return listen(this, /** @type {string} */ (type), listener);\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onceInternal(type, listener) {\n    let key;\n    if (Array.isArray(type)) {\n      const len = type.length;\n      key = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        key[i] = listenOnce(this, type[i], listener);\n      }\n    } else {\n      key = listenOnce(this, /** @type {string} */ (type), listener);\n    }\n    /** @type {Object} */ (listener).ol_key = key;\n    return key;\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @protected\n   */\n  unInternal(type, listener) {\n    const key = /** @type {Object} */ (listener).ol_key;\n    if (key) {\n      unByKey(key);\n    } else if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        this.removeEventListener(type[i], listener);\n      }\n    } else {\n      this.removeEventListener(type, listener);\n    }\n  }\n}\n\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\nexport default Observable;\n","/**\n * @module ol/control/Control\n */\nimport BaseObject from '../Object.js';\nimport MapEventType from '../MapEventType.js';\nimport {VOID} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * const myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n  /**\n   * @param {Options} options Control options.\n   */\n  constructor(options) {\n    super();\n\n    const element = options.element;\n    if (element && !options.target && !element.style.pointerEvents) {\n      element.style.pointerEvents = 'auto';\n    }\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = element ? element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../Map.js\").default|null}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    if (options.render) {\n      this.render = options.render;\n    }\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n  }\n\n  /**\n   * Clean up.\n   * @override\n   */\n  disposeInternal() {\n    this.element?.remove();\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {import(\"../Map.js\").default|null} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      this.element?.remove();\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (map) {\n      const target = this.target_ ?? map.getOverlayContainerStopEvent();\n      if (this.element) {\n        target.appendChild(this.element);\n      }\n      if (this.render !== VOID) {\n        this.listenerKeys.push(\n          listen(map, MapEventType.POSTRENDER, this.render, this),\n        );\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * Renders the control.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @api\n   */\n  render(mapEvent) {}\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ =\n      typeof target === 'string' ? document.getElementById(target) : target;\n  }\n}\n\nexport default Control;\n","/**\n * @module ol/control/ScaleLine\n */\nimport Control from './Control.js';\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {METERS_PER_UNIT, getPointResolution} from '../proj.js';\n\n/**\n * @type {string}\n */\nconst UNITS_PROP = 'units';\n\n/**\n * @typedef {'degrees' | 'imperial' | 'nautical' | 'metric' | 'us'} Units\n * Units for the scale line.\n */\n\n/**\n * @const\n * @type {Array<number>}\n */\nconst LEADING_DIGITS = [1, 2, 5];\n\n/**\n * @const\n * @type {number}\n */\nconst DEFAULT_DPI = 25.4 / 0.28;\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:units', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |'change:units', Return>} ScaleLineOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className] CSS class name. The default is `ol-scale-bar` when configured with\n * `bar: true`. Otherwise the default is `ol-scale-line`.\n * @property {number} [minWidth=64] Minimum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {number} [maxWidth] Maximum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {Units} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n * @property {number|undefined} [dpi=undefined] dpi of output device such as printer. Only applies\n * when `bar` is `true`. If undefined the OGC default screen pixel size of 0.28mm will be assumed.\n */\n\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n * For cartesian measurements of the scaleline, you need to set the\n * `getPointResolution` method of your projection to simply return the input\n * value, e.g. `projection.setGetPointResolution(r => r);`\n *\n * @api\n */\nclass ScaleLine extends Control {\n  /**\n   * @param {Options} [options] Scale line options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const element = document.createElement('div');\n    element.style.pointerEvents = 'none';\n\n    super({\n      element: element,\n      render: options.render,\n      target: options.target,\n    });\n\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ScaleLineOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ScaleLineOnSignature<void>}\n     */\n    this.un;\n\n    const className =\n      options.className !== undefined\n        ? options.className\n        : options.bar\n          ? 'ol-scale-bar'\n          : 'ol-scale-line';\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.innerElement_ = document.createElement('div');\n    this.innerElement_.className = className + '-inner';\n\n    this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n    this.element.appendChild(this.innerElement_);\n\n    /**\n     * @private\n     * @type {?import(\"../View.js\").State}\n     */\n    this.viewState_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.maxWidth_ = options.maxWidth;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderedWidth_ = undefined;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.renderedHTML_ = '';\n\n    this.addChangeListener(UNITS_PROP, this.handleUnitsChanged_);\n\n    this.setUnits(options.units || 'metric');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBar_ = options.bar || false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scaleBarSteps_ = options.steps || 4;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.scaleBarText_ = options.text || false;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.dpi_ = options.dpi || undefined;\n  }\n\n  /**\n   * Return the units to use in the scale line.\n   * @return {Units} The units\n   * to use in the scale line.\n   * @observable\n   * @api\n   */\n  getUnits() {\n    return this.get(UNITS_PROP);\n  }\n\n  /**\n   * @private\n   */\n  handleUnitsChanged_() {\n    this.updateElement_();\n  }\n\n  /**\n   * Set the units to use in the scale line.\n   * @param {Units} units The units to use in the scale line.\n   * @observable\n   * @api\n   */\n  setUnits(units) {\n    this.set(UNITS_PROP, units);\n  }\n\n  /**\n   * Specify the dpi of output device such as printer.\n   * @param {number|undefined} dpi The dpi of output device.\n   * @api\n   */\n  setDpi(dpi) {\n    this.dpi_ = dpi;\n  }\n\n  /**\n   * @private\n   */\n  updateElement_() {\n    const viewState = this.viewState_;\n\n    if (!viewState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const center = viewState.center;\n    const projection = viewState.projection;\n    const units = this.getUnits();\n    const pointResolutionUnits = units == 'degrees' ? 'degrees' : 'm';\n    let pointResolution = getPointResolution(\n      projection,\n      viewState.resolution,\n      center,\n      pointResolutionUnits,\n    );\n\n    const minWidth =\n      (this.minWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI;\n\n    const maxWidth =\n      this.maxWidth_ !== undefined\n        ? (this.maxWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI\n        : undefined;\n\n    let nominalCount = minWidth * pointResolution;\n    let suffix = '';\n    if (units == 'degrees') {\n      const metersPerDegree = METERS_PER_UNIT.degrees;\n      nominalCount *= metersPerDegree;\n      if (nominalCount < metersPerDegree / 60) {\n        suffix = '\\u2033'; // seconds\n        pointResolution *= 3600;\n      } else if (nominalCount < metersPerDegree) {\n        suffix = '\\u2032'; // minutes\n        pointResolution *= 60;\n      } else {\n        suffix = '\\u00b0'; // degrees\n      }\n    } else if (units == 'imperial') {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution /= 0.0254;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.3048;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.344;\n      }\n    } else if (units == 'nautical') {\n      pointResolution /= 1852;\n      suffix = 'NM';\n    } else if (units == 'metric') {\n      if (nominalCount < 1e-6) {\n        suffix = 'nm';\n        pointResolution *= 1e9;\n      } else if (nominalCount < 0.001) {\n        suffix = 'μm';\n        pointResolution *= 1000000;\n      } else if (nominalCount < 1) {\n        suffix = 'mm';\n        pointResolution *= 1000;\n      } else if (nominalCount < 1000) {\n        suffix = 'm';\n      } else {\n        suffix = 'km';\n        pointResolution /= 1000;\n      }\n    } else if (units == 'us') {\n      if (nominalCount < 0.9144) {\n        suffix = 'in';\n        pointResolution *= 39.37;\n      } else if (nominalCount < 1609.344) {\n        suffix = 'ft';\n        pointResolution /= 0.30480061;\n      } else {\n        suffix = 'mi';\n        pointResolution /= 1609.3472;\n      }\n    } else {\n      throw new Error('Invalid units');\n    }\n\n    let i = 3 * Math.floor(Math.log(minWidth * pointResolution) / Math.log(10));\n    let count, width, decimalCount;\n    let previousCount, previousWidth, previousDecimalCount;\n    while (true) {\n      decimalCount = Math.floor(i / 3);\n      const decimal = Math.pow(10, decimalCount);\n      count = LEADING_DIGITS[((i % 3) + 3) % 3] * decimal;\n      width = Math.round(count / pointResolution);\n      if (isNaN(width)) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n        return;\n      }\n      if (maxWidth !== undefined && width >= maxWidth) {\n        count = previousCount;\n        width = previousWidth;\n        decimalCount = previousDecimalCount;\n        break;\n      } else if (width >= minWidth) {\n        break;\n      }\n      previousCount = count;\n      previousWidth = width;\n      previousDecimalCount = decimalCount;\n      ++i;\n    }\n    const html = this.scaleBar_\n      ? this.createScaleBar(width, count, suffix)\n      : count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n\n    if (this.renderedHTML_ != html) {\n      this.innerElement_.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n\n    if (this.renderedWidth_ != width) {\n      this.innerElement_.style.width = width + 'px';\n      this.renderedWidth_ = width;\n    }\n\n    if (!this.renderedVisible_) {\n      this.element.style.display = '';\n      this.renderedVisible_ = true;\n    }\n  }\n\n  /**\n   * @private\n   * @param {number} width The current width of the scalebar.\n   * @param {number} scale The current scale.\n   * @param {string} suffix The suffix to append to the scale text.\n   * @return {string} The stringified HTML of the scalebar.\n   */\n  createScaleBar(width, scale, suffix) {\n    const resolutionScale = this.getScaleForResolution();\n    const mapScale =\n      resolutionScale < 1\n        ? Math.round(1 / resolutionScale).toLocaleString() + ' : 1'\n        : '1 : ' + Math.round(resolutionScale).toLocaleString();\n    const steps = this.scaleBarSteps_;\n    const stepWidth = width / steps;\n    const scaleSteps = [this.createMarker('absolute')];\n    for (let i = 0; i < steps; ++i) {\n      const cls =\n        i % 2 === 0 ? 'ol-scale-singlebar-odd' : 'ol-scale-singlebar-even';\n      scaleSteps.push(\n        '<div>' +\n          '<div ' +\n          `class=\"ol-scale-singlebar ${cls}\" ` +\n          `style=\"width: ${stepWidth}px;\"` +\n          '>' +\n          '</div>' +\n          this.createMarker('relative') +\n          // render text every second step, except when only 2 steps\n          (i % 2 === 0 || steps === 2\n            ? this.createStepText(i, width, false, scale, suffix)\n            : '') +\n          '</div>',\n      );\n    }\n    // render text at the end\n    scaleSteps.push(this.createStepText(steps, width, true, scale, suffix));\n\n    const scaleBarText = this.scaleBarText_\n      ? `<div class=\"ol-scale-text\" style=\"width: ${width}px;\">` +\n        mapScale +\n        '</div>'\n      : '';\n    return scaleBarText + scaleSteps.join('');\n  }\n\n  /**\n   * Creates a marker at given position\n   * @param {'absolute'|'relative'} position The position, absolute or relative\n   * @return {string} The stringified div containing the marker\n   */\n  createMarker(position) {\n    const top = position === 'absolute' ? 3 : -10;\n    return (\n      '<div ' +\n      'class=\"ol-scale-step-marker\" ' +\n      `style=\"position: ${position}; top: ${top}px;\"` +\n      '></div>'\n    );\n  }\n\n  /**\n   * Creates the label for a marker marker at given position\n   * @param {number} i The iterator\n   * @param {number} width The width the scalebar will currently use\n   * @param {boolean} isLast Flag indicating if we add the last step text\n   * @param {number} scale The current scale for the whole scalebar\n   * @param {string} suffix The suffix for the scale\n   * @return {string} The stringified div containing the step text\n   */\n  createStepText(i, width, isLast, scale, suffix) {\n    const length =\n      i === 0 ? 0 : Math.round((scale / this.scaleBarSteps_) * i * 100) / 100;\n    const lengthString = length + (i === 0 ? '' : ' ' + suffix);\n    const margin = i === 0 ? -3 : (width / this.scaleBarSteps_) * -1;\n    const minWidth = i === 0 ? 0 : (width / this.scaleBarSteps_) * 2;\n    return (\n      '<div ' +\n      'class=\"ol-scale-step-text\" ' +\n      'style=\"' +\n      `margin-left: ${margin}px;` +\n      `text-align: ${i === 0 ? 'left' : 'center'};` +\n      `min-width: ${minWidth}px;` +\n      `left: ${isLast ? width + 'px' : 'unset'};` +\n      '\">' +\n      lengthString +\n      '</div>'\n    );\n  }\n\n  /**\n   * Returns the appropriate scale for the given resolution and units.\n   * @return {number} The appropriate scale.\n   */\n  getScaleForResolution() {\n    const resolution = getPointResolution(\n      this.viewState_.projection,\n      this.viewState_.resolution,\n      this.viewState_.center,\n      'm',\n    );\n    const dpi = this.dpi_ || DEFAULT_DPI;\n    const inchesPerMeter = 1000 / 25.4;\n    return resolution * inchesPerMeter * dpi;\n  }\n\n  /**\n   * Update the scale line element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n    if (!frameState) {\n      this.viewState_ = null;\n    } else {\n      this.viewState_ = frameState.viewState;\n    }\n    this.updateElement_();\n  }\n}\n\nexport default ScaleLine;\n","/**\n * @module ol/css\n */\n\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nconst fontRegEx = new RegExp(\n  [\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n  ].join(''),\n  'i',\n);\n/** @type {Array<'style'|'variant'|'weight'|'size'|'lineHeight'|'family'>} */\nconst fontRegExMatchIndex = [\n  'style',\n  'variant',\n  'weight',\n  'size',\n  'lineHeight',\n  'family',\n];\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters|null} The font parameters (or null if the input spec is invalid).\n */\nexport const getFontParameters = function (fontSpec) {\n  const match = fontSpec.match(fontRegEx);\n  if (!match) {\n    return null;\n  }\n  const style = /** @type {FontParameters} */ ({\n    lineHeight: 'normal',\n    size: '1.2em',\n    style: 'normal',\n    weight: 'normal',\n    variant: 'normal',\n  });\n  for (let i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n    const value = match[i + 1];\n    if (value !== undefined) {\n      style[fontRegExMatchIndex[i]] = value;\n    }\n  }\n  style.families = style.family.split(/,\\s?/);\n  return style;\n};\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (once) {\n    const originalListener = listener;\n    /**\n     * @this {typeof target}\n     */\n    listener = function () {\n      target.removeEventListener(type, listener);\n      originalListener.apply(thisArg ?? this, arguments);\n    };\n  } else if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n"],"names":["ObjectEvent","type","key","oldValue","BaseObject","values","undefined","value","Object","eventType","listener","silent","source","Observable","Array","len","keys","i","unByKey","ii","Control","options","element","map","target","mapEvent","document","UNITS_PROP","LEADING_DIGITS","DEFAULT_DPI","ScaleLine","className","units","dpi","count","width","decimalCount","previousCount","previousWidth","previousDecimalCount","viewState","center","projection","pointResolution","minWidth","maxWidth","nominalCount","suffix","metersPerDegree","Error","Math","decimal","isNaN","html","scale","resolutionScale","mapScale","steps","stepWidth","scaleSteps","cls","scaleBarText","position","isLast","length","margin","resolution","frameState","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_UNSUPPORTED","CLASS_CONTROL","CLASS_COLLAPSED","fontRegEx","RegExp","fontRegExMatchIndex","getFontParameters","fontSpec","match","style","listen","thisArg","once","originalListener","arguments","eventsKey","listenOnce","unlistenByKey"],"mappings":"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"}