"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["7440"],{50596:function(t,e,i){function s(t){return t[0]>0&&t[1]>0}function r(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function a(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{Pq:function(){return a},bA:function(){return r},py:function(){return s}})},48039:function(t,e,i){i.r(e);var s=i(50596),r=i(49179);class a{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,s.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new a({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,r.abstract)()}getImage(t){return(0,r.abstract)()}getHitDetectionImage(){return(0,r.abstract)()}getPixelRatio(t){return 1}getImageState(){return(0,r.abstract)()}getImageSize(){return(0,r.abstract)()}getOrigin(){return(0,r.abstract)()}getSize(){return(0,r.abstract)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,s.Pq)(t)}listenImageChange(t){(0,r.abstract)()}load(){(0,r.abstract)()}unlistenImageChange(t){(0,r.abstract)()}ready(){return Promise.resolve()}}e.default=a},18663:function(t,e,i){i.r(e);var s=i(11256),r=i(14419),a=i(45120),n=i(85386),l=i(68509),h=i(97889),o=i(16250),u=i(48039);class c extends u.default{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?s.default.LOADING:s.default.LOADED,this.imageState_===s.default.LOADING&&this.ready().then(()=>this.imageState_=s.default.LOADED),this.render()}clone(){let t=this.getScale(),e=new c({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.fill_?.getKey(),i=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(","),r=o.c1.get(i,null,null)?.getImage(1);if(!r){let e=this.renderOptions_,a=Math.ceil(e.size*t),l=(0,n.E4)(a,a);this.draw_(e,l,t),r=l.canvas,o.c1.set(i,null,null,new h.Z(r,void 0,null,s.default.LOADED,null))}return r}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let s=this.radius,r=void 0===this.radius2_?s:this.radius2_;if(s<r){let t=s;s=r,r=t}let a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),n=r*Math.sin(a),l=s-Math.sqrt(r*r-n*n),h=Math.sqrt(n*n+l*l),o=h/n;if("miter"===t&&o<=i)return o*e;let u=e/2/o,c=e/2*(l/h),d=Math.sqrt((s+u)*(s+u)+c*c)-s;if(void 0===this.radius2_||"bevel"===t)return 2*d;let _=s*Math.sin(a),g=r-Math.sqrt(s*s-_*_),f=Math.sqrt(_*_+g*g)/_;return f<=i?2*Math.max(d,f*e/2-r-s):2*d}createRenderOptions(){let t,e=l.defaultLineCap,i=l.defaultLineJoin,s=0,r=null,n=0,h=0;this.stroke_&&(t=(0,a.y)(this.stroke_.getColor()??l.defaultStrokeStyle),h=this.stroke_.getWidth()??l.defaultLineWidth,r=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??l.defaultLineJoin,e=this.stroke_.getLineCap()??l.defaultLineCap,s=this.stroke_.getMiterLimit()??l.defaultMiterLimit);let o=this.calculateLineJoinSize_(i,h,s);return{strokeStyle:t,strokeWidth:h,size:Math.ceil(2*Math.max(this.radius,this.radius2_||0)+o),lineCap:e,lineDash:r,lineDashOffset:n,lineJoin:i,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=l.defaultFillStyle),e.fillStyle=(0,a.y)(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),s=0;"string"==typeof i&&(i=(0,r._2)(i)),null===i?s=1:Array.isArray(i)&&(s=4===i.length?i[3]:1),0===s&&(e=(0,n.E4)(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_,i=this.radius;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{let s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);let r=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let n=0;n<e;n++){let e=r+n*a,l=n%2==0?i:s;t.lineTo(l*Math.cos(e),l*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.defaultFillStyle,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}e.default=c}}]);
//# sourceMappingURL=7440.4cd51489b2d445e4.js.map