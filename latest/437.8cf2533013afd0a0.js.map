{"version":3,"file":"437.8cf2533013afd0a0.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/format/GML32.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/format/WFS.js"],"sourcesContent":["/**\n * @module ol/format/GML32\n */\nimport {writeStringTextNode} from '../format/xsd.js';\nimport {\n  makeArrayExtender,\n  makeArrayPusher,\n  makeChildAppender,\n  makeReplacer,\n} from '../xml.js';\nimport GML2 from './GML2.js';\nimport GML3 from './GML3.js';\nimport GMLBase from './GMLBase.js';\n\n/**\n * @classdesc Feature format for reading and writing data in the GML format\n *            version 3.2.1.\n * @api\n */\nclass GML32 extends GML3 {\n  /**\n   * @param {import(\"./GMLBase.js\").Options} [options] Optional configuration object.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super(options);\n\n    /**\n     * @type {string}\n     */\n    this.schemaLocation = options.schemaLocation\n      ? options.schemaLocation\n      : this.namespace + ' http://schemas.opengis.net/gml/3.2.1/gml.xsd';\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} geometry Geometry.\n   * @param {Array<*>} objectStack Node stack.\n   * @override\n   */\n  writeGeometryElement(node, geometry, objectStack) {\n    const context = objectStack[objectStack.length - 1];\n    objectStack[objectStack.length - 1] = Object.assign(\n      {multiCurve: true, multiSurface: true},\n      context,\n    );\n    super.writeGeometryElement(node, geometry, objectStack);\n  }\n}\n\nGML32.prototype.namespace = 'http://www.opengis.net/gml/3.2';\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'pos': makeReplacer(GML3.prototype.readFlatPos),\n    'posList': makeReplacer(GML3.prototype.readFlatPosList),\n    'coordinates': makeReplacer(GML2.prototype.readFlatCoordinates),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.FLAT_LINEAR_RINGS_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'interior': GML3.prototype.interiorParser,\n    'exterior': GML3.prototype.exteriorParser,\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.GEOMETRY_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Point': makeReplacer(GMLBase.prototype.readPoint),\n    'MultiPoint': makeReplacer(GMLBase.prototype.readMultiPoint),\n    'LineString': makeReplacer(GMLBase.prototype.readLineString),\n    'MultiLineString': makeReplacer(GMLBase.prototype.readMultiLineString),\n    'LinearRing': makeReplacer(GMLBase.prototype.readLinearRing),\n    'Polygon': makeReplacer(GMLBase.prototype.readPolygon),\n    'MultiPolygon': makeReplacer(GMLBase.prototype.readMultiPolygon),\n    'Surface': makeReplacer(GML32.prototype.readSurface),\n    'MultiSurface': makeReplacer(GML3.prototype.readMultiSurface),\n    'Curve': makeReplacer(GML32.prototype.readCurve),\n    'MultiCurve': makeReplacer(GML3.prototype.readMultiCurve),\n    'Envelope': makeReplacer(GML32.prototype.readEnvelope),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTICURVE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'curveMember': makeArrayPusher(GML3.prototype.curveMemberParser),\n    'curveMembers': makeArrayPusher(GML3.prototype.curveMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTISURFACE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'surfaceMember': makeArrayPusher(GML3.prototype.surfaceMemberParser),\n    'surfaceMembers': makeArrayPusher(GML3.prototype.surfaceMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.CURVEMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString),\n    'Curve': makeArrayPusher(GML3.prototype.readCurve),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.SURFACEMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon),\n    'Surface': makeArrayPusher(GML3.prototype.readSurface),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.SURFACE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'patches': makeReplacer(GML3.prototype.readPatch),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.CURVE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'segments': makeReplacer(GML3.prototype.readSegment),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.ENVELOPE_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lowerCorner': makeArrayPusher(GML3.prototype.readFlatPosList),\n    'upperCorner': makeArrayPusher(GML3.prototype.readFlatPosList),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.PATCHES_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'PolygonPatch': makeReplacer(GML3.prototype.readPolygonPatch),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.SEGMENTS_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LineStringSegment': makeArrayExtender(\n      GML3.prototype.readLineStringSegment,\n    ),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTIPOINT_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'pointMember': makeArrayPusher(GMLBase.prototype.pointMemberParser),\n    'pointMembers': makeArrayPusher(GMLBase.prototype.pointMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTILINESTRING_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lineStringMember': makeArrayPusher(\n      GMLBase.prototype.lineStringMemberParser,\n    ),\n    'lineStringMembers': makeArrayPusher(\n      GMLBase.prototype.lineStringMemberParser,\n    ),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.MULTIPOLYGON_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'polygonMember': makeArrayPusher(GMLBase.prototype.polygonMemberParser),\n    'polygonMembers': makeArrayPusher(GMLBase.prototype.polygonMemberParser),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.POINTMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Point': makeArrayPusher(GMLBase.prototype.readFlatCoordinatesFromNode),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.LINESTRINGMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LineString': makeArrayPusher(GMLBase.prototype.readLineString),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.POLYGONMEMBER_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Polygon': makeArrayPusher(GMLBase.prototype.readPolygon),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nGML32.prototype.RING_PARSERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'LinearRing': makeReplacer(GMLBase.prototype.readFlatLinearRing),\n    'Ring': makeReplacer(GML32.prototype.readFlatCurveRing),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.RING_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'exterior': makeChildAppender(GML3.prototype.writeRing),\n    'interior': makeChildAppender(GML3.prototype.writeRing),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.ENVELOPE_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lowerCorner': makeChildAppender(writeStringTextNode),\n    'upperCorner': makeChildAppender(writeStringTextNode),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'surfaceMember': makeChildAppender(\n      GML3.prototype.writeSurfaceOrPolygonMember,\n    ),\n    'polygonMember': makeChildAppender(\n      GML3.prototype.writeSurfaceOrPolygonMember,\n    ),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.POINTMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'pointMember': makeChildAppender(GML3.prototype.writePointMember),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'lineStringMember': makeChildAppender(\n      GML3.prototype.writeLineStringOrCurveMember,\n    ),\n    'curveMember': makeChildAppender(\n      GML3.prototype.writeLineStringOrCurveMember,\n    ),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nGML32.prototype.GEOMETRY_SERIALIZERS = {\n  'http://www.opengis.net/gml/3.2': {\n    'Curve': makeChildAppender(GML3.prototype.writeCurveOrLineString),\n    'MultiCurve': makeChildAppender(GML3.prototype.writeMultiCurveOrLineString),\n    'Point': makeChildAppender(GML32.prototype.writePoint),\n    'MultiPoint': makeChildAppender(GML3.prototype.writeMultiPoint),\n    'LineString': makeChildAppender(GML3.prototype.writeCurveOrLineString),\n    'MultiLineString': makeChildAppender(\n      GML3.prototype.writeMultiCurveOrLineString,\n    ),\n    'LinearRing': makeChildAppender(GML3.prototype.writeLinearRing),\n    'Polygon': makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),\n    'MultiPolygon': makeChildAppender(\n      GML3.prototype.writeMultiSurfaceOrPolygon,\n    ),\n    'Surface': makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),\n    'MultiSurface': makeChildAppender(\n      GML3.prototype.writeMultiSurfaceOrPolygon,\n    ),\n    'Envelope': makeChildAppender(GML3.prototype.writeEnvelope),\n  },\n};\n\nexport default GML32;\n","/**\n * @module ol/format/WFS\n */\nimport {assert} from '../asserts.js';\nimport {get as getProjection} from '../proj.js';\nimport {\n  XML_SCHEMA_INSTANCE_URI,\n  createElementNS,\n  isDocument,\n  makeArrayPusher,\n  makeChildAppender,\n  makeObjectPropertySetter,\n  makeSimpleNodeFactory,\n  parse,\n  parseNode,\n  pushParseAndPop,\n  pushSerializeAndPop,\n} from '../xml.js';\nimport GML2 from './GML2.js';\nimport GML3 from './GML3.js';\nimport GML32 from './GML32.js';\nimport GMLBase, {GMLNS} from './GMLBase.js';\nimport XMLFeature from './XMLFeature.js';\nimport {and as andFilterFn, bbox as bboxFilterFn} from './filter.js';\nimport {\n  readNonNegativeIntegerString,\n  readPositiveInteger,\n  writeStringTextNode,\n} from './xsd.js';\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst FEATURE_COLLECTION_PARSERS = {\n  'http://www.opengis.net/gml': {\n    'boundedBy': makeObjectPropertySetter(\n      GMLBase.prototype.readExtentElement,\n      'bounds',\n    ),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'member': makeArrayPusher(GMLBase.prototype.readFeaturesInternal),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRANSACTION_SUMMARY_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'totalInserted': makeObjectPropertySetter(readPositiveInteger),\n    'totalUpdated': makeObjectPropertySetter(readPositiveInteger),\n    'totalDeleted': makeObjectPropertySetter(readPositiveInteger),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'totalInserted': makeObjectPropertySetter(readPositiveInteger),\n    'totalUpdated': makeObjectPropertySetter(readPositiveInteger),\n    'totalDeleted': makeObjectPropertySetter(readPositiveInteger),\n  },\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRANSACTION_RESPONSE_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'TransactionSummary': makeObjectPropertySetter(\n      readTransactionSummary,\n      'transactionSummary',\n    ),\n    'InsertResults': makeObjectPropertySetter(readInsertResults, 'insertIds'),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'TransactionSummary': makeObjectPropertySetter(\n      readTransactionSummary,\n      'transactionSummary',\n    ),\n    'InsertResults': makeObjectPropertySetter(readInsertResults, 'insertIds'),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst QUERY_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'PropertyName': makeChildAppender(writeStringTextNode),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'PropertyName': makeChildAppender(writeStringTextNode),\n  },\n};\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRANSACTION_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'Insert': makeChildAppender(writeFeature),\n    'Update': makeChildAppender(writeUpdate),\n    'Delete': makeChildAppender(writeDelete),\n    'Property': makeChildAppender(writeProperty),\n    'Native': makeChildAppender(writeNative),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Insert': makeChildAppender(writeFeature),\n    'Update': makeChildAppender(writeUpdate),\n    'Delete': makeChildAppender(writeDelete),\n    'Property': makeChildAppender(writeProperty),\n    'Native': makeChildAppender(writeNative),\n  },\n};\n\n/**\n * @typedef {Object} Options\n * @property {Object<string, string>|string} [featureNS] The namespace URI used for features.\n * @property {Array<string>|string} [featureType] The feature type to parse. Only used for read operations.\n * @property {GMLBase} [gmlFormat] The GML format to use to parse the response.\n * Default is `ol/format/GML2` for WFS 1.0.0, `ol/format/GML3` for WFS 1.1.0 and `ol/format/GML32` for WFS 2.0.0.\n * @property {string} [schemaLocation] Optional schemaLocation to use for serialization, this will override the default.\n * @property {string} [version='1.1.0'] WFS version to use. Can be either `1.0.0`, `1.1.0` or `2.0.0`.\n */\n\n/**\n * @typedef {Object} WriteGetFeatureOptions\n * @property {string} featureNS The namespace URI used for features.\n * @property {string} featurePrefix The prefix for the feature namespace.\n * @property {Array<string|FeatureType>} featureTypes The feature type names or FeatureType objects to\n * define a unique bbox filter per feature type name (in this case, options `bbox` and `geometryName` are\n * ignored.).\n * @property {string} [srsName] SRS name. No srsName attribute will be set on\n * geometries when this is not provided.\n * @property {string} [handle] Handle.\n * @property {string} [outputFormat] Output format.\n * @property {number} [maxFeatures] Maximum number of features to fetch.\n * @property {string} [geometryName] Geometry name to use in a BBOX filter.\n * @property {Array<string>} [propertyNames] Optional list of property names to serialize.\n * @property {string} [viewParams] viewParams GeoServer vendor parameter.\n * @property {number} [startIndex] Start index to use for WFS paging. This is a\n * WFS 2.0 feature backported to WFS 1.1.0 by some Web Feature Services.\n * @property {number} [count] Number of features to retrieve when paging. This is a\n * WFS 2.0 feature backported to WFS 1.1.0 by some Web Feature Services. Please note that some\n * Web Feature Services have repurposed `maxfeatures` instead.\n * @property {import(\"../extent.js\").Extent} [bbox] Extent to use for the BBOX filter. The `geometryName`\n * option must be set.\n * @property {import(\"./filter/Filter.js\").default} [filter] Filter condition. See\n * {@link module:ol/format/filter} for more information.\n * @property {string} [resultType] Indicates what response should be returned,\n * e.g. `hits` only includes the `numberOfFeatures` attribute in the response and no features.\n */\n\n/**\n * @typedef {Object} FeatureType\n * @property {!string} name The feature type name.\n * @property {!import(\"../extent.js\").Extent} bbox Extent to use for the BBOX filter.\n * @property {!string} geometryName Geometry name to use in the BBOX filter.\n */\n\n/**\n * @typedef {Object} WriteTransactionOptions\n * @property {string} featureNS The namespace URI used for features.\n * @property {string} featurePrefix The prefix for the feature namespace.\n * @property {string} featureType The feature type name.\n * @property {string} [srsName] SRS name. No srsName attribute will be set on\n * geometries when this is not provided.\n * @property {string} [handle] Handle.\n * @property {boolean} [hasZ] Must be set to true if the transaction is for\n * a 3D layer. This will allow the Z coordinate to be included in the transaction.\n * @property {Array<Object>} nativeElements Native elements. Currently not supported.\n * @property {import(\"./GMLBase.js\").Options} [gmlOptions] GML options for the WFS transaction writer.\n * @property {string} [version='1.1.0'] WFS version to use for the transaction. Can be either `1.0.0`, `1.1.0` or `2.0.0`.\n */\n\n/**\n * Number of features; bounds/extent.\n * @typedef {Object} FeatureCollectionMetadata\n * @property {number} numberOfFeatures NumberOfFeatures.\n * @property {import(\"../extent.js\").Extent} bounds Bounds.\n */\n\n/**\n * @typedef {Object} TransactionSummary\n * @property {number} totalDeleted TotalDeleted.\n * @property {number} totalInserted TotalInserted.\n * @property {number} totalUpdated TotalUpdated.\n */\n\n/**\n * Total deleted; total inserted; total updated; array of insert ids.\n * @typedef {Object} TransactionResponse\n * @property {TransactionSummary} transactionSummary Transaction summary.\n * @property {Array<string>} insertIds InsertIds.\n */\n\n/**\n * @type {string}\n */\nconst FEATURE_PREFIX = 'feature';\n\n/**\n * @type {string}\n */\nconst XMLNS = 'http://www.w3.org/2000/xmlns/';\n\n/**\n * @type {Object<string, string>}\n */\nconst OGCNS = {\n  '2.0.0': 'http://www.opengis.net/ogc/1.1',\n  '1.1.0': 'http://www.opengis.net/ogc',\n  '1.0.0': 'http://www.opengis.net/ogc',\n};\n\n/**\n * @type {Object<string, string>}\n */\nconst WFSNS = {\n  '2.0.0': 'http://www.opengis.net/wfs/2.0',\n  '1.1.0': 'http://www.opengis.net/wfs',\n  '1.0.0': 'http://www.opengis.net/wfs',\n};\n\n/**\n * @type {Object<string, string>}\n */\nconst FESNS = {\n  '2.0.0': 'http://www.opengis.net/fes/2.0',\n  '1.1.0': 'http://www.opengis.net/fes',\n  '1.0.0': 'http://www.opengis.net/fes',\n};\n\n/**\n * @type {Object<string, string>}\n */\nconst SCHEMA_LOCATIONS = {\n  '2.0.0':\n    'http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd',\n  '1.1.0':\n    'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd',\n  '1.0.0':\n    'http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd',\n};\n\n/**\n * @type {Object<string, object>}\n */\nconst GML_FORMATS = {\n  '2.0.0': GML32,\n  '1.1.0': GML3,\n  '1.0.0': GML2,\n};\n\n/**\n * @const\n * @type {string}\n */\nconst DEFAULT_VERSION = '1.1.0';\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the WFS format.\n * By default, supports WFS version 1.1.0. You can pass a GML format\n * as option to override the default.\n * Also see {@link module:ol/format/GMLBase~GMLBase} which is used by this format.\n *\n * @api\n */\nclass WFS extends XMLFeature {\n  /**\n   * @param {Options} [options] Optional configuration object.\n   */\n  constructor(options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.version_ = options.version ? options.version : DEFAULT_VERSION;\n\n    /**\n     * @private\n     * @type {Array<string>|string|undefined}\n     */\n    this.featureType_ = options.featureType;\n\n    /**\n     * @private\n     * @type {Object<string, string>|string|undefined}\n     */\n    this.featureNS_ = options.featureNS;\n\n    /**\n     * @private\n     * @type {GMLBase}\n     */\n    this.gmlFormat_ = options.gmlFormat\n      ? options.gmlFormat\n      : new GML_FORMATS[this.version_]();\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.schemaLocation_ = options.schemaLocation\n      ? options.schemaLocation\n      : SCHEMA_LOCATIONS[this.version_];\n  }\n\n  /**\n   * @return {Array<string>|string|undefined} featureType\n   */\n  getFeatureType() {\n    return this.featureType_;\n  }\n\n  /**\n   * @param {Array<string>|string|undefined} featureType Feature type(s) to parse.\n   */\n  setFeatureType(featureType) {\n    this.featureType_ = featureType;\n  }\n\n  /**\n   * @protected\n   * @param {Element} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @override\n   */\n  readFeaturesFromNode(node, options) {\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    const context = {\n      node,\n    };\n    Object.assign(context, {\n      'featureType': this.featureType_,\n      'featureNS': this.featureNS_,\n    });\n\n    Object.assign(context, this.getReadOptions(node, options ? options : {}));\n    const objectStack = [context];\n    let featuresNS;\n    if (this.version_ === '2.0.0') {\n      featuresNS = FEATURE_COLLECTION_PARSERS;\n    } else {\n      featuresNS = this.gmlFormat_.FEATURE_COLLECTION_PARSERS;\n    }\n    let features = pushParseAndPop(\n      [],\n      featuresNS,\n      node,\n      objectStack,\n      this.gmlFormat_,\n    );\n    if (!features) {\n      features = [];\n    }\n    return features;\n  }\n\n  /**\n   * Read transaction response of the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {TransactionResponse|undefined} Transaction response.\n   * @api\n   */\n  readTransactionResponse(source) {\n    if (!source) {\n      return undefined;\n    }\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readTransactionResponseFromDocument(doc);\n    }\n    if (isDocument(source)) {\n      return this.readTransactionResponseFromDocument(\n        /** @type {Document} */ (source),\n      );\n    }\n    return this.readTransactionResponseFromNode(\n      /** @type {Element} */ (source),\n    );\n  }\n\n  /**\n   * Read feature collection metadata of the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   * @api\n   */\n  readFeatureCollectionMetadata(source) {\n    if (!source) {\n      return undefined;\n    }\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeatureCollectionMetadataFromDocument(doc);\n    }\n    if (isDocument(source)) {\n      return this.readFeatureCollectionMetadataFromDocument(\n        /** @type {Document} */ (source),\n      );\n    }\n    return this.readFeatureCollectionMetadataFromNode(\n      /** @type {Element} */ (source),\n    );\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   */\n  readFeatureCollectionMetadataFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFeatureCollectionMetadataFromNode(\n          /** @type {Element} */ (n),\n        );\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {FeatureCollectionMetadata|undefined}\n   *     FeatureCollection metadata.\n   */\n  readFeatureCollectionMetadataFromNode(node) {\n    const result = {};\n    const value = readNonNegativeIntegerString(\n      node.getAttribute('numberOfFeatures'),\n    );\n    result['numberOfFeatures'] = value;\n    return pushParseAndPop(\n      /** @type {FeatureCollectionMetadata} */ (result),\n      FEATURE_COLLECTION_PARSERS,\n      node,\n      [],\n      this.gmlFormat_,\n    );\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {TransactionResponse|undefined} Transaction response.\n   */\n  readTransactionResponseFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readTransactionResponseFromNode(/** @type {Element} */ (n));\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {TransactionResponse|undefined} Transaction response.\n   */\n  readTransactionResponseFromNode(node) {\n    return pushParseAndPop(\n      /** @type {TransactionResponse} */ ({}),\n      TRANSACTION_RESPONSE_PARSERS,\n      node,\n      [],\n    );\n  }\n\n  /**\n   * Encode format as WFS `GetFeature` and return the Node.\n   *\n   * @param {WriteGetFeatureOptions} options Options.\n   * @return {Node} Result.\n   * @api\n   */\n  writeGetFeature(options) {\n    const node = createElementNS(WFSNS[this.version_], 'GetFeature');\n    node.setAttribute('service', 'WFS');\n    node.setAttribute('version', this.version_);\n    if (options.handle) {\n      node.setAttribute('handle', options.handle);\n    }\n    if (options.outputFormat) {\n      node.setAttribute('outputFormat', options.outputFormat);\n    }\n    if (options.maxFeatures !== undefined) {\n      node.setAttribute('maxFeatures', String(options.maxFeatures));\n    }\n    if (options.resultType) {\n      node.setAttribute('resultType', options.resultType);\n    }\n    if (options.startIndex !== undefined) {\n      node.setAttribute('startIndex', String(options.startIndex));\n    }\n    if (options.count !== undefined) {\n      node.setAttribute('count', String(options.count));\n    }\n    if (options.viewParams !== undefined) {\n      node.setAttribute('viewParams', options.viewParams);\n    }\n    node.setAttributeNS(\n      XML_SCHEMA_INSTANCE_URI,\n      'xsi:schemaLocation',\n      this.schemaLocation_,\n    );\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    const context = {\n      node,\n    };\n    Object.assign(context, {\n      'version': this.version_,\n      'srsName': options.srsName,\n      'featureNS': options.featureNS ? options.featureNS : this.featureNS_,\n      'featurePrefix': options.featurePrefix,\n      'propertyNames': options.propertyNames ? options.propertyNames : [],\n    });\n    assert(\n      Array.isArray(options.featureTypes),\n      '`options.featureTypes` must be an Array',\n    );\n    if (typeof options.featureTypes[0] === 'string') {\n      let filter = options.filter;\n      if (options.bbox) {\n        assert(\n          options.geometryName,\n          '`options.geometryName` must also be provided when `options.bbox` is set',\n        );\n        filter = this.combineBboxAndFilter(\n          options.geometryName,\n          options.bbox,\n          options.srsName,\n          filter,\n        );\n      }\n      Object.assign(context, {\n        'geometryName': options.geometryName,\n        'filter': filter,\n      });\n      writeGetFeature(\n        node,\n        /** @type {!Array<string>} */ (options.featureTypes),\n        [context],\n      );\n    } else {\n      // Write one query node per element in featuresType.\n      options.featureTypes.forEach((/** @type {FeatureType} */ featureType) => {\n        const completeFilter = this.combineBboxAndFilter(\n          featureType.geometryName,\n          featureType.bbox,\n          options.srsName,\n          options.filter,\n        );\n        Object.assign(context, {\n          'geometryName': featureType.geometryName,\n          'filter': completeFilter,\n        });\n        writeGetFeature(node, [featureType.name], [context]);\n      });\n    }\n    return node;\n  }\n\n  /**\n   * Create a bbox filter and combine it with another optional filter.\n   *\n   * @param {!string} geometryName Geometry name to use.\n   * @param {!import(\"../extent.js\").Extent} extent Extent.\n   * @param {string} [srsName] SRS name. No srsName attribute will be\n   *    set on geometries when this is not provided.\n   * @param {import(\"./filter/Filter.js\").default} [filter] Filter condition.\n   * @return {import(\"./filter/Filter.js\").default} The filter.\n   */\n  combineBboxAndFilter(geometryName, extent, srsName, filter) {\n    const bboxFilter = bboxFilterFn(geometryName, extent, srsName);\n    if (filter) {\n      // if bbox and filter are both set, combine the two into a single filter\n      return andFilterFn(filter, bboxFilter);\n    }\n    return bboxFilter;\n  }\n\n  /**\n   * Encode format as WFS `Transaction` and return the Node.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} inserts The features to insert.\n   * @param {Array<import(\"../Feature.js\").default>} updates The features to update.\n   * @param {Array<import(\"../Feature.js\").default>} deletes The features to delete.\n   * @param {WriteTransactionOptions} options Write options.\n   * @return {Node} Result.\n   * @api\n   */\n  writeTransaction(inserts, updates, deletes, options) {\n    const objectStack = [];\n    const version = options.version ? options.version : this.version_;\n    const node = createElementNS(WFSNS[version], 'Transaction');\n\n    node.setAttribute('service', 'WFS');\n    node.setAttribute('version', version);\n    let baseObj;\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    if (options) {\n      baseObj = options.gmlOptions ? options.gmlOptions : {};\n      if (options.handle) {\n        node.setAttribute('handle', options.handle);\n      }\n    }\n    node.setAttributeNS(\n      XML_SCHEMA_INSTANCE_URI,\n      'xsi:schemaLocation',\n      SCHEMA_LOCATIONS[version],\n    );\n\n    const request = createTransactionRequest(node, baseObj, version, options);\n    if (inserts) {\n      serializeTransactionRequest('Insert', inserts, objectStack, request);\n    }\n    if (updates) {\n      serializeTransactionRequest('Update', updates, objectStack, request);\n    }\n    if (deletes) {\n      serializeTransactionRequest('Delete', deletes, objectStack, request);\n    }\n    if (options.nativeElements) {\n      serializeTransactionRequest(\n        'Native',\n        options.nativeElements,\n        objectStack,\n        request,\n      );\n    }\n    return node;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @override\n   */\n  readProjectionFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readProjectionFromNode(/** @type {Element} */ (n));\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @override\n   */\n  readProjectionFromNode(node) {\n    if (node.firstElementChild && node.firstElementChild.firstElementChild) {\n      node = node.firstElementChild.firstElementChild;\n      for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n        if (\n          !(\n            n.childNodes.length === 0 ||\n            (n.childNodes.length === 1 && n.firstChild.nodeType === 3)\n          )\n        ) {\n          const objectStack = [{}];\n          this.gmlFormat_.readGeometryElement(n, objectStack);\n          return getProjection(objectStack.pop().srsName);\n        }\n      }\n    }\n\n    return null;\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {*} baseObj Base object.\n * @param {string} version Version.\n * @param {WriteTransactionOptions} options Options.\n * @return {Object} Request object.\n */\nfunction createTransactionRequest(node, baseObj, version, options) {\n  const featurePrefix = options.featurePrefix\n    ? options.featurePrefix\n    : FEATURE_PREFIX;\n  let gmlVersion;\n  if (version === '1.0.0') {\n    gmlVersion = 2;\n  } else if (version === '1.1.0') {\n    gmlVersion = 3;\n  } else if (version === '2.0.0') {\n    gmlVersion = 3.2;\n  }\n  const obj = Object.assign(\n    {node},\n    {\n      version,\n      'featureNS': options.featureNS,\n      'featureType': options.featureType,\n      'featurePrefix': featurePrefix,\n      'gmlVersion': gmlVersion,\n      'hasZ': options.hasZ,\n      'srsName': options.srsName,\n    },\n    baseObj,\n  );\n  return obj;\n}\n\n/**\n * @param {string} type Request type.\n * @param {Array<import(\"../Feature.js\").default>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @param {Element} request Transaction Request.\n */\nfunction serializeTransactionRequest(type, features, objectStack, request) {\n  pushSerializeAndPop(\n    request,\n    TRANSACTION_SERIALIZERS,\n    makeSimpleNodeFactory(type),\n    features,\n    objectStack,\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Transaction Summary.\n */\nfunction readTransactionSummary(node, objectStack) {\n  return pushParseAndPop({}, TRANSACTION_SUMMARY_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst OGC_FID_PARSERS = {\n  'http://www.opengis.net/ogc': {\n    'FeatureId': makeArrayPusher(function (node, objectStack) {\n      return node.getAttribute('fid');\n    }),\n  },\n  'http://www.opengis.net/ogc/1.1': {\n    'FeatureId': makeArrayPusher(function (node, objectStack) {\n      return node.getAttribute('fid');\n    }),\n  },\n};\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction fidParser(node, objectStack) {\n  parseNode(OGC_FID_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst INSERT_RESULTS_PARSERS = {\n  'http://www.opengis.net/wfs': {\n    'Feature': fidParser,\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Feature': fidParser,\n  },\n};\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<string>|undefined} Insert results.\n */\nfunction readInsertResults(node, objectStack) {\n  return pushParseAndPop([], INSERT_RESULTS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeFeature(node, feature, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const featureType = context['featureType'];\n  const featureNS = context['featureNS'];\n  const gmlVersion = context['gmlVersion'];\n  const child = createElementNS(featureNS, featureType);\n  node.appendChild(child);\n  if (gmlVersion === 2) {\n    GML2.prototype.writeFeatureElement(child, feature, objectStack);\n  } else if (gmlVersion === 3) {\n    GML3.prototype.writeFeatureElement(child, feature, objectStack);\n  } else {\n    GML32.prototype.writeFeatureElement(child, feature, objectStack);\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @param {number|string} fid Feature identifier.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeOgcFidFilter(node, fid, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const version = context['version'];\n  const ns = OGCNS[version];\n  const filter = createElementNS(ns, 'Filter');\n  const child = createElementNS(ns, 'FeatureId');\n  filter.appendChild(child);\n  child.setAttribute('fid', /** @type {string} */ (fid));\n  node.appendChild(filter);\n}\n\n/**\n * @param {string|undefined} featurePrefix The prefix of the feature.\n * @param {string} featureType The type of the feature.\n * @return {string} The value of the typeName property.\n */\nfunction getTypeName(featurePrefix, featureType) {\n  featurePrefix = featurePrefix ? featurePrefix : FEATURE_PREFIX;\n  const prefix = featurePrefix + ':';\n  // The featureType already contains the prefix.\n  if (featureType.startsWith(prefix)) {\n    return featureType;\n  }\n  return prefix + featureType;\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeDelete(node, feature, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  assert(feature.getId() !== undefined, 'Features must have an id set');\n  const featureType = context['featureType'];\n  const featurePrefix = context['featurePrefix'];\n  const featureNS = context['featureNS'];\n  const typeName = getTypeName(featurePrefix, featureType);\n  node.setAttribute('typeName', typeName);\n  node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  const fid = feature.getId();\n  if (fid !== undefined) {\n    writeOgcFidFilter(node, fid, objectStack);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeUpdate(node, feature, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  assert(feature.getId() !== undefined, 'Features must have an id set');\n  const version = context['version'];\n  const featureType = context['featureType'];\n  const featurePrefix = context['featurePrefix'];\n  const featureNS = context['featureNS'];\n  const typeName = getTypeName(featurePrefix, featureType);\n  const geometryName = feature.getGeometryName();\n  node.setAttribute('typeName', typeName);\n  node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  const fid = feature.getId();\n  if (fid !== undefined) {\n    const keys = feature.getKeys();\n    const values = [];\n    for (let i = 0, ii = keys.length; i < ii; i++) {\n      const value = feature.get(keys[i]);\n      if (value !== undefined) {\n        let name = keys[i];\n        if (\n          value &&\n          typeof (/** @type {?} */ (value).getSimplifiedGeometry) === 'function'\n        ) {\n          name = geometryName;\n        }\n        values.push({name: name, value: value});\n      }\n    }\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */ ({\n        version,\n        'gmlVersion': context['gmlVersion'],\n        node,\n        'hasZ': context['hasZ'],\n        'srsName': context['srsName'],\n      }),\n      TRANSACTION_SERIALIZERS,\n      makeSimpleNodeFactory('Property'),\n      values,\n      objectStack,\n    );\n    writeOgcFidFilter(node, fid, objectStack);\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @param {Object} pair Property name and value.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeProperty(node, pair, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const version = context['version'];\n  const ns = WFSNS[version];\n  const tagName = version === '2.0.0' ? 'ValueReference' : 'Name';\n  const name = createElementNS(ns, tagName);\n  const gmlVersion = context['gmlVersion'];\n  node.appendChild(name);\n  writeStringTextNode(name, pair.name);\n  if (pair.value !== undefined && pair.value !== null) {\n    const value = createElementNS(ns, 'Value');\n    node.appendChild(value);\n    if (\n      pair.value &&\n      typeof (/** @type {?} */ (pair.value).getSimplifiedGeometry) ===\n        'function'\n    ) {\n      if (gmlVersion === 2) {\n        GML2.prototype.writeGeometryElement(value, pair.value, objectStack);\n      } else if (gmlVersion === 3) {\n        GML3.prototype.writeGeometryElement(value, pair.value, objectStack);\n      } else {\n        GML32.prototype.writeGeometryElement(value, pair.value, objectStack);\n      }\n    } else {\n      writeStringTextNode(value, pair.value);\n    }\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {{vendorId: string, safeToIgnore: boolean, value: string}} nativeElement The native element.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeNative(node, nativeElement, objectStack) {\n  if (nativeElement.vendorId) {\n    node.setAttribute('vendorId', nativeElement.vendorId);\n  }\n  if (nativeElement.safeToIgnore !== undefined) {\n    node.setAttribute('safeToIgnore', String(nativeElement.safeToIgnore));\n  }\n  if (nativeElement.value !== undefined) {\n    writeStringTextNode(node, nativeElement.value);\n  }\n}\n\n/**\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst GETFEATURE_SERIALIZERS = {\n  'http://www.opengis.net/wfs': {\n    'Query': makeChildAppender(writeQuery),\n  },\n  'http://www.opengis.net/wfs/2.0': {\n    'Query': makeChildAppender(writeQuery),\n  },\n  'http://www.opengis.net/ogc': {\n    'During': makeChildAppender(writeDuringFilter),\n    'And': makeChildAppender(writeLogicalFilter),\n    'Or': makeChildAppender(writeLogicalFilter),\n    'Not': makeChildAppender(writeNotFilter),\n    'BBOX': makeChildAppender(writeBboxFilter),\n    'Contains': makeChildAppender(writeSpatialFilter),\n    'Intersects': makeChildAppender(writeSpatialFilter),\n    'Within': makeChildAppender(writeSpatialFilter),\n    'DWithin': makeChildAppender(writeDWithinFilter),\n    'PropertyIsEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNotEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNull': makeChildAppender(writeIsNullFilter),\n    'PropertyIsBetween': makeChildAppender(writeIsBetweenFilter),\n    'PropertyIsLike': makeChildAppender(writeIsLikeFilter),\n  },\n  'http://www.opengis.net/fes/2.0': {\n    'During': makeChildAppender(writeDuringFilter),\n    'And': makeChildAppender(writeLogicalFilter),\n    'Or': makeChildAppender(writeLogicalFilter),\n    'Not': makeChildAppender(writeNotFilter),\n    'BBOX': makeChildAppender(writeBboxFilter),\n    'Contains': makeChildAppender(writeSpatialFilter),\n    'Disjoint': makeChildAppender(writeSpatialFilter),\n    'Intersects': makeChildAppender(writeSpatialFilter),\n    'ResourceId': makeChildAppender(writeResourceIdFilter),\n    'Within': makeChildAppender(writeSpatialFilter),\n    'DWithin': makeChildAppender(writeDWithinFilter),\n    'PropertyIsEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNotEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsLessThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThan': makeChildAppender(writeComparisonFilter),\n    'PropertyIsGreaterThanOrEqualTo': makeChildAppender(writeComparisonFilter),\n    'PropertyIsNull': makeChildAppender(writeIsNullFilter),\n    'PropertyIsBetween': makeChildAppender(writeIsBetweenFilter),\n    'PropertyIsLike': makeChildAppender(writeIsLikeFilter),\n  },\n};\n\n/**\n * @param {Element} node Node.\n * @param {string} featureType Feature type.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeQuery(node, featureType, objectStack) {\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const version = context['version'];\n  const featurePrefix = context['featurePrefix'];\n  const featureNS = context['featureNS'];\n  const propertyNames = context['propertyNames'];\n  const srsName = context['srsName'];\n  let typeName;\n  // If feature prefix is not defined, we must not use the default prefix.\n  if (featurePrefix) {\n    typeName = getTypeName(featurePrefix, featureType);\n  } else {\n    typeName = featureType;\n  }\n  let typeNameAttr;\n  if (version === '2.0.0') {\n    typeNameAttr = 'typeNames';\n  } else {\n    typeNameAttr = 'typeName';\n  }\n  node.setAttribute(typeNameAttr, typeName);\n  if (srsName) {\n    node.setAttribute('srsName', srsName);\n  }\n  if (featureNS) {\n    node.setAttributeNS(XMLNS, 'xmlns:' + featurePrefix, featureNS);\n  }\n  const item = /** @type {import(\"../xml.js\").NodeStackItem} */ (\n    Object.assign({}, context)\n  );\n  item.node = node;\n  pushSerializeAndPop(\n    item,\n    QUERY_SERIALIZERS,\n    makeSimpleNodeFactory('PropertyName'),\n    propertyNames,\n    objectStack,\n  );\n  const filter = context['filter'];\n  if (filter) {\n    const child = createElementNS(getFilterNS(version), 'Filter');\n    node.appendChild(child);\n    writeFilterCondition(child, filter, objectStack);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/Filter.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeFilterCondition(node, filter, objectStack) {\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const item = {node};\n  Object.assign(item, {context});\n  pushSerializeAndPop(\n    item,\n    GETFEATURE_SERIALIZERS,\n    makeSimpleNodeFactory(filter.getTagName()),\n    [filter],\n    objectStack,\n  );\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/Bbox.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeBboxFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  parent['srsName'] = filter.srsName;\n  const format = GML_FORMATS[version];\n\n  writePropertyName(version, node, filter.geometryName);\n  format.prototype.writeGeometryElement(node, filter.extent, objectStack);\n}\n\n/**\n * @param {Element} node Element.\n * @param {import(\"./filter/ResourceId.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeResourceIdFilter(node, filter, objectStack) {\n  node.setAttribute('rid', /** @type {string} */ (filter.rid));\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/Spatial.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeSpatialFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  parent['srsName'] = filter.srsName;\n  const format = GML_FORMATS[version];\n\n  writePropertyName(version, node, filter.geometryName);\n  format.prototype.writeGeometryElement(node, filter.geometry, objectStack);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/DWithin.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeDWithinFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  writeSpatialFilter(node, filter, objectStack);\n  const distance = createElementNS(getFilterNS(version), 'Distance');\n  writeStringTextNode(distance, filter.distance.toString());\n  if (version === '2.0.0') {\n    distance.setAttribute('uom', filter.unit);\n  } else {\n    distance.setAttribute('units', filter.unit);\n  }\n  node.appendChild(distance);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/During.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeDuringFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n\n  writeExpression(FESNS[version], 'ValueReference', node, filter.propertyName);\n  const timePeriod = createElementNS(GMLNS, 'TimePeriod');\n\n  node.appendChild(timePeriod);\n\n  const begin = createElementNS(GMLNS, 'begin');\n  timePeriod.appendChild(begin);\n  writeTimeInstant(begin, filter.begin);\n\n  const end = createElementNS(GMLNS, 'end');\n  timePeriod.appendChild(end);\n  writeTimeInstant(end, filter.end);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/LogicalNary.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLogicalFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const item = {node};\n  Object.assign(item, {context});\n  const conditions = filter.conditions;\n  for (let i = 0, ii = conditions.length; i < ii; ++i) {\n    const condition = conditions[i];\n    pushSerializeAndPop(\n      item,\n      GETFEATURE_SERIALIZERS,\n      makeSimpleNodeFactory(condition.getTagName()),\n      [condition],\n      objectStack,\n    );\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/Not.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeNotFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const item = {node};\n  Object.assign(item, {context});\n  const condition = filter.condition;\n  pushSerializeAndPop(\n    item,\n    GETFEATURE_SERIALIZERS,\n    makeSimpleNodeFactory(condition.getTagName()),\n    [condition],\n    objectStack,\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/ComparisonBinary.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeComparisonFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  if (filter.matchCase !== undefined) {\n    node.setAttribute('matchCase', filter.matchCase.toString());\n  }\n  writePropertyName(version, node, filter.propertyName);\n  writeLiteral(version, node, '' + filter.expression);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/IsNull.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeIsNullFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  writePropertyName(version, node, filter.propertyName);\n}\n\n/**\n * @param {Node} node Node.\n * @param {import(\"./filter/IsBetween.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeIsBetweenFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  const ns = getFilterNS(version);\n\n  writePropertyName(version, node, filter.propertyName);\n\n  const lowerBoundary = createElementNS(ns, 'LowerBoundary');\n  node.appendChild(lowerBoundary);\n  writeLiteral(version, lowerBoundary, '' + filter.lowerBoundary);\n\n  const upperBoundary = createElementNS(ns, 'UpperBoundary');\n  node.appendChild(upperBoundary);\n  writeLiteral(version, upperBoundary, '' + filter.upperBoundary);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"./filter/IsLike.js\").default} filter Filter.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeIsLikeFilter(node, filter, objectStack) {\n  const parent = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const context = parent['context'];\n  const version = context['version'];\n  node.setAttribute('wildCard', filter.wildCard);\n  node.setAttribute('singleChar', filter.singleChar);\n  node.setAttribute('escapeChar', filter.escapeChar);\n  if (filter.matchCase !== undefined) {\n    node.setAttribute('matchCase', filter.matchCase.toString());\n  }\n  writePropertyName(version, node, filter.propertyName);\n  writeLiteral(version, node, '' + filter.pattern);\n}\n\n/**\n * @param {string} ns Namespace.\n * @param {string} tagName Tag name.\n * @param {Node} node Node.\n * @param {string} value Value.\n */\nfunction writeExpression(ns, tagName, node, value) {\n  const property = createElementNS(ns, tagName);\n  writeStringTextNode(property, value);\n  node.appendChild(property);\n}\n\n/**\n * @param {string} version Version.\n * @param {Node} node Node.\n * @param {string} value PropertyName value.\n */\nfunction writeLiteral(version, node, value) {\n  writeExpression(getFilterNS(version), 'Literal', node, value);\n}\n\n/**\n * @param {string} version Version.\n * @param {Node} node Node.\n * @param {string} value PropertyName value.\n */\nfunction writePropertyName(version, node, value) {\n  if (version === '2.0.0') {\n    writeExpression(FESNS[version], 'ValueReference', node, value);\n  } else {\n    writeExpression(OGCNS[version], 'PropertyName', node, value);\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @param {string} time PropertyName value.\n */\nfunction writeTimeInstant(node, time) {\n  const timeInstant = createElementNS(GMLNS, 'TimeInstant');\n  node.appendChild(timeInstant);\n\n  const timePosition = createElementNS(GMLNS, 'timePosition');\n  timeInstant.appendChild(timePosition);\n  writeStringTextNode(timePosition, time);\n}\n\n/**\n * Encode filter as WFS `Filter` and return the Node.\n *\n * @param {import(\"./filter/Filter.js\").default} filter Filter.\n * @param {string} version WFS version. If not provided defaults to '1.1.0'\n * @return {Node} Result.\n * @api\n */\nexport function writeFilter(filter, version) {\n  version = version || '1.1.0';\n  const child = createElementNS(getFilterNS(version), 'Filter');\n  const context = {\n    node: child,\n  };\n  Object.assign(context, {\n    'version': version,\n    'filter': filter,\n  });\n  writeFilterCondition(child, filter, [context]);\n  return child;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<string>} featureTypes Feature types.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeGetFeature(node, featureTypes, objectStack) {\n  const context = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const item = /** @type {import(\"../xml.js\").NodeStackItem} */ (\n    Object.assign({}, context)\n  );\n  item.node = node;\n  pushSerializeAndPop(\n    item,\n    GETFEATURE_SERIALIZERS,\n    makeSimpleNodeFactory('Query'),\n    featureTypes,\n    objectStack,\n  );\n}\n\nfunction getFilterNS(version) {\n  let ns;\n  if (version === '2.0.0') {\n    ns = FESNS[version];\n  } else {\n    ns = OGCNS[version];\n  }\n  return ns;\n}\n\nexport default WFS;\n"],"names":["Object","i","Node","String","Array","o","n","t"],"mappings":"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"}