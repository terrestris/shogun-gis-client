"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["4540"],{43983:function(t,e,n){var r=n(43354);class s extends r.default{constructor(t,e,n,r){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=r}}e.A=s},61553:function(t,e,n){var r=n(84674);e.A=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,r.lr)(),{get:(t,e)=>{if("function"==typeof(0,r.lr)()[e])return this.push_(e),this.pushMethodArgs_},set:(t,e,n)=>(this.push_(e,n),!0)})}push_(...t){let e=this.instructions_,n=this.zIndex+this.offset_;e[n]||(e[n]=[]),e[n].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let n=0,r=e.length;n<r;++n){let r=e[n];if("function"==typeof r){r(t);continue}let s=e[++n];if("function"==typeof t[r])t[r](...s);else{if("function"==typeof s){t[r]=s(t);continue}t[r]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},16247:function(t,e,n){n.d(e,{A:function(){return y},B:function(){return x}});var r=n(19487),s=n(65045),i=n(84674),a=n(85752),o=n(43983),h=n(31431),l=n(61553),d=n(21878),u=n(80398),c=n(52073),f=n(55506),g=n(94092);class p extends c.default{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=[],this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return(0,g.abstract)()}getData(t){return null}prepareFrame(t){return(0,g.abstract)()}renderFrame(t,e){return(0,g.abstract)()}forEachFeatureAtCoordinate(t,e,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let e=t.target;(e.getState()===u.default.LOADED||e.getState()===u.default.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=u.default.LOADED&&e!=u.default.ERROR&&t.addEventListener(f.default.CHANGE,this.boundHandleImageChange_),e==u.default.IDLE&&(t.load(),e=t.getState()),e==u.default.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}var _=p;let x=[],m=null;var y=class extends _{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,d.vt)(),this.pixelTransform=(0,d.vt)(),this.inversePixelTransform=(0,d.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){let r;m||(m=(0,i.Y)(1,1,void 0,{willReadFrequently:!0})),m.clearRect(0,0,1,1);try{m.drawImage(t,e,n,1,1,0,0,1,1),r=m.getImageData(0,0,1,1).data}catch{return m=null,null}return r}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){let a,o,h=this.getLayer().getClassName();if(t&&t.className===h&&(!n||t&&t.style.backgroundColor&&(0,r.aI)((0,s._j)(t.style.backgroundColor),(0,s._j)(n)))){let e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&(0,d.tI)(o.canvas.style.transform,e)?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(a=document.createElement("div")).className=h;let t=a.style;t.position="absolute",t.width="100%",t.height="100%";let e=(o=(0,i.Y)()).canvas;a.appendChild(e),(t=e.style).position="absolute",t.left="0",t.transformOrigin="top left",this.container=a,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){let r=(0,a.getTopLeft)(n),s=(0,a.getTopRight)(n),i=(0,a.getBottomRight)(n),o=(0,a.getBottomLeft)(n);(0,d.Bb)(e.coordinateToPixelTransform,r),(0,d.Bb)(e.coordinateToPixelTransform,s),(0,d.Bb)(e.coordinateToPixelTransform,i),(0,d.Bb)(e.coordinateToPixelTransform,o);let h=this.inversePixelTransform;(0,d.Bb)(h,r),(0,d.Bb)(h,s),(0,d.Bb)(h,i),(0,d.Bb)(h,o),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,e){let n=t.extent,r=t.viewState.resolution,s=t.viewState.rotation,i=t.pixelRatio,o=Math.round((0,a.getWidth)(n)/r*i),h=Math.round((0,a.getHeight)(n)/r*i);(0,d.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/i,1/i,s,-o/2,-h/2),(0,d.T9)(this.inversePixelTransform,this.pixelTransform);let l=(0,d.dI)(this.pixelTransform);if(this.useContainer(e,l,this.getBackground(t)),!this.containerReused){let t=this.context.canvas;t.width!=o||t.height!=h?(t.width=o,t.height=h):this.context.clearRect(0,0,o,h),l!==t.style.transform&&(t.style.transform=l)}}dispatchRenderEvent_(t,e,n){let r=this.getLayer();if(r.hasListener(t)){let s=new o.A(t,this.inversePixelTransform,n,e);r.dispatchEvent(s)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(h.A.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(h.A.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new l.A),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(h.A.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(h.A.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,r,s,i,a){let o=r/e,h=-t[0]+a,l=-t[1];return(0,d.Zz)(this.tempTransform,s/2,i/2,o,-o,-n,h,l)}disposeInternal(){delete this.frameState,super.disposeInternal()}}}}]);
//# sourceMappingURL=4540.83e91be235d2fd58.js.map