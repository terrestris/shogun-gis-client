"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["6524"],{37831:function(t,i,e){function n(t,i,e){let n=t[i];t[i]=t[e],t[e]=n}e.d(i,{A:function(){return h}});class h{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data,e=[];if(!f(t,i))return e;let n=this.toBBox,h=[];for(;i;){for(let r=0;r<i.children.length;r++){let l=i.children[r],a=i.leaf?n(l):l;f(t,a)&&(i.leaf?e.push(l):c(t,a)?this._all(l,e):h.push(l))}i=h.pop()}return e}collides(t){let i=this.data;if(!f(t,i))return!1;let e=[];for(;i;){for(let n=0;n<i.children.length;n++){let h=i.children[n],r=i.leaf?this.toBBox(h):h;if(f(t,r)){if(i.leaf||c(t,r))return!0;e.push(h)}}i=e.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){let t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=x([]),this}remove(t,i){let e,n,h;if(!t)return this;let r=this.data,l=this.toBBox(t),a=[],s=[];for(;r||a.length;){if(r||(r=a.pop(),n=a[a.length-1],e=s.pop(),h=!0),r.leaf){let e=function(t,i,e){if(!e)return i.indexOf(t);for(let n=0;n<i.length;n++)if(e(t,i[n]))return n;return -1}(t,r.children,i);if(-1!==e){r.children.splice(e,1),a.push(r),this._condense(a);break}}!h&&!r.leaf&&c(r,l)?(a.push(r),s.push(e),e=0,n=r,r=r.children[0]):n?(e++,r=n.children[e],h=!1):r=null}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let e=[];for(;t;)t.leaf?i.push(...t.children):e.push(...t.children),t=e.pop();return i}_build(t,i,e,n){let h,l=e-i+1,a=this._maxEntries;if(l<=a)return r(h=x(t.slice(i,e+1)),this.toBBox),h;n||(n=Math.ceil(Math.log(l)/Math.log(a)),a=Math.ceil(l/Math.pow(a,n-1))),(h=x([])).leaf=!1,h.height=n;let s=Math.ceil(l/a),o=s*Math.ceil(Math.sqrt(a));d(t,i,e,o,this.compareMinX);for(let r=i;r<=e;r+=o){let i=Math.min(r+o-1,e);d(t,r,i,s,this.compareMinY);for(let e=r;e<=i;e+=s){let r=Math.min(e+s-1,i);h.children.push(this._build(t,e,r,n-1))}}return r(h,this.toBBox),h}_chooseSubtree(t,i,e,n){for(;;){let l;if(n.push(i),i.leaf||n.length-1===e)break;let a=1/0,s=1/0;for(let e=0;e<i.children.length;e++){var h,r;let n=i.children[e],o=m(n),u=(h=t,(Math.max((r=n).maxX,h.maxX)-Math.min(r.minX,h.minX))*(Math.max(r.maxY,h.maxY)-Math.min(r.minY,h.minY))-o);u<s?(s=u,a=o<a?o:a,l=n):u===s&&o<a&&(a=o,l=n)}i=l||i.children[0]}return i}_insert(t,i,e){let n=e?t:this.toBBox(t),h=[],r=this._chooseSubtree(n,this.data,i,h);for(r.children.push(t),a(r,n);i>=0;)if(h[i].children.length>this._maxEntries)this._split(h,i),i--;else break;this._adjustParentBBoxes(n,h,i)}_split(t,i){let e=t[i],n=e.children.length,h=this._minEntries;this._chooseSplitAxis(e,h,n);let l=this._chooseSplitIndex(e,h,n),a=x(e.children.splice(l,e.children.length-l));a.height=e.height,a.leaf=e.leaf,r(e,this.toBBox),r(a,this.toBBox),i?t[i-1].children.push(a):this._splitRoot(e,a)}_splitRoot(t,i){this.data=x([t,i]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)}_chooseSplitIndex(t,i,e){let n,h=1/0,r=1/0;for(let a=i;a<=e-i;a++){let i=l(t,0,a,this.toBBox),s=l(t,a,e,this.toBBox),o=function(t,i){let e=Math.max(t.minX,i.minX),n=Math.max(t.minY,i.minY);return Math.max(0,Math.min(t.maxX,i.maxX)-e)*Math.max(0,Math.min(t.maxY,i.maxY)-n)}(i,s),u=m(i)+m(s);o<h?(h=o,n=a,r=u<r?u:r):o===h&&u<r&&(r=u,n=a)}return n||e-i}_chooseSplitAxis(t,i,e){let n=t.leaf?this.compareMinX:s,h=t.leaf?this.compareMinY:o;this._allDistMargin(t,i,e,n)<this._allDistMargin(t,i,e,h)&&t.children.sort(n)}_allDistMargin(t,i,e,n){t.children.sort(n);let h=this.toBBox,r=l(t,0,i,h),s=l(t,e-i,e,h),o=u(r)+u(s);for(let n=i;n<e-i;n++){let i=t.children[n];a(r,t.leaf?h(i):i),o+=u(r)}for(let n=e-i-1;n>=i;n--){let i=t.children[n];a(s,t.leaf?h(i):i),o+=u(s)}return o}_adjustParentBBoxes(t,i,e){for(let n=e;n>=0;n--)a(i[n],t)}_condense(t){for(let i=t.length-1,e;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():r(t[i],this.toBBox)}}function r(t,i){l(t,0,t.children.length,i,t)}function l(t,i,e,n,h){h||(h=x(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(let r=i;r<e;r++){let i=t.children[r];a(h,t.leaf?n(i):i)}return h}function a(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function o(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(t,i,e,h,r){let l=[i,e];for(;l.length;){if((e=l.pop())-(i=l.pop())<=h)continue;let a=i+Math.ceil((e-i)/h/2)*h;!function t(i,e,h=0,r=i.length-1,l=function(t,i){return t<i?-1:+(t>i)}){for(;r>h;){if(r-h>600){let n=r-h+1,a=e-h+1,s=Math.log(n),o=.5*Math.exp(2*s/3),m=.5*Math.sqrt(s*o*(n-o)/n)*(a-n/2<0?-1:1),u=Math.max(h,Math.floor(e-a*o/n+m)),c=Math.min(r,Math.floor(e+(n-a)*o/n+m));t(i,e,u,c,l)}let a=i[e],s=h,o=r;for(n(i,h,e),l(i[r],a)>0&&n(i,h,r);s<o;){for(n(i,s,o),s++,o--;0>l(i[s],a);)s++;for(;l(i[o],a)>0;)o--}0===l(i[h],a)?n(i,h,o):n(i,++o,r),o<=e&&(h=o+1),e<=o&&(r=o-1)}}(t,a,i,e,r),l.push(i,a,a,e)}}}}]);
//# sourceMappingURL=6524.7c62ab23199caeba.js.map