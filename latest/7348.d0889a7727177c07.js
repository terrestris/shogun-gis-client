"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["7348"],{64889:function(t,e){e.Z=class t{drawCustom(t,e,i,l,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},76798:function(t,e,i){var l=i(64889),s=i(45120),a=i(82359),n=i(68509),r=i(79682),o=i(21915),h=i(21882),g=i(17882),_=i(32538);class f extends l.Z{constructor(t,e,i,l,s,n,r){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=l,this.transformRotation_=l?(0,h.FH)(Math.atan2(l[1],l[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=n,this.userTransform_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,a.Ue)()}drawImages_(t,e,i,l){if(!this.image_)return;let s=(0,g.vT)(t,e,i,l,this.transform_,this.pixelCoordinates_),n=this.context_,r=this.tmpLocalTransform_,o=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=o*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let t=0,e=s.length;t<e;t+=2){let e=s[t]-this.imageAnchorX_,i=s[t+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){let t=e+this.imageAnchorX_,l=i+this.imageAnchorY_;(0,a.qC)(r,t,l,1,1,h,-t,-l),n.save(),n.transform.apply(n,r),n.translate(t,l),n.scale(this.imageScale_[0],this.imageScale_[1]),n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),n.restore()}else n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(n.globalAlpha=o)}drawText_(t,e,i,l){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let s=(0,g.vT)(t,e,i,l,this.transform_,this.pixelCoordinates_),a=this.context_,n=this.textRotation_;for(0===this.transformRotation_&&(n-=this.viewRotation_),this.textRotateWithView_&&(n+=this.viewRotation_);e<i;e+=l){let t=s[e]+this.textOffsetX_,i=s[e+1]+this.textOffsetY_;0!==n||1!=this.textScale_[0]||1!=this.textScale_[1]?(a.save(),a.translate(t-this.textOffsetX_,i-this.textOffsetY_),a.rotate(n),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,t,i),this.textFillState_&&a.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,l,s){let a=this.context_,n=(0,g.vT)(t,e,i,l,this.transform_,this.pixelCoordinates_);a.moveTo(n[0],n[1]);let r=n.length;s&&(r-=2);for(let t=2;t<r;t+=2)a.lineTo(n[t],n[t+1]);return s&&a.closePath(),i}drawRings_(t,e,i,l){for(let s=0,a=i.length;s<a;++s)e=this.moveToLineTo_(t,e,i[s],l,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!(0,o.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=(0,_.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],l=e[3]-e[1],s=Math.sqrt(i*i+l*l),a=this.context_;a.beginPath(),a.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){let i=e.getGeometryFunction()(t);if(!!i)this.setStyle(e),this.drawGeometry(i)}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!(0,o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if(!!(0,o.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates(),l=0,s=t.getEnds(),a=t.getStride();e.beginPath();for(let t=0,e=s.length;t<e;++t)l=this.moveToLineTo_(i,l,s[t],a,!1);e.stroke()}if(""!==this.text_){let e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!(0,o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!(0,o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),l=0,s=t.getEndss(),a=t.getStride();e.beginPath();for(let t=0,e=s.length;t<e;++t){let e=s[t];l=this.drawRings_(i,l,e,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),!(0,r.fS)(i.lineDash,t.lineDash)&&e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,l=t.textAlign?t.textAlign:n.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=l&&(i.textAlign=l,e.textAlign=l),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=l,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:l,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){let e=t.getColor();this.fillState_={fillStyle:(0,s.y)(e||n.defaultFillStyle)}}else this.fillState_=null;if(e){let t=e.getColor(),i=e.getLineCap(),l=e.getLineDash(),a=e.getLineDashOffset(),r=e.getLineJoin(),o=e.getWidth(),h=e.getMiterLimit(),g=l||n.defaultLineDash;this.strokeState_={lineCap:void 0!==i?i:n.defaultLineCap,lineDash:1===this.pixelRatio_?g:g.map(t=>t*this.pixelRatio_),lineDashOffset:(a||n.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==r?r:n.defaultLineJoin,lineWidth:(void 0!==o?o:n.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==h?h:n.defaultMiterLimit,strokeStyle:(0,s.y)(t||n.defaultStrokeStyle)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),l=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=l[0]*i,this.imageAnchorY_=l[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let a=t.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/i,a[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){let e=t.getFill();if(e){let t=e.getColor();this.textFillState_={fillStyle:(0,s.y)(t||n.defaultFillStyle)}}else this.textFillState_=null;let i=t.getStroke();if(i){let t=i.getColor(),e=i.getLineCap(),l=i.getLineDash(),a=i.getLineDashOffset(),r=i.getLineJoin(),o=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:n.defaultLineCap,lineDash:l||n.defaultLineDash,lineDashOffset:a||n.defaultLineDashOffset,lineJoin:void 0!==r?r:n.defaultLineJoin,lineWidth:void 0!==o?o:n.defaultLineWidth,miterLimit:void 0!==h?h:n.defaultMiterLimit,strokeStyle:(0,s.y)(t||n.defaultStrokeStyle)}}else this.textStrokeState_=null;let l=t.getFont(),a=t.getOffsetX(),r=t.getOffsetY(),o=t.getRotateWithView(),h=t.getRotation(),g=t.getScaleArray(),_=t.getText(),f=t.getTextAlign(),x=t.getTextBaseline();this.textState_={font:void 0!==l?l:n.defaultFont,textAlign:void 0!==f?f:n.defaultTextAlign,textBaseline:void 0!==x?x:n.defaultTextBaseline},this.text_=void 0!==_?Array.isArray(_)?_.reduce((t,e,i)=>t+=i%2?" ":e,""):_:"",this.textOffsetX_=void 0!==a?this.pixelRatio_*a:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""}}e.Z=f},43631:function(t,e,i){i.d(e,{Pn:function(){return h},Qz:function(){return o},eR:function(){return n},se:function(){return r}});var l=i(11256),s=i(49179);let a={Point:function(t,e,i,s,a,n){let r=i.getImage(),o=i.getText(),h=o&&o.getText(),g=n&&r&&h?{}:void 0;if(r){if(r.getImageState()!=l.default.LOADED)return;let n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(r,g),n.drawPoint(e,s,a)}if(h){let l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(o,g),l.drawText(e,s,a)}},LineString:function(t,e,i,l,s){let a=i.getStroke();if(a){let n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,a),n.drawLineString(e,l,s)}let n=i.getText();if(n&&n.getText()){let a=t.getBuilder(i.getZIndex(),"Text");a.setTextStyle(n),a.drawText(e,l,s)}},Polygon:function(t,e,i,l,s){let a=i.getFill(),n=i.getStroke();if(a||n){let r=t.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(a,n),r.drawPolygon(e,l,s)}let r=i.getText();if(r&&r.getText()){let a=t.getBuilder(i.getZIndex(),"Text");a.setTextStyle(r),a.drawText(e,l,s)}},MultiPoint:function(t,e,i,s,a,n){let r=i.getImage(),o=r&&0!==r.getOpacity(),h=i.getText(),g=h&&h.getText(),_=n&&o&&g?{}:void 0;if(o){if(r.getImageState()!=l.default.LOADED)return;let n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(r,_),n.drawMultiPoint(e,s,a)}if(g){let l=t.getBuilder(i.getZIndex(),"Text");l.setTextStyle(h,_),l.drawText(e,s,a)}},MultiLineString:function(t,e,i,l,s){let a=i.getStroke();if(a){let n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,a),n.drawMultiLineString(e,l,s)}let n=i.getText();if(n&&n.getText()){let a=t.getBuilder(i.getZIndex(),"Text");a.setTextStyle(n),a.drawText(e,l,s)}},MultiPolygon:function(t,e,i,l,s){let a=i.getFill(),n=i.getStroke();if(n||a){let r=t.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(a,n),r.drawMultiPolygon(e,l,s)}let r=i.getText();if(r&&r.getText()){let a=t.getBuilder(i.getZIndex(),"Text");a.setTextStyle(r),a.drawText(e,l,s)}},GeometryCollection:function(t,e,i,l,s,n){let r,o;let h=e.getGeometriesArray();for(r=0,o=h.length;r<o;++r)(0,a[h[r].getType()])(t,h[r],i,l,s,n)},Circle:function(t,e,i,l,s){let a=i.getFill(),n=i.getStroke();if(a||n){let r=t.getBuilder(i.getZIndex(),"Circle");r.setFillStrokeStyle(a,n),r.drawCircle(e,l,s)}let r=i.getText();if(r&&r.getText()){let s=t.getBuilder(i.getZIndex(),"Text");s.setTextStyle(r),s.drawText(e,l)}}};function n(t,e){return parseInt((0,s.getUid)(t),10)-parseInt((0,s.getUid)(e),10)}function r(t,e){let i=o(t,e);return i*i}function o(t,e){return .5*t/e}function h(t,e,i,s,n,r,o,h){let g=[],_=i.getImage();if(_){let t=!0,e=_.getImageState();e==l.default.LOADED||e==l.default.ERROR?t=!1:e==l.default.IDLE&&_.load(),t&&g.push(_.ready())}let f=i.getFill();f&&f.loading()&&g.push(f.ready());let x=g.length>0;return x&&Promise.all(g).then(()=>n(null)),function(t,e,i,l,s,n,r){let o=i.getGeometryFunction()(e);if(!o)return;let h=o.simplifyTransformed(l,s);i.getRenderer()?function t(e,i,l,s,a){if("GeometryCollection"==i.getType()){let n=i.getGeometries();for(let i=0,r=n.length;i<r;++i)t(e,n[i],l,s,a);return}e.getBuilder(l.getZIndex(),"Default").drawCustom(i,s,l.getRenderer(),l.getHitDetectionRenderer(),a)}(t,h,i,e,r):(0,a[h.getType()])(t,h,i,e,r,n)}(t,e,i,s,r,o,h),x}}}]);
//# sourceMappingURL=7348.d0889a7727177c07.js.map