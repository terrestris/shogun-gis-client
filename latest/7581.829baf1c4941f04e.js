"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["7581"],{73406:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var i=r("77701");class n extends i.default{constructor(e){super(e=e||{})}}var a=n,s=r("4722"),o=r("11256"),l=r("6908"),g=r("82359"),h=r("21915"),u=r("5374");class c extends s.Z{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){let t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,n=i.resolution,a=this.getLayer().getSource(),s=e.viewHints,g=e.extent;if(void 0!==t.extent&&(g=(0,h.getIntersection)(g,(0,u.fromUserExtent)(t.extent,i.projection))),!s[l.Z.ANIMATING]&&!s[l.Z.INTERACTING]&&!(0,h.isEmpty)(g)){if(a){let e=i.projection,t=a.getImage(g,n,r,e);t&&(this.loadImage(t)?this.image=t:t.getState()===o.default.EMPTY&&(this.image=null))}else this.image=null}return!!this.image}getData(e){let t=this.frameState;if(!t)return null;let r=this.getLayer(),i=(0,g.nn)(t.pixelToCoordinateTransform,e.slice()),n=r.getExtent();if(n&&!(0,h.containsCoordinate)(n,i))return null;let a=this.image.getExtent(),s=this.image.getImage(),o=(0,h.getWidth)(a),l=Math.floor(s.width*((i[0]-a[0])/o));if(l<0||l>=s.width)return null;let u=(0,h.getHeight)(a),c=Math.floor(s.height*((a[3]-i[1])/u));return c<0||c>=s.height?null:this.getImageData(s,l,c)}renderFrame(e,t){let r=this.image,i=r.getExtent(),n=r.getResolution(),[a,s]=Array.isArray(n)?n:[n,n],o=r.getPixelRatio(),l=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,m=e.viewState,d=m.center,x=m.resolution;this.prepareContainer(e,t);let p=this.context.canvas.width,f=this.context.canvas.height,I=this.getRenderContext(e),y=!1,w=!0;if(l.extent){let t=(0,u.fromUserExtent)(l.extent,m.projection);(y=(w=(0,h.intersects)(t,e.extent))&&!(0,h.containsExtent)(t,e.extent))&&this.clipUnrotated(I,e,t)}let E=r.getImage(),v=(0,g.qC)(this.tempTransform,p/2,f/2,c*a/(x*o),c*s/(x*o),0,o*(i[0]-d[0])/a,o*(d[1]-i[3])/s);this.renderedResolution=s*c/o;let R=E.width*v[0],S=E.height*v[3];if(!this.getLayer().getSource().getInterpolate()&&(I.imageSmoothingEnabled=!1),this.preRender(I,e),w&&R>=.5&&S>=.5){let e=v[4],t=v[5],r=l.opacity;1!==r&&(I.save(),I.globalAlpha=r),I.drawImage(E,0,0,+E.width,+E.height,e,t,R,S),1!==r&&I.restore()}return this.postRender(this.context,e),y&&I.restore(),I.imageSmoothingEnabled=!0,this.container}}var m=class e extends a{constructor(e){super(e)}createRenderer(){return new c(this)}getData(e){return super.getData(e)}}}}]);
//# sourceMappingURL=7581.829baf1c4941f04e.js.map