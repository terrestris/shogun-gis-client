"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["1509"],{2022:function(t,e,i){i.d(e,{Jx:function(){return f},Kp:function(){return l},Q9:function(){return u}});var n=i(11256),a=i(73381),r=i(66575),s=i(13002),h=i(64011),o=i(91358);class c extends r.Z{constructor(t,e,i,a){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state="function"==typeof a?n.default.IDLE:a,this.image_=null,this.loader="function"==typeof a?a:null}changed(){this.dispatchEvent(a.default.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==n.default.IDLE&&this.loader){this.state=n.default.LOADING,this.changed();let t=this.getResolution(),e=Array.isArray(t)?t[0]:t;(0,h.toPromise)(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||o.CREATE_IMAGE_BITMAP&&t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=n.default.LOADED}).catch(t=>{this.state=n.default.ERROR,console.error(t)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function l(t,e,i){let n=!0,r=!1,h=!1,c=[(0,s.Vx)(t,a.default.LOAD,function(){h=!0,r||e()})];return t.src&&o.IMAGE_DECODE?(r=!0,t.decode().then(function(){n&&e()}).catch(function(t){n&&(h?e():i())})):c.push((0,s.Vx)(t,a.default.ERROR,i)),function(){n=!1,c.forEach(s.bN)}}function u(t,e){return e&&(t.src=e),t.src&&o.IMAGE_DECODE?new Promise((e,i)=>t.decode().then(()=>e(t)).catch(n=>t.complete&&t.width?e(t):i(n))):new Promise((e,i)=>{function n(){r(),e(t)}function a(){r(),i(Error("Image load error"))}function r(){t.removeEventListener("load",n),t.removeEventListener("error",a)}t.addEventListener("load",n),t.addEventListener("error",a)})}function f(t,e){return e&&(t.src=e),t.src&&o.IMAGE_DECODE&&o.CREATE_IMAGE_BITMAP?t.decode().then(()=>createImageBitmap(t)).catch(e=>{if(t.complete&&t.width)return t;throw e}):u(t)}e.ZP=c},11256:function(t,e,i){i.r(e),e.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8913:function(t,e,i){let n;i.d(e,{BB:function(){return y},J6:function(){return s},TF:function(){return R},WV:function(){return C},XC:function(){return d},_2:function(){return A},fG:function(){return m},mL:function(){return S}});var a=i(85386),r=i(21882);let s=[NaN,NaN,NaN,0],h=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,c=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,l=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function u(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function f(t){throw Error('failed to parse "'+t+'" as color')}function d(t){return"string"==typeof t?t:y(t)}let g={},_=0;function m(t){if(4===t.length)return t;let e=t.slice();return e[3]=1,e}function E(t){return t>.0031308?269.025*Math.pow(t,1/2.4)-14.025:3294.6*t}function p(t){return t>.2068965?Math.pow(t,3):108/841*(t-4/29)}function I(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function v(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function C(t){let e=I(t[0]),i=I(t[1]),n=I(t[2]),a=v(.222488403*e+.716873169*i+.06060791*n),r=500*(v(.452247074*e+.399439023*i+.148375274*n)-a),s=200*(a-v(.016863605*e+.117638439*i+.865350722*n)),h=180/Math.PI*Math.atan2(s,r);return[116*a-16,Math.sqrt(r*r+s*s),h<0?h+360:h,t[3]]}function R(t){let e=(t[0]+16)/116,i=t[1],n=t[2]*Math.PI/180,a=p(e),s=p(e+i/500*Math.cos(n)),h=p(e-i/200*Math.sin(n)),o=E(3.021973625*s-1.617392459*a-.404875592*h),c=E(-.943766287*s+1.916279586*a+.027607165*h),l=E(.069407491*s-.22898585*a+1.159737864*h);return[(0,r.uZ)(o+.5|0,0,255),(0,r.uZ)(c+.5|0,0,255),(0,r.uZ)(l+.5|0,0,255),t[3]]}function S(t){if("none"===t)return s;if(g.hasOwnProperty(t))return g[t];if(_>=1024){let t=0;for(let e in g)(3&t++)==0&&(delete g[e],--_)}let e=function t(e){if(e.toLowerCase().startsWith("rgb")){let t=e.match(o)||e.match(h)||e.match(c);if(t){let e=t[4],i=100/255;return[(0,r.uZ)(u(t[1],i)+.5|0,0,255),(0,r.uZ)(u(t[2],i)+.5|0,0,255),(0,r.uZ)(u(t[3],i)+.5|0,0,255),void 0!==e?(0,r.uZ)(u(e,100),0,1):1]}f(e)}if(e.startsWith("#")){if(l.test(e)){let t=e.substring(1),i=t.length<=4?1:2,n=[0,0,0,255];for(let e=0,a=t.length;e<a;e+=i){let a=parseInt(t.substring(e,e+i),16);1===i&&(a+=a<<4),n[e/i]=a}return n[3]=n[3]/255,n}f(e)}let i=(n||(n=(0,a.E4)(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),n);i.fillStyle="#abcdef";let s=i.fillStyle;i.fillStyle=e,i.fillStyle===s&&(i.fillStyle="#fedcba",s=i.fillStyle,i.fillStyle=e,i.fillStyle===s&&f(e));let d=i.fillStyle;if(d.startsWith("#")||d.startsWith("rgba"))return t(d);i.clearRect(0,0,1,1),i.fillRect(0,0,1,1);let g=Array.from(i.getImageData(0,0,1,1).data);return g[3]=(0,r.FH)(g[3]/255,3),g}(t);for(let i of(4!==e.length&&f(t),e))isNaN(i)&&f(t);return g[t]=e,++_,e}function A(t){return Array.isArray(t)?t:S(t)}function y(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}},85386:function(t,e,i){let n;i.d(e,{$H:function(){return l},E4:function(){return r},Pb:function(){return c},W8:function(){return s},ep:function(){return u},hF:function(){return f},iO:function(){return o},jy:function(){return h}});var a=i(91358);function r(t,e,i,n){let r;return r=i&&i.length?i.shift():a.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",n)}function s(){return n||(n=r(1,1)),n}function h(t){let e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function o(t){let e=t.offsetWidth,i=getComputedStyle(t);return e+(parseInt(i.marginLeft,10)+parseInt(i.marginRight,10))}function c(t){let e=t.offsetHeight,i=getComputedStyle(t);return e+(parseInt(i.marginTop,10)+parseInt(i.marginBottom,10))}function l(t,e){let i=e.parentNode;i&&i.replaceChild(t,e)}function u(t){for(;t.lastChild;)t.lastChild.remove()}function f(t,e){let i=t.childNodes;for(let n=0;;++n){let a=i[n],r=e[n];if(!a&&!r)break;if(a!==r){if(!a){t.appendChild(r);continue}if(!r){t.removeChild(a),--n;continue}t.insertBefore(r,a)}}}},91358:function(t,e,i){i.r(e),i.d(e,{CREATE_IMAGE_BITMAP:function(){return u},DEVICE_PIXEL_RATIO:function(){return o},IMAGE_DECODE:function(){return l},MAC:function(){return h},PASSIVE_EVENT_LISTENERS:function(){return f},SAFARI:function(){return a},SAFARI_BUG_237906:function(){return r},WEBKIT:function(){return s},WORKER_OFFSCREEN_CANVAS:function(){return c}});let n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",a=n.includes("safari")&&!n.includes("chrom"),r=a&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),s=n.includes("webkit")&&!n.includes("edge"),h=n.includes("macintosh"),o="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,c="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,l="undefined"!=typeof Image&&Image.prototype.decode,u="function"==typeof createImageBitmap,f=function(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}()},97889:function(t,e,i){i.d(e,{U:function(){return f}});var n=i(2022),a=i(11256),r=i(8913),s=i(85386),h=i(73381),o=i(66575),c=i(16250);let l=null;class u extends o.Z{constructor(t,e,i,n,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=void 0===n?a.default.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===a.default.LOADED){l||(l=(0,s.E4)(1,1,void 0,{willReadFrequently:!0})),l.drawImage(this.image_,0,0);try{l.getImageData(0,0,1,1),this.tainted_=!1}catch{l=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(h.default.CHANGE)}handleImageError_(){this.imageState_=a.default.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=a.default.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=(0,s.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===a.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=a.default.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,n.Q9)(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==a.default.LOADED)return;let e=this.image_,i=(0,s.E4)(Math.ceil(e.width*t),Math.ceil(e.height*t)),n=i.canvas;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=(0,r.XC)(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===a.default.LOADED||this.imageState_===a.default.ERROR)t();else{let e=()=>{(this.imageState_===a.default.LOADED||this.imageState_===a.default.ERROR)&&(this.removeEventListener(h.default.CHANGE,e),t())};this.addEventListener(h.default.CHANGE,e)}})),this.ready_}}function f(t,e,i,n,a,r){let s=void 0===e?void 0:c.c1.get(e,i,a);return s||(s=new u(t,t&&"src"in t?t.src||void 0:e,i,n,a),c.c1.set(e,i,a,s,r)),r&&s&&!c.c1.getPattern(e,i,a)&&c.c1.set(e,i,a,s,r),s}e.Z=u},16250:function(t,e,i){i.d(e,{c1:function(){return h}});var n=i(11256),a=i(8913),r=i(85386);function s(t,e,i){return e+":"+t+":"+(i?(0,a._2)(i):"null")}let h=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let e in this.cache_){let i=this.cache_[e];(3&t++)==0&&!i.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){let n=s(t,e,i);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,i){let n=s(t,e,i);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,i,a,h){let o=s(t,e,i),c=o in this.cache_;this.cache_[o]=a,h&&(a.getImageState()===n.default.IDLE&&a.load(),a.getImageState()===n.default.LOADING?a.ready().then(()=>{this.patternCache_[o]=(0,r.W8)().createPattern(a.getImage(1),"repeat")}):this.patternCache_[o]=(0,r.W8)().createPattern(a.getImage(1),"repeat")),!c&&++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}}}]);
//# sourceMappingURL=1509.8fbd88752ee87115.js.map