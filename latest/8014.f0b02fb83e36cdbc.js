(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["8014"],{27275:function(e,t,n){"use strict";n.d(t,{DP:function(){return g},Nv:function(){return p}});var r=n(96486),i=n.n(r),l=n(41609),o=n.n(l),a=n(47037),s=n.n(a),u=n(75673),c=n(44126),f=n.n(c);let g=[{crsCode:"EPSG:25832",definition:"+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"},{crsCode:"EPSG:31466",definition:"+proj=tmerc +lat_0=0 +lon_0=6 +k=1 +x_0=2500000 +y_0=0 +ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs"},{crsCode:"EPSG:31467",definition:"+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +x_0=3500000 +y_0=0 +ellps=bessel +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7 +units=m +no_defs"}],d=[{alias:"urn:ogc:def:crs:EPSG::3857",mappedCode:"EPSG:3857"},{alias:"urn:ogc:def:crs:EPSG::25832",mappedCode:"EPSG:25832"},{alias:"urn:ogc:def:crs:EPSG::31466",mappedCode:"EPSG:31466"},{alias:"urn:ogc:def:crs:EPSG::31467",mappedCode:"EPSG:31467"}];class p{static initProj4Definitions(e,t=!0){let n=[];if(t&&(n=g),!i()(e)||e){let t=Array.isArray(e)?e:[e];t?.forEach(e=>{n?.findIndex(t=>t.crsCode===e?.crsCode)===-1&&n.push(e)})}n?.length>0&&(n.forEach(e=>f().defs(e.crsCode,e.definition)),(0,u.register)(f()))}static initProj4DefinitionMappings(e,t=!0){let n=[];if(t&&(n=d),!o()(e)){let t=Array.isArray(e)?e:[e];t?.forEach(e=>{n?.findIndex(t=>t.alias===e?.alias)===-1&&n.push(e)})}n?.map(e=>{let t=f().defs(e.mappedCode);f().defs(e.alias,t)})}static toDms(e){let t=Math.floor(e),n=Math.floor((e-t)*60),r=(e-t-n/60)*3600;return`${t}\xb0 ${p.zerofill(n)}' ${p.zerofill(r.toFixed(2))}''`}static toDmm(e){let t=Math.floor(e);return`${t}\xb0 ${p.zerofill(((e-t)*60).toFixed(4))}'`}static zerofill(e){let t=s()(e)?parseFloat(e):e;return t<10?`0${t}`:`${t}`}}},55453:function(e,t,n){"use strict";n.r(t),n.d(t,{CoordinateInfo:function(){return P},default:function(){return b}});var r=n(9948),i=n.n(r),l=n(14293),o=n.n(l),a=n(96486),s=n(38450),u=n.n(s),c=n(41235),f=n.n(c),g=n(39907),d=n.n(g),p=n(95829),m=n.n(p),E=n(76676),h=n.n(E),v=n(98508),y=n(12038),S=n(42212),_=n(39660);let x=e=>{let t=e.getId()??e.get("id");return(0,a.isString)(t)?t.split(".")[0]:t?.toString()??(0,a.uniqueId)("UNKNOWN")};var C=({active:e,clickEvent:t="click",drillDown:n=!1,featureCount:i=1,fetchOpts:l={},getInfoFormat:s=()=>"application/json",layerFilter:c=()=>!0,onError:g=()=>void 0,onSuccess:p=()=>void 0,registerOnClick:E=!0,registerOnPointerMove:C=!1,registerOnPointerRest:P=!1})=>{let b=(0,_.Z)(),[w,j]=(0,r.useState)(null),[k,F]=(0,r.useState)(null),[G,D]=(0,r.useState)([]),[A,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(b&&A)return b.getTargetElement().style.cursor="wait",()=>{b.getTargetElement().style.cursor="auto"}},[A,b]);let I=(0,r.useCallback)(e=>{if(e.dragging||o()(b))return;let t=b.getEventPixel(e.originalEvent),n=b.getAllLayers().filter(e=>c(e)).filter(e=>{let n=e.getData(t);return n&&n[3]>0});b.getTargetElement().style.cursor=n?.length>0?"pointer":""},[c,b]),T=(0,r.useCallback)(async e=>{if(o()(b))return;"dblclick"===t&&e.stopPropagation();let r=b.getView(),E=r.getResolution(),_=r.getProjection(),C=b.getEventPixel(e.originalEvent),P=e.coordinate,w=[0,0];e.originalEvent instanceof PointerEvent&&(w=[e.originalEvent.x,e.originalEvent.y]);let k=b.getAllLayers().reverse().filter(c).filter(e=>e.getData&&e.getData(C)&&(0,S.us)(e)),G=b.getAllLayers().reverse().filter(c).filter(e=>(0,S.tm)(e));O(!0);try{let e=[];for(let t of k)try{if(!n&&e.length>0)break;let r=t.getSource();if(!r)continue;let o=await s(t),a=r.getFeatureInfoUrl(P,E,_,{INFO_FORMAT:o,FEATURE_COUNT:i});if(a){let n;n=l instanceof Function?l(t):l[(0,v.getUid)(t)];let r=await fetch(a,n),i=null,s=!1;if("application/vnd.ogc.gml"===o)i=new(h());else if(o.indexOf("gml/2")>-1)i=new(f());else if("application/vnd.ogc.gml/3.1.1"===o||"text/xml; subtype=gml/3.1.1"===o)i=new(d());else if("application/vnd.ogc.gml/3.2"===o||"text/xml; subtype=gml/3.2"===o)i=new(m());else{if(!("application/json"===o||o.indexOf("json")>-1))continue;i=new(u()),s=!0}let c=s?await r.json():await r.text();e.push(...i.readFeatures(c).map(e=>({feature:e,layer:t,featureType:x(e)})))}}catch(e){y.Z.error(e)}for(let t of G){if(!n&&e.length>0)break;let r=t.getSource();r&&e.push(...r.getFeaturesAtCoordinate(P).map(e=>({feature:e,layer:t,featureType:x(e)})))}let t=(0,a.cloneDeep)(e),r=(0,a.cloneDeep)(P),o=(0,a.cloneDeep)(w);D(t),j(r),F(o),p?.({clickCoordinate:r,pixelCoordinate:o,loading:!1,features:t})}catch(e){y.Z.error(e),g?.(e)}O(!1)},[t,n,i,l,s,c,b,g,p]);return(0,r.useEffect)(()=>{let n,r,i;return e&&(E&&t&&(i=b?.on(t,T)),C&&(n=b?.on("pointermove",I)),P&&(r=b?.on("pointerrest",T))),()=>{i&&t&&b?.un(t,i.listener),n&&b?.un("pointermove",n.listener),r&&b?.un("pointerrest",r.listener)}},[e,b,I,T,E,C,P,t]),{clickCoordinate:w,features:G,loading:A,pixelCoordinate:k}};let P=({resultRenderer:e=()=>i().createElement(i().Fragment,null),...t})=>{let n=C(t);return o()(n)?null:i().createElement(i().Fragment,null,e(n))};var b=P},33071:function(e,t,n){"use strict";var r=n(9948);t.Z=n.n(r)().createContext(null)},39660:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var r=n(9948),i=n(33071);let l=()=>(0,r.useContext)(i.Z);t.Z=l},41609:function(e,t,n){var r=n(280),i=n(64160),l=n(35694),o=n(1469),a=n(98612),s=n(44144),u=n(25726),c=n(36719),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||c(e)||l(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},49179:function(e,t,n){"use strict";function r(){throw Error("Unimplemented abstract method.")}n.r(t),n.d(t,{VERSION:function(){return o},abstract:function(){return r},getUid:function(){return l}});let i=0;function l(e){return e.ol_uid||(e.ol_uid=String(++i))}let o="10.6.0"}}]);
//# sourceMappingURL=8014.f0b02fb83e36cdbc.js.map