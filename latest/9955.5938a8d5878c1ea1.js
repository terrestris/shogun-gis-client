"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["9955"],{42462:function(t,e,i){i.r(e),i.d(e,{default:function(){return B}});let s="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");class r{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,i=this.length){for(;this.pos<i;){let i=this.readVarint(),s=i>>3,r=this.pos;this.type=7&i,t(s,e,this),this.pos===r&&this.skip(i)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){let t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){let t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){let t=this.dataView.getUint32(this.pos,!0)+0x100000000*this.dataView.getUint32(this.pos+4,!0);return this.pos+=8,t}readSFixed64(){let t=this.dataView.getUint32(this.pos,!0)+0x100000000*this.dataView.getInt32(this.pos+4,!0);return this.pos+=8,t}readFloat(){let t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){let t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){let e,i,s=this.buf;return(e=127&(i=s[this.pos++]),i<128||(e|=(127&(i=s[this.pos++]))<<7,i<128||(e|=(127&(i=s[this.pos++]))<<14,i<128||(e|=(127&(i=s[this.pos++]))<<21,i<128))))?e:function(t,e,i){let s,r,n=i.buf;if(s=(112&(r=n[i.pos++]))>>4,r<128||(s|=(127&(r=n[i.pos++]))<<3,r<128)||(s|=(127&(r=n[i.pos++]))<<10,r<128)||(s|=(127&(r=n[i.pos++]))<<17,r<128)||(s|=(127&(r=n[i.pos++]))<<24,r<128)||(s|=(1&(r=n[i.pos++]))<<31,r<128))return a(t,s,e);throw Error("Expected varint not more than 10 bytes")}(e|=(15&(i=s[this.pos]))<<28,t,this)}readVarint64(){return this.readVarint(!0)}readSVarint(){let t=this.readVarint();return t%2==1?-((t+1)/2):t/2}readBoolean(){return!!this.readVarint()}readString(){let t=this.readVarint()+this.pos,e=this.pos;return(this.pos=t,t-e>=12&&s)?s.decode(this.buf.subarray(e,t)):function(t,e,i){let s="",r=e;for(;r<i;){let e,a,n,o=t[r],h=null,l=o>239?4:o>223?3:o>191?2:1;if(r+l>i)break;1===l?o<128&&(h=o):2===l?(192&(e=t[r+1]))==128&&(h=(31&o)<<6|63&e)<=127&&(h=null):3===l?(e=t[r+1],a=t[r+2],(192&e)==128&&(192&a)==128&&((h=(15&o)<<12|(63&e)<<6|63&a)<=2047||h>=55296&&h<=57343)&&(h=null)):4===l&&(e=t[r+1],a=t[r+2],n=t[r+3],(192&e)==128&&(192&a)==128&&(192&n)==128&&((h=(15&o)<<18|(63&e)<<12|(63&a)<<6|63&n)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,l=1):h>65535&&(h-=65536,s+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),s+=String.fromCharCode(h),r+=l}return s}(this.buf,e,t)}readBytes(){let t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){let i=this.readPackedEnd();for(;this.pos<i;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){let e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(t){let e=7&t;if(0===e)for(;this.buf[this.pos++]>127;);else if(2===e)this.pos=this.readVarint()+this.pos;else if(5===e)this.pos+=4;else if(1===e)this.pos+=8;else throw Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){let t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.dataView=new DataView(t.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(23283064365386963e-26*t),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(23283064365386963e-26*t),!0),this.pos+=8}writeVarint(t){if((t=+t||0)>0xfffffff||t<0)return void function(t,e){var i,s;let r,a;if(t>=0?(r=t%0x100000000|0,a=t/0x100000000|0):(r=~(-t%0x100000000),a=~(-t/0x100000000),0xffffffff^r?r=r+1|0:(r=0,a=a+1|0)),t>=0xffffffffffffffff||t<-0xffffffffffffffff)throw Error("Given varint doesn't fit into 10 bytes");e.realloc(10),i=r,(s=e).buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos]=127&i,function(t,e){let i=(7&t)<<4;if(e.buf[e.pos++]|=i|128*!!(t>>>=3),t&&(e.buf[e.pos++]=127&t|128*!!(t>>>=7),t)&&(e.buf[e.pos++]=127&t|128*!!(t>>>=7),t))e.buf[e.pos++]=127&t|128*!!(t>>>=7),t&&(e.buf[e.pos++]=127&t|128*!!(t>>>=7),t&&(e.buf[e.pos++]=127&t))}(a,e)}(t,this);if(this.realloc(4),this.buf[this.pos++]=127&t|128*(t>127),!(t<=127))this.buf[this.pos++]=127&(t>>>=7)|128*(t>127),!(t<=127)&&(this.buf[this.pos++]=127&(t>>>=7)|128*(t>127),t<=127||(this.buf[this.pos++]=t>>>7&127))}writeSVarint(t){this.writeVarint(t<0?-(2*t)-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;let e=this.pos;this.pos=function(t,e,i){for(let s=0,r,a;s<e.length;s++){if((r=e.charCodeAt(s))>55295&&r<57344)if(a)if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,a=r;continue}else r=a-55296<<10|r-56320|65536,a=null;else{r>56319||s+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):a=r;continue}else a&&(t[i++]=239,t[i++]=191,t[i++]=189,a=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);let i=this.pos-e;i>=128&&n(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){let e=t.length;this.writeVarint(e),this.realloc(e);for(let i=0;i<e;i++)this.buf[this.pos++]=t[i]}writeRawMessage(t,e){this.pos++;let i=this.pos;t(e,this);let s=this.pos-i;s>=128&&n(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s}writeMessage(t,e,i){this.writeTag(t,2),this.writeRawMessage(e,i)}writePackedVarint(t,e){e.length&&this.writeMessage(t,o,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,h,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,f,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,l,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,d,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,u,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,p,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,w,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,g,e)}writeBytesField(t,e){this.writeTag(t,2),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,5),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,5),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,1),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,1),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,0),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,0),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,2),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,5),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,1),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function a(t,e,i){return i?0x100000000*e+(t>>>0):(e>>>0)*0x100000000+(t>>>0)}function n(t,e,i){let s=e<=16383?1:e<=2097151?2:e<=0xfffffff?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(s);for(let e=i.pos-1;e>=t;e--)i.buf[e+s]=i.buf[e]}function o(t,e){for(let i=0;i<t.length;i++)e.writeVarint(t[i])}function h(t,e){for(let i=0;i<t.length;i++)e.writeSVarint(t[i])}function l(t,e){for(let i=0;i<t.length;i++)e.writeFloat(t[i])}function d(t,e){for(let i=0;i<t.length;i++)e.writeDouble(t[i])}function f(t,e){for(let i=0;i<t.length;i++)e.writeBoolean(t[i])}function u(t,e){for(let i=0;i<t.length;i++)e.writeFixed32(t[i])}function p(t,e){for(let i=0;i<t.length;i++)e.writeSFixed32(t[i])}function w(t,e){for(let i=0;i<t.length;i++)e.writeFixed64(t[i])}function g(t,e){for(let i=0;i<t.length;i++)e.writeSFixed64(t[i])}var c=i(52820),V=i(32817),F=i(29094),y=i(70910),x=i(51117),b=i(29229),P=i(69062),S=i(97191),k=i(21128),m=i(35473),_=i(54970);class M extends _.Ay{constructor(t){super(),t=t||{},this.dataProjection=new S.A({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:m.default,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,s){t.pos=e.geometry;let r=t.readVarint()+t.pos,a=1,n=0,o=0,h=0,l=0,d=0;for(;t.pos<r;){if(!n){let e=t.readVarint();a=7&e,n=e>>3}if(n--,1===a||2===a)o+=t.readSVarint(),h+=t.readSVarint(),1===a&&l>d&&(s.push(l),d=l),i.push(o,h),l+=2;else if(7===a)l>d&&(i.push(i[d],i[d+1]),l+=2);else throw Error("Invalid command found in the PBF")}l>d&&(s.push(l),d=l)}createFeature_(t,e,i){var s,r;let a,n,o,h=e.type;if(0===h)return null;let l=e.properties;this.idProperty_?(n=l[this.idProperty_],delete l[this.idProperty_]):n=e.id,l[this.layerName_]=e.layer.name;let d=[],f=[];this.readRawGeometry_(t,e,d,f);let u=(s=h,r=f.length,1===s?o=1===r?"Point":"MultiPoint":2===s?o=1===r?"LineString":"MultiLineString":3===s&&(o="Polygon"),o);if(this.featureClass===m.default)(a=new this.featureClass(u,d,f,2,l,n)).transform(i.dataProjection);else{let t;if("Polygon"==u){let e=(0,P.yJ)(d,f);t=e.length>1?new y.default(d,"XY",e):new b.default(d,"XY",f)}else t="Point"===u?new x.default(d,"XY"):"LineString"===u?new c.default(d,"XY"):"MultiPoint"===u?new F.default(d,"XY"):"MultiLineString"===u?new V.default(d,"XY",f):null;a=new this.featureClass,this.geometryName_&&a.setGeometryName(this.geometryName_);let e=(0,_.hX)(t,!1,i);a.setGeometry(e),void 0!==n&&a.setId(n),a.setProperties(l,!0)}return a}getType(){return"arraybuffer"}readFeatures(t,e){let i=this.layers_;e=this.adaptOptions(e);let s=(0,k.get)(e.dataProjection);s.setWorldExtent(e.extent),e.dataProjection=s;let a=new r(t),n=a.readFields(E,{}),o=[];for(let t in n){if(i&&!i.includes(t))continue;let r=n[t],h=r?[0,0,r.extent,r.extent]:null;s.setExtent(h);for(let t=0,i=r.length;t<i;++t){let i=function(t,e,i){t.pos=e.features[i];let s=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(T,r,s),r}(a,r,t),s=this.createFeature_(a,i,e);null!==s&&o.push(s)}}return o}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function E(t,e,i){if(3===t){let t={keys:[],values:[],features:[]},s=i.readVarint()+i.pos;i.readFields(v,t,s),t.length=t.features.length,t.length&&(e[t.name]=t)}}function v(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){let s=null,r=i.readVarint()+i.pos;for(;i.pos<r;)s=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(s)}}function T(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t){let t=i.readVarint()+i.pos;for(;i.pos<t;){let t=e.layer.keys[i.readVarint()],s=e.layer.values[i.readVarint()];e.properties[t]=s}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}var B=M}}]);
//# sourceMappingURL=9955.5938a8d5878c1ea1.js.map