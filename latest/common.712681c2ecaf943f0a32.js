(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([[592],{40840:function(e,t,n){"use strict";n.r(t),n.d(t,{App:function(){return ln},default:function(){return sn}});var a=n(92950),r=n.n(a),o=n(75885),l=n(8915),i=n(68734),s=n(36784),c=n(48732),u=n(80815),d=n(54690);var m=()=>(0,d.useDispatch)();const p=d.useSelector;var g=p,f=n(20908),y=n(76712),h=n(93379),w=n.n(h),E=n(7795),b=n.n(E),v=n(90569),k=n.n(v),T=n(3565),L=n.n(T),S=n(19216),A=n.n(S),P=n(44589),C=n.n(P),M=n(40171),F={};F.styleTagTransform=C(),F.setAttributes=L(),F.insert=k().bind(null,"head"),F.domAPI=b(),F.insertStyleElement=A();w()(M.Z,F),M.Z&&M.Z.locals&&M.Z.locals;function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},I.apply(this,arguments)}var Z=({...e})=>{const[t,n]=(0,a.useState)(!1),[d,p]=(0,a.useState)([]),[h,w]=(0,a.useState)([]),[E,b]=(0,a.useState)("https://sgx.geodatenzentrum.de/wms_topplus_open?request=GetCapabilities&service=wms"),v=g((e=>e.addLayerModal.visible)),k=m(),T=(0,u.useMap)(),{t:L}=(0,s.useTranslation)(),S=()=>{w([]),p([]),k((0,f.Cp)()),k((0,y.ui)("addLayer"))},A=e=>{if(!T)return;const t=L("AddLayerModal.externalWmsFolder");let n=c.MapUtil.getLayerByName(T,t);if(!n){n=new i.default,n.set("name",t);const e=T.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}e.forEach((e=>{n.getLayers().getArray().includes(e)||(e.set("isExternalLayer",!0),n.getLayers().push(e))})),n.set("hideInLayerTree",n.getLayers().getLength()<1),S()};return r().createElement(o.Modal,I({className:"add-layer-modal",title:L("AddLayerModal.title"),visible:v,onCancel:S,footer:[r().createElement(o.Button,{key:"add-selected",disabled:h?.length<1,onClick:()=>{const e=d.filter((e=>h.includes((0,l.getUid)(e))));A(e)}},L("AddLayerModal.addSelectedLayers")),r().createElement(o.Button,{key:"add-all",disabled:d?.length<1,onClick:()=>{A(d)}},L("AddLayerModal.addAllLayers"))]},e),r().createElement(o.Input.Search,{placeholder:L("AddLayerModal.inputPlaceholder"),value:E,onChange:e=>{b(e.target.value)},onSearch:async e=>{try{n(!0);const t=await c.CapabilitiesUtil.getWmsCapabilities(e),a=c.CapabilitiesUtil.getLayersFromWmsCapabilities(t,"Title");p(a)}catch(e){o.notification.error({message:L("AddLayerModal.errorMessage"),description:L("AddLayerModal.errorDescription")})}finally{n(!1)}},enterButton:!0}),r().createElement(o.Table,{loading:t,columns:[{title:L("AddLayerModal.columnTitle"),render:(e,t)=>t.get("title")}],rowKey:e=>(0,l.getUid)(e),rowSelection:{selectedRowKeys:h,onChange:w},pagination:!1,dataSource:d}))},O=n(3028),x=n(41666),N=n(7294);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D.apply(this,arguments)}var R=({...e})=>{const t=(0,u.default)(),n=function(){const{search:e}=window.location;return r().useMemo((()=>new URLSearchParams(e)),[e])}();return(0,a.useEffect)((()=>{if(t){const e=e=>e.get("name"),n=e=>e instanceof x.default||e instanceof O.default;c.PermalinkUtil.applyLink(t,";",e,n)}}),[n.get("center"),n.get("zoom"),n.get("layers")]),t?r().createElement(N.default,D({map:t},e)):r().createElement(r().Fragment,null)},j=n(4540),_=n(37494),U=n(91900),B=n(26954),z=n(78415),V={};V.styleTagTransform=C(),V.setAttributes=L(),V.insert=k().bind(null,"head"),V.domAPI=b(),V.insertStyleElement=A();w()(z.Z,V),z.Z&&z.Z.locals&&z.Z.locals;function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K.apply(this,arguments)}var $=({...e})=>{const{t:t}=(0,s.useTranslation)(),n=(0,u.default)();(0,a.useEffect)((()=>{if(!n)return;n.getControls().getArray().find((e=>e instanceof _.Z))||n.addControl(new _.Z({target:"scale-line-container"}))}),[n]),(0,a.useEffect)((()=>{if(!n)return;n.getControls().getArray().find((e=>e instanceof j.Z))||n.addControl(new j.Z({coordinateFormat:(0,U.createStringXY)(2),projection:"EPSG:25832",undefinedHTML:"&nbsp;",target:"mouse-position"}))}),[n]);return n?r().createElement("div",K({className:"footer"},e),r().createElement("div",{className:"item-container left-items"},r().createElement("div",{id:"scale-line-container"}),r().createElement(o.Divider,{type:"vertical"}),r().createElement("div",{className:"scale-combo"},t("Footer.scale"),": ",r().createElement(B.default,{map:n}),r().createElement(o.Divider,{type:"vertical"})),r().createElement("div",{className:"reference-system"},t("Footer.refSystem"),": ",n.getView().getProjection().getCode(),r().createElement(o.Divider,{type:"vertical"})),r().createElement("div",{className:"mouse-position-wrapper"},t("Footer.mousePosition"),": ",r().createElement("div",{id:"mouse-position",className:"mouse-position"}))),r().createElement("div",{className:"item-container right-items"},r().createElement(o.Button,{onClick:()=>{window.open("https://www.terrestris.de/de/kontakt/","_blank")},type:"link"},t("Footer.contact")),r().createElement(o.Button,{onClick:()=>{window.open("https://www.terrestris.de/de/impressum/","_blank")},type:"link"},t("Footer.imprint")),r().createElement(o.Button,{onClick:()=>{window.open("https://www.terrestris.de/de/datenschutzerklaerung/","_blank")},type:"link"},t("Footer.privacypolicy")))):r().createElement(r().Fragment,null)},W=n(76688);const G=()=>(0,a.useContext)(W.ZP);var H=G,Y=n(43985);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},q.apply(this,arguments)}var J=({...e})=>{const t=(0,u.default)(),{t:n}=(0,s.useTranslation)();return t?r().createElement(Y.default,q({map:t,countryCodes:"",allowClear:!0,nominatimBaseUrl:"https://nominatim.terrestris.de/search.php?",placeholder:n("Nominatim.placeholder")},e)):r().createElement(r().Fragment,null)},Q=n(51436),X=n(17625),ee=n(41609),te=n.n(ee),ne=n(11659),ae=n(77257);var re=()=>(0,a.useContext)(ae.ZP),oe=n(35954),le=n.n(oe);const ie=({email:e="",size:t=80,rating:n="g",defaultImage:a="identicon",force:r=!1})=>{const o=e.toLowerCase();let l=`https://www.gravatar.com/avatar/${le()(o)}?s=${t}&r=${n}&d=${a}`;return r&&(l=`${l}&f=y`),l};var se=n(88885),ce={};ce.styleTagTransform=C(),ce.setAttributes=L(),ce.insert=k().bind(null,"head"),ce.domAPI=b(),ce.insertStyleElement=A();w()(se.Z,ce),se.Z&&se.Z.locals&&se.Z.locals;function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ue.apply(this,arguments)}var de=({opener:e,...t})=>{const{t:n}=(0,s.useTranslation)(),l=g((e=>e.appInfo)),i=g((e=>e.logoPath)),[c,u]=(0,a.useState)(!1),d=()=>{u(!c)};let m;return m=e?r().cloneElement(e,{onClick:d}):r().createElement("button",{onClick:d},"Open"),r().createElement(r().Fragment,null,m,r().createElement(o.Modal,ue({className:"application-info",title:n("ApplicationInfo.title"),centered:!0,visible:c,onOk:d,onCancel:d,footer:null},t),r().createElement("img",{className:"logo",src:i}),r().createElement(o.Statistic,{title:n("ApplicationInfo.clientVersionTitle"),value:"4.2.1"}),l.version&&l.buildTime&&r().createElement(o.Statistic,{title:n("ApplicationInfo.backendVersionTitle"),value:`${l.version} (${l.buildTime})`})))},me=n(72285),pe={};pe.styleTagTransform=C(),pe.setAttributes=L(),pe.insert=k().bind(null,"head"),pe.domAPI=b(),pe.insertStyleElement=A();w()(me.Z,pe),me.Z&&me.Z.locals&&me.Z.locals;var ge=()=>{const{t:e}=(0,s.useTranslation)(),t=re()?.getKeycloak(),n=g((e=>e.user)),a=e=>{switch(e.key){case"settings":t&&t.accountManagement();break;case"info":default:break;case"login":t&&t.login();break;case"logout":t&&t.logout()}};return r().createElement(ne.default,{size:"small",imageSrc:ie({email:n.providerDetails?.email||"",size:28}),userName:r().createElement(X.FontAwesomeIcon,{icon:Q.gc2}),userMenu:(()=>{const t={key:"login",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.Yem}),label:e("UserMenu.loginMenuTitle")},l={key:"username",label:r().createElement("div",{className:"user-name"},r().createElement("span",null,n.providerDetails?.email))},i={type:"divider"},s={key:"settings",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.gNZ}),label:e("UserMenu.settingsMenuTitle")},c={key:"info",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.YHc}),label:r().createElement(de,{opener:r().createElement("span",{className:"info-opener"},e("UserMenu.infoMenuTitle"))})},u={key:"logout",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.HEx}),label:e("UserMenu.logoutMenuTitle")},d=te()(n)?[t,c]:[l,i,s,c,i,u];return r().createElement(o.Menu,{onClick:a,className:"user-chip-menu",items:d})})()})},fe=n(62923),ye={};ye.styleTagTransform=C(),ye.setAttributes=L(),ye.insert=k().bind(null,"head"),ye.domAPI=b(),ye.insertStyleElement=A();w()(fe.Z,ye),fe.Z&&fe.Z.locals&&fe.Z.locals;function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},he.apply(this,arguments)}var we=({...e})=>{const t=p((e=>e.title)),n=p((e=>e.logoPath)),a=G(),o=(e,t)=>{a.filter((t=>"header"===t.integration?.placement&&t.integration?.placementOrientation===e)).forEach((e=>{const{key:n,wrappedComponent:a}=e;t.splice(e.integration?.insertionIndex||0,0,r().createElement(a,{key:n}))}))};return r().createElement("div",he({className:"header"},e),r().createElement("div",{className:"item-container left-items"},(()=>{const e=[r().createElement("img",{key:"logo",className:"logo",src:n}),r().createElement("div",{key:"title",className:"title"},t)];return o("left",e),e})()),r().createElement("div",{className:"item-container center-items"},(()=>{const e=[r().createElement(J,{key:"search"})];return o("center",e),e})()),r().createElement("div",{className:"item-container right-items"},(()=>{const e=[r().createElement(ge,{key:"user-menu"})];return o("right",e),e})()))},Ee=n(12038),be=n.n(Ee),ve=n(92953),ke=n(57795),Te=n(55002),Le=n(19867),Se=n(54388),Ae=n(78459),Pe=n(85677),Ce={};Ce.styleTagTransform=C(),Ce.setAttributes=L(),Ce.insert=k().bind(null,"head"),Ce.domAPI=b(),Ce.insertStyleElement=A();w()(Pe.Z,Ce),Pe.Z&&Pe.Z.locals&&Pe.Z.locals;var Me=n(35895);const{Option:Fe}=o.Select;var Ie=()=>{const e=Object.keys(Me.Z.services.resourceStore.data);return r().createElement("div",{className:"language-select"},r().createElement(o.Select,{defaultValue:Me.Z.language||"en",onChange:e=>{Me.Z.changeLanguage(e)}},e.map((e=>r().createElement(Fe,{key:e,value:e},e.toUpperCase())))))},Ze=n(75013),Oe=n(73254),xe=n(64302),Ne=n(99165),De=n(20640),Re=n.n(De),je=n(62706),_e=n(35674),Ue=n(10767),Be={};Be.styleTagTransform=C(),Be.setAttributes=L(),Be.insert=k().bind(null,"head"),Be.domAPI=b(),Be.insertStyleElement=A();w()(Ue.Z,Be),Ue.Z&&Ue.Z.locals&&Ue.Z.locals;var ze=()=>{const e=(0,u.useMap)(),{t:t}=(0,s.useTranslation)();if(!e)return r().createElement(r().Fragment,null);const[n,l]=(0,a.useState)(_e.default.getLink(e,";",(e=>e.get("name")),(e=>(e instanceof x.default||e instanceof O.default)&&e.getVisible()))),c=`Hey,\r\ncheck out the layer-composition I created:\r\n\r\n${n}`;return(0,a.useEffect)((()=>{let t=[];const n=e=>e.get("name"),a=e=>(e instanceof x.default||e instanceof O.default)&&e.getVisible(),r=()=>l(_e.default.getLink(e,";",n,a)),o=e=>{const n=e.getLayers().getArray();for(let e=0;e<n.length;e++){const a=n[e];if(a instanceof i.default)o(a);else{let e=a.on("change:visible",r);t.push(e)}}};let s=e.getLayerGroup();const c=e.getView().on("change:center",r),u=e.getView().on("change:resolution",r);return o(s),()=>{(0,je.unByKey)(c),(0,je.unByKey)(u),(0,je.unByKey)(t)}}),[]),r().createElement("div",{className:"permalink"},r().createElement("div",{className:"icons"},r().createElement(o.Tooltip,{title:t("Permalink.twitterTooltip")},r().createElement(Ze.Z,{onClick:function(){const e=new URL("https://twitter.com/intent/tweet");e.searchParams.set("url",c),window.open(e)}})),r().createElement(o.Tooltip,{title:t("Permalink.whatsAppTooltip")},r().createElement(Oe.Z,{onClick:function(){const e=new URL("https://wa.me");e.searchParams.set("text",c),window.open(e)}})),r().createElement(o.Tooltip,{title:t("Permalink.mailTooltip")},r().createElement(xe.Z,{onClick:function(){const e=new URL("mailto:");e.searchParams.set("subject","SHOGun Web-GIS"),e.searchParams.set("body",c),window.open(e.toString().replace(/\+/g,"%20"),"_self")}}))),r().createElement("div",{className:"link"},r().createElement(o.Input,{value:n,readOnly:!0}),r().createElement(o.Tooltip,{title:t("Permalink.copyTooltip")},r().createElement(Ne.Z,{onClick:function(){Re()(n)?o.message.info(t("Permalink.copiedToClipboard")):o.message.info(t("Permalink.copyToClipboardFailed"))}}))))};function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ve.apply(this,arguments)}var Ke=({printManager:e,value:t,id:n,placeholder:l,maxLength:i,...s})=>{const[c,u]=(0,a.useState)(t);return(0,a.useEffect)((()=>{e&&n&&(e.customParams[n]=c)}),[e,c,n]),(0,a.useEffect)((()=>{u(t)}),[t]),r().createElement(o.Input,Ve({id:n,value:c,onChange:e=>u(e.target.value),placeholder:l,maxLength:i,showCount:!!(i&&i>1)},s))};function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$e.apply(this,arguments)}var We=({printManager:e,placeholder:t="Bitte wählen Sie eine Vorlage aus",value:n,...l})=>{const[i,s]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setLayout(i)}),[e,i]),(0,a.useEffect)((()=>{s(n)}),[n]),r().createElement(o.Select,$e({placeholder:t,value:i,onChange:s},l),e?.getLayouts().map((e=>r().createElement(o.Select.Option,{key:e.name,value:e.name},e.name))))};function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ge.apply(this,arguments)}var He=({printManager:e,placeholder:t,value:n,outputFormats:l,...i})=>{const[s,c]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setOutputFormat(s)}),[e,s]),(0,a.useEffect)((()=>{c(n)}),[n]),r().createElement(o.Select,Ge({placeholder:t,value:s,onChange:c},i),l.map((e=>r().createElement(o.Select.Option,{key:e,value:e},e.toLocaleUpperCase()))))};function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ye.apply(this,arguments)}var qe=({printManager:e,placeholder:t,value:n,...l})=>{const[i,s]=(0,a.useState)(n);return(0,a.useEffect)((()=>{e&&e.setDpi(i)}),[e,i]),(0,a.useEffect)((()=>{s(n)}),[n]),r().createElement(o.Select,Ye({placeholder:t,value:i,onChange:s},l),e?.getDpis().map((e=>r().createElement(o.Select.Option,{key:e,value:e},`${e} DPI`))))},Je=n(87650),Qe={};Qe.styleTagTransform=C(),Qe.setAttributes=L(),Qe.insert=k().bind(null,"head"),Qe.domAPI=b(),Qe.insertStyleElement=A();w()(Je.Z,Qe),Je.Z&&Je.Z.locals&&Je.Z.locals;function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xe.apply(this,arguments)}var et=({layerBlackList:e=[],map:t,printManager:n,...l})=>{const[c]=o.Form.useForm(),{t:u}=(0,s.useTranslation)(),[d,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),f=n=>{const a=n.get("name"),r=!e.includes(a),o=!n.get("hideLegendInPrint"),l=n.getVisible()&&Se.default.layerInResolutionRange(n,t),s=!(n instanceof i.default);if(r&&o&&l&&s){const e=t.getView().getResolution();return e&&n.set("customPrintLegendParams",{SCALE:Se.default.getScaleForResolution(e,"m")}),!0}return!1},y=async()=>{n.legendFilter=f,n.customParams.printLegend=!1};if(!n?.isInitiated())return r().createElement(r().Fragment,null);return r().createElement("div",{className:"print"},p&&r().createElement(o.Alert,{className:"print-alert",message:p,type:"error",closable:!0,showIcon:!0,onClose:()=>{g(null)}}),r().createElement(o.Form,Xe({form:c,className:"print-form",layout:"horizontal"},{labelCol:{span:8},wrapperCol:{span:16}},l),r().createElement(o.Form.Item,{name:"title",label:u("PrintForm.title"),initialValue:u("PrintForm.initialTitle")},r().createElement(Ke,{maxLength:50,printManager:n,placeholder:u("PrintForm.titlePlaceholder")})),r().createElement(o.Form.Item,{name:"comment",label:u("PrintForm.comment")},r().createElement(Ke,{maxLength:200,printManager:n,placeholder:u("PrintForm.commentPlaceholder")})),r().createElement(o.Form.Item,{name:"layout",label:u("PrintForm.layout"),initialValue:n?.getLayouts()[0]?.name},r().createElement(We,{printManager:n})),r().createElement(o.Form.Item,{name:"dpi",label:u("PrintForm.dpi"),initialValue:72},r().createElement(qe,{printManager:n,placeholder:u("PrintForm.resolutionPlaceholder")})),r().createElement(o.Form.Item,{name:"format",label:u("PrintForm.format"),initialValue:"pdf"},r().createElement(He,{printManager:n,outputFormats:["pdf","png"],placeholder:u("PrintForm.outputFormatPlaceholder")}))),r().createElement(o.Button,{className:"print-button tool-menu-button",disabled:!n?.isInitiated(),icon:r().createElement(X.FontAwesomeIcon,{icon:Q.q7m}),loading:d,onClick:async()=>{try{g(null),m(!0),await y();const e=await n.print(!1);if(!e)throw new Error("No download URL available, the job has failed.");window.open(e)}catch(e){g(u("PrintForm.printJobErrorMsg")),be().error(e)}finally{m(!1)}}},u("PrintForm.downloadBtnText")))},tt=n(66913),nt=n.n(tt),at=n(14409),rt=n(42833),ot=n(11032);class lt extends ot.default{static TYPE_WMS="wms";static sourceCls=[rt.default];constructor(){super()}serialize(e,t={},n){const a=super.serialize(e,t,n);return a.baseURL.startsWith("/geoserver/ows")&&(a.baseURL=`http://shogun-geoserver:8080${a.baseURL}`),a}}var it=lt;class st extends it{static TYPE_WMS="tiledwms";static sourceCls=[at.default];constructor(){super()}serialize(e,t={},n){nt()(t,{tileSize:[512,512]});const a=e.getSource();if(!a||!this.validateSource(a))return;return{...super.serialize(e,t,n),type:this.constructor.TYPE_WMS,...t}}}var ct=st,ut=n(49466),dt=n(17818),mt=n(395),pt=n(40960),gt=n(18776),ft=n(56479),yt=n(4264),ht=n(66439),wt=n(7871),Et={};Et.styleTagTransform=C(),Et.setAttributes=L(),Et.insert=k().bind(null,"head"),Et.domAPI=b(),Et.insertStyleElement=A();w()(wt.Z,Et),wt.Z&&wt.Z.locals&&wt.Z.locals;var bt=({showDrawPoint:e,showDrawLine:t,showDrawPolygon:n,showDrawCircle:a,showDrawRectangle:o,showDrawAnnotation:l,showModifyFeatures:i,showUploadFeatures:c,showDownloadFeatures:d,showDeleteFeatures:m})=>{const{t:p}=(0,s.useTranslation)(),g=(0,u.useMap)(),f=e=>{const t=new FileReader;t.onload=()=>{const e=(new ut.default).readFeatures(t.result);if(g){const t=g.getView().getProjection().getCode();e.forEach((e=>{e.getGeometry()?.transform("EPSG:4326",t)}));ht.DigitizeUtil.getDigitizeLayer(g).getSource()?.addFeatures(e)}},t.readAsText(e)};return g?r().createElement(ft.default,null,e?r().createElement(mt.default,{name:"draw-point",drawType:"Point",type:"link",pressed:!1},r().createElement(X.FontAwesomeIcon,{icon:Q.diR}),r().createElement("span",{className:"draw-point"},p("Draw.point"))):r().createElement(r().Fragment,null),t?r().createElement(mt.default,{name:"draw-line",drawType:"LineString",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.hx$}),r().createElement("span",{className:"draw-line"},p("Draw.line"))):r().createElement(r().Fragment,null),n?r().createElement(mt.default,{name:"draw-polygon",drawType:"Polygon",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.ubJ}),r().createElement("span",{className:"draw-polygon"},p("Draw.polygon"))):r().createElement(r().Fragment,null),a?r().createElement(mt.default,{name:"draw-circle",drawType:"Circle",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.diR}),r().createElement("span",{className:"draw-circle"},p("Draw.circle"))):r().createElement(r().Fragment,null),o?r().createElement(mt.default,{name:"draw-rectangle",drawType:"Rectangle",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.pL1}),r().createElement("span",{className:"draw-rectangle"},p("Draw.rectangle"))):r().createElement(r().Fragment,null),l?r().createElement(mt.default,{name:"draw-text",drawType:"Text",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.yGG}),r().createElement("span",{className:"draw-text"},p("Draw.text"))):r().createElement(r().Fragment,null),i?r().createElement(pt.default,{name:"draw-modify",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.Yai}),r().createElement("span",{className:"draw-modify"},p("Draw.modify"))):r().createElement(r().Fragment,null),c?r().createElement(yt.default,{name:"draw-upload",onChange:e=>{const t=e.target.files;!t||1!==t.length||"application/geo+json"!==t[0].type&&"application/geojson"!==t[0].type||f(t[0])},type:"link"},r().createElement(gt.default,{type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.cf$}),r().createElement("span",{className:"draw-upload"},p("Draw.upload")))):r().createElement(r().Fragment,null),d?r().createElement(gt.default,{name:"draw-export",onClick:()=>{const e=[];if(g){const t=g.getView().getProjection().getCode(),n=ht.DigitizeUtil.getDigitizeLayer(g).getSource()?.getFeatures();if(n&&n.length>0){n.forEach((n=>{const a=n.clone();a.getGeometry()?.transform(t,"EPSG:4326"),e.push(a)}));const a=(new ut.default).writeFeatures(e),r=new Blob([a],{type:"application/geo+json"}),o=window.URL.createObjectURL(r),l=document.createElement("a");l.href=o,l.setAttribute("download","exportedFeatures.geojson"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.q7m}),r().createElement("span",{className:"draw-export"},p("Draw.export"))):r().createElement(r().Fragment,null),m?r().createElement(dt.default,{name:"draw-delete",type:"link"},r().createElement(X.FontAwesomeIcon,{icon:Q.$aW}),r().createElement("span",{className:"draw-delete"},p("Draw.delete"))):r().createElement(r().Fragment,null)):r().createElement(r().Fragment,null)},vt=n(93893),kt=n(92371),Tt=n(22556),Lt=n(30283),St=n(51345),At=n(58958),Pt=n(47539),Ct=n(46622),Mt=n(21922),Ft=n(86092),It={};It.styleTagTransform=C(),It.setAttributes=L(),It.insert=k().bind(null,"head"),It.domAPI=b(),It.insertStyleElement=A();w()(Ft.Z,It),Ft.Z&&Ft.Z.locals&&Ft.Z.locals;function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zt.apply(this,arguments)}var Ot=({features:e,layerName:t="Unknown layer",...n})=>{const[l,i]=(0,a.useState)(),[c,u]=(0,a.useState)(),d=(0,Ct.useMap)(),{t:m}=(0,s.useTranslation)(),p=`selection-layer-${t}`;return(0,a.useEffect)((()=>{if(!d)return;return(()=>{if(Se.default.getLayerByName(d,p))return;const t=new Tt.default({features:e}),n=new St.default({color:"rgba(255, 255, 255, 0.15)"}),a=new At.default({color:"rgba(209, 70, 47, 1)",width:2}),r=new Pt.default({fill:n,stroke:a,image:new Lt.default({radius:5,fill:n,stroke:a})}),o=new kt.default({source:t,style:r});o.set("name",p),d.addLayer(o)})(),()=>(()=>{const e=Se.default.getLayerByName(d,p);e&&d.removeLayer(e)})()}),[d]),(0,a.useEffect)((()=>{if(!d)return;const t=Se.default.getLayerByName(d,p);t&&(t.getSource()?.clear(),i(1),e.length>0&&u(e[0]))}),[e,d]),(0,a.useEffect)((()=>{if(!c||!d)return;const e=Se.default.getLayerByName(d,p);e&&(e.getSource()?.clear(),e.getSource()?.addFeature(c))}),[c,d]),c?r().createElement(r().Fragment,null,r().createElement("div",{className:"property-grid-header"},t&&r().createElement("span",null,t),r().createElement("div",{className:"right-elements"},r().createElement(o.Pagination,{simple:!0,total:e.length,size:"small",pageSize:1,current:l,onChange:t=>{i(t),u(e[t-1])}}),r().createElement(o.Tooltip,{title:"Copy to clipboard"},r().createElement(o.Button,{type:"primary",onClick:()=>{Re()((new ut.default).writeFeature(c))},icon:r().createElement(X.FontAwesomeIcon,{icon:Q.kZ_})})))),r().createElement(Mt.default,Zt({feature:c,size:"small",sticky:!0,columns:[{title:"Key",dataIndex:"attributeName",key:"attributeName",width:"50%",ellipsis:!0,defaultSortOrder:"ascend",sorter:(e,t)=>e.key.localeCompare(t.key)},{title:"Value",dataIndex:"attributeValue",key:"attributeValue",width:"50%",ellipsis:!0}],scroll:{y:Object.keys(c.getProperties()).length>6?250:void 0}},n))):r().createElement(r().Fragment,null)},xt=n(16813),Nt={};Nt.styleTagTransform=C(),Nt.setAttributes=L(),Nt.insert=k().bind(null,"head"),Nt.domAPI=b(),Nt.insertStyleElement=A();w()(xt.Z,Nt),xt.Z&&xt.Z.locals&&xt.Z.locals;function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dt.apply(this,arguments)}var Rt=({enabled:e,...t})=>{const{t:n}=(0,s.useTranslation)(),a=(0,u.useMap)(),o=re();if(!a)return r().createElement(r().Fragment,null);const i=Se.default.getAllLayers(a).filter((e=>!!e.get("hoverable")&&(e instanceof O.default&&e.getSource()instanceof rt.default||e instanceof x.default&&e.getSource()instanceof at.default)));if(!e)return r().createElement(r().Fragment,null);return r().createElement("div",{className:"feature-info-panel"},r().createElement(vt.default,Dt({featureCount:10,map:a,queryLayers:i,resultRenderer:e=>{const t=e.features,a=e.loading;return 0===Object.keys(t).length?r().createElement("span",{className:"usage-hint"},n("FeatureInfo.usageHint")):Object.entries(t).map((([e,t])=>r().createElement("div",{key:e},r().createElement(Ot,{features:t,layerName:e,loading:a}))))},fetchOpts:(()=>{const e={};return i.forEach((t=>{const n=(0,l.getUid)(t);e[n]={headers:{...t.get("useBearerToken")?{...(0,Ae.getBearerTokenHeader)(o?.getKeycloak())}:void 0}}})),e})()},t)))},jt=n(64289),_t=n(68112),Ut=n(97979),Bt=n(26414),zt=n(86954);function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vt.apply(this,arguments)}var Kt=({layer:e,visibleLegendsIds:t,setVisibleLegendsIds:n,...i})=>{const[c,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),g=(0,u.useMap)(),{t:f}=(0,s.useTranslation)(),y=async()=>{if(g){p(!0);try{let t=await zt.default.getExtentForLayer(e);t=(0,Bt.transformExtent)(t,"EPSG:4326",g.getView().getProjection()),g.getView().fit(t)}catch(e){be().error(e),o.notification.error({message:f("LayerTreeContextMenu.extentError")})}finally{p(!1)}}},h=()=>{if(!g)return;const t=f("AddLayerModal.externalWmsFolder"),n=Se.default.getLayerByName(g,t);if(n){const t=n.getLayers();try{1===t.getLength()&&n.set("hideInLayerTree",!0),t.remove(e)}catch(e){be().error("Could not remove external layer from map.")}}};let w=[{label:r().createElement(o.Spin,{spinning:m},f("LayerTreeContextMenu.layerZoomToExtent")),key:"zoomToExtent"}];const E=t.includes((0,l.getUid)(e));e.getVisible()&&w.push({label:f(E?"LayerTreeContextMenu.hideLegend":"LayerTreeContextMenu.showLegend"),key:"toggleLegend"}),e.get("isExternalLayer")&&w.push({label:f("LayerTreeContextMenu.removeLayer"),key:"removeExternal"});const b=r().createElement(o.Menu,{items:w,selectable:!1,onClick:a=>{switch(a?.key){case"zoomToExtent":y();break;case"removeExternal":h();break;case"toggleLegend":const a=(0,l.getUid)(e),r=[...t];r.includes(a)?r.splice(r.indexOf(a),1):r.push(a),n(r)}d(!1)}});return r().createElement(o.Dropdown,Vt({overlay:b,placement:"bottomLeft",onVisibleChange:d,visible:c,trigger:["click"]},i),r().createElement(X.FontAwesomeIcon,{icon:Q.iV1}))},$t=n(79770),Wt={};Wt.styleTagTransform=C(),Wt.setAttributes=L(),Wt.insert=k().bind(null,"head"),Wt.domAPI=b(),Wt.insertStyleElement=A();w()($t.Z,Wt),$t.Z&&$t.Z.locals&&$t.Z.locals;function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gt.apply(this,arguments)}var Ht=({...e})=>{const t=(0,u.useMap)(),{t:n}=(0,s.useTranslation)(),[o,c]=(0,a.useState)([]);return t?r().createElement(jt.default,Gt({className:"layertree",map:t,nodeTitleRenderer:e=>{if(!t)return;const a=t.getView(),s=a.getProjection().getUnits()||"m",u=a.getResolution(),d=u?Se.default.getScaleForResolution(u,s):void 0;return e instanceof i.default?r().createElement("div",null,e.get("name")):r().createElement(r().Fragment,null,r().createElement("div",{className:"tree-node-header"},r().createElement("span",null,e.get("name")),r().createElement(Kt,{layer:e,visibleLegendsIds:o,setVisibleLegendsIds:c})),e.get("visible")&&r().createElement(r().Fragment,null,r().createElement("div",{className:"layer-transparency"},r().createElement(Ut.default,{tipFormatter:e=>`${n("LayerTree.transparency")}: ${e}%`,layer:e}))),e.get("visible")&&o.includes((0,l.getUid)(e))&&r().createElement(_t.default,{layer:e,errorMsg:n("LayerTree.noLegendAvailable"),extraParams:{scale:d,LEGEND_OPTIONS:"fontAntiAliasing:true;forceLabels:on",TRANSPARENT:!0}}))},filterFunction:e=>e instanceof i.default?!e.get("hideInLayerTree"):!(e.get("isBackgroundLayer")||e.getSource&&e.getSource()instanceof Tt.default),draggable:!0},e)):r().createElement(r().Fragment,null)},Yt=n(85214),qt=n(85415),Jt={};Jt.styleTagTransform=C(),Jt.setAttributes=L(),Jt.insert=k().bind(null,"head"),Jt.domAPI=b(),Jt.insertStyleElement=A();w()(qt.Z,Jt),qt.Z&&qt.Z.locals&&qt.Z.locals;var Qt=({showMeasureDistance:e,showMeasureArea:t})=>{const{t:n}=(0,s.useTranslation)(),a=(0,u.useMap)();return a?r().createElement(ft.default,null,e?r().createElement(Yt.default,{geodesic:!0,name:"line",map:a,measureType:"line",type:"link",continueLineMsg:n("Measure.clicktodrawline")},r().createElement(X.FontAwesomeIcon,{icon:Q.SoD}),r().createElement("span",{className:"measure-text"},n("Measure.line"))):r().createElement(r().Fragment,null),t?r().createElement(Yt.default,{geodesic:!0,name:"poly",map:a,measureType:"polygon",type:"link",continuePolygonMsg:n("Measure.clicktodrawarea")},r().createElement(X.FontAwesomeIcon,{icon:Q.ubJ}),r().createElement("span",{className:"measure-text"},n("Measure.area"))):r().createElement(r().Fragment,null)):r().createElement(r().Fragment,null)},Xt=n(35818),en={};en.styleTagTransform=C(),en.setAttributes=L(),en.insert=k().bind(null,"head"),en.domAPI=b(),en.insertStyleElement=A();w()(Xt.Z,en),Xt.Z&&Xt.Z.locals&&Xt.Z.locals;function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tn.apply(this,arguments)}n(26398).default.getLegendGraphicUrl=e=>{if(e.get("legendUrl"))return e.get("legendUrl");if(e.getSource()instanceof at.default||e.getSource()instanceof rt.default){const t=e.get("customPrintLegendParams"),n=e.getSource(),{LAYERS:a,VERSION:r,FORMAT:o}=n.getParams();let l=n instanceof rt.default?n.getUrl():n.getUrls()[0];l.startsWith("/geoserver/ows")&&(l=`http://shogun-geoserver:8080${l}`);const i={LAYER:a.split(",")[0],VERSION:r||"1.3.0",SERVICE:"WMS",REQUEST:"GetLegendGraphic",FORMAT:o||"image/png",...t},s=Object.keys(i).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`)).join("&");return l.endsWith("?")?`${l}${s}`:`${l}?${s}`}return""};var nn=({...e})=>{const{t:t}=(0,s.useTranslation)(),n=(0,u.useMap)(),l=re(),c=H(),d=m(),p=g((e=>e.toolMenu.selectedKeys)),h=g((e=>e.toolMenu.availableTools)),[w,E]=(0,a.useState)(!1),[b,v]=(0,a.useState)([]),[k,T]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=window.matchMedia("only screen and (max-width: 450px) and (orientation: portrait),only screen and (max-width: 750px) and (orientation: landscape), only screen and (max-width: 580px)"),t=new RegExp("/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/");(e.matches||t.test(window.navigator.userAgent))&&E(!0)}),[]),(0,a.useEffect)((()=>(b.includes("print")&&!k&&S(),()=>{k&&b.includes("print")&&(k.shutdownManager(),T(null))})),[b,k]);const L=e=>{if(!n)return;const t=e.get("name");return t&&!["react-geo_measure","hoverVectorLayer"].includes(t)&&e.getVisible()&&!(e instanceof i.default)&&Se.default.layerInResolutionRange(e,n)},S=(0,a.useCallback)((async()=>{const e=new ve.MapFishPrintV3Manager({url:"/print",map:n,timeout:6e4,layerFilter:L,headers:{...(0,Ae.getBearerTokenHeader)(l?.getKeycloak())},transformOpts:{rotate:!1}});e.serializers=[new ke.default,new Te.default,new Le.default,new it,new ct],await e.init().then((()=>{e.setOutputFormat(e.getOutputFormats()[0]),e.setDpi(e.getDpis()[0]),e.setLayout(e.getLayouts()[0]?.name)})).catch((e=>{be().error(e)})),T(e)}),[n,t]),A=e=>{E(!1),p.forEach((e=>d((0,y.ui)(e)))),v([e.key])},P=[];return(h.includes("default")||h.includes("measure_tools"))&&P.push({className:"measure",key:"measure_tools",popupClassName:"measure",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.KxN}),label:t("ToolMenu.measure"),children:[{key:"measure-panel",label:r().createElement(Qt,{showMeasureDistance:h.includes("default")||h.includes("measure_tools_distance"),showMeasureArea:h.includes("default")||h.includes("measure_tools_area")})}]}),(h.includes("default")||h.includes("draw_tools"))&&P.push({className:"draw",key:"draw_tools",popupClassName:"draw",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.ubJ}),label:t("ToolMenu.draw"),children:[{key:"draw-panel",label:r().createElement(bt,{showDrawPoint:h.includes("default")||h.includes("draw_tools_point"),showDrawLine:h.includes("default")||h.includes("draw_tools_line"),showDrawPolygon:h.includes("default")||h.includes("draw_tools_polygon"),showDrawCircle:h.includes("default")||h.includes("draw_tools_circle"),showDrawRectangle:h.includes("default")||h.includes("draw_tools_rectangle"),showDrawAnnotation:h.includes("default")||h.includes("draw_tools_annotation"),showModifyFeatures:h.includes("default")||h.includes("draw_tools_modify"),showUploadFeatures:h.includes("default")||h.includes("draw_tools_upload"),showDownloadFeatures:h.includes("default")||h.includes("draw_tools_download"),showDeleteFeatures:h.includes("default")||h.includes("draw_tools_delete")})}]}),(h.includes("default")||h.includes("feature_info"))&&P.push({key:"feature_info",onTitleClick:A,icon:r().createElement(X.FontAwesomeIcon,{icon:Q.kwz}),label:t("ToolMenu.featureInfo"),children:[{key:"feature-info-panel",label:r().createElement(Rt,{enabled:b.includes("feature_info")})}]}),(h.includes("default")||h.includes("print"))&&P.push({key:"print",onTitleClick:A,icon:r().createElement(X.FontAwesomeIcon,{icon:Q.kwI}),label:t("ToolMenu.print"),children:[{key:"print-panel",label:r().createElement(et,{printManager:k,map:n})}]}),(h.includes("default")||h.includes("tree"))&&P.push({className:"tree",key:"tree",onTitleClick:A,icon:r().createElement(X.FontAwesomeIcon,{icon:Q.aC2}),label:t("ToolMenu.layertree"),children:[{key:"tree-panel",label:r().createElement("div",{className:"tree-wrapper"},r().createElement(Ht,null),r().createElement(o.Button,{className:"add-wms-button tool-menu-button",icon:r().createElement(X.FontAwesomeIcon,{icon:Q.r8p}),onClick:()=>d((0,f.$Z)())},t("ToolMenu.addWms")))}]}),(h.includes("default")||h.includes("permalink"))&&P.push({key:"permalink",onTitleClick:A,icon:r().createElement(X.FontAwesomeIcon,{icon:Q.M6U}),label:t("Permalink.title"),children:[{key:"share-panel",label:r().createElement(ze,null)}]}),(h.includes("default")||h.includes("language_selector"))&&P.push({type:"divider"},{key:"language_selector",onTitleClick:A,icon:r().createElement(X.FontAwesomeIcon,{icon:Q.BCn}),label:t("ToolMenu.languageSelect"),children:[{key:"languages-select-panel",label:r().createElement(Ie,null)}]}),c&&c.forEach((e=>{if("tool-menu"===e.integration?.placement){const{key:n,wrappedComponent:a,integration:{placement:o,label:l="Plugin",insertionIndex:i,icon:s,...c}}=e;P.splice(i||0,0,{key:n,onTitleClick:A,icon:s?r().createElement(X.FontAwesomeIcon,{icon:s}):void 0,label:t(l),children:[{key:`${n}-child`,label:r().createElement(a,null)}],...c})}})),P.length>0&&P.push({key:"expand_collapse",label:t(w?"ToolMenu.expand":"ToolMenu.collapse"),icon:w?r().createElement(X.FontAwesomeIcon,{icon:Q._tD}):r().createElement(X.FontAwesomeIcon,{icon:Q.A35})}),r().createElement("div",{className:"tool-menu"},r().createElement(o.Menu,tn({mode:"inline",inlineCollapsed:w,onSelect:e=>{if("expand_collapse"===e.key)E(!w)},onDeselect:e=>{if("expand_collapse"===e.key)E(!w)},openKeys:b,onOpenChange:e=>{w&&(e=e.filter((e=>"measure_tools"===e||"draw_tools"===e||"expand_collapse"===e))),v(e)},multiple:!0,selectedKeys:p,items:P},e)))},an=n(65705),rn={};rn.styleTagTransform=C(),rn.setAttributes=L(),rn.insert=k().bind(null,"head"),rn.domAPI=b(),rn.insertStyleElement=A();w()(an.Z,rn),an.Z&&an.Z.locals&&an.Z.locals;function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},on.apply(this,arguments)}const ln=({...e})=>((0,a.useEffect)((()=>{const e=document.querySelectorAll(".loadmask")[0];e&&e.classList.add("loadmask-hidden")}),[]),r().createElement("div",on({className:"App"},e),r().createElement(we,null),r().createElement(R,null),r().createElement(nn,null),r().createElement($,null),r().createElement(Z,null)));var sn=ln},88599:function(e,t,n){"use strict";n.r(t);var a=n(92950),r=n.n(a),o=n(75885),l=n(17699),i=n(67502),s=n(87617),c=n.n(s),u=n(43666),d=n.n(u),m=n(65957),p=n.n(m),g=n(65920),f=n(68734),y=n(41666),h=n(32663),w=n(26414),E=n(98266),b=n(14409),v=n(59220),k=n(12181),T=n(54690),L=n(12038),S=n.n(L),A=n(92212),P=n.n(A),C=n(67624),M=n(73161),F=n.n(M),I=n(12665),Z=n.n(I),O=n(76688),x=n(77257),N=n(35895),D=n(68333);const R=(0,D.createSlice)({name:"appInfo",initialState:{authorities:[],buildTime:"",commitHash:"",userId:-1,version:""},reducers:{setAppInfo(e,t){return t.payload}}}),{setAppInfo:j}=R.actions;var _=R.reducer;const U=(0,D.createSlice)({name:"logoPath",initialState:"./shogun_logo.png",reducers:{setLogoPath:(e,t)=>t.payload}}),{setLogoPath:B}=U.actions;var z=U.reducer,V=n(20908);const K=(0,D.createSlice)({name:"title",initialState:"SHOGun Client",reducers:{setTitle:(e,t)=>t.payload}}),{setTitle:$}=K.actions;var W=K.reducer,G=n(76712);const H=(0,D.createSlice)({name:"user",initialState:{},reducers:{setUser(e,t){return t.payload}}}),{setUser:Y}=H.actions;var q=H.reducer;const J=e=>(0,D.combineReducers)({appInfo:_,title:W,logoPath:z,toolMenu:G.ZP,addLayerModal:V.ZP,user:q,...e}),Q=(0,D.configureStore)({reducer:J()});var X=n(93379),ee=n.n(X),te=n(7795),ne=n.n(te),ae=n(90569),re=n.n(ae),oe=n(3565),le=n.n(oe),ie=n(19216),se=n.n(ie),ce=n(44589),ue=n.n(ce),de=n(90978),me={};me.styleTagTransform=ue(),me.setAttributes=le(),me.insert=re().bind(null,"head"),me.domAPI=ne(),me.insertStyleElement=se();ee()(de.Z,me),de.Z&&de.Z.locals&&de.Z.locals;const pe=r().lazy((()=>Promise.all([n.e(987),n.e(592),n.e(472),n.e(264),n.e(749),n.e(301),n.e(905)]).then(n.bind(n,40840)))),ge=new(Z())({url:c().shogunBase||"/"}),fe=new(F())({client:ge}),ye=e=>{switch(e){case"en":default:return i.Z;case"de":return l.Z}},he=async e=>{const t=await fe.parseMapView(e),n=await fe.parseLayerTree(e);return t.setConstrainResolution(!0),new h.default({view:t,layers:n,controls:(0,g.ce)({zoom:!1})})},we=()=>{const e=new y.default({source:new E.default});e.set("name","OpenStreetMap");const t=new y.default({opacity:.5,visible:!0,source:new b.default({url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",projection:"EPSG:3857",params:{LAYERS:"MERRA2_2m_Air_Temperature_Assimilated_Monthly"}})});t.setProperties({name:"2-meter Air Temperature, Assimilated (Monthly, MERRA2)",hoverable:!0});const n=new f.default({layers:[t]});n.set("name","NASA Earth Observations");const a=new f.default({layers:[e]});a.set("name","Background");const r=(0,w.fromLonLat)([0,40],"EPSG:3857");return new h.default({view:new v.default({center:r,zoom:0}),layers:[a,n],controls:(0,g.ce)({zoom:!1})})},Ee=async(e,t,a)=>{await n.I("default"),await new Promise(((e,n)=>{const a=document.createElement("script");a.src=t,a.type="text/javascript",a.async=!0,a.onload=()=>{a.parentElement?.removeChild(a),e()},a.onerror=e=>{a.parentElement?.removeChild(a),n(e)},document.head.appendChild(a)}));const r=window[e];await r.init(n.S.default);const o=[];for(const e of a){const t=(await r.get(e))();o.push(t)}return o};(async()=>{try{const e=await(async()=>{const e=c().keycloak?.enabled,t=c().keycloak?.onLoadAction,n=c().keycloak?.host,a=c().keycloak?.realm,r=c().keycloak?.clientId;if(!e)return;if(!n)throw new Error("Neither config key keycloak.host nor environment KEYCLOAK_HOST is set");if(!a)throw new Error("Neither config key keycloak.realm nor environment KEYCLOAK_REALM is set");if(!r)throw new Error("Neither config key keycloak.clientId nor environment KEYCLOAK_CLIENT_ID is set");const o=new(p())({url:`${n}`,realm:a,clientId:r});return o.onTokenExpired=async()=>{try{await o.updateToken(0)}catch(e){S().error("Error while refreshing the access token: ",e)}},await o.init({onLoad:t}),o})();e&&ge.setKeycloak(e);const t=await(async()=>{const e=P().getQueryParam(window.location.href,"applicationId");if(e)try{S().info(`Loading application with ID ${e}`);const t=await ge.application().findOne(e);return S().info(`Successfully loaded application with ID ${e}`),t}catch(t){S().error(`Error while loading application with ID ${e}: ${t}`),o.notification.error({message:N.Z.t("Index.applicationLoadErrorMessage"),description:N.Z.t("Index.applicationLoadErrorDescription",{applicationId:e}),duration:0})}else S().info("No application ID given, can't load any configuration.")})(),n=(e=>{const t={"--primaryColor":"#59666C","--secondaryColor":"#70B3BE","--complementaryColor":"#FFFFFF"};return e?(e.primaryColor&&(t["--primaryColor"]=e.primaryColor),e.secondaryColor&&(t["--secondaryColor"]=e.secondaryColor),e.secondaryColor&&(t["--complementaryColor"]=e.complementaryColor),t):t})(t?.clientConfig?.theme);o.ConfigProvider.config({theme:{primaryColor:d()(n["--primaryColor"]).isLight()?d()(n["--primaryColor"]).darken(.5).hexa():n["--primaryColor"]}}),Q.subscribe((()=>{document.title=Q.getState().title})),(async e=>{if(e){if(e.name&&Q.dispatch($(e.name)),e?.clientConfig?.theme?.logoPath&&Q.dispatch(B(e.clientConfig.theme.logoPath)),e.toolConfig){const t=[];e.toolConfig.map((e=>{e.config.visible&&t.push(e.name)})),Q.dispatch((0,G.nn)(t))}}else S().info("No application configuration provided, the default store will be loaded")})(t);const a=await(async()=>{try{S().info("Loading application info");const e=await ge.info().getAppInfo();return S().info("Successfully loaded application info"),e}catch(e){S().error("Error while loading application info: ",e)}})();(async e=>{e&&Q.dispatch(j(e))})(a);(async e=>{e&&Q.dispatch(Y(e))})(await(async e=>{if(e)try{S().info(`Loading user with ID ${e}`);const t=await ge.user().findOne(e);return S().info(`Successfully loaded user with ID ${e}`),t}catch(t){S().error(`Error while loading user with ID ${e}: `,t)}else S().info("No user ID given, can't load it's details.")})(a?.userId));const l=await(async e=>e?await he(e):(S().info("No application configuration provided, the default map will be loaded"),we()))(t),i=await(async e=>{if(!c().plugins||0===c().plugins.length)return S().info("No plugins found"),[];S().info("Loading plugins");const t=[];for(const n of c().plugins){const a=n.name,o=n.resourcePath,l=n.exposedPaths;if(!a)return S().error("Required plugin configuration 'name' is not set"),t;if(!o)return S().error("Required plugin configuration 'resourcePath' is not set"),t;if(!l)return S().error("Required plugin configuration 'exposedPaths' is not set"),t;let i;S().info(`Loading plugin ${a} (with exposed paths ${l.join(" and ")}) from ${o}`);try{i=await Ee(a,o,l),S().info(`Successfully loaded plugin ${a}`)}catch(e){return S().error(`Could not load plugin ${a}:`,e),t}i.forEach((n=>{const a=n.default,o=a.component;if(a.wrappedComponent=()=>r().createElement(o,{map:e,client:ge}),a.i18n&&Object.entries(a.i18n).forEach((e=>{const t=e[0],n=e[1].translation;N.Z.addResourceBundle(t,"translation",n,!0,!0)})),a.reducers){const e=J(a.reducers);Q.replaceReducer(e)}t.push(a)}))}return t})(l);(0,k.render)(r().createElement(r().StrictMode,null,r().createElement(r().Suspense,{fallback:r().createElement("span",null)},r().createElement(x.rA,{client:ge},r().createElement(O.ol,{plugins:i},r().createElement(o.ConfigProvider,{locale:ye(N.Z.language)},r().createElement(T.Provider,{store:Q},r().createElement(C.default.Provider,{value:l},r().createElement(pe,{style:n})))))))),document.getElementById("app"))}catch(e){const t=document.querySelectorAll(".loadmask")[0];t&&t.classList.add("loadmask-hidden"),S().error(e),(0,k.render)(r().createElement(r().StrictMode,null,r().createElement(o.Alert,{className:"error-boundary",message:N.Z.t("Index.errorMessage"),description:N.Z.t("Index.errorDescription"),type:"error",showIcon:!0})),document.getElementById("app"))}})()},76688:function(e,t,n){"use strict";n.d(t,{ol:function(){return l}});var a=n(92950),r=n.n(a);const o=r().createContext([]),l=({plugins:e,children:t})=>r().createElement(o.Provider,{value:e},t);t.ZP=o},77257:function(e,t,n){"use strict";n.d(t,{rA:function(){return l}});var a=n(92950),r=n.n(a);const o=r().createContext(null),l=({client:e,children:t})=>r().createElement(o.Provider,{value:e},t);t.ZP=o},35895:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(93756),r=n.n(a),o=n(31360),l=n.n(o),i=n(36784);r().use(l()).use(i.initReactI18next).init({resources:{de:{translation:{ApplicationInfo:{title:"Über",clientVersionTitle:"Client Version",backendVersionTitle:"Backend Version"},AddLayerModal:{addSelectedLayers:"Auswahl hinzufügen",addAllLayers:"Alle hinzufügen",inputPlaceholder:"WMS GetCapabilities URL angeben…",externalWmsFolder:"Externe Themen",title:"WMS hinzufügen",columnTitle:"Name",errorMessage:"Fehler",errorDescription:"Das Capabilities Dokument konnte nicht geladen werden, bitte prüfen Sie die URL"},Permalink:{title:"Teilen",twitterTooltip:"Link via Twitter teilen",whatsAppTooltip:"Link via WhatsApp teilen",mailTooltip:"Link via Mail teilen",copyTooltip:"Link in die Zwischenablage kopieren",copiedToClipboard:"Link wurde in Zwischenablage kopiert",copyToClipboardFailed:"Link konnte nicht kopiert werden"},Measure:{title:"Messen",line:"Entfernung",area:"Fläche",clicktodrawline:"Zum Zeichnen einer Linie klicken",clicktodrawarea:"Zum Zeichnen einer Fläche klicken"},Draw:{point:"Punkt",line:"Linie",polygon:"Polygon",circle:"Kreis",rectangle:"Rechteck",text:"Anmerkung",modify:"Bearbeitung",upload:"Hochladen",delete:"Löschen",export:"Exportieren"},FeatureInfo:{usageHint:"Klicken Sie in die Karte, um Detailinformationen zu erhalten."},LayerTree:{transparency:"Transparenz",noLegendAvailable:"Keine Legende verfügbar"},LayerTreeContextMenu:{layerZoomToExtent:"Auf Layerausdehnung zoomen",extentError:"Konnte nicht auf die Layerausdehnung zoomen",removeLayer:"Layer entfernen",showLegend:"Legende anzeigen",hideLegend:"Legende ausblenden"},ToolMenu:{expand:"Menu ausklappen",collapse:"Menu einklappen",measure:"Messen",draw:"Zeichnen",featureInfo:"Karteninhalte abfragen",addWms:"WMS hinzufügen",print:"Export",layertree:"Karten",languageSelect:"Sprachauswahl"},PrintForm:{title:"Kartentitel",initialTitle:"Druckausgabe",titlePlaceholder:"Bitte geben Sie einen Titel ein",comment:"Bemerkung",commentPlaceholder:"Bitte geben Sie einen Kommentar ein",layout:"Vorlage",dpi:"Auflösung",format:"Format",downloadBtnText:"Ausdruck erzeugen",printJobErrorMsg:"Der Kartenausdruck konnte nicht erzeugt werden",initErrorMsg:"Der Kartendruck Generator konnte nicht initialisiert werden.",outputFormatPlaceholder:"Bitte wählen Sie ein Ausgabeformat aus",resolutionPlaceholder:"Bitte wählen Sie eine Ausgabequalität aus"},Footer:{refSystem:"Bezugssystem",scale:"Maßstab",mousePosition:"Mausposition",imprint:"Impressum",contact:"Kontakt",privacypolicy:"Datenschutz"},Index:{applicationLoadErrorMessage:"Fehler beim Laden der Applikation",applicationLoadErrorDescription:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. Die Standardkonfiguration wird stattdessen geladen.",errorMessage:"Fehler beim Laden der Applikation",errorDescription:"Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden. Bitte laden Sie die Seite erneut."},Nominatim:{placeholder:"Ortsname, Straßenname, Stadtteilname, POI usw."},UserMenu:{settingsMenuTitle:"Profil bearbeiten",infoMenuTitle:"Über",logoutMenuTitle:"Ausloggen",loginMenuTitle:"Anmelden"}}},en:{translation:{ApplicationInfo:{title:"About",clientVersionTitle:"Client version",backendVersionTitle:"Backend version"},AddLayerModal:{addSelectedLayers:"Add selected",addAllLayers:"Add all",inputPlaceholder:"Enter a WMS GetCapabilities URL…",externalWmsFolder:"External layers",title:"Add WMS",columnTitle:"Name",errorMessage:"Error",errorDescription:"Could not load the provided Capabilities document, please check the validity of the URL"},Permalink:{title:"Share",twitterTooltip:"Share link via Twitter",whatsAppTooltip:"Share link via WhatsApp",mailTooltip:"Share link via Mail",copyTooltip:"Copy link to Clipboard",copiedToClipboard:"Copied to clipboard",copyToClipboardFailed:"Could not copy link to clipboard"},Measure:{title:"Measure",line:"Distance",area:"Area",clicktodrawline:"Click to draw line",clicktodrawarea:"Click to draw area"},Draw:{point:"Point",line:"Line",polygon:"Polygon",circle:"Circle",rectangle:"Rectangle",text:"Annotation",modify:"Edit",upload:"Upload",delete:"Delete",export:"Export"},FeatureInfo:{usageHint:"Click on the map to get details about the clicked coordinate."},LayerTree:{transparency:"Transparency",noLegendAvailable:"No legend available"},LayerTreeContextMenu:{layerZoomToExtent:"Zoom to layer extent",extentError:"Could not zoom to layer extent",removeLayer:"Remove layer",showLegend:"Show legend",hideLegend:"Hide legend"},ToolMenu:{expand:"Expand",collapse:"Collapse",measure:"Measure",draw:"Draw",featureInfo:"Query map features",addWms:"Add WMS",print:"Export",layertree:"Maps",languageSelect:"Language selector"},PrintForm:{title:"Title",initialTitle:"Title",titlePlaceholder:"Please input a title…",comment:"Comment",commentPlaceholder:"Please enter a comment…",layout:"Layout",dpi:"Resolution",format:"Format",downloadBtnText:"Create print",printJobErrorMsg:"Could not generate PDF output",initErrorMsg:"PDF Generator could not be initialized",outputFormatPlaceholder:"Please select an output format",resolutionPlaceholder:"Please select an output quality"},Footer:{refSystem:"Reference system",scale:"Scale",mousePosition:"Mouse position",imprint:"Imprint",contact:"Contact",privacypolicy:"Privacy"},Index:{applicationLoadErrorMessage:"Error while loading the application",applicationLoadErrorDescription:"The application with ID {{applicationId}} could not be loaded correctly. You're seeing the default application configuration.",errorMessage:"Error while loading the application",errorDescription:"An unexpected error occured while loading the application. Please try to reload the page."},Nominatim:{placeholder:"Place name, street name, district name, POI, etc."},UserMenu:{settingsMenuTitle:"Edit profile",infoMenuTitle:"About",logoutMenuTitle:"Logout",loginMenuTitle:"Login"}}}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},supportedLngs:["de","en"]});var s=r()},21302:function(e,t,n){Promise.all([n.e(987),n.e(592),n.e(139),n.e(558)]).then(n.bind(n,88599))},20908:function(e,t,n){"use strict";n.d(t,{$Z:function(){return o},Cp:function(){return l}});var a=n(68333);const r=(0,a.createSlice)({name:"addLayerModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:o,hide:l,toggle:i}=r.actions;t.ZP=r.reducer},76712:function(e,t,n){"use strict";n.d(t,{nn:function(){return i},ui:function(){return l}});var a=n(68333);const r=(0,a.createSlice)({name:"toolMenu",initialState:{selectedKeys:[],availableTools:["default"]},reducers:{setSelectedKey(e,t){e.selectedKeys.push(t.payload)},unsetSelectedKey(e,t){e.selectedKeys=e.selectedKeys.filter((e=>e!==t.payload))},setAvailableTools(e,t){e.availableTools=[...t.payload]}}}),{setSelectedKey:o,unsetSelectedKey:l,setAvailableTools:i}=r.actions;t.ZP=r.reducer},65705:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},40171:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},88885:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},78415:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},62923:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},85677:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},10767:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},87650:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},7871:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},86092:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},16813:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},79770:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},85415:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},35818:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},72285:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l},90978:function(e,t,n){"use strict";var a=n(87537),r=n.n(a),o=n(23645),l=n.n(o)()(r());l.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=l}}]);
//# sourceMappingURL=common.712681c2ecaf943f0a32.js.map