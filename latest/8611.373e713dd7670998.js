"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["8611"],{56661:function(e,t,n){n.r(t),n.d(t,{default:function(){return N},GeoLocationButton:function(){return D}});var a=n(76395),r=n.n(a),o=n(69843),i=n.n(o),s=n(66046),c=n.n(s),u=n(62918),l=n.n(u),g=n(94934),d=n.n(g),f=n(25188),h=n.n(f),m=n(15516),p=n.n(m),M=n(17936),b=n(70038),w=n.n(b),y=n(36528),C=n.n(y),$=n(97562),P=n.n($),k=class{static radToDeg=e=>360*e/(2*Math.PI);static degToRad=e=>e*Math.PI*2/360;static mod=e=>(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI)},v=n(30126),A=n(38254),E=n.p+"6afbd13a3ce1b95d.png",_=n.p+"3380da3c8b677218.png",I=n(70198),T=n(53529);let D=({className:e,enableTracking:t=!1,follow:n=!1,onError:o=()=>void 0,onGeoLocationChange:s=()=>void 0,pressed:u,showMarker:g=!0,trackingOptions:f,...m})=>{(({active:e,enableTracking:t=!1,follow:n=!1,onError:r,onGeoLocationChange:o,showMarker:s=!1,trackingOptions:u={enableHighAccuracy:!0,maximumAge:1e4,timeout:6e5}})=>{let g=(0,v.A)(),[f,m]=(0,a.useState)(),b=(0,a.useMemo)(()=>new(d())([],"XYZM"),[]),y=(0,a.useMemo)(()=>new(c()),[]);(0,A.c)(()=>new(p())({properties:{name:"react-geo_geolocationlayer"},source:new(w())({features:[y]}),style:e=>{let t=e.get("heading"),n=Number.isFinite(t)&&0!==t?E:_,a=Number.isFinite(t)&&0!==t?t*Math.PI/180:0;return[new(P())({image:new(C())({rotation:a,src:n})})]}}),[],s&&e);let $=(0,a.useCallback)(e=>{let t=e.target,n=t.getPosition()??[0,0],a=t.getAccuracy(),r=t.getHeading()||0,i=t.getSpeed()||0,s=n[0],c=n[1],u=b.getCoordinates(),l=u[u.length-1],g=l&&l[2];if(g){let e=r-k.mod(g);Math.abs(e)>Math.PI&&(e=-(e>=0?1:-1)*(2*Math.PI-Math.abs(e))),r=g+e}b.appendCoordinate([s,c,r,Date.now()]),b.setCoordinates(b.getCoordinates().slice(-20));let d={position:n,accuracy:a,heading:r,speed:i};m(d),o?.(d)},[b,o]),I=(0,a.useMemo)(()=>e?new(l())({projection:g?.getView().getProjection()}):void 0,[e,g]),T=(0,a.useCallback)((e,t,n)=>{let a=(g?.getSize()??[0,0])[1];return[e[0]-Math.sin(t)*a*n/4,e[1]+Math.cos(t)*a*n/4]},[g]);return(0,a.useEffect)(()=>{if(!r||!I)return;let e=I.on("error",r);return()=>{(0,M.unByKey)(e)}},[I]),(0,a.useEffect)(()=>{if(!I)return;let e=I.on("change",$);return()=>{(0,M.unByKey)(e)}},[I,$]),(0,a.useEffect)(()=>{I?.setTracking(t)},[t,I]),(0,a.useEffect)(()=>{I?.setTrackingOptions(u)},[I,u]),(0,a.useEffect)(()=>{let e=Date.now()-750;e=Math.max(e,0);let t=b.getCoordinateAtM(e,!0);if(!i()(t)&&(n&&(g?.getView().setCenter(T([t[0],t[1]],-t[2],g?.getView().getResolution()??0)),g?.getView().setRotation(-t[2])),s)){let e=new(h())([t[0],t[1]]);y.setGeometry(e)}},[f,s,n,g,b,T,y])})({active:!!u,enableTracking:u&&t,follow:n,onError:o,onGeoLocationChange:s,showMarker:g,trackingOptions:f});let b=e?`${e} ${I.$}geolocationbutton`:`${I.$}geolocationbutton`;return r().createElement(T.A,{pressed:u,className:b,...m})};var N=D},53529:function(e,t,n){var a=n(76395),r=n.n(a),o=n(54440),i=n(74097),s=n(70198);t.A=({type:e="primary",pressed:t=!1,tooltipProps:n={mouseEnterDelay:1.5},className:a,tooltip:c,tooltipPlacement:u,pressedIcon:l,icon:g,children:d,value:f,onClick:h,onChange:m=()=>void 0,...p})=>{let M=`${s.$}togglebutton`,b=a?`${a} ${M}`:M,w="";return t&&(w=" btn-pressed"),r().createElement(o.A,{title:c,placement:u,...n},r().createElement(i.Ay,{type:e,onClick:e=>{h&&(h(e),e.defaultPrevented)||m(e,f)},onChange:m,className:`${b}${w}`,"aria-pressed":t,icon:t?l:g,...p},d))}},70198:function(e,t,n){n.d(t,{$:function(){return a}});let a="react-geo-"}}]);
//# sourceMappingURL=8611.373e713dd7670998.js.map