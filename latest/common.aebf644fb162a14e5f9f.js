(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([[592],{46098:function(e,t,n){"use strict";n.r(t),n.d(t,{App:function(){return Uo},default:function(){return Bo}});var r=n(96985),a=n.n(r),o=n(38648),i=n(50146),l=n(71577),s=n(77808),c=n(34041),u=n(52697),d=n(74187),m=n(9479),p=n.n(m),g=n(33300),f=n.n(g),y=n(49862),h=n.n(y),E=n(16217),w=n(92212),b=n.n(w),v=n(49413),L=n.n(v),S=n(54388),k=n.n(S),T=n(10007),P=n.n(T),C=n(47139);var F=()=>(0,C.useDispatch)();const Z=C.useSelector;var M=Z,A=n(20908),O=n(93379),D=n.n(O),N=n(7795),I=n.n(N),j=n(90569),x=n.n(j),R=n(3565),U=n.n(R),B=n(19216),z=n.n(B),$=n(44589),V=n.n($),W=n(40171),_={};_.styleTagTransform=V(),_.setAttributes=U(),_.insert=x().bind(null,"head"),_.domAPI=I(),_.insertStyleElement=z();D()(W.Z,_),W.Z&&W.Z.locals&&W.Z.locals;function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}var K=({...e})=>{const[t,n]=(0,r.useState)(!1),[m,g]=(0,r.useState)([]),[y,w]=(0,r.useState)([]),[v,S]=(0,r.useState)("https://sgx.geodatenzentrum.de/wms_topplus_open"),[P,C]=(0,r.useState)(),[Z,O]=(0,r.useState)("1.3.0"),D=M((e=>e.addLayerModal.visible)),N=F(),I=(0,T.useMap)(),{t:j}=(0,E.useTranslation)();(0,r.useEffect)((()=>{D&&C(b().createValidGetCapabilitiesRequest(v,"WMS",Z))}),[Z,D,v]);const x=()=>{w([]),g([]),N((0,A.Cp)())},R=e=>{if(!I)return;const t=j("AddLayerModal.externalWmsFolder");let n=k().getLayerByName(I,t);if(!n){n=new(p())({layers:[]}),n.set("name",t);const e=I.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}e.forEach((e=>{if(!n.getLayers().getArray().includes(e)){let t;if(e.set("isExternalLayer",!0),e instanceof f()&&(t=e.getSource()?.getUrl()),e instanceof h()){const n=e.getSource()?.getUrls();t=1===n?.length?n[0]:void 0}const r={name:e.get("name"),type:e instanceof h()?"TILEWMS":"WMS",opacity:e.getOpacity(),sourceConfig:{layerNames:e.getSource()?.getParams().LAYERS,url:t,useBearerToken:!1}};e.set("layerConfig",r),n.getLayers().push(e)}})),x()};return a().createElement(i.Z,G({className:"add-layer-modal",title:j("AddLayerModal.title"),open:D,onCancel:x,width:600,footer:[a().createElement(l.Z,{key:"add-all",disabled:m?.length<1,onClick:()=>{R(m)}},j("AddLayerModal.addAllLayers")),a().createElement(l.Z,{key:"add-selected",disabled:y?.length<1,onClick:()=>{const e=m.filter((e=>y.includes((0,d.getUid)(e))));R(e)}},j("AddLayerModal.addSelectedLayers"))]},e),a().createElement(s.Z.Search,{placeholder:j("AddLayerModal.inputPlaceholder"),value:v,onChange:e=>{S(e.target.value)},onSearch:async()=>{if(P)try{n(!0);const e=await L().getWmsCapabilities(P),t=L().getLayersFromWmsCapabilities(e,"Title");g(t)}catch(e){o.Z.error({message:j("AddLayerModal.errorMessage"),description:j("AddLayerModal.errorDescription")})}finally{n(!1)}},enterButton:!0,addonBefore:a().createElement(c.default,{defaultValue:"1.3.0",onChange:O,options:[{value:"1.3.0",label:`${j("AddLayerModal.version")} 1.3.0`},{value:"1.1.1",label:`${j("AddLayerModal.version")} 1.1.1`}]})}),a().createElement(u.Z,{loading:t,columns:[{title:j("AddLayerModal.columnTitle"),render:(e,t)=>t.get("title")}],rowKey:e=>(0,d.getUid)(e),rowSelection:{selectedRowKeys:y,onChange:w},pagination:!1,dataSource:m}))},H=n(41609),Y=n.n(H),q=n(12038),J=n.n(q),X=n(35674),Q=n.n(X),ee=n(41154),te=n.n(ee),ne=n(73161),re=n.n(ne),ae=n(76688);const oe=()=>(0,r.useContext)(ae.ZP);var ie=oe;var le=n(77257);var se=()=>(0,r.useContext)(le.ZP);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}var ue=({...e})=>{const t=P()(),n=se(),o=function(){const{search:e}=window.location;return a().useMemo((()=>new URLSearchParams(e)),[e])}(),i=ie(),l=o.get("center"),s=o.get("zoom"),c=o.get("layers"),u=o.get("customLayerAttributes"),{t:d}=(0,E.useTranslation)(),m=(0,r.useCallback)((async(e,r)=>{if(!t)return;const a=e=>{const n=new(p())({layers:[]});n.set("name",e);const r=t.getLayerGroup().getLayers();return r.insertAt(r?.getLength()||0,n),n};try{const o=JSON.parse(e);if(!n)throw new Error("Client is not available");const i=new(re())({client:n});for(let e=0;e<o.length;e++){const n=o[e];if(!Y()(n?.layerConfig)){const e=n.layerConfig,o=await i.parseLayer(e);if(!o)continue;if(n.isExternalLayer&&o.set("isExternalLayer",n.isExternalLayer),n.isUploadedLayer&&o.set("isUploadedLayer",n.isUploadedLayer),o.set("groupName",n.groupName),o.set("layerConfig",n.layerConfig),o.setVisible(!!r?.split(";").some((t=>t===e.name))),!o.get("isExternalLayer")&&!o.get("isUploadedLayer"))continue;let l;o.get("groupName")?(l=k().getLayerByName(t,o.get("groupName")),l||(l=a(o.get("groupName")))):(l=k().getLayerByName(t,d("AddLayerModal.externalWmsFolder")),l||(l=a(d("AddLayerModal.externalWmsFolder")))),l.getLayers().push(o)}}}catch(e){J().error(e)}}),[n,t,d]);(0,r.useEffect)((()=>{if(t){const e=e=>e.get("name"),n=e=>e instanceof h()||e instanceof f(),r=Q().applyLink(t,";",e,n);if(!r)return;m(r,c)}}),[t,m,l,s,c,u]);const g=[];return i&&i.forEach((e=>{if((t=e.integration)&&"map"===t.placement){const{key:t,wrappedComponent:n}=e;g.push(a().createElement(n,{key:t}))}var t})),t?a().createElement(te(),ce({map:t},e),g):a().createElement(a().Fragment,null)},de=n(76772),me=n(87617),pe=n.n(me),ge=n(19679),fe=n.n(ge),ye=n(67914),he=n(50433),Ee=n(91982),we=n.n(Ee),be=n(28523),ve=n.n(be),Le=n(78459);var Se=()=>{const e=se();return(0,r.useCallback)((async t=>{let n;const r=t.layer.getSource();if(r instanceof we()&&(n=r.getUrl()),r instanceof ve()){const e=r.getUrls();n=e?e[0]:void 0}if(!n)return;n.endsWith("?")&&(n=n.slice(0,-1));const a={"Content-Type":"application/xml"},o=await fetch(n,{method:"POST",headers:t.layer?.get("useBearerToken")?{...a,...(0,Le.getBearerTokenHeader)(e?.getKeycloak())}:a,body:(new XMLSerializer).serializeToString(t.transaction)});if(!o.ok)throw new Error("No successful response while executing a WFS-Transaction");const i=await o.text();if((new DOMParser).parseFromString(i,"text/xml").getElementsByTagName("wfs:FAILED").length>0)throw new Error(`Something failed: ${i}`);return i}),[e])},ke=n(30381),Te=n.n(ke),Pe=n(30929),Ce=n(36582),Fe=n.n(Ce);const Ze=e=>["gml:MultiPoint","gml:Point","gml:MultiLineString","gml:LineString","gml:MultiPolygon","gml:Polygon"].includes(e);var Me=()=>{const e=se();return(0,r.useCallback)((async t=>{let n;const r=t.getSource();if(r instanceof we()&&(n=r.getUrl()),r instanceof ve()){const e=r.getUrls();n=e?e[0]:void 0}if(!n)return;n.endsWith("?")&&(n=n.slice(0,-1));const a={SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",OUTPUTFORMAT:"application/json",TYPENAMES:t.getSource()?.getParams().LAYERS},o={"Content-Type":"application/json"},i=await fetch(`${n}?${b().objectToRequestString(a)}`,{method:"GET",headers:t.get("useBearerToken")?{...o,...(0,Le.getBearerTokenHeader)(e?.getKeycloak())}:o});if(!i.ok)throw new Error("No successful response while executing a WFS-Transaction");return await i.json()}),[e])};var Ae=()=>{const e=P()(),t=Me(),n=e=>{const t={...e.getFieldsValue()};for(const[n,r]of Object.entries(t))void 0===r&&(t[n]=null),e.getFieldInstance(n)||delete t[n],(0,ke.isMoment)(r)&&(t[n]=r.toISOString());return t};return(0,r.useCallback)((async r=>{if(!e)return;const a=[],o=[],i=[],l=await t(r.layer);if(!l)return;const s=l.featureTypes[0]?.properties?.find((e=>Ze(e.type)));let c=!1;if(r.upsertFeatures)for(const e of r.upsertFeatures){const t=new(fe()),i=e.getGeometry()?.clone();i&&!(0,Pe.isEmpty)(i.getExtent())&&(t.set(s?.name||"geom",i),t.setGeometryName(s?.name||"geom")),r.form&&t.setProperties(n(r.form));const l=!!e.getId();l&&!c&&(c=!0),l&&t.setId(e.getId()),l?o.push(t):a.push(t)}r.deleteFeatures&&i.push(...r.deleteFeatures);const u={featureNS:l.targetNamespace,featurePrefix:l.targetPrefix,featureType:r.layer.getSource()?.getParams().LAYERS,srsName:e.getView().getProjection().getCode(),version:"1.1.0",nativeElements:[]},d=(new(Fe())).writeTransaction(a,o,i,u);if(c&&pe().wfsLockFeatureEnabled){const e=d.getRootNode(),t=document.createElementNS("http://www.opengis.net/wfs","LockId"),n=document.createTextNode("GeoServer");t.appendChild(n),e.appendChild(t)}return d}),[t,e])},Oe=n(61465),De=n(68781),Ne=n(273),Ie=n(69616),je={};je.styleTagTransform=V(),je.setAttributes=U(),je.insert=x().bind(null,"head"),je.domAPI=I(),je.insertStyleElement=z();D()(Ie.Z,je),Ie.Z&&Ie.Z.locals&&Ie.Z.locals;function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}var Re=({open:e,children:t,...n})=>{const o=P()();(0,r.useEffect)((()=>{document.querySelectorAll("#map")[0]?.classList.toggle("bisected",!!e)}),[e]);return a().createElement(Ne.Z,xe({className:"map-drawer",mask:!1,open:e,placement:"right",width:"25vw",afterOpenChange:()=>{o?.updateSize()}},n),t)},Ue=n(50963),Be=n(50361),ze=n.n(Be),$e=n(6184);var Ve=()=>{const e=se(),t=P()(),n=Me();return(0,r.useCallback)((async r=>{if(!t)return;const a=await n(r.layer);if(!a)return;let o;const i=r.layer.getSource();if(i instanceof we()&&(o=i.getUrl()),i instanceof ve()){const e=i.getUrls();o=e?e[0]:void 0}if(!o)return;o.endsWith("?")&&(o=o.slice(0,-1));const l=(new(Fe())).writeGetFeature({srsName:t.getView().getProjection().getCode(),featureNS:a.targetNamespace,featurePrefix:a.targetPrefix,featureTypes:[i?.getParams().LAYERS],outputFormat:"application/json",filter:r.filter}),s={"Content-Type":"application/json"},c=await fetch(o,{method:"POST",headers:r.layer?.get("useBearerToken")?{...s,...(0,Le.getBearerTokenHeader)(e?.getKeycloak())}:s,body:(new XMLSerializer).serializeToString(l)});if(!c.ok)throw new Error("No successful response");return await c.json()}),[e,n,t])},We=n(59417),_e=n(70982),Ge=n(36609),Ke=n(20963),He=n.n(Ke),Ye=n(57680),qe=n.n(Ye),Je=n(1249),Xe=n.n(Je),Qe=n(84986),et=n.n(Qe),tt=n(75321),nt=n.n(tt),rt=n(44990),at=n.n(rt),ot=n(5656),it=n.n(ot),lt=n(30590),st=n(5687),ct={};ct.styleTagTransform=V(),ct.setAttributes=U(),ct.insert=x().bind(null,"head"),ct.domAPI=I(),ct.insertStyleElement=z();D()(st.Z,ct),st.Z&&st.Z.locals&&st.Z.locals;function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ut.apply(this,arguments)}var dt=({feature:e,historyLength:t=10})=>{const n=(0,r.useRef)({past:[],future:[]}),o=(0,T.useMap)(),[i,l]=(0,r.useState)(),[,s]=(0,r.useState)(0),c=(0,r.useMemo)((()=>new(He())),[]),u=M((e=>e.editFeature.userEditMode));(0,r.useEffect)((()=>{if(o)return i||l(lt.DigitizeUtil.getDigitizeLayer(o)),()=>{i&&o?.removeLayer(i)}}),[i,o]),(0,r.useEffect)((()=>{if(i&&e?.id){i.getSource()?.clear();const t=c.readFeature(e),n=i.getSource();n.addFeature(t),s((e=>e+1)),(0,Pe.isEmpty)(n.getExtent())||o?.getView().fit(n.getExtent(),{padding:[50,50,50,50]})}}),[e,i,c,o]);const d=()=>{const e=i?.getSource()?.getFeatures();if(!e)return;const t=c.writeFeaturesObject(e);n.current={...n.current,past:[...n.current.past,t].slice(-10)},s((e=>e+1))},m={tooltipPlacement:"left",tooltipProps:{mouseEnterDelay:.5}};return i?a().createElement(it(),{className:"geometry-edit-tb",alignment:"vertical"},a().createElement(at(),null,u.includes("CREATE")?a().createElement(Xe(),ut({icon:a().createElement(_e.FontAwesomeIcon,{icon:We.TzT}),pressedIcon:a().createElement(_e.FontAwesomeIcon,{icon:We.TzT}),name:"draw",digitizeLayer:i,tooltip:(0,Ge.t)("EditFeatureGeometryToolbar.draw"),drawType:e.geometry.type,onDrawEnd:t=>{d(),e.geometry.type.toLocaleLowerCase().startsWith("multi")||i?.getSource()?.clear()}},m)):a().createElement(a().Fragment,null),u.includes("UPDATE")?a().createElement(et(),ut({icon:a().createElement(_e.FontAwesomeIcon,{icon:We.ubJ}),pressedIcon:a().createElement(_e.FontAwesomeIcon,{icon:We.ubJ}),name:"edit",digitizeLayer:i,tooltip:(0,Ge.t)("EditFeatureGeometryToolbar.edit"),onModifyStart:d,onModifyEnd:d,onTranslateEnd:d},m)):a().createElement(a().Fragment,null),u.includes("DELETE")?a().createElement(qe(),ut({icon:a().createElement(_e.FontAwesomeIcon,{icon:We.$aW}),pressedIcon:a().createElement(_e.FontAwesomeIcon,{icon:We.$aW}),name:"delete",digitizeLayer:i,tooltip:(0,Ge.t)("EditFeatureGeometryToolbar.delete"),onFeatureRemove:d},m)):a().createElement(a().Fragment,null)),a().createElement(nt(),ut({icon:a().createElement(_e.FontAwesomeIcon,{icon:We.X7o}),tooltip:(0,Ge.t)("EditFeatureGeometryToolbar.undo"),onClick:()=>{const e=i?.getSource(),r=e?.getFeatures();if(!r)return;const a=c.writeFeaturesObject(r),o=n.current.past[n.current.past.length-1];Y()(o)||(e?.clear(),e?.addFeatures(c.readFeatures(o)),n.current={past:n.current.past.slice(0,-1),future:[...n.current.future,a].slice(-t)},s((e=>e+1)))},disabled:0===n.current.past?.length},m)),a().createElement(nt(),ut({icon:a().createElement(_e.FontAwesomeIcon,{icon:We.X7o,flip:"horizontal"}),tooltip:(0,Ge.t)("EditFeatureGeometryToolbar.redo"),onClick:()=>{const e=i?.getSource(),r=e?.getFeatures();if(!r)return;const a=c.writeFeaturesObject(r),o=n.current.future[n.current.future.length-1];Y()(o)||(e?.clear(),e?.addFeatures(c.readFeatures(o)),n.current={future:n.current.future.slice(0,-1),past:[...n.current.past,a].slice(-t)},s((e=>e+1)))},disabled:0===n.current.future?.length},m))):a().createElement(a().Fragment,null)},mt=n(72488),pt=n(98859),gt=n(9676),ft=n(48301),yt=n(48592),ht=n(12028),Et=n(37477);function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(this,arguments)}var bt=({format:e="DD.MM.YYYY",suffix:t,value:n,...r})=>{const{t:o}=(0,E.useTranslation)();let i="";return"string"==typeof n&&(i=n),"boolean"==typeof n&&(i=o(n?"DisplayField.yesText":"DisplayField.noText")),Number.isFinite(n)&&(i=(new Intl.NumberFormat).format(Number(n))),(0,ke.isMoment)(n)&&(i=n.format(e)),Array.isArray(n)&&(i=n.join(", ")),a().createElement(Et.Z.Text,wt({className:"displayfield"},r),i,i&&t?` ${t}`:"")},vt=n(99327),Lt={};Lt.styleTagTransform=V(),Lt.setAttributes=U(),Lt.insert=x().bind(null,"head"),Lt.domAPI=I(),Lt.insertStyleElement=z();D()(vt.Z,Lt),vt.Z&&vt.Z.locals&&vt.Z.locals;function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}var kt=({formConfig:e,form:t,...n})=>{const{t:r}=(0,E.useTranslation)(),o=e=>a().createElement(bt,e.fieldProps),i=e=>{switch(e.component){case"CHECKBOX":return a().createElement(gt.Z,e?.fieldProps);case"DATE":return a().createElement(ft.Z,e?.fieldProps);case"DISPLAY":return a().createElement("span",e?.fieldProps);case"INPUT":return a().createElement(s.Z,e?.fieldProps);case"NUMBER":return a().createElement(yt.Z,e?.fieldProps);case"SELECT":return a().createElement(c.default,St({allowClear:!0},e?.fieldProps));case"SWITCH":return a().createElement(ht.Z,e?.fieldProps);case"TEXTAREA":return a().createElement(s.Z.TextArea,e?.fieldProps);default:return J().error(`Component type "${e?.component}" is not supported`),a().createElement(a().Fragment,null)}};return a().createElement(pt.Z,St({className:"edit-feature-form",form:t,labelCol:{span:6},labelAlign:"left",labelWrap:!0},n),e?.map((e=>{let t;e.readOnly?t=o(e):e.component?t=i(e):(J().warn("FieldConfig is missing `readOnly`, `component` or `dataType` property."),t=a().createElement(s.Z,{key:e.propertyName,placeholder:""}));const n={rules:[]};return n.rules=[{required:e.required}],"SWITCH"!==e.component&&"CHECKBOX"!==e.component||e.readOnly||(n.valuePropName="checked"),"UPLOAD"!==e.component||e.readOnly||(n.valuePropName="fileList"),a().createElement(pt.Z.Item,St({key:e.propertyName,name:e.propertyName,label:e.displayName||e.propertyName},n,e.fieldProps),t)})))};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}var Pt=({tabConfig:e,form:t,initialValues:n,...r})=>{const o=e?.map(((e,r)=>({label:e.title,key:`${r}`,forceRender:!0,children:a().createElement(kt,{name:e.title,form:t,initialValues:n,formConfig:e.children})})));return a().createElement(mt.Z,Tt({items:o},r))},Ct=n(24565);function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}var Zt=({feature:e,layer:t,onError:n=(()=>{}),onSuccess:o=(()=>{}),...i})=>{const[s,c]=(0,r.useState)(!1),{t:u}=(0,E.useTranslation)(),d=(0,T.useMap)(),m=Ae(),p=Se();return a().createElement(Ct.Z,{title:u("DeleteButton.confirm"),onConfirm:async()=>{if(d&&t&&(0,he.isWmsLayer)(t))try{c(!0);const n=(new(He())).readFeature(e),r=await m({deleteFeatures:[n],layer:t});if(!r)return;await p({layer:t,transaction:r}),t.getSource()?.refresh(),o()}catch(e){ye.Logger.error(e),n(e)}finally{c(!1)}},placement:"bottomRight"},a().createElement(l.Z,Ft({type:"primary",loading:s,disabled:!e.id,danger:!0,icon:a().createElement(_e.FontAwesomeIcon,{icon:We.$aW})},i),u("DeleteButton.title")))};function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mt.apply(this,arguments)}var At=({feature:e,form:t,...n})=>{const{t:r}=(0,E.useTranslation)(),o=(0,T.useMap)();return a().createElement(l.Z,Mt({type:"primary",onClick:()=>{if(t.resetFields(),o){const t=lt.DigitizeUtil.getDigitizeLayer(o);if(t){t.getSource()?.clear();const n=(new(He())).readFeature(e);t.getSource()?.addFeature(n)}}},icon:a().createElement(_e.FontAwesomeIcon,{icon:We.XnX})},n),r("ResetButton.title"))};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}var Dt=({form:e,layer:t,onError:n=(()=>{}),onSuccess:o=(()=>{}),...i})=>{const[s,c]=(0,r.useState)(!1),u=(0,T.useMap)(),d=Ae(),m=Se(),{t:p}=(0,E.useTranslation)();return a().createElement(l.Z,Ot({type:"primary",onClick:async()=>{if(!u)return;if(!t||!(0,he.isWmsLayer)(t))return;const r=lt.DigitizeUtil.getDigitizeLayer(u);if(!r)return void ye.Logger.error("Cannot find the digitize layer");const a=r.getSource()?.getFeatures();if(a&&0!==a.length){try{await e.validateFields()}catch(e){return void ye.Logger.warn("Validation has failed: ",e)}try{c(!0);const n=await d({upsertFeatures:a,form:e,layer:t});if(!n)return;const r=await m({layer:t,transaction:n});t.getSource()?.refresh(),o(r)}catch(e){ye.Logger.error(e),n(e)}finally{c(!1)}}else ye.Logger.error("Cannot save feature without geometry")},loading:s,icon:a().createElement(_e.FontAwesomeIcon,{icon:We.EdJ})},i),p("SaveButton.title"))},Nt=n(38775),It={};It.styleTagTransform=V(),It.setAttributes=U(),It.insert=x().bind(null,"head"),It.domAPI=I(),It.insertStyleElement=z();D()(Nt.Z,It),Nt.Z&&Nt.Z.locals&&Nt.Z.locals;var jt=({feature:e,layer:t,form:n,onSaveSuccess:r=(()=>{}),onSaveError:o=(()=>{}),onDeleteSuccess:i=(()=>{}),onDeleteError:l=(()=>{})})=>{const s=M((e=>e.editFeature.userEditMode));return a().createElement("div",{className:"edit-feature-toolbar"},s.includes("CREATE")||s.includes("UPDATE")?a().createElement(a().Fragment,null,a().createElement(At,{feature:e,form:n}),a().createElement(Dt,{form:n,layer:t,onSuccess:r,onError:o})):a().createElement(a().Fragment,null),s.includes("DELETE")&&a().createElement(Zt,{feature:e,layer:t,onSuccess:i,onError:l}))};var xt=({feature:e,layer:t})=>{const{t:n}=(0,E.useTranslation)(),o=Ve(),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),[u,d]=(0,r.useState)(),[m]=(M((e=>e.editFeature.userEditMode)),(0,Ue.cI)()),p=P()(),g=F(),f=se(),y=(0,r.useCallback)((async e=>{if(!t||!(0,he.isWmsLayer)(t))return;const n=await o({layer:t,filter:(0,$e.equalTo)("id",e)});n?.features[0]&&g((0,Oe.hr)(n?.features[0]))}),[g,o,t]),h=(0,r.useCallback)((async()=>{if(!p||!f)return;let n=t.get("editFormConfig");if(0===n?.length)return void ye.Logger.warn(`Layer ${t.get("name")} has no 'editFormConfig' set`);const r=ze()(e?.properties)||{};Object.entries(r).forEach((([e,t])=>{const a=n?.filter((t=>t.children?.find((t=>t.propertyName===e))));if(a.length>1&&ye.Logger.warn(`Property ${e} is configured in multiple tabs. Is this intended?`),a&&a[0]){const n=a[0].children?.find((t=>t.propertyName===e&&"DATE"===t.component));n&&(r[e]=Te()(t));const o=a[0].children?.find((t=>t.propertyName===e&&"UPLOAD"===t.component));o&&(r[e]=[{name:t,status:"done"}])}})),m.resetFields(),m.setFieldsValue(r),l(n),c(r)}),[p,f,t,e?.properties,m]);(0,r.useEffect)((()=>{h()}),[h]);return a().createElement(a().Fragment,null,a().createElement(dt,{feature:e}),u&&a().createElement(de.Z,{className:"error-alert",message:u,type:"error",showIcon:!0}),a().createElement(jt,{feature:e,layer:t,form:m,onSaveSuccess:e=>{if(!e)return;d(void 0);const t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("ogc:FeatureId"),n=t.item(0)?.getAttribute("fid"),r=n?.split(".")[1];r&&y(r)},onSaveError:()=>{d(n("EditFeatureFullForm.saveErrorMsg"))},onDeleteSuccess:()=>{d(void 0),g((0,Oe.hr)(null))},onDeleteError:()=>{d(n("EditFeatureFullForm.deleteErrorMsg"))}}),a().createElement(Pt,{tabConfig:i,initialValues:s,form:m}))};var Rt=()=>{const e=se();return(0,r.useCallback)((async t=>{let n;const r=t.layer.getSource();if(r instanceof we()&&(n=r.getUrl()),r instanceof ve()){const e=r.getUrls();n=e?e[0]:void 0}if(!n)return;n.endsWith("?")&&(n=n.slice(0,-1));const a=(e=>{const t=e.feature.id,n=e.feature.properties;if(!t||!n)return void J().warn("Either the id of the feature or its properties (or even both) aren't available");let r;r="number"==typeof t?t:parseInt(t.split(".")[1],10);const a=Object.entries(n).find((([,e])=>e===r||e===r.toString()));if(!a)return void J().warn("Count not detect the id property");const o=a[0],i=e.layer.getSource()?.getParams().LAYERS,l=document.createElementNS("http://www.opengis.net/wfs/2.0","LockFeature");l.setAttribute("service","WFS"),l.setAttribute("version","2.0.0"),l.setAttribute("expiry","300"),l.setAttribute("lockAction","SOME");const s=document.createElementNS("http://www.opengis.net/wfs/2.0","Query");s.setAttribute("typeNames",i);const c=document.createElementNS("http://www.opengis.net/fes/2.0","Filter"),u=document.createElementNS("http://www.opengis.net/fes/2.0","PropertyIsEqualTo"),d=document.createElementNS("http://www.opengis.net/fes/2.0","ValueReference"),m=document.createTextNode(o);d.appendChild(m);const p=document.createElementNS("http://www.opengis.net/fes/2.0","Literal"),g=document.createTextNode(r.toString());return p.appendChild(g),u.appendChild(d),u.appendChild(p),c.appendChild(u),s.appendChild(c),l.appendChild(s),l})({layer:t.layer,feature:t.feature});if(!a)return;const o={"Content-Type":"application/xml"},i=await fetch(n,{method:"POST",headers:t.layer?.get("useBearerToken")?{...o,...(0,Le.getBearerTokenHeader)(e?.getKeycloak())}:o,body:(new XMLSerializer).serializeToString(a)});if(!i.ok)throw new Error("No successful response while executing a WFS-LockFeature");const l=await i.text();if((new DOMParser).parseFromString(l,"text/xml").getElementsByTagName("wfs:FeaturesNotLocked").length>0)throw new Error(`Error while locking a feature: ${l}`);return l}),[e])};var Ut=(e,t,n)=>{const a=(0,T.useMap)(),o=se(),i=(0,r.useCallback)((async r=>{if(!a||!e)return;const i=r.coordinate,l=a.getView().getResolution();if(!l)return;const s=e.getSource(),c=s?.getFeatureInfoUrl(i,l,a.getView().getProjection(),{INFO_FORMAT:"application/json",BUFFER:10}),u={"Content-Type":"application/json"};if(c)try{a.getTargetElement().style.cursor="wait";const n=await fetch(c,{method:"GET",headers:e.get("useBearerToken")?{...u,...(0,Le.getBearerTokenHeader)(o?.getKeycloak())}:u});if(!n.ok)throw new Error("No successful response");const r=await n.json();t&&t(r)}catch(e){ye.Logger.error("Error: ",e),n&&n()}finally{a.getTargetElement().style.cursor=""}}),[o,e,a,t,n]),l=(0,r.useCallback)((t=>{if(!a||!e)return;if(t.dragging)return;const n=e.getData(t.pixel);if(!(n instanceof Uint8ClampedArray))return;const r=n&&n[3]>0;a.getTargetElement().style.cursor=r?"pointer":""}),[e,a]);(0,r.useEffect)((()=>{if(a)return a.on("pointermove",l),a.on("singleclick",i),()=>{a.un("pointermove",l),a.un("singleclick",i)}}),[a,l,i])},Bt=n(97555),zt={};zt.styleTagTransform=V(),zt.setAttributes=U(),zt.insert=x().bind(null,"head"),zt.domAPI=I(),zt.insertStyleElement=z();D()(Bt.Z,zt),Bt.Z&&Bt.Z.locals&&Bt.Z.locals;var $t=({layer:e,onLockSuccess:t=(()=>{}),onLockError:n=(()=>{}),onCreate:o=(()=>{})})=>{const[i,s]=(0,r.useState)(!1),c=Me(),u=Rt(),d=F(),m=P()(),{t:p}=(0,E.useTranslation)(),g=M((e=>e.editFeature.userEditMode));Ut(e,(async r=>{if(r.features.length&&(g.includes("UPDATE")||g.includes("DELETE"))){const a=r.features[0];if(!e||!a)return;if(pe().wfsLockFeatureEnabled)try{const n=await u({layer:e,feature:a});if(!n)return;d((0,Oe.hr)(a)),t(n)}catch(e){n(e)}else d((0,Oe.hr)(a))}}));return a().createElement("div",{className:"edit-feature-switch"},g.includes("CREATE")&&a().createElement(a().Fragment,null,g.includes("UPDATE")&&a().createElement("div",null,p("EditFeatureSwitch.usageHint")),a().createElement(l.Z,{loading:i,onClick:async()=>{const t=await(async()=>{if(m&&e)try{s(!0);const t=await c(e);if(!t)return;const n=t.featureTypes[0]?.properties?.find((e=>Ze(e.type)));switch(n?.type){case"gml:MultiPoint":return"MultiPoint";case"gml:Point":return"Point";case"gml:MultiLineString":return"MultiLineString";case"gml:LineString":return"LineString";case"gml:MultiPolygon":return"MultiPolygon";case"gml:Polygon":return"Polygon"}}catch(e){J().error(e)}finally{s(!1)}})();t&&(d((0,Oe.hr)({type:"Feature",properties:{},geometry:{type:t,coordinates:[]}})),o())}},p("EditFeatureSwitch.createFeature"))),!g.includes("CREATE")&&(g.includes("UPDATE")||g.includes("DELETE"))&&a().createElement("div",null,p("EditFeatureSwitch.limitedUsageHint")))},Vt=n(16409),Wt={};Wt.styleTagTransform=V(),Wt.setAttributes=U(),Wt.insert=x().bind(null,"head"),Wt.domAPI=I(),Wt.insertStyleElement=z();D()(Vt.Z,Wt),Vt.Z&&Vt.Z.locals&&Vt.Z.locals;function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_t.apply(this,arguments)}var Gt=({...e})=>{const{t:t}=(0,E.useTranslation)(),[n,o]=(0,r.useState)(),[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(t("EditFeatureDrawer.featureEditor")),d=M((e=>e.editFeatureDrawerOpen)),m=M((e=>e.editFeature.layerId)),p=M((e=>e.editFeature.feature)),g=P()(),f=F(),y=Ae(),h=Se();(0,r.useEffect)((()=>{if(!g||!m)return;const e=k().getLayerByOlUid(g,m);e&&(0,he.isWmsLayer)(e)?(u(`${t("EditFeatureDrawer.featureEditor")} - ${e.get("name")}`),o(e)):ye.Logger.warn(`Could not find layer with id ${m}`)}),[g,m,t]);const w=async()=>{await(async()=>{if(n&&p&&p.id&&pe().wfsLockFeatureEnabled)try{const e=new(fe());e.setId(p.id);const t=await y({layer:n,deleteFeatures:[],upsertFeatures:[e]});if(!t)return;await h({layer:n,transaction:t})}catch(e){ye.Logger.error("Error while releasing the lock on the feature")}})(),f((0,De.Cp)()),f((0,Oe.mc)()),s(!1)};return a().createElement(Re,_t({className:"map-drawer edit-feature-drawer",onClose:()=>{n&&p?i.Z.confirm({maskClosable:!1,title:t("EditFeatureDrawer.closeDrawerWarnTitle"),content:t("EditFeatureDrawer.closeDrawerWarnContent"),okType:"danger",onOk:w}):w()},open:d,title:c},e),!n&&a().createElement(de.Z,{message:t("EditFeatureDrawer.noLayerFoundError"),type:"error",showIcon:!0}),l&&a().createElement(de.Z,{message:t("EditFeatureDrawer.isFeatureLockedErrorMsg"),type:"error",showIcon:!0}),n&&m&&!p&&a().createElement($t,{layer:n,onLockSuccess:()=>{s(!1)},onLockError:()=>{s(!0)},onCreate:()=>{s(!1)}}),n&&p&&a().createElement(xt,{feature:p,layer:n}))},Kt=n(27049),Ht=n(19906),Yt=n.n(Ht),qt=n(41642),Jt=n.n(qt),Xt=n(99254),Qt=n(19805),en=n.n(Qt),tn=n(78415),nn={};nn.styleTagTransform=V(),nn.setAttributes=U(),nn.insert=x().bind(null,"head"),nn.domAPI=I(),nn.insertStyleElement=z();D()(tn.Z,nn),tn.Z&&tn.Z.locals&&tn.Z.locals;function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rn.apply(this,arguments)}var an=({...e})=>{const t=oe(),{t:n}=(0,E.useTranslation)(),o=M((e=>e.legal)),i=P()(),s=(e,n)=>{t.forEach((t=>{if((r=t.integration)&&"footer"===r.placement&&t.integration?.placementOrientation===e){const{key:e,wrappedComponent:r}=t;n.splice(t.integration?.insertionIndex||0,0,a().createElement(r,{key:e}))}var r}))};if((0,r.useEffect)((()=>{if(!i)return;i.getControls().getArray().find((e=>e instanceof Jt()))||i.addControl(new(Jt())({target:"scale-line-container"}))}),[i]),(0,r.useEffect)((()=>{if(!i)return;i.getControls().getArray().find((e=>e instanceof Yt()))||i.addControl(new(Yt())({coordinateFormat:(0,Xt.createStringXY)(2),projection:i.getView().getProjection(),target:"mouse-position"}))}),[i]),!i)return a().createElement(a().Fragment,null);const c=()=>{window.open(o.contact,"_blank")},u=()=>{window.open(o.imprint,"_blank")},d=()=>{window.open(o.privacy,"_blank")};return a().createElement("div",rn({className:"footer"},e),a().createElement("div",{className:"item-container left-items"},(()=>{const e=[a().createElement(a().Fragment,null,a().createElement("div",{id:"scale-line-container"}),a().createElement(Kt.Z,{type:"vertical"}),a().createElement("div",{className:"scale-combo"},n("Footer.scale"),": ",a().createElement(en(),{map:i}),a().createElement(Kt.Z,{type:"vertical"})),a().createElement("div",{className:"reference-system"},n("Footer.refSystem"),": ",i.getView().getProjection().getCode(),a().createElement(Kt.Z,{type:"vertical"})),a().createElement("div",{className:"mouse-position-wrapper"},n("Footer.mousePosition"),": ",a().createElement("div",{id:"mouse-position",className:"mouse-position"})))];return s("left",e),e})()),a().createElement("div",{className:"item-container right-items"},(()=>{const e=[a().createElement("div",{key:"item-container right-items"},a().createElement(l.Z,{onClick:c,type:"link"},n("Footer.contact")),a().createElement(l.Z,{onClick:u,type:"link"},n("Footer.imprint")),a().createElement(l.Z,{onClick:d,type:"link"},n("Footer.privacypolicy")))];return t.length>0&&s("right",e),e})()))},on=n(90426),ln=n(32456),sn=n.n(ln);function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cn.apply(this,arguments)}var un=({...e})=>{const t=P()(),{t:n}=(0,E.useTranslation)(),[o,i]=(0,r.useState)();return(0,r.useEffect)((()=>{const e=t?.getView().getProjection(),n=t?.getView()?.get("extent");if(n){const t=(0,on.transformExtent)(n,e,"EPSG:4326");i(t.toString())}}),[t]),t?a().createElement(sn(),cn({map:t,countryCodes:"",allowClear:!0,nominatimBaseUrl:"https://nominatim.terrestris.de/search.php?",placeholder:n("Nominatim.placeholder"),viewBox:o||""},e)):a().createElement(a().Fragment,null)},dn=n(47389),mn=n(24616),pn=n(40110),gn=n(79090),fn=n(60331),yn=n(45777),hn=n(14277),En=n(13013),wn=n(7739),bn=n.n(wn),vn=n(10924),Ln=n.n(vn),Sn=n(44457),kn=n.n(Sn),Tn=n(98189),Pn=n.n(Tn),Cn=n(28253),Fn=n.n(Cn),Zn=n(35577),Mn=n.n(Zn),An=n(42583),On=n.n(An),Dn=n(85516),Nn={};Nn.styleTagTransform=V(),Nn.setAttributes=U(),Nn.insert=x().bind(null,"head"),Nn.domAPI=I(),Nn.insertStyleElement=z();D()(Dn.Z,Nn),Dn.Z&&Dn.Z.locals&&Dn.Z.locals;const In=(e,t)=>`(${t.map((t=>`${t}:"${e.join(" ")}"`)).join(" OR ")}) OR (${t.map((t=>`(${e.map((e=>`${t}:${e.trim()}*^3 OR ${t}:*${e.trim()}*^2 OR ${t}:${e.trim()}~1`)).join(" OR ")})`)).join(" AND ")})`;var jn=({searchValue:e,map:t})=>{let n=e.trim().replaceAll(/[()\\\-_./\/]/g," ").split(" ").map((e=>e.trim())).filter((e=>""!==e));const r=[];return t.getAllLayers().forEach((e=>{if(e.get("searchable")&&(0,he.isWmsLayer)(e)){const t=e.get("searchConfig"),a=e.getSource()?.getParams().LAYERS;t?.attributes?r.push(`(featureType:"${a}" AND (${In(n,t.attributes)}))`):r.push(`(featureType:"${a}" AND (${In(n,["search"])}))`)}})),r.join(" OR ")};var xn=({useNominatim:e,delay:t=1e3,minChars:n=3,solrSearchBasePath:o="/search/query"})=>{const i=se(),c=P()(),{t:u}=(0,E.useTranslation)(),m=F(),p=(0,r.useRef)(null),[g,f]=(0,r.useState)(e),[y,h]=(0,r.useState)(!0),[w,b]=(0,r.useState)(!0),[v,L]=(0,r.useState)(""),[S,T]=(0,r.useState)(!1),[C,Z]=(0,r.useState)(!1),[A,O]=(0,r.useState)(!1),[D,N]=(0,r.useState)([]),[I,j]=(0,r.useState)([]),[x,R]=(0,r.useState)([]),U=M((e=>e.editFeature.userEditMode));(0,r.useEffect)((()=>(window.addEventListener("mousedown",B),()=>{window.removeEventListener("mousedown",B)})),[]);const B=e=>{const t=[];let n=e.target;for(;n;)t.unshift(n),n=n.parentNode;p.current&&p.current.contains(e.target)||Z(!1)},z=(0,r.useMemo)((()=>({items:[{label:a().createElement(gt.Z,{checked:w,onChange:e=>b(e.target.checked)},u("MultiSearch.searchInViewBox")),key:"viewbox"},{label:a().createElement(gt.Z,{checked:y,onChange:e=>h(e.target.checked)},u("MultiSearch.searchData")),key:"data"},{label:a().createElement(gt.Z,{checked:g,onChange:e=>f(e.target.checked)},u("MultiSearch.searchNominatim")),key:"nominatim"}]})),[y,g,w,u]),$=(0,r.useCallback)((async()=>{if(v.length<n)return void W();if(!y&&!g)return;let e;T(!0),j([]),N([]);let t=null;if(w){const e=c?.getView().getProjection(),n=c?.getView()?.calculateExtent();n&&(t=(0,on.transformExtent)(n,e,"EPSG:4326"))}if(y&&c)try{const n=jn({searchValue:v,map:c}),r=new URL(`${window.location.origin}${o}`),a={query:n};if(w&&t){const e=`geometry:[${t[1]},${t[0]} TO ${t[3]},${t[2]}]`;a.filterQuery=e}const l={"Content-Type":"application/json"};e=await fetch(r.href,{method:"POST",headers:{...l,...(0,Le.getBearerTokenHeader)(i?.getKeycloak())},body:JSON.stringify(a)});const s=await e.json();N(s?.response?.docs)}catch(e){N([]),J().error("Error while fetching the layer search results: ",e)}finally{g||T(!1)}if(g)try{const n=new URL("https://nominatim.terrestris.de/search");n.searchParams.set("q",v),n.searchParams.set("format","json"),n.searchParams.set("polygon_geojson","1"),w&&t&&(n.searchParams.set("viewbox",t.toString()),n.searchParams.set("bounded","1")),e=await fetch(n.href),j(await e.json())}catch(e){j([]),J().error("Error while fetching the nominatim results: ",e)}finally{T(!1)}}),[v,n,y,g,w,c,o,i]),V=(0,r.useCallback)((e=>{const t=["category","id","featureType","geometry","search"];let n="";return Object.keys(e).filter((e=>!t.includes(e))).forEach((t=>{let r=e[t]?.toString();!n&&r.toLowerCase().indexOf(v?.toLowerCase())>-1&&(n=`${r} [${t}]`)})),n||(n=e.id),n}),[v]);(0,r.useEffect)((()=>{if(!c)return;let e=[];if(I.length>0){const t=new(He()),n=I.map((e=>{const n=t.readFeature(e.geojson,{dataProjection:"EPSG:4326",featureProjection:c.getView().getProjection()});return n.set("title",e.display_name),n})),r={title:u("MultiSearch.nominatimTitle"),features:n};e.push(r)}if(D?.length>0){const t=new(Ln()),n=bn()(D,(e=>e.category[0]));Object.keys(n).forEach((r=>{const a={title:r,features:n[r].map((e=>{if(!e.geometry?.[0])return;const n=e.id,r=t.readGeometry(e.geometry[0],{dataProjection:"EPSG:4326",featureProjection:c.getView().getProjection()}),a=new(fe())({geometry:r});let o;if(a.set("title",V(e)),e.featureType?.[0]){const t=k().getLayerByNameParam(c,e.featureType[0]);t&&(a.set("layer",t),o=t.get("name"))}else o=n.substring(0,n.lastIndexOf("_"));return a.set("ftName",o),a})).filter((e=>e))};e.push(a)}))}Z(!0),R(e)}),[D,V,c,I,u]),(0,r.useEffect)((()=>{const e=setTimeout((()=>{$()}),t);return()=>clearTimeout(e)}),[$,t]);const W=()=>{N([]),j([])},_=e=>{const{feature:t}=e,n=t.get("ftName");return n?a().createElement(fn.Z,null,n):a().createElement(a().Fragment,null)},G=e=>{const t=e.feature.get("layer");if(!t?.get("editable"))return;const n=()=>{m((0,Oe.vN)((0,d.getUid)(t))),m((0,De.$Z)()),Z(!1)};return U.includes("CREATE")||U.includes("DELETE")||U.includes("UPDATE")?[a().createElement(yn.Z,{key:"edit",title:u("EditFeatureButton.title"),placement:"bottom"},a().createElement(l.Z,{onClick:n,icon:a().createElement(dn.Z,null)}))]:[a().createElement(a().Fragment,null)]};return c?a().createElement("div",{ref:p},a().createElement(s.Z,{value:v,disabled:!y&&!g,onChange:e=>{T(""!==e.target.value),L(e.target.value)},allowClear:!0,addonAfter:a().createElement(En.Z,{placement:"bottomRight",menu:z,trigger:["click"],onOpenChange:O,open:A},a().createElement(mn.Z,null)),onFocus:()=>Z(!0),placeholder:u("MultiSearch.searchPlaceholder"),prefix:a().createElement(pn.Z,null),suffix:S?a().createElement(gn.Z,null):null}),(()=>{if(v.length<2||!C||S||!D)return null;const e=I.length+D.length;return 0===e?a().createElement("div",{className:"no-search-result-div"},a().createElement(hn.Z,{image:hn.Z.PRESENTED_IMAGE_SIMPLE})):a().createElement(On(),{searchResults:x,numTotal:e,accordion:!0,searchTerms:v.split(" "),listPrefixRenderer:_,actionsCreator:G,layerStyle:new(Mn())({stroke:new(Fn())({color:"rgb(255,0,0)",width:2}),fill:new(Pn())({color:"rgba(255,255,255, 0.5)"}),image:new(kn())({radius:10,fill:new(Pn())({color:"rgba(255,255,255, 0.5)"}),stroke:new(Fn())({color:"rgb(255,0,0)",width:3})})})})})()):a().createElement(a().Fragment,null)},Rn=n(42686),Un={};Un.styleTagTransform=V(),Un.setAttributes=U(),Un.insert=x().bind(null,"head"),Un.domAPI=I(),Un.insertStyleElement=z();D()(Rn.Z,Un),Rn.Z&&Rn.Z.locals&&Rn.Z.locals;var Bn=()=>{const e=M((e=>e.searchEngines.includes("nominatim"))),t=M((e=>e.searchEngines.includes("solr")));return e||t?a().createElement("div",{className:"search"},t?a().createElement(xn,{useNominatim:e}):a().createElement(un,null)):(J().warn("Neither nominatim nor solr search is configured."),a().createElement(a().Fragment,null))},zn=n(81350),$n=n.n(zn),Vn=n(88495),Wn=n.n(Vn);const _n=({email:e="",size:t=80,rating:n="g",defaultImage:r="identicon",force:a=!1})=>{const o=e.toLowerCase();let i=`https://www.gravatar.com/avatar/${Wn()(o)}?s=${t}&r=${n}&d=${r}`;return a&&(i=`${i}&f=y`),i};var Gn=n(7277);var Kn=n(88885),Hn={};Hn.styleTagTransform=V(),Hn.setAttributes=U(),Hn.insert=x().bind(null,"head"),Hn.domAPI=I(),Hn.insertStyleElement=z();D()(Kn.Z,Hn),Kn.Z&&Kn.Z.locals&&Kn.Z.locals;function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yn.apply(this,arguments)}var qn=({opener:e,...t})=>{const{t:n}=(0,E.useTranslation)(),o=M((e=>e.appInfo)),l=M((e=>e.logoPath)),s=M((e=>e.description)),[c,u]=(0,r.useState)(!1),d=()=>{u(!c)};let m;return m=e?a().cloneElement(e,{onClick:d}):a().createElement("button",{onClick:d},"Open"),a().createElement(a().Fragment,null,m,a().createElement(i.Z,Yn({className:"application-info",title:n("ApplicationInfo.title"),centered:!0,open:c,onOk:d,onCancel:d,footer:null},t),a().createElement("img",{className:"logo",src:l}),a().createElement("div",{className:"description"},s),a().createElement(Gn.Z,{title:n("ApplicationInfo.clientVersionTitle"),value:"6.5.0"}),o.version&&o.buildTime&&a().createElement(Gn.Z,{title:n("ApplicationInfo.backendVersionTitle"),value:`${o.version} (${o.buildTime})`})))},Jn=n(72285),Xn={};Xn.styleTagTransform=V(),Xn.setAttributes=U(),Xn.insert=x().bind(null,"head"),Xn.domAPI=I(),Xn.insertStyleElement=z();D()(Jn.Z,Xn),Jn.Z&&Jn.Z.locals&&Jn.Z.locals;var Qn=()=>{const{t:e}=(0,E.useTranslation)(),t=se(),n=t?.getKeycloak(),r=M((e=>e.user)),o=e=>{switch(e.key){case"settings":n&&n.accountManagement();break;case"info":default:break;case"login":n&&n.login();break;case"logout":n&&n.logout()}};return a().createElement($n(),{size:"small",imageSrc:_n({email:r.providerDetails?.email||"",size:28}),userName:a().createElement(_e.FontAwesomeIcon,{icon:We.gc2}),userMenu:(()=>{const t={key:"login",icon:a().createElement(_e.FontAwesomeIcon,{icon:We.Yem}),label:e("UserMenu.loginMenuTitle")},i={key:"username",label:a().createElement("div",{className:"user-name"},a().createElement("span",null,r.providerDetails?.email))},l={type:"divider"},s={key:"settings",icon:a().createElement(_e.FontAwesomeIcon,{icon:We.gNZ}),label:e("UserMenu.settingsMenuTitle")},c={key:"info",icon:a().createElement(_e.FontAwesomeIcon,{icon:We.YHc}),label:a().createElement(qn,{opener:a().createElement("span",{className:"info-opener"},e("UserMenu.infoMenuTitle"))})},u={key:"logout",icon:a().createElement(_e.FontAwesomeIcon,{icon:We.HEx}),label:e("UserMenu.logoutMenuTitle")},d=[];if(Y()(r))pe().keycloak?.enabled&&d.push(t),d.push(c);else{const e=n?.tokenParsed?.resource_access?.account?.roles,t=Array.isArray(e)&&e.indexOf("manage-account")>-1?[i,l,s,c,l,u]:[i,l,c,l,u];d.push(...t)}return{items:d,onClick:o}})()})},er=n(62923),tr={};tr.styleTagTransform=V(),tr.setAttributes=U(),tr.insert=x().bind(null,"head"),tr.domAPI=I(),tr.insertStyleElement=z();D()(er.Z,tr),er.Z&&er.Z.locals&&er.Z.locals;function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}var rr=({...e})=>{const t=Z((e=>e.title)),n=Z((e=>e.logoPath)),r=oe(),o=(e,t)=>{r.forEach((n=>{if((r=n.integration)&&"header"===r.placement&&n.integration?.placementOrientation===e){const{key:e,wrappedComponent:r}=n;t.splice(n.integration?.insertionIndex||0,0,a().createElement(r,{key:e}))}var r}))};return a().createElement("div",nr({className:"header"},e),a().createElement("div",{className:"item-container left-items"},(()=>{const e=[a().createElement("img",{key:"logo",className:"logo",src:n}),a().createElement("div",{key:"title",className:"title"},t)];return o("left",e),e})()),a().createElement("div",{className:"item-container center-items"},(()=>{const e=[a().createElement(Bn,{key:"search"})];return o("center",e),e})()),a().createElement("div",{className:"item-container right-items"},(()=>{const e=[a().createElement(Qn,{key:"user-menu"})];return o("right",e),e})()))},ar=n(99008),or=n(60925),ir=n.n(or),lr=n(6049),sr=n(11382),cr=n(34286),ur={};ur.styleTagTransform=V(),ur.setAttributes=U(),ur.insert=x().bind(null,"head"),ur.domAPI=I(),ur.insertStyleElement=z();D()(cr.Z,ur),cr.Z&&cr.Z.locals&&cr.Z.locals;function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dr.apply(this,arguments)}var mr=({layer:e,...t})=>{const[n,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),u=se(),{t:d}=(0,E.useTranslation)(),m=(0,r.useCallback)((async()=>{try{if(o(!0),l(""),!e||!e.get("shogunId"))throw new Error("No layer provided or the layer has no shogunId set");const t=await(u?.layer().findOne(e.get("shogunId")));c(t)}catch(e){J().error(e),l(d("LayerConfiguration.errorMessage"))}finally{o(!1)}}),[d,u,e]);return(0,r.useEffect)((()=>{m()}),[m]),i?a().createElement(de.Z,{type:"error",closable:!0,message:i}):a().createElement(sr.Z,{spinning:n},a().createElement("pre",dr({className:"layer-configuration"},t),a().createElement("code",null,JSON.stringify(s,null,"  "))))},pr=n(86201),gr={};gr.styleTagTransform=V(),gr.setAttributes=U(),gr.insert=x().bind(null,"head"),gr.domAPI=I(),gr.insertStyleElement=z();D()(pr.Z,gr),pr.Z&&pr.Z.locals&&pr.Z.locals;function fr(){return fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fr.apply(this,arguments)}var yr=({layer:e,...t})=>{const[n,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),u=se(),{t:d}=(0,E.useTranslation)(),m=(0,r.useCallback)((async()=>{if(e&&(0,he.isWmsLayer)(e))try{o(!0),c(""),l(void 0);const t=await L().getWmsCapabilitiesByLayer(e,{headers:{...e.get("useBearerToken")?{...(0,Le.getBearerTokenHeader)(u?.getKeycloak())}:void 0}});l(t)}catch(e){J().error(e),c(d("LayerDetails.errorMessage"))}finally{o(!1)}}),[d,u,e]);(0,r.useEffect)((()=>{m()}),[m]);const p=()=>{if(e&&(0,he.isWmsLayer)(e))return e.getSource()?.getParams().LAYERS},g=()=>{if(!e||!(0,he.isWmsLayer)(e))return;let t;if(e.getSource()instanceof we()&&(t=e.getSource().getUrl()),e.getSource()instanceof ve()){const n=e.getSource().getUrls();t=n?n[0]:void 0}return t?b().createValidGetCapabilitiesRequest(t,"WMS","1.3.0"):void 0},f=()=>{const e=i?.Capability?.Layer?.Layer,t=p(),n=e?.find((e=>e.Name===t));return n},y=()=>{const e=f();if(e)return e.EX_GeographicBoundingBox?.join(", ")},h=()=>{const e=f();if(e)return e.MinScaleDenominator},w=()=>{const e=f();if(e)return e.MaxScaleDenominator},v=()=>{const e=f();if(e)return e.Abstract},S=()=>i?.Service?.Abstract,k=()=>i?.Service?.ContactInformation?.ContactElectronicMailAddress,T=()=>{const e=f();if(e)return e.Title},P=()=>i?.Service?.AccessConstraints;return s?a().createElement(de.Z,{type:"error",closable:!0,message:s}):a().createElement(sr.Z,{spinning:n},a().createElement(pt.Z,fr({className:"layer-details",layout:"horizontal",size:"small",labelAlign:"left",labelWrap:!0,labelCol:{flex:"150px"}},t),a().createElement(pt.Z.Item,{name:"layerName",label:d("LayerDetails.layerNameLabel")},a().createElement("span",null,p()?p():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"layerTitle",label:d("LayerDetails.layerTitleLabel")},a().createElement("span",null,T()?T():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"service-abstract",label:d("LayerDetails.serviceAbstractLabel")},a().createElement("span",null,S()?S():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"abstract",label:d("LayerDetails.abstractLabel")},a().createElement("span",null,v()?v():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"accessConstraints",label:d("LayerDetails.accessConstraintsLabel")},a().createElement("span",null,P()?P():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"CapabilitiesUrl",label:d("LayerDetails.capabilitiesUrlLabel")},a().createElement("a",{href:g()},g())),a().createElement(pt.Z.Item,{name:"contact",label:d("LayerDetails.contactLabel")},k()?a().createElement("a",{href:`mailto:${k()}`},k()):a().createElement("span",null,d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"minScale",label:d("LayerDetails.minScaleLabel")},a().createElement("span",null,h()?h():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"maxScale",label:d("LayerDetails.maxScaleLabel")},a().createElement("span",null,w()?w():d("LayerDetails.noDataPlaceholder"))),a().createElement(pt.Z.Item,{name:"bbox",label:d("LayerDetails.bboxLabel")},a().createElement("span",null,y()?y():d("LayerDetails.noDataPlaceholder")))))},hr=n(21809),Er={};Er.styleTagTransform=V(),Er.setAttributes=U(),Er.insert=x().bind(null,"head"),Er.domAPI=I(),Er.insertStyleElement=z();D()(hr.Z,Er),hr.Z&&hr.Z.locals&&hr.Z.locals;function wr(){return wr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wr.apply(this,arguments)}var br=({...e})=>{const[t,n]=(0,r.useState)(),[o,s]=(0,r.useState)(!1),c=M((e=>e.layerDetailsModal.visible)),u=M((e=>e.layerDetailsModal.layerId)),d=F(),m=(0,T.useMap)(),{t:p}=(0,E.useTranslation)();(0,r.useEffect)((()=>{if(!m)return;if(!u)return void n(void 0);const e=k().getLayerByOlUid(m,u);e instanceof ir()&&n(e)}),[m,u]);return a().createElement(i.Z,wr({className:"layer-details-modal",title:a().createElement("div",{className:"title-group"},a().createElement("span",null,p("LayerDetailsModal.title",{layerName:t?.get("name")})),t?.get("shogunId")&&a().createElement(yn.Z,{title:p(o?"LayerDetailsModal.internalConfigurationButtonTooltip":"LayerDetailsModal.internalConfigurationButtonTooltipPressed")},a().createElement(l.Z,{type:"link",className:o?"pressed":"",icon:a().createElement(ar.Z,null),onClick:()=>{s(!o)}}))),open:c,onCancel:()=>{d((0,lr.Cp)()),d((0,lr.uF)(void 0))},width:800,footer:!1},e),a().createElement(yr,{layer:t,hidden:o}),t?.get("shogunId")&&a().createElement(mr,{layer:t,hidden:!o}))},vr=n(27279),Lr=n(1581),Sr=n.n(Lr),kr=n(76712),Tr=n(63221),Pr=n(85677),Cr={};Cr.styleTagTransform=V(),Cr.setAttributes=U(),Cr.insert=x().bind(null,"head"),Cr.domAPI=I(),Cr.insertStyleElement=z();D()(Pr.Z,Cr),Pr.Z&&Pr.Z.locals&&Pr.Z.locals;var Fr=n(35895);const{Option:Zr}=c.default;var Mr=()=>{const e=Object.keys(Fr.Z.services.resourceStore.data);return a().createElement("div",{className:"language-select"},a().createElement(c.default,{defaultValue:Fr.Z.language||"en",onChange:e=>{Fr.Z.changeLanguage(e)}},e.map((e=>a().createElement(Zr,{key:e,value:e},e.toUpperCase())))))},Ar=n(75013),Or=n(73254),Dr=n(64302),Nr=n(85175),Ir=n(48086),jr=n(20640),xr=n.n(jr),Rr=n(99746),Ur=n(10767),Br={};Br.styleTagTransform=V(),Br.setAttributes=U(),Br.insert=x().bind(null,"head"),Br.domAPI=I(),Br.insertStyleElement=z();D()(Ur.Z,Br),Ur.Z&&Ur.Z.locals&&Ur.Z.locals;var zr=()=>{const e=(0,T.useMap)(),t=(0,r.useMemo)((()=>["layerConfig","isExternalLayer","isUploadedLayer","groupName"]),[]),{t:n}=(0,E.useTranslation)(),o=e?Q().getLink(e,";",(e=>e.get("name")),(e=>(e instanceof h()||e instanceof f())&&e.getVisible()),t):"",[i,l]=(0,r.useState)(o),c=`Hey,\r\ncheck out the layer-composition I created:\r\n\r\n${i}`;return(0,r.useEffect)((()=>{if(!e)return;let n=[];const r=e=>e.get("name"),a=e=>(e instanceof h()||e instanceof f())&&e.getVisible(),o=()=>{l(Q().getLink(e,";",r,a,t))},i=()=>{e.getAllLayers().filter((e=>e.get("isExternalLayer")||e.get("isUploadedLayer"))).forEach((e=>{const t=e.get("layerConfig");t&&(t.clientConfig?t.clientConfig.opacity=e.getOpacity():t.clientConfig={opacity:e.getOpacity()},e.set("layerConfig",t))})),o()},s=e=>{const t=e.getLayers().getArray();for(let e=0;e<t.length;e++){const r=t[e];if(r instanceof p())s(r);else{let e=r.on("change:visible",o),t=r.on("change:opacity",i);n.push(e,t)}}},c=e.getView().on("change:center",o),u=e.getView().on("change:resolution",o);let d=e.getLayerGroup();return s(d),i(),()=>{(0,Rr.unByKey)(c),(0,Rr.unByKey)(u),(0,Rr.unByKey)(n)}}),[t,e,n]),a().createElement("div",{className:"permalink-wrapper"},a().createElement("div",{className:"icons"},a().createElement(yn.Z,{title:n("Permalink.twitterTooltip")},a().createElement(Ar.Z,{onClick:function(){const e=new URL("https://twitter.com/intent/tweet");e.searchParams.set("url",c),window.open(e)}})),a().createElement(yn.Z,{title:n("Permalink.whatsAppTooltip")},a().createElement(Or.Z,{onClick:function(){const e=new URL("https://wa.me");e.searchParams.set("text",c),window.open(e)}})),a().createElement(yn.Z,{title:n("Permalink.mailTooltip")},a().createElement(Dr.Z,{onClick:function(){const e=new URL("mailto:");e.searchParams.set("subject","SHOGun Web-GIS"),e.searchParams.set("body",c),window.open(e.toString().replace(/\+/g,"%20"),"_self")}}))),a().createElement("div",{className:"link"},a().createElement(s.Z,{value:i,readOnly:!0}),a().createElement(yn.Z,{title:n("Permalink.copyTooltip")},a().createElement(Nr.Z,{onClick:function(){xr()(i)?Ir.ZP.info(n("Permalink.copiedToClipboard")):Ir.ZP.info(n("Permalink.copyToClipboardFailed"))}}))))},$r=n(14293),Vr=n.n($r),Wr=n(73345),_r=n(57795),Gr=n.n(_r),Kr=n(55002),Hr=n.n(Kr),Yr=n(19867),qr=n.n(Yr),Jr=n(97955),Xr=n.n(Jr),Qr=n(11032),ea=n.n(Qr);class ta extends(ea()){serialize(e,t){const n=super.serialize(e,t);return n.baseURL.startsWith("/geoserver/ows")&&(n.baseURL=`http://shogun-geoserver:8080${n.baseURL}`),n.baseURL.startsWith("/geoserver/SHOGUN")&&(n.baseURL=`http://shogun-geoserver:8080${n.baseURL}`),n}}var na=ta;var ra=class extends na{serialize(e,t){const n={tileSize:[512,512],...t},r=e.getSource();if(!r||!this.validateSource(r))return;return{...super.serialize(e,n),type:Xr().TYPE_WMS,...t}}},aa=n(28728);function oa(){return oa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oa.apply(this,arguments)}var ia=({value:e,id:t,placeholder:n,maxLength:o,...i})=>{const[l,c]=(0,r.useState)(e),u=F();return(0,r.useEffect)((()=>{Vr()(t)||u((0,aa.eV)({[t]:l}))}),[l,t,u]),(0,r.useEffect)((()=>{c(e)}),[e]),a().createElement(s.Z,oa({id:t,value:l,onChange:e=>c(e.target.value),placeholder:n,maxLength:o,showCount:!!(o&&o>1)},i))};function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},la.apply(this,arguments)}var sa=({printManager:e,placeholder:t="Bitte wählen Sie eine Vorlage aus",value:n,...o})=>{const[i,l]=(0,r.useState)(n);return(0,r.useEffect)((()=>{e&&e.setLayout(i)}),[e,i]),(0,r.useEffect)((()=>{l(n)}),[n]),a().createElement(c.default,la({placeholder:t,value:i,onChange:l},o),e?.getLayouts().map((e=>a().createElement(c.default.Option,{key:e.name,value:e.name},e.name))))};function ca(){return ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ca.apply(this,arguments)}var ua=({printManager:e,placeholder:t,value:n,outputFormats:o,...i})=>{const[l,s]=(0,r.useState)(n);return(0,r.useEffect)((()=>{e&&e.setOutputFormat(l)}),[e,l]),(0,r.useEffect)((()=>{s(n)}),[n]),a().createElement(c.default,ca({placeholder:t,value:l,onChange:s},i),o.map((e=>a().createElement(c.default.Option,{key:e,value:e},e.toLocaleUpperCase()))))};function da(){return da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},da.apply(this,arguments)}var ma=({printManager:e,placeholder:t,value:n,...o})=>{const[i,l]=(0,r.useState)(n);return(0,r.useEffect)((()=>{e&&e.setDpi(i)}),[e,i]),(0,r.useEffect)((()=>{l(n)}),[n]),a().createElement(c.default,da({placeholder:t,value:i,onChange:l},o),e?.getDpis().map((e=>a().createElement(c.default.Option,{key:e,value:e},`${e} DPI`))))};function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pa.apply(this,arguments)}var ga=({printManager:e,placeholder:t,value:n,...o})=>{const i=P()(),[l,s]=(0,r.useState)(0);return(0,r.useEffect)((()=>{e&&l&&e.setScale(l)}),[e,l]),(0,r.useEffect)((()=>{const t=()=>{const t=e.getScale();t&&s(t)},n=i?.getInteractions().getArray().find((e=>e.get("name")===Wr.MapFishPrintV3Manager.TRANSFORM_INTERACTION_NAME));if(e&&n&&n)return n.on("scaling",t),()=>{n.un("scaling",t)}}),[e,i]),(0,r.useEffect)((()=>{n&&s(n)}),[n]),a().createElement(c.default,pa({placeholder:t,value:l,onChange:s},o),e?.getScales().map((e=>a().createElement(c.default.Option,{key:e,value:e},`1 : ${e.toLocaleString()}`))))},fa=n(26398);function ya(){return ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ya.apply(this,arguments)}n.n(fa)().getLegendGraphicUrl=e=>{if(e.get("legendUrl"))return e.get("legendUrl");if(e.getSource()instanceof ve()||e.getSource()instanceof we()){const t=e.get("customPrintLegendParams"),n=e.getSource(),{LAYERS:r,VERSION:a,FORMAT:o}=n.getParams();let i=n instanceof we()?n.getUrl():n.getUrls()[0];i.startsWith("/geoserver/ows")&&(i=`http://shogun-geoserver:8080${i}`);const l={LAYER:r.split(",")[0],VERSION:a||"1.3.0",SERVICE:"WMS",REQUEST:"GetLegendGraphic",FORMAT:o||"image/png",...t},s=Object.keys(l).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(l[e])}`)).join("&");return i.startsWith("/geoserver/SHOGUN")?(i=`http://shogun-geoserver:8080${i}/service?`,`${i}${s}`):i.endsWith("?")?`${i}${s}`:`${i}?${s}`}return""};var ha=({active:e,customPrintScales:t=[],layerBlackList:n=[],outputFormats:o=["pdf","png"],...i})=>{const[s]=pt.Z.useForm(),{t:c,i18n:u}=(0,E.useTranslation)(),d=(0,T.useMap)(),m=u.language,g=se(),f=M((e=>e.print.customMapParams)),y=M((e=>e.print.customParams)),[h,w]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),[L,S]=(0,r.useState)(null),P=(0,r.useCallback)((e=>{if(!d)return;const t=e.get("name");return t&&!n.includes(t)&&e.getVisible()&&!(e instanceof p())&&k().layerInResolutionRange(e,d)}),[d,n]),C=(0,r.useCallback)((e=>{if(Vr()(d))return!1;const t=e.get("name"),r=!n.includes(t),a=!e.get("hideLegendInPrint"),o=e.getVisible()&&k().layerInResolutionRange(e,d),i=!(e instanceof p());if(r&&a&&o&&i){const t=d?.getView().getResolution();return t&&e.set("customPrintLegendParams",{SCALE:k().getScaleForResolution(t,"m")}),!0}return!1}),[d,n]),F=(0,r.useCallback)((async()=>{if(Vr()(d))return;let e={url:pe().print?.url||"/print",map:d,customPrintScales:d?.getView()?.getResolutions()?.map((e=>{const t=d?.getView()?.getProjection()?.getUnits();if(void 0!==e){const n=k().getScaleForResolution(e,t);if(void 0!==n)return k().roundScale(n)}})).filter((e=>void 0!==e))?.reverse(),timeout:6e4,layerFilter:P,headers:{...(0,Le.getBearerTokenHeader)(g?.getKeycloak())},transformOpts:{rotate:!1},serializers:[new(Gr()),new(Hr()),new(qr()),new na,new ra],legendFilter:C};t.length>0&&(e={...e,customPrintScales:t.reverse()});const n=new Wr.MapFishPrintV3Manager(e);try{await n.init();const e=n.getPrintApps();e&&m&&e.includes(m)&&await n.setPrintApp(m),n.setOutputFormat(n.getOutputFormats()[0]),n.setDpi(n.getDpis()[0]),n.setLayout(n.getLayouts()[0]?.name),w(n)}catch(e){S((()=>c("PrintForm.managerErrorMessage"))),J().error("Could not initialize print manager: ",e)}}),[g,P,C,d,c,t,m]);(0,r.useEffect)((()=>{e?h||F():(h?.shutdownManager(),w(null))}),[h,e,F]),(0,r.useEffect)((()=>{h&&(y&&h.setCustomParams(y),f&&h.setCustomMapParams(f))}),[h,y,f]);return a().createElement("div",{className:"print"},L&&a().createElement(de.Z,{className:"print-alert",message:L,type:"error",closable:!0,showIcon:!0,onClose:()=>{S(null)}}),h?.isInitiated()&&a().createElement(a().Fragment,null,a().createElement(pt.Z,ya({form:s,className:"print-form",labelAlign:"left",labelCol:{flex:"90px"}},i),a().createElement(pt.Z.Item,{name:"title",label:c("PrintForm.title"),initialValue:c("PrintForm.initialTitle")},a().createElement(ia,{maxLength:50,placeholder:c("PrintForm.titlePlaceholder")})),a().createElement(pt.Z.Item,{name:"comment",label:c("PrintForm.comment")},a().createElement(ia,{maxLength:200,placeholder:c("PrintForm.commentPlaceholder")})),a().createElement(pt.Z.Item,{name:"layout",label:c("PrintForm.layout"),initialValue:h?.getLayouts()[0]?.name},a().createElement(sa,{printManager:h})),a().createElement(pt.Z.Item,{name:"scale",label:c("PrintForm.scale"),initialValue:h?.getClosestScaleToFitMap()},a().createElement(ga,{printManager:h})),a().createElement(pt.Z.Item,{name:"dpi",label:c("PrintForm.dpi"),initialValue:h.getDpis()[0]},a().createElement(ma,{printManager:h,placeholder:c("PrintForm.resolutionPlaceholder")})),a().createElement(pt.Z.Item,{name:"format",label:c("PrintForm.format"),initialValue:"pdf"},a().createElement(ua,{printManager:h,outputFormats:o,placeholder:c("PrintForm.outputFormatPlaceholder")}))),a().createElement(l.Z,{className:"print-button tool-menu-button",disabled:!h?.isInitiated(),icon:a().createElement(_e.FontAwesomeIcon,{icon:We.q7m}),loading:b,onClick:async()=>{try{if(S(null),v(!0),!h)return;const e=await h.print(!1);if(!e)throw new Error("No download URL available, the job has failed.");window.open(e)}catch(e){S(c("PrintForm.printJobErrorMsg")||null),J().error(e)}finally{v(!1)}}},c("PrintForm.downloadBtnText"))))},Ea=n(64748),wa=n.n(Ea),ba=n(7871),va={};va.styleTagTransform=V(),va.setAttributes=U(),va.insert=x().bind(null,"head"),va.domAPI=I(),va.insertStyleElement=z();D()(ba.Z,va),ba.Z&&ba.Z.locals&&ba.Z.locals;var La=n(21015),Sa={};Sa.styleTagTransform=V(),Sa.setAttributes=U(),Sa.insert=x().bind(null,"head"),Sa.domAPI=I(),Sa.insertStyleElement=z();D()(La.Z,Sa),La.Z&&La.Z.locals&&La.Z.locals;var ka=n(16144),Ta=n.n(ka),Pa=n(53772),Ca=n.n(Pa);function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fa.apply(this,arguments)}var Za=({...e})=>{const[t,n]=(0,r.useState)({name:"Default Style",rules:[{name:"Area",symbolizers:[{kind:"Fill",color:"#00b72b",outlineOpacity:.8,opacity:.5,fillOpacity:.8,outlineWidth:2,outlineColor:"#00b72b"}]},{name:"Line",symbolizers:[{kind:"Line",color:"#00b72b",width:2,opacity:.8}]},{name:"Point",symbolizers:[{kind:"Mark",wellKnownName:"circle",color:"#00b72b",strokeColor:"#00b72b",strokeOpacity:.8,opacity:.5,radius:7}],filter:["==","label","undefined"]},{name:"Text",symbolizers:[{kind:"Text",label:"{{label}}",size:12,font:["sans-serif"],opacity:.8,color:"#00b72b",offset:[5,5],haloColor:"#00b72b",haloWidth:1}],filter:["!=","label","undefined"]}]}),a=(0,T.useMap)();return(0,r.useEffect)((()=>{if(!t||!a)return;const e=new(Ca());let n=k().getLayerByName(a,"react-geo_digitize");(async()=>{let r,a,o,i;for(const n of t.rules){const t={name:"",rules:[n]},l=await e.writeStyle(t);if(!l.output)return;"Fill"===n.symbolizers[0].kind&&(r=l.output),"Text"===n.symbolizers[0].kind&&(i=l.output),"Line"===n.symbolizers[0].kind&&(a=l.output),"Mark"===n.symbolizers[0].kind&&(o=l.output)}n.setStyle(((e,t)=>{const n=e.getGeometry()?.getType();if(n)return["MultiPolygon","Polygon","Circle"].includes(n)?"function"==typeof r?r(e,t):r:["MultiLineString","LineString"].includes(n)?"function"==typeof a?a(e,t):a:["MultiPoint","Point"].includes(n)?e.get("label")?"function"==typeof i?i(e,t):i:"function"==typeof o?o(e,t):o:void 0}))})()}),[t,a]),r.createElement(Ta(),Fa({style:t,onStyleChange:n},e))};function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ma.apply(this,arguments)}var Aa=({...e})=>{const[t,n]=(0,r.useState)(!1),{t:o}=(0,E.useTranslation)();return a().createElement(a().Fragment,null,a().createElement(l.Z,{type:"link",onClick:()=>{n(!0)},icon:a().createElement(_e.FontAwesomeIcon,{icon:We.XsY})},o("StylingDrawer.pickColor")),a().createElement(Ne.Z,Ma({title:o("StylingDrawer.title"),placement:"right",onClose:()=>{n(!1)},open:t,mask:!1,width:"45vw",className:"color-pick-drawer"},e),a().createElement(Za,null)))};var Oa=({showDrawPoint:e,showDrawLine:t,showDrawPolygon:n,showDrawCircle:r,showDrawRectangle:o,showDrawAnnotation:i,showModifyFeatures:l,showUploadFeatures:s,showDownloadFeatures:c,showDeleteFeatures:u})=>{const{t:d}=(0,E.useTranslation)(),m=(0,T.useMap)(),p=e=>{const t=new FileReader;t.onload=()=>{const e=(new(He())).readFeatures(t.result);if(m){const t=m.getView().getProjection().getCode();e.forEach((e=>{e.getGeometry()?.transform("EPSG:4326",t)}));const n=lt.DigitizeUtil.getDigitizeLayer(m).getSource();n?.addFeatures(e)}},t.readAsText(e)};return m?a().createElement(at(),null,e?a().createElement(Xe(),{name:"draw-point",drawType:"Point",type:"link",pressed:!1},a().createElement(_e.FontAwesomeIcon,{icon:We.diR}),a().createElement("span",{className:"draw-point"},d("Draw.point"))):a().createElement(a().Fragment,null),t?a().createElement(Xe(),{name:"draw-line",drawType:"LineString",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.hx$}),a().createElement("span",{className:"draw-line"},d("Draw.line"))):a().createElement(a().Fragment,null),n?a().createElement(Xe(),{name:"draw-polygon",drawType:"Polygon",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.ubJ}),a().createElement("span",{className:"draw-polygon"},d("Draw.polygon"))):a().createElement(a().Fragment,null),r?a().createElement(Xe(),{name:"draw-circle",drawType:"Circle",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.diR}),a().createElement("span",{className:"draw-circle"},d("Draw.circle"))):a().createElement(a().Fragment,null),o?a().createElement(Xe(),{name:"draw-rectangle",drawType:"Rectangle",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.pL1}),a().createElement("span",{className:"draw-rectangle"},d("Draw.rectangle"))):a().createElement(a().Fragment,null),i?a().createElement(Xe(),{name:"draw-text",drawType:"Text",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.yGG}),a().createElement("span",{className:"draw-text"},d("Draw.text"))):a().createElement(a().Fragment,null),l?a().createElement(et(),{name:"draw-modify",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.Yai}),a().createElement("span",{className:"draw-modify"},d("Draw.modify"))):a().createElement(a().Fragment,null),s?a().createElement(wa(),{name:"draw-upload",onChange:e=>{const t=e.target.files;!t||1!==t.length||"application/geo+json"!==t[0].type&&"application/geojson"!==t[0].type||p(t[0])},type:"link"},a().createElement(nt(),{type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.cf$}),a().createElement("span",{className:"draw-upload"},d("Draw.upload")))):a().createElement(a().Fragment,null),c?a().createElement(nt(),{name:"draw-export",onClick:()=>{const e=[];if(m){const t=m.getView().getProjection().getCode(),n=lt.DigitizeUtil.getDigitizeLayer(m),r=n.getSource()?.getFeatures();if(r&&r.length>0){r.forEach((n=>{const r=n.clone();r.getGeometry()?.transform(t,"EPSG:4326"),e.push(r)}));const n=(new(He())).writeFeatures(e),a=new Blob([n],{type:"application/geo+json"}),o=window.URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.setAttribute("download","exportedFeatures.geojson"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}}},type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.q7m}),a().createElement("span",{className:"draw-export"},d("Draw.export"))):a().createElement(a().Fragment,null),u?a().createElement(qe(),{name:"draw-delete",type:"link"},a().createElement(_e.FontAwesomeIcon,{icon:We.$aW}),a().createElement("span",{className:"draw-delete"},d("Draw.delete"))):a().createElement(a().Fragment,null),a().createElement(Aa,null)):a().createElement(a().Fragment,null)},Da=n(41284),Na=n.n(Da),Ia=n(21800),ja=n(8533),xa=n(20373),Ra=n.n(xa),Ua=n(34350),Ba=n.n(Ua),za=n(61316),$a=n.n(za),Va=n(86092),Wa={};Wa.styleTagTransform=V(),Wa.setAttributes=U(),Wa.insert=x().bind(null,"head"),Wa.domAPI=I(),Wa.insertStyleElement=z();D()(Va.Z,Wa),Va.Z&&Va.Z.locals&&Va.Z.locals;function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_a.apply(this,arguments)}var Ga=({features:e,layerName:t,...n})=>{const[o,i]=(0,r.useState)(),[s,c]=(0,r.useState)(),u=P()(),{t:d}=(0,E.useTranslation)(),m=`selection-layer-${t}`,p=t=>{i(t),c(e[t-1])};if((0,r.useEffect)((()=>{if(!u)return;return(()=>{if(k().getLayerByName(u,m))return;const t=new(Ba())({features:e}),n=new(Pn())({color:"rgba(255, 255, 255, 0.15)"}),r=new(Fn())({color:"rgba(209, 70, 47, 1)",width:2}),a=new(Mn())({fill:n,stroke:r,image:new(kn())({radius:5,fill:n,stroke:r})}),o=new(Ra())({source:t,style:a});o.set("name",m),u.addLayer(o)})(),()=>(()=>{const e=k().getLayerByName(u,m);e&&u.removeLayer(e)})()}),[e,u,m]),(0,r.useEffect)((()=>{if(!u)return;const t=k().getLayerByName(u,m);t&&(t.getSource()?.clear(),i(1),e.length>0&&c(e[0]))}),[e,u,m]),(0,r.useEffect)((()=>{if(!s||!u)return;const e=k().getLayerByName(u,m);e&&(e.getSource()?.clear(),e.getSource()?.addFeature(s))}),[s,u,m]),!s)return a().createElement(a().Fragment,null);const g=["geom","the_geom","geometry"],f=s.getKeys().filter((e=>!g.includes(e.toLocaleLowerCase())));return a().createElement($a(),_a({className:"property-grid",feature:s,attributeFilter:f,size:"small",sticky:!0,title:()=>a().createElement(a().Fragment,null,a().createElement(ja.Z,{simple:!0,total:e.length,size:"small",pageSize:1,current:o,onChange:p}),a().createElement("div",{className:"copy"},a().createElement(yn.Z,{title:d("FeaturePropertyGrid.copyAsGeoJson")},a().createElement(l.Z,{type:"primary",size:"small",onClick:()=>{xr()((new(He())).writeFeature(s))},icon:a().createElement(_e.FontAwesomeIcon,{icon:We.E9T})})),a().createElement(yn.Z,{title:d("FeaturePropertyGrid.copyAsObject")},a().createElement(l.Z,{type:"primary",size:"small",onClick:()=>{const e=s.getProperties();g.forEach((t=>delete e[t])),xr()(JSON.stringify(e))},icon:a().createElement(_e.FontAwesomeIcon,{icon:We.OGB})})))),columns:[{title:d("FeaturePropertyGrid.key"),dataIndex:"attributeName",key:"attributeName",width:"50%",ellipsis:!0,defaultSortOrder:"ascend",sorter:(e,t)=>e.key.localeCompare(t.key)},{title:d("FeaturePropertyGrid.value"),dataIndex:"attributeValue",key:"attributeValue",width:"50%",ellipsis:!0}],scroll:{scrollToFirstRowOnChange:!0,y:"calc(100% - 90px)"}},n))},Ka=n(16813),Ha={};Ha.styleTagTransform=V(),Ha.setAttributes=U(),Ha.insert=x().bind(null,"head"),Ha.domAPI=I(),Ha.insertStyleElement=z();D()(Ka.Z,Ha),Ka.Z&&Ka.Z.locals&&Ka.Z.locals;function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ya.apply(this,arguments)}var qa=({enabled:e,...t})=>{const{t:n}=(0,E.useTranslation)(),o=(0,T.useMap)(),i=se(),l=ie(),s=F(),[c,u]=(0,r.useState)([]),m=e=>!!e.get("hoverable")&&(e instanceof f()&&e.getSource()instanceof we()||e instanceof h()&&e.getSource()instanceof ve()),p=(0,r.useCallback)((()=>{if(!o)return;const e=k().getAllLayers(o,m);u(e.filter((e=>e.getVisible())))}),[o]);if((0,r.useEffect)((()=>{if(!o)return;p();const e=k().getAllLayers(o,m);return e.forEach((e=>e.on("change:visible",p))),()=>{e.forEach((e=>e.un("change:visible",p)))}}),[o,p]),!o)return a().createElement(a().Fragment,null);const g=e=>e.split(":").length>1?e.split(":")[1]:e.split(":")[0];if(!e)return a().createElement(a().Fragment,null);return a().createElement("div",{className:"feature-info-panel"},a().createElement(Na(),Ya({featureCount:10,map:o,queryLayers:c,resultRenderer:e=>{const t=e.features,r=e.loading;if(0===Object.keys(t).length)return a().createElement("span",{className:"usage-hint"},n("FeatureInfo.usageHint"));const i=[];return Object.keys(t).forEach((e=>{let n=!1;const s=o.getAllLayers().find((t=>{if((0,he.isWmsLayer)(t)){const n=t.getSource(),r=g(n?.getParams().LAYERS);return g(e)===r}return!1}));l.forEach((t=>{if((r=t.integration)&&"feature-info"===r.placement&&(Array.isArray(t.integration.layers)&&t.integration.layers.includes(e)||!t.integration.layers)){const{key:r,wrappedComponent:o}=t;i.push({label:e,key:e,children:a().createElement(o,{key:r})}),n=!0}var r})),n||i.push({label:s?.get("name")||e,key:e,children:a().createElement("div",{key:e},a().createElement(Ga,{features:t[e],layerName:e,loading:r}))})})),a().createElement(mt.Z,{items:i})},fetchOpts:(()=>{const e={};return c.forEach((t=>{const n=(0,d.getUid)(t);e[n]={headers:{...t.get("useBearerToken")?{...(0,Le.getBearerTokenHeader)(i?.getKeycloak())}:void 0}}})),e})(),onSuccess:e=>{const t=e.features,n={};Object.entries(t).forEach((e=>{const t=e[0],r=e[1];n[t]=(new(He())).writeFeatures(r)})),s((0,Ia.wl)(n))}},t)))},Ja=n(54458),Xa=n(87726),Qa=n.n(Xa),eo=n(59001),to=n.n(eo),no=n(26707),ro=n.n(no),ao=n(45514),oo=n.n(ao),io=n(65947),lo={};lo.styleTagTransform=V(),lo.setAttributes=U(),lo.insert=x().bind(null,"head"),lo.domAPI=I(),lo.insertStyleElement=z();D()(io.Z,lo),io.Z&&io.Z.locals&&io.Z.locals;function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},so.apply(this,arguments)}var co=({layer:e,...t})=>{const[n,o]=(0,r.useState)(e.getSource()?.getParams().TIME),[i,l]=(0,r.useState)(),[s,c]=(0,r.useState)(),[u,d]=(0,r.useState)(),{t:m}=(0,E.useTranslation)();(0,r.useEffect)((()=>{const t=e.get("dimension")?.values?.split(",");if(!t||0===t.length)return;l(t[0]),c(t[t.length-1]),o(t[t.length-1]);const n={};if(t.forEach(((e,t)=>{n[e]=Te()(e).format("YYYY-MM-DD")})),d(n),"current"===t.default){let e=[NaN,""];Object.values(n).forEach((t=>{let n=Te()().diff(Te()(t));n<e[0]&&(e=[n,t])})),o(e[1])}}),[e]);return a().createElement("div",{className:"wms-time-slider"},a().createElement(Kt.Z,null,a().createElement(_e.FontAwesomeIcon,{icon:We.SZw}),m("WmsTimeSlider.title")),u?a().createElement(oo(),so({min:i,max:s,marks:u,value:n,onChange:t=>{o(t),e.getSource()?.updateParams({TIME:t})},step:null},t)):a().createElement("span",null,m("WmsTimeSlider.warning")))},uo=n(86954),mo=n.n(uo);function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(this,arguments)}var go=({layer:e,visibleLegendsIds:t,setVisibleLegendsIds:n,...i})=>{const[l,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),m=F(),g=se(),f=(0,T.useMap)(),{t:y}=(0,E.useTranslation)(),h=e.get("downloadConfig")??null,w=M((e=>e.editFeature.userEditMode)),b=async()=>{if(f){u(!0);try{let t=await mo().getExtentForLayer(e,{headers:e.get("useBearerToken")?{...(0,Le.getBearerTokenHeader)(g?.getKeycloak())}:{}});t=(0,on.transformExtent)(t,"EPSG:4326",f.getView().getProjection()),f.getView().fit(t)}catch(e){J().error(e),o.Z.error({message:y("LayerTreeContextMenu.extentError")})}finally{u(!1)}}},v=e=>{const t=[e];for(const n of e.getLayers().getArray())n instanceof p()&&t.push(...v(n));return t},L=e=>{const t=(e=>f?v(f.getLayerGroup()).filter((t=>t.getLayers().getArray().includes(e))):[])(e);t.forEach((t=>t.getLayers().remove(e)))},S=()=>{if(!f)return;L(e);const t=k().getLayerByName(f,y("AddLayerModal.externalWmsFolder")),n=k().getLayerByName(f,y("UploadDataModal.uploadedDataFolder"));t&&0===t.getLayers().getLength()&&L(t),n&&0===n.getLayers().getLength()&&L(n)},P=async t=>{if(!e)return;const n={method:"GET",headers:{...e.get("useBearerToken")?{...(0,Le.getBearerTokenHeader)(g?.getKeycloak())}:void 0}},r=await fetch(t,n),a=await r.blob(),o=document.createElement("a");o.href=URL.createObjectURL(a),o.setAttribute("download",e.get("name")),o.click()};let C=[];if((0,he.isWmsLayer)(e)&&C.push({label:a().createElement(sr.Z,{spinning:c},y("LayerTreeContextMenu.layerZoomToExtent")),key:"zoomToExtent"}),(0,he.isWmsLayer)(e)&&e.getVisible()){const n=t.includes((0,d.getUid)(e));C.push({label:y(n?"LayerTreeContextMenu.hideLegend":"LayerTreeContextMenu.showLegend"),key:"toggleLegend"})}if((e.get("isExternalLayer")||e.get("isUploadedLayer"))&&C.push({label:y("LayerTreeContextMenu.removeLayer"),key:"removeExternal"}),h){const e=h.map((e=>({label:y("LayerTreeContextMenu.downloadLayer",{formatName:e.formatName??"XML"}),key:`downloadLayer|${encodeURI(e.downloadUrl)}`})));C.push(...e)}return e.get("editable")&&(w.includes("CREATE")||w.includes("UPDATE")||w.includes("DELETE"))&&C.push({label:y("LayerTreeContextMenu.editLayer"),key:"editLayer"}),C.push({label:y("LayerTreeContextMenu.layerDetails"),key:"layerDetails"}),a().createElement(En.Z,po({menu:{items:C,onClick:r=>{if(r?.key.startsWith("downloadLayer")){const e=r.key.split("|")[1];P(decodeURI(e))}switch(r?.key){case"zoomToExtent":b();break;case"removeExternal":S();break;case"toggleLegend":const r=(0,d.getUid)(e),a=[...t];a.includes(r)?a.splice(a.indexOf(r),1):a.push(r),n(a);break;case"editLayer":m((0,Oe.hr)(null)),m((0,Oe.vN)((0,d.getUid)(e))),m((0,De.$Z)());break;case"layerDetails":m((0,lr.uF)((0,d.getUid)(e))),m((0,lr.$Z)())}s(!1)}},placement:"bottomLeft",onOpenChange:s,open:l,trigger:["click"]},i),a().createElement(_e.FontAwesomeIcon,{icon:We.iV1}))},fo=n(79770),yo={};yo.styleTagTransform=V(),yo.setAttributes=U(),yo.insert=x().bind(null,"head"),yo.domAPI=I(),yo.insertStyleElement=z();D()(fo.Z,yo),fo.Z&&fo.Z.locals&&fo.Z.locals;function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ho.apply(this,arguments)}var Eo=({...e})=>{const t=(0,T.useMap)(),n=se(),{t:o}=(0,E.useTranslation)(),[i,l]=(0,r.useState)([]),[s,c]=(0,r.useState)({});(0,r.useEffect)((()=>{if(!t)return;const e=k().getAllLayers(t);return e.forEach((e=>{if(e instanceof ir()){const t=e.getSource();t.hasListener("tileloadstart")||t.on("tileloadstart",u),t.hasListener("tileloadend")||t.hasListener("tileloaderror")||t.on(["tileloadend","tileloaderror"],m)}})),()=>{e.forEach((e=>{if(e instanceof ir()){const t=e.getSource();t.hasListener("tileloadstart")&&t.un("tileloadstart",u),t.hasListener("tileloadend")&&t.un("tileloadend",m),t.hasListener("tileloaderror")&&t.un("tileloaderror",m)}}))}}),[t]);const u=e=>{c((t=>{const n=parseInt((0,d.getUid)(e.target),10),r={...t};return r[n]&&r[n].loaded>=r[n].loading?(r[n].loading=1,r[n].loaded=0,r[n].percent=0,r):(r[n]||(r[n]={loading:0,loaded:0,percent:0}),r[n].loading=Number.isInteger(r[n].loading)?r[n].loading+1:1,r)}))},m=e=>{c((t=>{const n=parseInt((0,d.getUid)(e.target),10),r={...t};r[n]||(r[n]={loading:0,loaded:0,percent:0}),r[n].loaded=Number.isInteger(r[n].loaded)?r[n].loaded+1:1;const a=Math.round(r[n].loaded/r[n].loading*100);return a>r[n].percent&&(r[n].percent=a),r}))};return t?a().createElement(Qa(),ho({className:"layertree",map:t,nodeTitleRenderer:e=>{if(!t)return;const r=t.getView(),c=r.getProjection().getUnits()||"m",u=r.getResolution(),m=u?k().getScaleForResolution(u,c):void 0,g=e instanceof ir()&&(0,d.getUid)(e.getSource())?s[(0,d.getUid)(e.getSource())]?.percent:100;return e instanceof p()?a().createElement("div",null,e.get("name")):a().createElement(a().Fragment,null,a().createElement("div",{className:"tree-node-header"},a().createElement(Ja.Z,{className:"loading-indicator",type:"circle",percent:g,format:()=>"",width:16,strokeWidth:20}),a().createElement("span",null,e.get("name")),(e instanceof h()||e instanceof f())&&a().createElement(go,{layer:e,visibleLegendsIds:i,setVisibleLegendsIds:l})),e.get("visible")&&a().createElement("div",{className:"layer-transparency"},a().createElement(ro(),{tooltip:{formatter:e=>`${o("LayerTree.transparency")}: ${e}%`},layer:e})),e.get("visible")&&"WMSTime"===e.get("type")&&a().createElement("div",{className:"layer-time-slider"},a().createElement(co,{layer:e})),e.get("visible")&&i.includes((0,d.getUid)(e))&&a().createElement(to(),{layer:e,errorMsg:o("LayerTree.noLegendAvailable"),extraParams:{scale:m,LEGEND_OPTIONS:"fontAntiAliasing:true;forceLabels:on",TRANSPARENT:!0},headers:e.get("useBearerToken")?{...(0,Le.getBearerTokenHeader)(n?.getKeycloak())}:{}}))},filterFunction:e=>e.getLayers?!e.get("hideInLayerTree"):!(e.getSource&&e.getSource()?.forEachFeature),draggable:!0},e)):a().createElement(a().Fragment,null)},wo=n(75357),bo=n.n(wo),vo=n(85415),Lo={};Lo.styleTagTransform=V(),Lo.setAttributes=U(),Lo.insert=x().bind(null,"head"),Lo.domAPI=I(),Lo.insertStyleElement=z();D()(vo.Z,Lo),vo.Z&&vo.Z.locals&&vo.Z.locals;var So=({showMeasureDistance:e,showMeasureArea:t})=>{const{t:n}=(0,E.useTranslation)(),r=(0,T.useMap)();return r?a().createElement(at(),null,e?a().createElement(bo(),{geodesic:!0,name:"line",map:r,measureType:"line",type:"link",continueLineMsg:n("Measure.clicktodrawline")},a().createElement(_e.FontAwesomeIcon,{icon:We.SoD}),a().createElement("span",{className:"measure-text"},n("Measure.line"))):a().createElement(a().Fragment,null),t?a().createElement(bo(),{geodesic:!0,name:"poly",map:r,measureType:"polygon",type:"link",continuePolygonMsg:n("Measure.clicktodrawarea")},a().createElement(_e.FontAwesomeIcon,{icon:We.ubJ}),a().createElement("span",{className:"measure-text"},n("Measure.area"))):a().createElement(a().Fragment,null)):a().createElement(a().Fragment,null)},ko=n(35818),To={};To.styleTagTransform=V(),To.setAttributes=U(),To.insert=x().bind(null,"head"),To.domAPI=I(),To.insertStyleElement=z();D()(ko.Z,To),ko.Z&&ko.Z.locals&&ko.Z.locals;function Po(){return Po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Po.apply(this,arguments)}const{Panel:Co}=vr.default;var Fo=({...e})=>{const{t:t}=(0,E.useTranslation)(),n=(0,T.useMap)(),o=ie(),i=F(),s=M((e=>e.toolMenu.availableTools)),c=M((e=>e.toolMenu.activeKeys)),u=se(),d=u?.getKeycloak(),[m,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=window.matchMedia("only screen and (max-width: 450px) and (orientation: portrait),only screen and (max-width: 750px) and (orientation: landscape), only screen and (max-width: 580px)"),t=new RegExp("/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/");(e.matches||t.test(window.navigator.userAgent))&&p(!0)}),[]),(0,r.useEffect)((()=>{g.length<1&&(s.includes("default")?f(["measure_tools","draw_tools","feature_info","print","tree","permalink","language_selector"]):f(s))}),[g,s]),(0,r.useEffect)((()=>{c.includes("print")&&c.includes("measure_tools")&&(c.indexOf("print")<c.indexOf("measure_tools")?i((0,kr.wG)(c.filter((e=>"print"!==e)))):i((0,kr.wG)(c.filter((e=>"measure_tools"!==e)))))}),[c,i]);const y=e=>{switch(e){case"measure_tools":return{icon:We.KxN,title:t("ToolMenu.measure"),wrappedComponent:a().createElement(So,{showMeasureDistance:s.includes("default")||s.includes("measure_tools_distance"),showMeasureArea:s.includes("default")||s.includes("measure_tools_area")})};case"draw_tools":return{icon:We.ubJ,title:t("ToolMenu.draw"),wrappedComponent:a().createElement(Oa,{showDrawPoint:s.includes("default")||s.includes("draw_tools_point"),showDrawLine:s.includes("default")||s.includes("draw_tools_line"),showDrawPolygon:s.includes("default")||s.includes("draw_tools_polygon"),showDrawCircle:s.includes("default")||s.includes("draw_tools_circle"),showDrawRectangle:s.includes("default")||s.includes("draw_tools_rectangle"),showDrawAnnotation:s.includes("default")||s.includes("draw_tools_annotation"),showModifyFeatures:s.includes("default")||s.includes("draw_tools_modify"),showUploadFeatures:s.includes("default")||s.includes("draw_tools_upload"),showDownloadFeatures:s.includes("default")||s.includes("draw_tools_download"),showDeleteFeatures:s.includes("default")||s.includes("draw_tools_delete")})};case"feature_info":return{icon:We.kwz,title:t("ToolMenu.featureInfo"),wrappedComponent:a().createElement(qa,{enabled:c.includes("feature_info")})};case"print":return{icon:We.kwI,title:t("ToolMenu.print"),wrappedComponent:n?a().createElement(ha,{active:c.includes("print"),layerBlackList:["react-geo_measure","hoverVectorLayer"]}):a().createElement(a().Fragment,null)};case"tree":return{icon:We.aC2,title:t("ToolMenu.layertree"),wrappedComponent:a().createElement("div",{className:"tree-wrapper"},a().createElement(Eo,null),a().createElement(l.Z,{className:"add-wms-button tool-menu-button",icon:a().createElement(_e.FontAwesomeIcon,{icon:We.r8p}),onClick:()=>i((0,A.$Z)())},t("ToolMenu.addWms")),d&&pe().geoserver?.upload?.authorizedRoles?.some((e=>d.hasResourceRole(e,d.clientId)))&&a().createElement(l.Z,{className:"upload-data-button tool-menu-button",icon:a().createElement(_e.FontAwesomeIcon,{icon:We.cf$}),onClick:()=>i((0,Tr.$Z)())},t("ToolMenu.uploadData")))};case"permalink":return{icon:We.M6U,title:t("Permalink.title"),wrappedComponent:a().createElement(zr,null)};case"language_selector":return{icon:We.BCn,title:t("ToolMenu.languageSelect"),wrappedComponent:a().createElement(Mr,null)}}};return a().createElement("div",{className:"tool-menu "+(m?"collapsed":"")},a().createElement(vr.default,Po({expandIconPosition:"end",activeKey:c,destroyInactivePanel:!0,onChange:e=>{p(!1),i((0,kr.wG)(Sr()(e)))}},e),(()=>{const e=[];return g.forEach((t=>{const n=y(t);if(!n)return;const{icon:r,title:o,wrappedComponent:i}=n,l=a().createElement(Co,{className:t,header:a().createElement(a().Fragment,null,r?a().createElement(_e.FontAwesomeIcon,{icon:r}):void 0,a().createElement("span",null,o)),key:t},i);e.push(l)})),o&&o.forEach((n=>{if((r=n.integration)&&"tool-menu"===r.placement){const{key:r,wrappedComponent:o,integration:{placement:i,label:l="Plugin",insertionIndex:s,icon:c,...u}}=n;e.splice(s||0,0,a().createElement(Co,Po({header:a().createElement(a().Fragment,null,c?a().createElement(_e.FontAwesomeIcon,{icon:c}):void 0,a().createElement("span",null,t(l))),key:r},u),a().createElement(o,null)))}var r})),e})()),a().createElement(yn.Z,{placement:"right",title:t(m?"ToolMenu.expand":"ToolMenu.collapse")},a().createElement(l.Z,{className:"collapse-btn",icon:m?a().createElement(_e.FontAwesomeIcon,{icon:We._tD}):a().createElement(_e.FontAwesomeIcon,{icon:We.A35}),onClick:()=>{i((0,kr.wG)([])),p(!m)}})))},Zo=n(36449),Mo=n(28837),Ao=n(65352),Oo={};Oo.styleTagTransform=V(),Oo.setAttributes=U(),Oo.insert=x().bind(null,"head"),Oo.domAPI=I(),Oo.insertStyleElement=z();D()(Ao.Z,Oo),Ao.Z&&Ao.Z.locals&&Ao.Z.locals;function Do(){return Do=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Do.apply(this,arguments)}const{Dragger:No}=Zo.default;var Io=({...e})=>{const[t,n]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[s,c]=(0,r.useState)(!1),u=M((e=>e.uploadDataModal.visible)),d=M((e=>e.user)),m=F(),g=(0,T.useMap)(),f=se(),{t:y}=(0,E.useTranslation)(),h=e=>({0:null,1:"org.locationtech.jts.geom.Point",3:"org.locationtech.jts.geom.LineString",5:"org.locationtech.jts.geom.Polygon",8:"org.locationtech.jts.geom.MultiPoint",11:"org.locationtech.jts.geom.Point",13:"org.locationtech.jts.geom.LineString",15:"org.locationtech.jts.geom.Polygon",18:"org.locationtech.jts.geom.MultiPoint",21:"org.locationtech.jts.geom.Point",23:"org.locationtech.jts.geom.LineString",25:"org.locationtech.jts.geom.Polygon",28:"org.locationtech.jts.geom.MultiPoint",31:null}[e]),w=e=>{switch(e){case"C":return"java.lang.String";case"D":return"java.util.Date";case"N":return"java.lang.Long";case"F":return"java.lang.Double";case"L":return"java.lang.Boolean";default:return null}};return a().createElement(i.Z,Do({className:"upload-data-modal",title:y("UploadDataModal.title"),open:u,onCancel:()=>{n(""),l(""),m((0,Tr.Cp)())},width:600,footer:!1},e),o&&a().createElement(de.Z,{message:o,closable:!0,type:"success"}),t&&a().createElement(de.Z,{message:t,closable:!0,type:"error"}),a().createElement(sr.Z,{spinning:s},a().createElement(No,{customRequest:async e=>{const{onError:t,onSuccess:n,file:r}=e,a=r.name.split("."),o=r.type,i=pe().geoserver?.base||"/geoserver",l=pe().geoserver?.upload?.workspace||"SHOGUN",s=`${a[0]}_${Date.now()}`.toUpperCase(),c={file:r,baseUrl:i,workspace:l,storeName:s,layerName:s};try{"image/tiff"===o&&await(async e=>{const{baseUrl:t,workspace:n,storeName:r,layerName:a,file:o}=e,i=`${t}/rest/workspaces/${n}/coveragestores/${r}/file.geotiff?configure=none`;if(!(await fetch(i,{method:"PUT",headers:{...(0,Le.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"image/tiff"},body:o})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}));const l=`${t}/rest/workspaces/${n}/coveragestores/${r}/coverages`;if(!(await fetch(l,{method:"POST",headers:{...(0,Le.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/json"},body:JSON.stringify({coverage:{enabled:!0,name:a,nativeName:a,title:a,keywords:{string:["User upload",`Uploaded by ${d.providerDetails?.username}`]}}})})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}))})(c),"application/zip"===o&&await(async e=>{const{baseUrl:t,workspace:n,storeName:r,layerName:a,file:o}=e,i=await Mo.Uv.load(o);let l="",s={attribute:[]};if(1!==Object.entries(i).length)throw new Error(y("UploadDataModal.error.zipContent"));Object.entries(i).forEach((([e,t])=>{l=e;const n=t.parse("dbf",{properties:!1});s.attribute=n.fields.map((e=>({name:e.name,minOccurs:0,maxOccurs:1,nillable:!0,binding:w(e.type),length:e.length})));const r=t.parse("shx");s.attribute.push({name:"the_geom",minOccurs:0,maxOccurs:1,nillable:!0,binding:h(r.header.type)})}));const c=`${t}/rest/workspaces/${n}/datastores/${r}/file.shp?configure=none`;if(!(await fetch(c,{method:"PUT",headers:{...(0,Le.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/zip"},body:o})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}));const u=`${t}/rest/workspaces/${n}/datastores/${r}/featuretypes`;if(!(await fetch(u,{method:"POST",headers:{...(0,Le.getBearerTokenHeader)(f?.getKeycloak()),"Content-Type":"application/json"},body:JSON.stringify({featureType:{enabled:!0,name:a,nativeName:l,title:a,attributes:s,keywords:{string:["User upload",`Uploaded by ${d.providerDetails?.username}`]}}})})).ok)throw new Error(y("UploadDataModal.error.general",{fileName:o.name}))})(c),n&&n({baseUrl:i,workspace:l,layerName:s})}catch(e){t&&t({name:"UploadError",message:e instanceof Error?e.message:y("UploadDataModal.error.general",{fileName:r.name})})}},accept:"image/tiff,application/zip",maxCount:1,showUploadList:!1,beforeUpload:e=>{const t=pe().geoserver?.upload?.limit||2e8,r=e.type,a=e.size;if(n(""),l(""),a>t)return n(y("UploadDataModal.error.maxSize",{maxSize:t/1e6})),!1;const o=["application/zip","image/tiff"];return!!o.includes(r)||(n(y("UploadDataModal.error.supportedFormats",{supportedFormats:o.join(", ")})),!1)},onChange:async e=>{const t=e.file;if("uploading"===t.status&&c(!0),"done"===t.status){if(!f||!t.response)return;const e={name:t.response.layerName,type:"TILEWMS",clientConfig:{hoverable:!0},sourceConfig:{url:`${t.response.baseUrl}/ows?`,layerNames:`${t.response.workspace}:${t.response.layerName}`,useBearerToken:!0}},n=new(re())({client:f}).parseTileLayer(e);n.set("layerConfig",e),n.set("isUploadedLayer",!0),n.set("groupName",y("UploadDataModal.uploadedDataFolder")),(e=>{if(!g)return;const t=y("UploadDataModal.uploadedDataFolder");let n=k().getLayerByName(g,t);if(!n){n=new(p())({layers:[],properties:{name:t}});const e=g.getLayerGroup().getLayers();e.insertAt(e?.getLength()||0,n)}n.getLayers().getArray().includes(e)||n.getLayers().push(e)})(n),l(y("UploadDataModal.success",{fileName:t.name,layerName:t.response.layerName})),c(!1)}else"error"===t.status&&(c(!1),J().error(t.error),t.error&&t.error.message?n(t.error.message):n(y("UploadDataModal.error.general",{fileName:t.name})))}},a().createElement("p",{className:"ant-upload-drag-icon"},a().createElement(_e.FontAwesomeIcon,{icon:We.cf$})),a().createElement("p",{className:"ant-upload-text"},y("UploadDataModal.description")),a().createElement("p",{className:"ant-upload-hint"},y("UploadDataModal.hint")))))},jo=n(65705),xo={};xo.styleTagTransform=V(),xo.setAttributes=U(),xo.insert=x().bind(null,"head"),xo.domAPI=I(),xo.insertStyleElement=z();D()(jo.Z,xo),jo.Z&&jo.Z.locals&&jo.Z.locals;function Ro(){return Ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ro.apply(this,arguments)}const Uo=({...e})=>((0,r.useEffect)((()=>{const e=document.querySelectorAll(".loadmask")[0];e&&e.classList.add("loadmask-hidden")}),[]),a().createElement("div",Ro({className:"App"},e),a().createElement(rr,null),a().createElement(ue,null),a().createElement(Fo,null),a().createElement(an,null),a().createElement(K,null),a().createElement(Io,null),a().createElement(Gt,null),a().createElement(br,null)));var Bo=Uo},30845:function(e,t,n){"use strict";n.r(t);var r=n(96985),a=n.n(r),o=n(38648),i=n(88182),l=n(76772),s=n(17699),c=n(67502),u=n(87617),d=n.n(u),m=n(6767),p=n.n(m),g=n(15059),f=n(94671),y=n(8266),h=n(9479),E=n.n(h),w=n(49862),b=n.n(w),v=n(22901),L=n.n(v),S=n(90426),k=n(14447),T=n.n(k),P=n(28523),C=n.n(P),F=n(83539),Z=n.n(F),M=n(20563),A=n(47139),O=n(12038),D=n.n(O),N=n(92212),I=n.n(N),j=n(29577),x=n.n(j),R=n(73161),U=n.n(R),B=n(12665),z=n.n(B),$=n(76688),V=n(77257),W=n(35895),_=n(97168);const G=(0,_.oM)({name:"appInfo",initialState:{authorities:[],buildTime:"",commitHash:"",userId:-1,version:""},reducers:{setAppInfo(e,t){return t.payload}}}),{setAppInfo:K}=G.actions;var H=G.reducer;const Y=(0,_.oM)({name:"description",initialState:"",reducers:{setDescription:(e,t)=>t.payload}}),{setDescription:q}=Y.actions;var J=Y.reducer,X=n(61465);const Q={contact:"https://www.terrestris.de/de/kontakt/",imprint:"https://www.terrestris.de/de/impressum/",privacy:"https://www.terrestris.de/de/datenschutzerklaerung/"},ee=(0,_.oM)({name:"legal",initialState:Q,reducers:{setLegal:(e,t)=>({contact:t.payload.contact||Q.contact,imprint:t.payload.imprint||Q.imprint,privacy:t.payload.privacy||Q.privacy})}}),{setLegal:te}=ee.actions;var ne=ee.reducer;const re=(0,_.oM)({name:"logoPath",initialState:"./shogun_logo.png",reducers:{setLogoPath:(e,t)=>t.payload}}),{setLogoPath:ae}=re.actions;var oe=re.reducer;const ie=(0,_.oM)({name:"searchEngines",initialState:["nominatim"],reducers:{setSearchEngines:(e,t)=>t.payload}}),{setSearchEngines:le}=ie.actions;var se=ie.reducer,ce=n(14890),ue=n(20908),de=n(68781),me=n(6049),pe=n(28728),ge=n(21800);const fe=(0,_.oM)({name:"title",initialState:"SHOGun Client",reducers:{setTitle:(e,t)=>t.payload}}),{setTitle:ye}=fe.actions;var he=fe.reducer,Ee=n(76712),we=n(63221);const be=(0,_.oM)({name:"user",initialState:{},reducers:{setUser(e,t){return t.payload}}}),{setUser:ve}=be.actions;var Le=be.reducer;const Se=e=>(0,ce.UY)({addLayerModal:ue.ZP,appInfo:H,description:J,editFeature:X.ZP,editFeatureDrawerOpen:de.ZP,layerDetailsModal:me.ZP,legal:ne,logoPath:oe,print:pe.ZP,selectedFeatures:ge.ZP,title:he,toolMenu:Ee.ZP,uploadDataModal:we.ZP,searchEngines:se,user:Le,...e}),ke=(0,_.xC)({reducer:Se()});var Te=n(93379),Pe=n.n(Te),Ce=n(7795),Fe=n.n(Ce),Ze=n(90569),Me=n.n(Ze),Ae=n(3565),Oe=n.n(Ae),De=n(19216),Ne=n.n(De),Ie=n(44589),je=n.n(Ie),xe=n(90978),Re={};Re.styleTagTransform=je(),Re.setAttributes=Oe(),Re.insert=Me().bind(null,"head"),Re.domAPI=Fe(),Re.insertStyleElement=Ne();Pe()(xe.Z,Re),xe.Z&&xe.Z.locals&&xe.Z.locals;const Ue=a().lazy((()=>Promise.all([n.e(987),n.e(592),n.e(51)]).then(n.bind(n,46098)))),Be=new(z())({url:d().shogunBase||"/"}),ze=new(U())({client:Be}),$e=e=>{switch(e){case"en":default:return c.Z;case"de":return s.Z}},Ve=async e=>{const t=await ze.parseMapView(e,{constrainOnlyCenter:!0});let n;const r=e.clientConfig?.mapView.projection,a=e.clientConfig?.mapView;if(r&&a?.extent&&4===a.extent.length){const e=(0,S.fromLonLat)([a.extent[0],a.extent[1]],r),t=(0,S.fromLonLat)([a.extent[2],a.extent[3]],r);n=[e[0],e[1],t[0],t[1]]}n&&t.set("extent",n),t.setConstrainResolution(!0);const o=await ze.parseLayerTree(e,r);return new(L())({view:t,layers:o,controls:(0,y.defaults)({zoom:!1})})},We=()=>{const e=new(b())({source:new(T())});e.set("name","OpenStreetMap");const t=new(b())({opacity:.5,visible:!0,source:new(C())({url:"https://gibs.earthdata.nasa.gov/wms/epsg3857/best/wms.cgi",projection:"EPSG:3857",params:{LAYERS:"MERRA2_2m_Air_Temperature_Assimilated_Monthly"}})});t.setProperties({name:"2-meter Air Temperature, Assimilated (Monthly, MERRA2)",hoverable:!0});const n=new(E())({layers:[t]});n.set("name","NASA Earth Observations");const r=new(E())({layers:[e]});r.set("name","Background");const a=(0,S.fromLonLat)([0,40],"EPSG:3857");return new(L())({view:new(Z())({center:a,zoom:0}),layers:[r,n],controls:(0,y.defaults)({zoom:!1})})},_e=async(e,t,r)=>{await n.I("default"),await new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.type="text/javascript",r.async=!0,r.onload=()=>{r.parentElement?.removeChild(r),e()},r.onerror=e=>{r.parentElement?.removeChild(r),n(e)},document.head.appendChild(r)}));const a=window[e];await a.init(n.S.default);const o=[];for(const e of r){const t=(await a.get(e))();o.push(t)}return o},Ge=(e,t)=>"string"==typeof e?t===e:e instanceof RegExp&&e.test(t);(async()=>{try{const e=await(async()=>{const e=d().keycloak?.enabled,t=d().keycloak?.onLoadAction,n=d().keycloak?.host,r=d().keycloak?.realm,a=d().keycloak?.clientId;if(!e)return;if(!n)throw new Error("Neither config key keycloak.host nor environment KEYCLOAK_HOST is set");if(!r)throw new Error("Neither config key keycloak.realm nor environment KEYCLOAK_REALM is set");if(!a)throw new Error("Neither config key keycloak.clientId nor environment KEYCLOAK_CLIENT_ID is set");const o=new f.Z({url:`${n}`,realm:r,clientId:a});return o.onTokenExpired=async()=>{try{await o.updateToken(0)}catch(e){D().error("Error while refreshing the access token: ",e)}},await o.init({onLoad:t,checkLoginIframe:!1}),o})();e&&Be.setKeycloak(e);const t=await(async()=>{const e=I().getQueryParam(window.location.href,"applicationId");if(e)try{D().info(`Loading application with ID ${e}`);const t=await Be.application().findOne(e);return D().info(`Successfully loaded application with ID ${e}`),t}catch(t){D().error(`Error while loading application with ID ${e}: ${t}`),o.Z.error({message:W.Z.t("Index.applicationLoadErrorMessage"),description:W.Z.t("Index.applicationLoadErrorDescription",{applicationId:e}),duration:0})}else D().info("No application ID given, can't load any configuration.")})(),n=t?.clientConfig?.defaultLanguage;n||W.Z.use(g.Z),await W.Z.init(W.u),n&&W.Z.changeLanguage(n);const r=(e=>{const t={"--primaryColor":"#59666C","--secondaryColor":"#70B3BE","--complementaryColor":"#FFFFFF"};return e?(e.primaryColor&&(t["--primaryColor"]=e.primaryColor),e.secondaryColor&&(t["--secondaryColor"]=e.secondaryColor),e.secondaryColor&&(t["--complementaryColor"]=e.complementaryColor),t):t})(t?.clientConfig?.theme);i.ZP.config({theme:{primaryColor:p()(r["--primaryColor"]).isLight()?p()(r["--primaryColor"]).darken(.5).hexa():r["--primaryColor"]}}),Object.keys(r).forEach((e=>{document.body.style.setProperty(e,r[e])})),ke.subscribe((()=>{document.title=ke.getState().title})),(async e=>{if(e){if(e.name&&ke.dispatch(ye(e.name)),e.clientConfig?.description&&ke.dispatch(q(e.clientConfig?.description)),e.clientConfig?.legal&&ke.dispatch(te(e.clientConfig.legal)),e?.clientConfig?.theme?.logoPath&&ke.dispatch(ae(e.clientConfig.theme.logoPath)),ke.dispatch(le(["nominatim"])),e.toolConfig&&e.toolConfig.length>0){const t=[];e.toolConfig.map((e=>{e.config.visible&&"search"!==e.name&&t.push(e.name),"search"===e.name&&e.config.engines.length>0&&ke.dispatch(le(e.config.engines))})),ke.dispatch((0,Ee.nn)(t))}}else D().info("No application configuration provided, the default store will be loaded")})(t);const l=await(async()=>{try{D().info("Loading application info");const e=await Be.info().getAppInfo();return D().info("Successfully loaded application info"),e}catch(e){D().error("Error while loading application info: ",e)}})();(async e=>{e&&ke.dispatch(K(e))})(l);(async e=>{e&&ke.dispatch(ve(e))})(await(async e=>{if(e)try{D().info(`Loading user with ID ${e}`);const t=await Be.user().findOne(e);return D().info(`Successfully loaded user with ID ${e}`),t}catch(t){D().error(`Error while loading user with ID ${e}: `,t)}else D().info("No user ID given, can't load it's details.")})(l?.userId));const s=Be?.getKeycloak()?.tokenParsed?.realm_access?.roles;let c=["NONE"];s&&d().featureEditRoles&&(c=((e,t)=>{const{authorizedRolesForCreate:n,authorizedRolesForUpdate:r,authorizedRolesForDelete:a}=t,o=[];for(const t of e)n?.some((e=>Ge(e,t)))&&o.push("CREATE"),r?.some((e=>Ge(e,t)))&&o.push("UPDATE"),a?.some((e=>Ge(e,t)))&&o.push("DELETE");return o})(s,d().featureEditRoles)),ke.dispatch((0,X.Y3)(c));const u=await(async e=>e?await Ve(e):(D().info("No application configuration provided, the default map will be loaded"),We()))(t),m=await(async e=>{if(!d().plugins||0===d().plugins.length)return D().info("No plugins found"),[];D().info("Loading plugins");const t=[];for(const n of d().plugins){const r=n.name,o=n.resourcePath,i=n.exposedPaths;if(!r)return D().error("Required plugin configuration 'name' is not set"),t;if(!o)return D().error("Required plugin configuration 'resourcePath' is not set"),t;if(!i)return D().error("Required plugin configuration 'exposedPaths' is not set"),t;let l;D().info(`Loading plugin ${r} (with exposed paths ${i.join(" and ")}) from ${o}`);try{l=await _e(r,o,i),D().info(`Successfully loaded plugin ${r}`)}catch(e){return D().error(`Could not load plugin ${r}:`,e),t}l.forEach((n=>{const r=n.default,o=r.component;if(r.wrappedComponent=()=>a().createElement(o,{map:e,client:Be}),r.i18n&&Object.entries(r.i18n).forEach((e=>{const t=e[0],n=e[1].translation;W.Z.addResourceBundle(t,"translation",n,!0,!0)})),r.reducers){const e=Se(r.reducers);ke.replaceReducer(e)}t.push(r)}))}return t})(u);(0,M.render)(a().createElement(a().StrictMode,null,a().createElement(a().Suspense,{fallback:a().createElement("span",null)},a().createElement(V.rA,{client:Be},a().createElement($.ol,{plugins:m},a().createElement(i.ZP,{locale:$e(W.Z.language)},a().createElement(A.Provider,{store:ke},a().createElement(x().Provider,{value:u},a().createElement(Ue,null)))))))),document.getElementById("app"))}catch(e){const t=document.querySelectorAll(".loadmask")[0];t&&t.classList.add("loadmask-hidden"),D().error(e),(0,M.render)(a().createElement(a().StrictMode,null,a().createElement(l.Z,{className:"error-boundary",message:W.Z.t("Index.errorMessage"),description:W.Z.t("Index.errorDescription"),type:"error",showIcon:!0})),document.getElementById("app"))}})()},76688:function(e,t,n){"use strict";n.d(t,{ol:function(){return i}});var r=n(96985),a=n.n(r);const o=a().createContext([]),i=({plugins:e,children:t})=>a().createElement(o.Provider,{value:e},t);t.ZP=o},77257:function(e,t,n){"use strict";n.d(t,{rA:function(){return i}});var r=n(96985),a=n.n(r);const o=a().createContext(null),i=({client:e,children:t})=>a().createElement(o.Provider,{value:e},t);t.ZP=o},35895:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},u:function(){return o}});var r=n(36609),a=n(16217);const o={resources:{de:{translation:{ApplicationInfo:{title:"Über",clientVersionTitle:"Client Version",backendVersionTitle:"Backend Version"},AddLayerModal:{addSelectedLayers:"Auswahl hinzufügen",addAllLayers:"Alle hinzufügen",inputPlaceholder:"WMS GetCapabilities URL angeben…",externalWmsFolder:"Externe Themen",title:"WMS hinzufügen",columnTitle:"Name",errorMessage:"Fehler",errorDescription:"Das Capabilities Dokument konnte nicht geladen werden, bitte prüfen Sie die URL",version:"Version"},BasicMapComponent:{processedLayersFolder:"Prozessierte Layer"},Permalink:{title:"Teilen",twitterTooltip:"Link via Twitter teilen",whatsAppTooltip:"Link via WhatsApp teilen",mailTooltip:"Link via Mail teilen",copyTooltip:"Link in die Zwischenablage kopieren",copiedToClipboard:"Link wurde in Zwischenablage kopiert",copyToClipboardFailed:"Link konnte nicht kopiert werden"},Measure:{title:"Messen",line:"Entfernung",area:"Fläche",clicktodrawline:"Zum Zeichnen einer Linie klicken",clicktodrawarea:"Zum Zeichnen einer Fläche klicken"},Draw:{point:"Punkt",line:"Linie",polygon:"Polygon",circle:"Kreis",rectangle:"Rechteck",text:"Anmerkung",modify:"Bearbeitung",upload:"Hochladen",delete:"Löschen",export:"Exportieren"},StylingDrawer:{pickColor:"Farbschema bearbeiten",title:"Farbschema bearbeiten"},FeatureInfo:{usageHint:"Klicken Sie in die Karte, um Detailinformationen zu erhalten."},LayerTree:{transparency:"Transparenz",noLegendAvailable:"Keine Legende verfügbar"},LayerTreeContextMenu:{layerZoomToExtent:"Auf Layerausdehnung zoomen",extentError:"Konnte nicht auf die Layerausdehnung zoomen",removeLayer:"Layer entfernen",showLegend:"Legende anzeigen",hideLegend:"Legende ausblenden",downloadLayer:"Layer exportieren ({{formatName}})",editLayer:"Layer bearbeiten",layerDetails:"Eigenschaften"},LayerDetailsModal:{title:"Eigenschaften des Layers {{layerName}}",internalConfigurationButtonTooltip:"Interne Konfiguration anzeigen",internalConfigurationButtonTooltipPressed:"Interne Konfiguration verbergen"},LayerDetails:{noDataPlaceholder:"-",layerNameLabel:"Name",layerTitleLabel:"Titel",serviceAbstractLabel:"Service Beschreibung",abstractLabel:"Beschreibung",accessConstraintsLabel:"Nutzungseinschränkungen",capabilitiesUrlLabel:"GetCapabilities URL",contactLabel:"Kontakt",minScaleLabel:"Min. Maßstab",maxScaleLabel:"Max. Maßstab",bboxLabel:"Bounding Box",errorMessage:"Fehler beim Laden der Layer Capabilities"},LayerConfiguration:{errorMessage:"Fehler beim Laden der internen Konfiguration"},ToolMenu:{expand:"Menu ausklappen",collapse:"Menu einklappen",measure:"Messen",draw:"Zeichnen",featureInfo:"Karteninhalte abfragen",addWms:"WMS hinzufügen",uploadData:"Daten hochladen",print:"Export",layertree:"Karten",languageSelect:"Sprachauswahl"},PrintForm:{title:"Kartentitel",initialTitle:"Druckausgabe",titlePlaceholder:"Bitte geben Sie einen Titel ein",comment:"Bemerkung",commentPlaceholder:"Bitte geben Sie einen Kommentar ein",layout:"Vorlage",dpi:"Auflösung",format:"Format",scale:"Maßstab",downloadBtnText:"Ausdruck erzeugen",printJobErrorMsg:"Der Kartenausdruck konnte nicht erzeugt werden",initErrorMsg:"Der Kartendruck Generator konnte nicht initialisiert werden.",outputFormatPlaceholder:"Bitte wählen Sie ein Ausgabeformat aus",resolutionPlaceholder:"Bitte wählen Sie eine Ausgabequalität aus",managerErrorMessage:"Fehler bei der Initialisierung der Export-Engine"},Footer:{refSystem:"Bezugssystem",scale:"Maßstab",mousePosition:"Mausposition",imprint:"Impressum",contact:"Kontakt",privacypolicy:"Datenschutz"},Index:{applicationLoadErrorMessage:"Fehler beim Laden der Applikation",applicationLoadErrorDescription:"Die Applikation mit der ID {{applicationId}} konnte nicht geladen werden. Die Standardkonfiguration wird stattdessen geladen.",errorMessage:"Fehler beim Laden der Applikation",errorDescription:"Aufgrund eines unerwarteten Fehlers konnte die Applikation nicht geladen werden. Bitte laden Sie die Seite erneut."},Nominatim:{placeholder:"Ortsname, Straßenname, Stadtteilname, POI usw."},UserMenu:{settingsMenuTitle:"Profil bearbeiten",infoMenuTitle:"Über",logoutMenuTitle:"Ausloggen",loginMenuTitle:"Anmelden"},WmsTimeSlider:{title:"Zeitlicher Bezug",default:"Keine Daten gefunden"},UploadDataModal:{title:"Daten hochladen",uploadedDataFolder:"Hochgeladene Daten",description:"Klicken Sie oder ziehen Sie die Datei zum Hochladen in diesen Bereich",hint:"Unterstützte Dateiformate sind Shapefile (gebündelt als *.zip) und GeoTIFF",success:"Datei {{fileName}} wurde erfolgreich geladen und der Layer {{layerName}} erstellt",error:{general:"Fehler beim Hochladen der Datei {{fileName}}",maxSize:"Der Upload überschreitet das Limit von {{maxSize}} MB",supportedFormats:"Der Dateityp ist nicht unterstützt ({{supportedFormats}})",zipContent:"Mehrere Geodatensätze innerhalb eines Archivs sind nicht unterstützt"}},MultiSearch:{searchInViewBox:"Im aktuellen Kartenausschnitt suchen",searchData:"Layerdaten durchsuchen",searchNominatim:"Ortssuche (Nominatim)",nominatimTitle:"Ortssuche",searchPlaceholder:"Orts- und Datensuche…"},EditFeatureDrawer:{featureEditor:"Objekteditor",noLayerFoundError:"Kein passender Layer gefunden - das Editieren ist nicht möglich.",isFeatureLockedErrorMsg:"Das ausgewählte Objekt wird bereits in einer anderen Sitzung bearbeitet.",closeDrawerWarnTitle:"Wollen Sie wirklich fortfahren?",closeDrawerWarnContent:"Dadurch werden alle nicht gespeicherten Änderungen an dem Objekt verworfen."},EditFeatureSwitch:{usageHint:"Objekt zum Editieren auf der Karte auswählen oder…",limitedUsageHint:"Zum Editieren bitte eine Objekt auf der Karte auswählen",createFeature:"Neues Objekt erstellen"},EditFeatureFullForm:{saveErrorMsg:"Das Objekt konnte nicht gespeichert werden",deleteErrorMsg:"Das Objekt konnte nicht gelöscht werden"},EditFeatureGeometryToolbar:{draw:"Neue Geometrie zeichnen",edit:"Geometrie editieren",delete:"Geometrie löschen",undo:"Rückgängig",redo:"Wiederherstellen"},ResetButton:{title:"Zurücksetzen"},SaveButton:{title:"Speichern"},DeleteButton:{title:"Objekt löschen",confirm:"Das Objekt wird vollständig gelöscht. Fortfahren?"},EditFeatureButton:{title:"Objekt bearbeiten"},FeaturePropertyGrid:{copyAsGeoJson:"Als GeoJSON kopieren (inkl. Geometrie)",copyAsObject:"Als Objekt kopieren (nur angezeigte Werte)",key:"Name",value:"Wert"}}},en:{translation:{ApplicationInfo:{title:"About",clientVersionTitle:"Client version",backendVersionTitle:"Backend version"},AddLayerModal:{addSelectedLayers:"Add selected",addAllLayers:"Add all",inputPlaceholder:"Enter a WMS GetCapabilities URL…",externalWmsFolder:"External layers",title:"Add WMS",columnTitle:"Name",errorMessage:"Error",errorDescription:"Could not load the provided Capabilities document, please check the validity of the URL",version:"Version"},BasicMapComponent:{processedLayersFolder:"Processed layers"},Permalink:{title:"Share",twitterTooltip:"Share link via Twitter",whatsAppTooltip:"Share link via WhatsApp",mailTooltip:"Share link via Mail",copyTooltip:"Copy link to Clipboard",copiedToClipboard:"Copied to clipboard",copyToClipboardFailed:"Could not copy link to clipboard"},Measure:{title:"Measure",line:"Distance",area:"Area",clicktodrawline:"Click to draw line",clicktodrawarea:"Click to draw area"},Draw:{point:"Point",line:"Line",polygon:"Polygon",circle:"Circle",rectangle:"Rectangle",text:"Annotation",modify:"Edit",upload:"Upload",delete:"Delete",export:"Export"},StylingDrawer:{pickColor:"Modify color scheme",title:"Modify color scheme"},FeatureInfo:{usageHint:"Click on the map to get details about the clicked coordinate."},LayerTree:{transparency:"Transparency",noLegendAvailable:"No legend available"},LayerTreeContextMenu:{layerZoomToExtent:"Zoom to layer extent",extentError:"Could not zoom to layer extent",removeLayer:"Remove layer",showLegend:"Show legend",hideLegend:"Hide legend",downloadLayer:"Export layer as {{formatName}}",editLayer:"Edit layer",layerDetails:"Properties"},LayerDetailsModal:{title:"Properties of layer {{layerName}}",internalConfigurationButtonTooltip:"Show internal configuration",internalConfigurationButtonTooltipPressed:"Hide internal configuration"},LayerDetails:{noDataPlaceholder:"-",layerNameLabel:"Name",layerTitleLabel:"Title",serviceAbstractLabel:"Service abstract",abstractLabel:"Abstract",accessConstraintsLabel:"Access constraints",capabilitiesUrlLabel:"GetCapabilities URL",contactLabel:"Contact",minScaleLabel:"Min. scale",maxScaleLabel:"Max. scale",bboxLabel:"Bounding box",errorMessage:"Error while loading the layer capabilities"},LayerConfiguration:{errorMessage:"Error while loading the internal configuration"},ToolMenu:{expand:"Expand",collapse:"Collapse",measure:"Measure",draw:"Draw",featureInfo:"Query map features",addWms:"Add WMS",uploadData:"Upload data",print:"Export",layertree:"Maps",languageSelect:"Language selector"},PrintForm:{title:"Title",initialTitle:"Title",titlePlaceholder:"Please input a title…",comment:"Comment",commentPlaceholder:"Please enter a comment…",layout:"Layout",dpi:"Resolution",format:"Format",scale:"Scale",downloadBtnText:"Create print",printJobErrorMsg:"Could not generate PDF output",initErrorMsg:"PDF Generator could not be initialized",outputFormatPlaceholder:"Please select an output format",resolutionPlaceholder:"Please select an output quality",managerErrorMessage:"Error while initializing the export engine"},Footer:{refSystem:"Reference system",scale:"Scale",mousePosition:"Mouse position",imprint:"Imprint",contact:"Contact",privacypolicy:"Privacy"},Index:{applicationLoadErrorMessage:"Error while loading the application",applicationLoadErrorDescription:"The application with ID {{applicationId}} could not be loaded correctly. You're seeing the default application configuration.",errorMessage:"Error while loading the application",errorDescription:"An unexpected error occured while loading the application. Please try to reload the page."},Nominatim:{placeholder:"Place name, street name, district name, POI, etc."},UserMenu:{settingsMenuTitle:"Edit profile",infoMenuTitle:"About",logoutMenuTitle:"Logout",loginMenuTitle:"Login"},WmsTimeSlider:{title:"Time reference",default:"No data found"},UploadDataModal:{title:"Upload data",uploadedDataFolder:"Uploaded data",description:"Click or drag file to this area to upload",hint:"Supported file formats are Shapefile (bundled as *.zip) and GeoTIFF",success:"Successfully uploaded file {{fileName}} and created layer {{layerName}}",error:{general:"Error while uploading file {{fileName}}",maxSize:"The file exceeds the upload limit of {{maxSize}} MB",supportedFormats:"The given file type does not match the supported ones ({{supportedFormats}})",zipContent:"Multiple geodatasets within one archive are not supported"}},MultiSearch:{searchInViewBox:"Search in current extent",searchData:"Search layer data",searchNominatim:"Search nominatim",nominatimTitle:"Nominatim",searchPlaceholder:"Address and data search…"},EditFeatureDrawer:{featureEditor:"Feature editor",noLayerFoundError:"No layer found - the editing is not possible.",isFeatureLockedErrorMsg:"The selected feature is already being edited in another session.",closeDrawerWarnTitle:"Do you really want to quit?",closeDrawerWarnContent:"This will discard any unsaved changes to the feature."},EditFeatureSwitch:{usageHint:"Select an existing feature for editing on the map or…",limitedUsageHint:"To edit please select an object on the map",createFeature:"Create new feature"},EditFeatureFullForm:{saveErrorMsg:"Error while saving the feature",deleteErrorMsg:"Error while deleting the feature"},EditFeatureGeometryToolbar:{draw:"Draw new geometry",edit:"Edit geometry",delete:"Delete geometry",undo:"Undo",redo:"Redo"},ResetButton:{title:"Reset"},SaveButton:{title:"Save"},DeleteButton:{title:"Delete feature",confirm:"The feature will be completely deleted. Proceed?"},EditFeatureButton:{title:"Edit feature"},FeaturePropertyGrid:{copyAsGeoJson:"Copy as GeoJSON (incl. geometry)",copyAsObject:"Copy as object (displayed values only)",key:"Name",value:"Value"}}}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},returnNull:!1};r.ZP.use(a.initReactI18next),r.ZP.options=o;var i=r.ZP},21302:function(e,t,n){Promise.all([n.e(987),n.e(592),n.e(901)]).then(n.bind(n,30845))},20908:function(e,t,n){"use strict";n.d(t,{$Z:function(){return a},Cp:function(){return o}});const r=(0,n(97168).oM)({name:"addLayerModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:a,hide:o,toggle:i}=r.actions;t.ZP=r.reducer},61465:function(e,t,n){"use strict";n.d(t,{Y3:function(){return l},hr:function(){return o},mc:function(){return i},vN:function(){return a}});const r=(0,n(97168).oM)({name:"editFeature",initialState:{layerId:null,feature:null,userEditMode:["NONE"]},reducers:{setLayerId(e,t){e.layerId=t.payload},setFeature(e,t){e.feature=t.payload},reset(e){e.layerId=null,e.feature=null},setUserEditMode(e,t){e.userEditMode=t.payload}}}),{setLayerId:a,setFeature:o,reset:i,setUserEditMode:l}=r.actions;t.ZP=r.reducer},68781:function(e,t,n){"use strict";n.d(t,{$Z:function(){return a},Cp:function(){return o}});const r=(0,n(97168).oM)({name:"editFeatureDrawerOpen",initialState:!1,reducers:{show(){return!0},hide(){return!1},toggle(e){return!e}}}),{show:a,hide:o,toggle:i}=r.actions;t.ZP=r.reducer},6049:function(e,t,n){"use strict";n.d(t,{$Z:function(){return o},Cp:function(){return i},uF:function(){return a}});const r=(0,n(97168).oM)({name:"layerDetailsModal",initialState:{visible:!1},reducers:{setLayer(e,t){e.layerId=t.payload},show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{setLayer:a,show:o,hide:i,toggle:l}=r.actions;t.ZP=r.reducer},28728:function(e,t,n){"use strict";n.d(t,{eV:function(){return l}});const r=(0,n(97168).oM)({name:"print",initialState:{customMapParams:{},customParams:{printLegend:!1}},reducers:{setCustomMapParams:(e,t)=>{e.customMapParams=t.payload},setCustomParams:(e,t)=>{e.customParams=t.payload},addCustomMapParam:(e,t)=>{e.customMapParams={...e.customMapParams,...t.payload}},addCustomParam:(e,t)=>{e.customParams={...e.customParams,...t.payload}}}}),{setCustomMapParams:a,setCustomParams:o,addCustomMapParam:i,addCustomParam:l}=r.actions;t.ZP=r.reducer},21800:function(e,t,n){"use strict";n.d(t,{wl:function(){return a}});const r=(0,n(97168).oM)({name:"selectedFeatures",initialState:{},reducers:{setSelectedFeatures(e,t){return t.payload}}}),{setSelectedFeatures:a}=r.actions;t.ZP=r.reducer},76712:function(e,t,n){"use strict";n.d(t,{nn:function(){return o},wG:function(){return a}});const r=(0,n(97168).oM)({name:"toolMenu",initialState:{activeKeys:[],availableTools:["default"]},reducers:{setActiveKeys(e,t){e.activeKeys=[...t.payload]},setAvailableTools(e,t){e.availableTools=[...t.payload]}}}),{setActiveKeys:a,setAvailableTools:o}=r.actions;t.ZP=r.reducer},63221:function(e,t,n){"use strict";n.d(t,{$Z:function(){return a},Cp:function(){return o}});const r=(0,n(97168).oM)({name:"uploadDataModal",initialState:{visible:!1},reducers:{show(e){e.visible=!0},hide(e){e.visible=!1},toggle(e){e.visible=!e.visible}}}),{show:a,hide:o,toggle:i}=r.actions;t.ZP=r.reducer},65705:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},40171:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},88885:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},99327:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},5687:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},97555:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},38775:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},16409:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},78415:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},62923:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},85677:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},34286:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},86201:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},21809:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},69616:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},85516:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},10767:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},42686:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},21015:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},7871:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},86092:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},16813:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},79770:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},85415:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},35818:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},65352:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},72285:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},65947:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i},90978:function(e,t,n){"use strict";var r=n(87537),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),t.Z=i}}]);
//# sourceMappingURL=common.aebf644fb162a14e5f9f.js.map