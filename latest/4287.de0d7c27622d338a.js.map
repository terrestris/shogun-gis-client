{"version":3,"file":"4287.de0d7c27622d338a.js","sources":["webpack://@terrestris/shogun-gis-client/./node_modules/ol/asserts.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/events.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/math.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/size.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/style/Icon.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/style/Image.js","webpack://@terrestris/shogun-gis-client/./node_modules/ol/util.js"],"sourcesContent":["/**\n * @module ol/asserts\n */\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {string} errorMessage Error message.\n */\nexport function assert(assertion, errorMessage) {\n  if (!assertion) {\n    throw new Error(errorMessage);\n  }\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (once) {\n    const originalListener = listener;\n    /**\n     * @param {Event|import('./events/Event.js').default} event The event\n     * @return {void|boolean} When the function returns `false`, event propagation will stop.\n     * @this {typeof target}\n     */\n    listener = function (event) {\n      target.removeEventListener(type, listener);\n      return originalListener.call(thisArg ?? this, event);\n    };\n  } else if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n","/**\n * @module ol/math\n */\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>|null} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return (angleInRadians * 180) / Math.PI;\n}\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return (angleInDegrees * Math.PI) / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n  const factor = Math.pow(10, decimals);\n  return Math.round(n * factor) / factor;\n}\n\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n  return Math.round(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n  return Math.floor(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n  return Math.ceil(toFixed(n, decimals));\n}\n\n/**\n * Wraps a number between some minimum and maximum values.\n * @param {number} n The number to wrap.\n * @param {number} min The minimum of the range (inclusive).\n * @param {number} max The maximum of the range (exclusive).\n * @return {number} The wrapped number.\n */\nexport function wrap(n, min, max) {\n  if (n >= min && n < max) {\n    return n;\n  }\n  const range = max - min;\n  return ((((n - min) % range) + range) % range) + min;\n}\n","/**\n * @module ol/size\n */\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, dest) {\n  if (dest === undefined) {\n    dest = [0, 0];\n  }\n  dest[0] = size[0] + 2 * num;\n  dest[1] = size[1] + 2 * num;\n  return dest;\n}\n\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, dest) {\n  if (dest === undefined) {\n    dest = [0, 0];\n  }\n  dest[0] = (size[0] * ratio + 0.5) | 0;\n  dest[1] = (size[1] * ratio + 0.5) | 0;\n  return dest;\n}\n\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, dest) {\n  if (Array.isArray(size)) {\n    return size;\n  }\n  if (dest === undefined) {\n    dest = [size, size];\n  } else {\n    dest[0] = size;\n    dest[1] = size;\n  }\n  return dest;\n}\n","/**\n * @module ol/style/Icon\n */\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport EventType from '../events/EventType.js';\nimport {getUid} from '../util.js';\nimport {get as getIconImage} from './IconImage.js';\nimport ImageStyle from './Image.js';\n\n/**\n * @typedef {'fraction' | 'pixels'} IconAnchorUnits\n * Anchor unit can be either a fraction of the icon size or in pixels.\n */\n\n/**\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} IconOrigin\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {IconOrigin} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {IconAnchorUnits} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {IconAnchorUnits} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement|ImageBitmap} [img] Image object for the icon.\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the icon in pixels.\n * Positive values will shift the icon right and up.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [width] The width of the icon in pixels. This can't be used together with `scale`.\n * @property {number} [height] The height of the icon in pixels. This can't be used together with `scale`.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {Array<number>} [offset=[0, 0]] Offset which, together with `size` and `offsetOrigin`, defines the\n * sub-rectangle to use from the original (sprite) image.\n * @property {IconOrigin} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"../size.js\").Size} [size] Icon size in pixels. Used together with `offset` to define the\n * sub-rectangle to use from the original (sprite) image.\n * @property {string} [src] Image source URI.\n * @property {import(\"./Style.js\").DeclutterMode} [declutterMode] Declutter mode.\n */\n\n/**\n * @param {number} width The width.\n * @param {number} height The height.\n * @param {number|undefined} wantedWidth The wanted width.\n * @param {number|undefined} wantedHeight The wanted height.\n * @return {number|Array<number>} The scale.\n */\nfunction calculateScale(width, height, wantedWidth, wantedHeight) {\n  if (wantedWidth !== undefined && wantedHeight !== undefined) {\n    return [wantedWidth / width, wantedHeight / height];\n  }\n  if (wantedWidth !== undefined) {\n    return wantedWidth / width;\n  }\n  if (wantedHeight !== undefined) {\n    return wantedHeight / height;\n  }\n  return 1;\n}\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView =\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView,\n      declutterMode: options.declutterMode,\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {IconOrigin}\n     */\n    this.anchorOrigin_ =\n      options.anchorOrigin !== undefined ? options.anchorOrigin : 'top-left';\n\n    /**\n     * @private\n     * @type {IconAnchorUnits}\n     */\n    this.anchorXUnits_ =\n      options.anchorXUnits !== undefined ? options.anchorXUnits : 'fraction';\n\n    /**\n     * @private\n     * @type {IconAnchorUnits}\n     */\n    this.anchorYUnits_ =\n      options.anchorYUnits !== undefined ? options.anchorYUnits : 'fraction';\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    const image = options.img !== undefined ? options.img : null;\n\n    let cacheKey = options.src;\n\n    assert(\n      !(cacheKey !== undefined && image),\n      '`image` and `src` cannot be provided at the same time',\n    );\n\n    if ((cacheKey === undefined || cacheKey.length === 0) && image) {\n      cacheKey = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(\n      cacheKey !== undefined && cacheKey.length > 0,\n      'A defined and non-empty `src` or `image` must be provided',\n    );\n\n    assert(\n      !(\n        (options.width !== undefined || options.height !== undefined) &&\n        options.scale !== undefined\n      ),\n      '`width` or `height` cannot be provided together with `scale`',\n    );\n\n    let imageState;\n    if (options.src !== undefined) {\n      imageState = ImageState.IDLE;\n    } else if (image !== undefined) {\n      if ('complete' in image) {\n        if (image.complete) {\n          imageState = image.src ? ImageState.LOADED : ImageState.IDLE;\n        } else {\n          imageState = ImageState.LOADING;\n        }\n      } else {\n        imageState = ImageState.LOADED;\n      }\n    }\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image,\n      /** @type {string} */ (cacheKey),\n      this.crossOrigin_,\n      imageState,\n      this.color_,\n    );\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\n     * @private\n     * @type {IconOrigin}\n     */\n    this.offsetOrigin_ =\n      options.offsetOrigin !== undefined ? options.offsetOrigin : 'top-left';\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n    /**\n     * @private\n     */\n    this.initialOptions_;\n\n    /**\n     * Calculate the scale if width or height were given.\n     */\n    if (options.width !== undefined || options.height !== undefined) {\n      let width, height;\n      if (options.size) {\n        [width, height] = options.size;\n      } else {\n        const image = this.getImage(1);\n        if (image.width && image.height) {\n          width = image.width;\n          height = image.height;\n        } else if (image instanceof HTMLImageElement) {\n          this.initialOptions_ = options;\n          const onload = () => {\n            this.unlistenImageChange(onload);\n            if (!this.initialOptions_) {\n              return;\n            }\n            const imageSize = this.iconImage_.getSize();\n            this.setScale(\n              calculateScale(\n                imageSize[0],\n                imageSize[1],\n                options.width,\n                options.height,\n              ),\n            );\n          };\n          this.listenImageChange(onload);\n          return;\n        }\n      }\n      if (width !== undefined) {\n        this.setScale(\n          calculateScale(width, height, options.width, options.height),\n        );\n      }\n    }\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   * @override\n   */\n  clone() {\n    let scale, width, height;\n    if (this.initialOptions_) {\n      width = this.initialOptions_.width;\n      height = this.initialOptions_.height;\n    } else {\n      scale = this.getScale();\n      scale = Array.isArray(scale) ? scale.slice() : scale;\n    }\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      color:\n        this.color_ && this.color_.slice\n          ? this.color_.slice()\n          : this.color_ || undefined,\n      crossOrigin: this.crossOrigin_,\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      opacity: this.getOpacity(),\n      rotateWithView: this.getRotateWithView(),\n      rotation: this.getRotation(),\n      scale,\n      width,\n      height,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      src: this.getSrc(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   * @override\n   */\n  getAnchor() {\n    let anchor = this.normalizedAnchor_;\n    if (!anchor) {\n      anchor = this.anchor_;\n      const size = this.getSize();\n      if (\n        this.anchorXUnits_ == 'fraction' ||\n        this.anchorYUnits_ == 'fraction'\n      ) {\n        if (!size) {\n          return null;\n        }\n        anchor = this.anchor_.slice();\n        if (this.anchorXUnits_ == 'fraction') {\n          anchor[0] *= size[0];\n        }\n        if (this.anchorYUnits_ == 'fraction') {\n          anchor[1] *= size[1];\n        }\n      }\n\n      if (this.anchorOrigin_ != 'top-left') {\n        if (!size) {\n          return null;\n        }\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n        if (\n          this.anchorOrigin_ == 'top-right' ||\n          this.anchorOrigin_ == 'bottom-right'\n        ) {\n          anchor[0] = -anchor[0] + size[0];\n        }\n        if (\n          this.anchorOrigin_ == 'bottom-left' ||\n          this.anchorOrigin_ == 'bottom-right'\n        ) {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n      this.normalizedAnchor_ = anchor;\n    }\n    const displacement = this.getDisplacement();\n    const scale = this.getScaleArray();\n    // anchor is scaled by renderer but displacement should not be scaled\n    // so divide by scale here\n    return [\n      anchor[0] - displacement[0] / scale[0],\n      anchor[1] + displacement[1] / scale[1],\n    ];\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement|ImageBitmap} Image or Canvas element. If the Icon\n   * style was configured with `src` or with a not let loaded `img`, an `ImageBitmap` will be returned.\n   * @api\n   * @override\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * Get the pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} The pixel ratio of the image.\n   * @api\n   * @override\n   */\n  getPixelRatio(pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   * @override\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   * @override\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement|ImageBitmap} Image element.\n   * @override\n   */\n  getHitDetectionImage() {\n    return this.iconImage_.getHitDetectionImage();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   * @override\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != 'top-left') {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (\n        this.offsetOrigin_ == 'top-right' ||\n        this.offsetOrigin_ == 'bottom-right'\n      ) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (\n        this.offsetOrigin_ == 'bottom-left' ||\n        this.offsetOrigin_ == 'bottom-right'\n      ) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   * @api\n   * @override\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * Get the width of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\n   * @return {number} Icon width (in pixels).\n   * @api\n   */\n  getWidth() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[0] * scale[0];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[0] * scale[0];\n    }\n    return undefined;\n  }\n\n  /**\n   * Get the height of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\n   * @return {number} Icon height (in pixels).\n   * @api\n   */\n  getHeight() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[1] * scale[1];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[1] * scale[1];\n    }\n    return undefined;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   * @override\n   */\n  setScale(scale) {\n    delete this.initialOptions_;\n    super.setScale(scale);\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   * @override\n   */\n  listenImageChange(listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @api\n   * @override\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   * @override\n   */\n  unlistenImageChange(listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\n   * @override\n   */\n  ready() {\n    return this.iconImage_.ready();\n  }\n}\n\nexport default Icon;\n","/**\n * @module ol/style/Image\n */\nimport {toSize} from '../size.js';\nimport {abstract} from '../util.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n * @property {import('../style/Style.js').DeclutterMode} declutterMode Declutter mode: `declutter`, `obstacle`, `none`.\n */\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.scale_ = options.scale;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.scaleArray_ = toSize(options.scale);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.displacement_ = options.displacement;\n\n    /**\n     * @private\n     * @type {import('../style/Style.js').DeclutterMode}\n     */\n    this.declutterMode_ = options.declutterMode;\n  }\n\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode(),\n    });\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number|import(\"../size.js\").Size} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * Get the symbolizer scale array.\n   * @return {import(\"../size.js\").Size} Scale array.\n   */\n  getScaleArray() {\n    return this.scaleArray_;\n  }\n\n  /**\n   * Get the displacement of the shape\n   * @return {Array<number>} Shape's center displacement\n   * @api\n   */\n  getDisplacement() {\n    return this.displacement_;\n  }\n\n  /**\n   * Get the declutter mode of the shape\n   * @return {import(\"./Style.js\").DeclutterMode} Shape's declutter mode\n   * @api\n   */\n  getDeclutterMode() {\n    return this.declutterMode_;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {\n    return abstract();\n  }\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {import('../DataTile.js').ImageLike} Image element.\n   */\n  getImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import('../DataTile.js').ImageLike} Image element.\n   */\n  getHitDetectionImage() {\n    return abstract();\n  }\n\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n  getPixelRatio(pixelRatio) {\n    return 1;\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return abstract();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {\n    return abstract();\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n  getSize() {\n    return abstract();\n  }\n\n  /**\n   * Set the displacement.\n   *\n   * @param {Array<number>} displacement Displacement.\n   * @api\n   */\n  setDisplacement(displacement) {\n    this.displacement_ = displacement;\n  }\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n    this.scaleArray_ = toSize(scale);\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {\n    abstract();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {\n    abstract();\n  }\n\n  /**\n   * @return {Promise<void>} `false` or Promise that resolves when the style is ready to use.\n   */\n  ready() {\n    return Promise.resolve();\n  }\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/util\n */\n\n/**\n * @return {never} Any return.\n */\nexport function abstract() {\n  throw new Error('Unimplemented abstract method.');\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = '10.4.0';\n"],"names":["assert","assertion","errorMessage","Error","listen","target","type","listener","thisArg","once","originalListener","event","eventsKey","listenOnce","unlistenByKey","key","clamp","value","min","max","Math","squaredSegmentDistance","x","y","x1","y1","x2","y2","dx","dy","t","squaredDistance","solveLinearSystem","mat","n","i","maxRow","maxEl","r","absValue","tmp","j","coef","k","Array","l","m","toDegrees","angleInRadians","toRadians","angleInDegrees","modulo","a","b","lerp","toFixed","decimals","factor","round","floor","ceil","wrap","range","hasArea","size","scale","ratio","dest","undefined","toSize","calculateScale","width","height","wantedWidth","wantedHeight","Icon","options","imageState","opacity","rotation","image","cacheKey","HTMLImageElement","onload","imageSize","anchor","displacement","pixelRatio","offset","iconImageSize","ImageStyle","rotateWithView","Promise","abstract","uidCounter_","getUid","obj","String","VERSION"],"mappings":"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"}