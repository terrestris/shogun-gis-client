"use strict";(self.webpackChunk_terrestris_shogun_gis_client=self.webpackChunk_terrestris_shogun_gis_client||[]).push([["9108"],{85215:function(e,t,i){i.r(t),i.d(t,{ObjectEvent:function(){return u}});var r=i(8959),s=i(52073),n=i(43354),l=i(53495),o=i(94092);class u extends n.default{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class a extends s.default{constructor(e){super(),this.on,this.once,this.un,(0,o.getUid)(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new u(i,e,t)),i=r.A.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new u(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){let r=this.values_||(this.values_={});if(i)r[e]=t;else{let i=r[e];r[e]=t,i!==t&&this.notify(e,i)}}setProperties(e,t){for(let i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){let i=this.values_[e];delete this.values_[e],(0,l.p)(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}t.default=a},8959:function(e,t){t.A={PROPERTYCHANGE:"propertychange"}},52073:function(e,t,i){i.r(t),i.d(t,{unByKey:function(){return o}});var r=i(55506),s=i(78081),n=i(17353);class l extends s.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.default.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){let i=e.length,r=Array(i);for(let s=0;s<i;++s)r[s]=(0,n.KT)(this,e[s],t);return r}return(0,n.KT)(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){let r=e.length;i=Array(r);for(let s=0;s<r;++s)i[s]=(0,n.Jz)(this,e[s],t)}else i=(0,n.Jz)(this,e,t);return t.ol_key=i,i}unInternal(e,t){let i=t.ol_key;if(i)o(i);else if(Array.isArray(e))for(let i=0,r=e.length;i<r;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}function o(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)(0,n.JH)(e[t]);else(0,n.JH)(e)}l.prototype.on,l.prototype.once,l.prototype.un,t.default=l},17229:function(e,t,i){i.d(t,{v:function(){return r}});function r(e,t){if(!e)throw Error(t)}},17353:function(e,t,i){i.d(t,{JH:function(){return l},Jz:function(){return n},KT:function(){return s}});var r=i(53495);function s(e,t,i,r,s){if(s){let s=i;i=function(n){return e.removeEventListener(t,i),s.call(r??this,n)}}else r&&r!==e&&(i=i.bind(r));let n={target:e,type:t,listener:i};return e.addEventListener(t,i),n}function n(e,t,i,r){return s(e,t,i,r,!0)}function l(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),(0,r.I)(e))}},13931:function(e,t,i){function r(e,t,i,r,s,n,l){let o=new XMLHttpRequest;o.open("GET","function"==typeof e?e(i,r,s):e,!0),"arraybuffer"==t.getType()&&(o.responseType="arraybuffer"),o.withCredentials=!1,o.onload=function(e){if(!o.status||o.status>=200&&o.status<300){let e=t.getType();try{let r;"text"==e||"json"==e?r=o.responseText:"xml"==e?r=o.responseXML||o.responseText:"arraybuffer"==e&&(r=o.response),r?n(t.readFeatures(r,{extent:i,featureProjection:s}),t.readProjection(r)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function s(e,t){return function(i,s,n,l,o){r(e,t,i,s,n,(e,t)=>{this.addFeatures(e),void 0!==l&&l(e)},()=>{this.changed(),void 0!==o&&o()})}}i.d(t,{m8:function(){return r},nF:function(){return s}})},29593:function(e,t,i){i.r(t),i.d(t,{default:function(){return S},defaultLoadFunction:function(){return m}});var r=i(74255),s=i(31644),n=i(84674),l=i(94092);let o=[];class u extends s.A{constructor(e,t,i,r,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=(0,n.Y)(1,1,o)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){let t=(0,l.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&((0,n.Yg)(this.context_),o.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}var a=i(6419),h=i(17229),c=i(55506),d=i(85752),f=i(13931),g=i(53495),p=i(21128),v=i(5245),T=i(76855),_=i(68462),y=i(53800),E=i(18473);class x extends E.A{constructor(e){let t=e.projection||"EPSG:3857";super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:e.tileGrid||(0,y.createXYZ)({extent:e.extent||(0,y.extentFromProjection)(t),maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512}),tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:m,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:a.A,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===r.default.IDLE){i.setState(r.default.LOADING);let s=i.wrappedTileCoord,n=this.getTileGridForProjection(t),l=n.getTileCoordExtent(s),o=s[0],u=n.getResolution(o);(0,d.buffer)(l,-u,l);let a=this.tileGrid,h=a.getExtent();h&&(0,d.getIntersection)(l,h,l);let f=a.getZForResolution(u,this.zDirection);a.forEachTileCoord(l,f,s=>{let n=this.tileUrlFunction(s,e,t);this.sourceTiles_[n]||(this.sourceTiles_[n]=new this.tileClass(s,n?r.default.IDLE:r.default.EMPTY,n,this.format_,this.tileLoadFunction));let l=this.sourceTiles_[n];i.sourceTiles.push(l),this.tileKeysBySourceTileUrl_[n]||(this.tileKeysBySourceTileUrl_[n]=[]),this.tileKeysBySourceTileUrl_[n].push(i.getKey());let o=l.getState();if(o<r.default.LOADED){let e=t=>{this.handleTileChange(t);let s=l.getState();if(s===r.default.LOADED||s===r.default.ERROR){let t=l.getKey();t in i.errorTileKeys?l.getState()===r.default.LOADED&&delete i.errorTileKeys[t]:i.loadingSourceTiles--,s===r.default.ERROR?i.errorTileKeys[t]=!0:l.removeEventListener(c.default.CHANGE,e),0===i.loadingSourceTiles&&i.setState((0,g.p)(i.errorTileKeys)?r.default.LOADED:r.default.ERROR)}};l.addEventListener(c.default.CHANGE,e),i.loadingSourceTiles++}o===r.default.IDLE&&(l.extent=a.getTileCoordExtent(s),l.projection=t,l.resolution=a.getResolution(s[0]),l.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(e=>e.getState()===r.default.ERROR)?r.default.ERROR:r.default.LOADED)}return i.sourceTiles}removeSourceTiles(e){let t=e.getKey(),i=e.sourceTiles;for(let e=0,r=i.length;e<r;++e){let r=i[e].getTileUrl();if(!this.tileKeysBySourceTileUrl_[r])return;let s=this.tileKeysBySourceTileUrl_[r].indexOf(t);-1!==s&&(this.tileKeysBySourceTileUrl_[r].splice(s,1),0===this.tileKeysBySourceTileUrl_[r].length&&(delete this.tileKeysBySourceTileUrl_[r],delete this.sourceTiles_[r]))}}getTile(e,t,i,s,n){let l=[e,t,i],o=this.getTileCoordForTileUrlFunction(l,n),a=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(n);if(o&&a){let t=h.getTileCoordExtent(o);(0,d.buffer)(t,-h.getResolution(e),t),(0,d.intersects)(a,t)||(o=null)}let c=!0;if(null!==o){let t=this.tileGrid,i=h.getResolution(e),r=t.getZForResolution(i,1),l=h.getTileCoordExtent(o);(0,d.buffer)(l,-i,l),t.forEachTileCoord(l,r,e=>{c=c&&!this.tileUrlFunction(e,s,n)})}let f=new u(l,c?r.default.EMPTY:r.default.IDLE,o,this.getSourceTiles.bind(this,s,n),this.removeSourceTiles.bind(this));return f.key=this.getKey(),f}getTileGridForProjection(e){let t=e.getCode(),i=this.tileGrids_[t];if(!i){let r=this.getProjection();(0,h.v)(null===r||(0,p.equivalent)(r,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");let s=this.tileGrid,n=s.getResolutions().slice(),l=n.map(function(e,t){return s.getOrigin(t)}),o=n.map(function(e,t){return s.getTileSize(t)}),u=_.L+1;for(let e=n.length;e<u;++e)n.push(n[e-1]/2),l.push(l[e-1]),o.push(o[e-1]);i=new T.default({extent:s.getExtent(),origins:l,resolutions:n,tileSizes:o}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){let r=this.getTileGridForProjection(i),s=(0,v.xq)(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}var S=x;function m(e,t){e.setLoader(function(i,r,s){(0,f.m8)(t,e.getFormat(),i,r,s,e.onLoad.bind(e),e.onError.bind(e))})}}}]);
//# sourceMappingURL=9108.5868594a20b863a4.js.map